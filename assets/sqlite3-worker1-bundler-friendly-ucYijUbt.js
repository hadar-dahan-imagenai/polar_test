var Hn=Object.defineProperty;var d=(qe,ge)=>Hn(qe,"name",{value:ge,configurable:!0});(function(){try{var qe=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ge=new qe.Error().stack;ge&&(qe._sentryDebugIds=qe._sentryDebugIds||{},qe._sentryDebugIds[ge]="c9c44c74-4809-4199-be46-45a93cc20371",qe._sentryDebugIdIdentifier="sentry-dbid-c9c44c74-4809-4199-be46-45a93cc20371")}catch{}})();var st=(()=>{var qe=import.meta.url;return function(ge){var we=ge||{},t=typeof we<"u"?we:{},Oe,Ae;t.ready=new Promise(function(n,e){Oe=n,Ae=e});const We=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,We.debugModule("globalThis.location =",globalThis.location);const it="emscripten-bug-17951";t[it]=d(function n(e,s){e.env.foo=function(){};const r=t.locateFile(n.uri,typeof ve>"u"?"":ve);We.debugModule("instantiateWasm() uri =",r);const i=d(()=>fetch(r,{credentials:"same-origin"}),"wfetch");return(WebAssembly.instantiateStreaming?async()=>WebAssembly.instantiateStreaming(i(),e).then(m=>s(m.instance,m.module)):async()=>i().then(m=>m.arrayBuffer()).then(m=>WebAssembly.instantiate(m,e)).then(m=>s(m.instance,m.module)))(),{}},"callee"),t[it].uri="sqlite3.wasm";var ot=Object.assign({},t),lt="./this.program",at=typeof window=="object",Me=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var ve="";function Pt(n){return t.locateFile?t.locateFile(n,ve):ve+n}d(Pt,"locateFile");var Je,ct,Xe;(at||Me)&&(Me?ve=self.location.href:typeof document<"u"&&document.currentScript&&(ve=document.currentScript.src),qe&&(ve=qe),ve.indexOf("blob:")!==0?ve=ve.substr(0,ve.replace(/[?#].*/,"").lastIndexOf("/")+1):ve="",Je=d(n=>{var e=new XMLHttpRequest;return e.open("GET",n,!1),e.send(null),e.responseText},"read_"),Me&&(Xe=d(n=>{var e=new XMLHttpRequest;return e.open("GET",n,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},"readBinary")),ct=d((n,e,s)=>{var r=new XMLHttpRequest;r.open("GET",n,!0),r.responseType="arraybuffer",r.onload=()=>{if(r.status==200||r.status==0&&r.response){e(r.response);return}s()},r.onerror=s,r.send(null)},"readAsync"));var Qe=t.print||console.log.bind(console),Te=t.printErr||console.warn.bind(console);Object.assign(t,ot),ot=null,t.arguments&&t.arguments,t.thisProgram&&(lt=t.thisProgram),t.quit&&t.quit;var je;t.wasmBinary&&(je=t.wasmBinary),t.noExitRuntime,typeof WebAssembly!="object"&&Re("no native wasm support detected");var Fe,ut=!1;function Lt(n,e){n||Re(e)}d(Lt,"assert");var _t=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function De(n,e,s){for(var r=e+s,i=e;n[i]&&!(i>=r);)++i;if(i-e>16&&n.buffer&&_t)return _t.decode(n.subarray(e,i));for(var l="";e<i;){var m=n[e++];if(!(m&128)){l+=String.fromCharCode(m);continue}var g=n[e++]&63;if((m&224)==192){l+=String.fromCharCode((m&31)<<6|g);continue}var O=n[e++]&63;if((m&240)==224?m=(m&15)<<12|g<<6|O:m=(m&7)<<18|g<<12|O<<6|n[e++]&63,m<65536)l+=String.fromCharCode(m);else{var L=m-65536;l+=String.fromCharCode(55296|L>>10,56320|L&1023)}}return l}d(De,"UTF8ArrayToString");function Dt(n,e){return n?De(Ce,n,e):""}d(Dt,"UTF8ToString");function He(n,e,s,r){if(!(r>0))return 0;for(var i=s,l=s+r-1,m=0;m<n.length;++m){var g=n.charCodeAt(m);if(g>=55296&&g<=57343){var O=n.charCodeAt(++m);g=65536+((g&1023)<<10)|O&1023}if(g<=127){if(s>=l)break;e[s++]=g}else if(g<=2047){if(s+1>=l)break;e[s++]=192|g>>6,e[s++]=128|g&63}else if(g<=65535){if(s+2>=l)break;e[s++]=224|g>>12,e[s++]=128|g>>6&63,e[s++]=128|g&63}else{if(s+3>=l)break;e[s++]=240|g>>18,e[s++]=128|g>>12&63,e[s++]=128|g>>6&63,e[s++]=128|g&63}}return e[s]=0,s-i}d(He,"stringToUTF8Array");function ft(n,e,s){return He(n,Ce,e,s)}d(ft,"stringToUTF8");function Be(n){for(var e=0,s=0;s<n.length;++s){var r=n.charCodeAt(s);r<=127?e++:r<=2047?e+=2:r>=55296&&r<=57343?(e+=4,++s):e+=3}return e}d(Be,"lengthBytesUTF8");var Ee,Ce,pt,ae,me;function dt(){var n=Fe.buffer;t.HEAP8=Ee=new Int8Array(n),t.HEAP16=pt=new Int16Array(n),t.HEAP32=ae=new Int32Array(n),t.HEAPU8=Ce=new Uint8Array(n),t.HEAPU16=new Uint16Array(n),t.HEAPU32=me=new Uint32Array(n),t.HEAPF32=new Float32Array(n),t.HEAPF64=new Float64Array(n),t.HEAP64=new BigInt64Array(n),t.HEAPU64=new BigUint64Array(n)}d(dt,"updateMemoryViews");var mt=t.INITIAL_MEMORY||16777216;t.wasmMemory?Fe=t.wasmMemory:Fe=new WebAssembly.Memory({initial:mt/65536,maximum:2147483648/65536}),dt(),mt=Fe.buffer.byteLength;var ht=[],gt=[],yt=[];function Ct(){if(t.preRun)for(typeof t.preRun=="function"&&(t.preRun=[t.preRun]);t.preRun.length;)Mt(t.preRun.shift());Ze(ht)}d(Ct,"preRun");function Rt(){!t.noFSInit&&!o.init.initialized&&o.init(),o.ignorePermissions=!1,Ze(gt)}d(Rt,"initRuntime");function Nt(){if(t.postRun)for(typeof t.postRun=="function"&&(t.postRun=[t.postRun]);t.postRun.length;)Bt(t.postRun.shift());Ze(yt)}d(Nt,"postRun");function Mt(n){ht.unshift(n)}d(Mt,"addOnPreRun");function jt(n){gt.unshift(n)}d(jt,"addOnInit");function Bt(n){yt.unshift(n)}d(Bt,"addOnPostRun");var Pe=0,ze=null;function $n(n){return n}d($n,"getUniqueRunDependency");function Ye(n){Pe++,t.monitorRunDependencies&&t.monitorRunDependencies(Pe)}d(Ye,"addRunDependency");function Ve(n){if(Pe--,t.monitorRunDependencies&&t.monitorRunDependencies(Pe),Pe==0&&ze){var e=ze;ze=null,e()}}d(Ve,"removeRunDependency");function Re(n){t.onAbort&&t.onAbort(n),n="Aborted("+n+")",Te(n),ut=!0,n+=". Build with -sASSERTIONS for more info.";var e=new WebAssembly.RuntimeError(n);throw Ae(e),e}d(Re,"abort");var zt="data:application/octet-stream;base64,";function qt(n){return n.startsWith(zt)}d(qt,"isDataURI");var Se;t.locateFile?(Se="sqlite3.wasm",qt(Se)||(Se=Pt(Se))):Se=new URL("/assets/sqlite3-BVdqaZCJ.wasm",import.meta.url).href;function bt(n){try{if(n==Se&&je)return new Uint8Array(je);if(Xe)return Xe(n);throw"both async and sync fetching of the wasm failed"}catch(e){Re(e)}}d(bt,"getBinary");function Ut(){return!je&&(at||Me)&&typeof fetch=="function"?fetch(Se,{credentials:"same-origin"}).then(function(n){if(!n.ok)throw"failed to load wasm binary file at '"+Se+"'";return n.arrayBuffer()}).catch(function(){return bt(Se)}):Promise.resolve().then(function(){return bt(Se)})}d(Ut,"getBinaryPromise");function Wt(){var n={env:At,wasi_snapshot_preview1:At};function e(m,g){var O=m.exports;t.asm=O,t.asm.__indirect_function_table,jt(t.asm.__wasm_call_ctors),Ve()}d(e,"receiveInstance"),Ye();function s(m){e(m.instance)}d(s,"receiveInstantiationResult");function r(m){return Ut().then(function(g){return WebAssembly.instantiate(g,n)}).then(function(g){return g}).then(m,function(g){Te("failed to asynchronously prepare wasm: "+g),Re(g)})}d(r,"instantiateArrayBuffer");function i(){return!je&&typeof WebAssembly.instantiateStreaming=="function"&&!qt(Se)&&typeof fetch=="function"?fetch(Se,{credentials:"same-origin"}).then(function(m){var g=WebAssembly.instantiateStreaming(m,n);return g.then(s,function(O){return Te("wasm streaming compile failed: "+O),Te("falling back to ArrayBuffer instantiation"),r(s)})}):r(s)}if(d(i,"instantiateAsync"),t.instantiateWasm)try{var l=t.instantiateWasm(n,e);return l}catch(m){Te("Module.instantiateWasm callback failed with error: "+m),Ae(m)}return i().catch(Ae),{}}d(Wt,"createWasm");var ue,ye;function Ze(n){for(;n.length>0;)n.shift()(t)}d(Ze,"callRuntimeCallbacks");var _e={isAbs:n=>n.charAt(0)==="/",splitPath:n=>{var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return e.exec(n).slice(1)},normalizeArray:(n,e)=>{for(var s=0,r=n.length-1;r>=0;r--){var i=n[r];i==="."?n.splice(r,1):i===".."?(n.splice(r,1),s++):s&&(n.splice(r,1),s--)}if(e)for(;s;s--)n.unshift("..");return n},normalize:n=>{var e=_e.isAbs(n),s=n.substr(-1)==="/";return n=_e.normalizeArray(n.split("/").filter(r=>!!r),!e).join("/"),!n&&!e&&(n="."),n&&s&&(n+="/"),(e?"/":"")+n},dirname:n=>{var e=_e.splitPath(n),s=e[0],r=e[1];return!s&&!r?".":(r&&(r=r.substr(0,r.length-1)),s+r)},basename:n=>{if(n==="/")return"/";n=_e.normalize(n),n=n.replace(/\/$/,"");var e=n.lastIndexOf("/");return e===-1?n:n.substr(e+1)},join:function(){var n=Array.prototype.slice.call(arguments);return _e.normalize(n.join("/"))},join2:(n,e)=>_e.normalize(n+"/"+e)};function Qt(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var n=new Uint8Array(1);return()=>(crypto.getRandomValues(n),n[0])}else return()=>Re("randomDevice")}d(Qt,"getRandomDevice");var Ie={resolve:function(){for(var n="",e=!1,s=arguments.length-1;s>=-1&&!e;s--){var r=s>=0?arguments[s]:o.cwd();if(typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";n=r+"/"+n,e=_e.isAbs(r)}return n=_e.normalizeArray(n.split("/").filter(i=>!!i),!e).join("/"),(e?"/":"")+n||"."},relative:(n,e)=>{n=Ie.resolve(n).substr(1),e=Ie.resolve(e).substr(1);function s(L){for(var j=0;j<L.length&&L[j]==="";j++);for(var Q=L.length-1;Q>=0&&L[Q]==="";Q--);return j>Q?[]:L.slice(j,Q-j+1)}d(s,"trim");for(var r=s(n.split("/")),i=s(e.split("/")),l=Math.min(r.length,i.length),m=l,g=0;g<l;g++)if(r[g]!==i[g]){m=g;break}for(var O=[],g=m;g<r.length;g++)O.push("..");return O=O.concat(i.slice(m)),O.join("/")}};function et(n,e,s){var r=s>0?s:Be(n)+1,i=new Array(r),l=He(n,i,0,i.length);return e&&(i.length=l),i}d(et,"intArrayFromString");var Le={ttys:[],init:function(){},shutdown:function(){},register:function(n,e){Le.ttys[n]={input:[],output:[],ops:e},o.registerDevice(n,Le.stream_ops)},stream_ops:{open:function(n){var e=Le.ttys[n.node.rdev];if(!e)throw new o.ErrnoError(43);n.tty=e,n.seekable=!1},close:function(n){n.tty.ops.fsync(n.tty)},fsync:function(n){n.tty.ops.fsync(n.tty)},read:function(n,e,s,r,i){if(!n.tty||!n.tty.ops.get_char)throw new o.ErrnoError(60);for(var l=0,m=0;m<r;m++){var g;try{g=n.tty.ops.get_char(n.tty)}catch{throw new o.ErrnoError(29)}if(g===void 0&&l===0)throw new o.ErrnoError(6);if(g==null)break;l++,e[s+m]=g}return l&&(n.node.timestamp=Date.now()),l},write:function(n,e,s,r,i){if(!n.tty||!n.tty.ops.put_char)throw new o.ErrnoError(60);try{for(var l=0;l<r;l++)n.tty.ops.put_char(n.tty,e[s+l])}catch{throw new o.ErrnoError(29)}return r&&(n.node.timestamp=Date.now()),l}},default_tty_ops:{get_char:function(n){if(!n.input.length){var e=null;if(typeof window<"u"&&typeof window.prompt=="function"?(e=window.prompt("Input: "),e!==null&&(e+=`
`)):typeof readline=="function"&&(e=readline(),e!==null&&(e+=`
`)),!e)return null;n.input=et(e,!0)}return n.input.shift()},put_char:function(n,e){e===null||e===10?(Qe(De(n.output,0)),n.output=[]):e!=0&&n.output.push(e)},fsync:function(n){n.output&&n.output.length>0&&(Qe(De(n.output,0)),n.output=[])}},default_tty1_ops:{put_char:function(n,e){e===null||e===10?(Te(De(n.output,0)),n.output=[]):e!=0&&n.output.push(e)},fsync:function(n){n.output&&n.output.length>0&&(Te(De(n.output,0)),n.output=[])}}};function Ht(n,e){return Ce.fill(0,n,n+e),n}d(Ht,"zeroMemory");function Vt(n,e){return Math.ceil(n/e)*e}d(Vt,"alignMemory");function wt(n){n=Vt(n,65536);var e=Tt(65536,n);return e?Ht(e,n):0}d(wt,"mmapAlloc");var oe={ops_table:null,mount:function(n){return oe.createNode(null,"/",16895,0)},createNode:function(n,e,s,r){if(o.isBlkdev(s)||o.isFIFO(s))throw new o.ErrnoError(63);oe.ops_table||(oe.ops_table={dir:{node:{getattr:oe.node_ops.getattr,setattr:oe.node_ops.setattr,lookup:oe.node_ops.lookup,mknod:oe.node_ops.mknod,rename:oe.node_ops.rename,unlink:oe.node_ops.unlink,rmdir:oe.node_ops.rmdir,readdir:oe.node_ops.readdir,symlink:oe.node_ops.symlink},stream:{llseek:oe.stream_ops.llseek}},file:{node:{getattr:oe.node_ops.getattr,setattr:oe.node_ops.setattr},stream:{llseek:oe.stream_ops.llseek,read:oe.stream_ops.read,write:oe.stream_ops.write,allocate:oe.stream_ops.allocate,mmap:oe.stream_ops.mmap,msync:oe.stream_ops.msync}},link:{node:{getattr:oe.node_ops.getattr,setattr:oe.node_ops.setattr,readlink:oe.node_ops.readlink},stream:{}},chrdev:{node:{getattr:oe.node_ops.getattr,setattr:oe.node_ops.setattr},stream:o.chrdev_stream_ops}});var i=o.createNode(n,e,s,r);return o.isDir(i.mode)?(i.node_ops=oe.ops_table.dir.node,i.stream_ops=oe.ops_table.dir.stream,i.contents={}):o.isFile(i.mode)?(i.node_ops=oe.ops_table.file.node,i.stream_ops=oe.ops_table.file.stream,i.usedBytes=0,i.contents=null):o.isLink(i.mode)?(i.node_ops=oe.ops_table.link.node,i.stream_ops=oe.ops_table.link.stream):o.isChrdev(i.mode)&&(i.node_ops=oe.ops_table.chrdev.node,i.stream_ops=oe.ops_table.chrdev.stream),i.timestamp=Date.now(),n&&(n.contents[e]=i,n.timestamp=i.timestamp),i},getFileDataAsTypedArray:function(n){return n.contents?n.contents.subarray?n.contents.subarray(0,n.usedBytes):new Uint8Array(n.contents):new Uint8Array(0)},expandFileStorage:function(n,e){var s=n.contents?n.contents.length:0;if(!(s>=e)){var r=1024*1024;e=Math.max(e,s*(s<r?2:1.125)>>>0),s!=0&&(e=Math.max(e,256));var i=n.contents;n.contents=new Uint8Array(e),n.usedBytes>0&&n.contents.set(i.subarray(0,n.usedBytes),0)}},resizeFileStorage:function(n,e){if(n.usedBytes!=e)if(e==0)n.contents=null,n.usedBytes=0;else{var s=n.contents;n.contents=new Uint8Array(e),s&&n.contents.set(s.subarray(0,Math.min(e,n.usedBytes))),n.usedBytes=e}},node_ops:{getattr:function(n){var e={};return e.dev=o.isChrdev(n.mode)?n.id:1,e.ino=n.id,e.mode=n.mode,e.nlink=1,e.uid=0,e.gid=0,e.rdev=n.rdev,o.isDir(n.mode)?e.size=4096:o.isFile(n.mode)?e.size=n.usedBytes:o.isLink(n.mode)?e.size=n.link.length:e.size=0,e.atime=new Date(n.timestamp),e.mtime=new Date(n.timestamp),e.ctime=new Date(n.timestamp),e.blksize=4096,e.blocks=Math.ceil(e.size/e.blksize),e},setattr:function(n,e){e.mode!==void 0&&(n.mode=e.mode),e.timestamp!==void 0&&(n.timestamp=e.timestamp),e.size!==void 0&&oe.resizeFileStorage(n,e.size)},lookup:function(n,e){throw o.genericErrors[44]},mknod:function(n,e,s,r){return oe.createNode(n,e,s,r)},rename:function(n,e,s){if(o.isDir(n.mode)){var r;try{r=o.lookupNode(e,s)}catch{}if(r)for(var i in r.contents)throw new o.ErrnoError(55)}delete n.parent.contents[n.name],n.parent.timestamp=Date.now(),n.name=s,e.contents[s]=n,e.timestamp=n.parent.timestamp,n.parent=e},unlink:function(n,e){delete n.contents[e],n.timestamp=Date.now()},rmdir:function(n,e){var s=o.lookupNode(n,e);for(var r in s.contents)throw new o.ErrnoError(55);delete n.contents[e],n.timestamp=Date.now()},readdir:function(n){var e=[".",".."];for(var s in n.contents)n.contents.hasOwnProperty(s)&&e.push(s);return e},symlink:function(n,e,s){var r=oe.createNode(n,e,41471,0);return r.link=s,r},readlink:function(n){if(!o.isLink(n.mode))throw new o.ErrnoError(28);return n.link}},stream_ops:{read:function(n,e,s,r,i){var l=n.node.contents;if(i>=n.node.usedBytes)return 0;var m=Math.min(n.node.usedBytes-i,r);if(m>8&&l.subarray)e.set(l.subarray(i,i+m),s);else for(var g=0;g<m;g++)e[s+g]=l[i+g];return m},write:function(n,e,s,r,i,l){if(e.buffer===Ee.buffer&&(l=!1),!r)return 0;var m=n.node;if(m.timestamp=Date.now(),e.subarray&&(!m.contents||m.contents.subarray)){if(l)return m.contents=e.subarray(s,s+r),m.usedBytes=r,r;if(m.usedBytes===0&&i===0)return m.contents=e.slice(s,s+r),m.usedBytes=r,r;if(i+r<=m.usedBytes)return m.contents.set(e.subarray(s,s+r),i),r}if(oe.expandFileStorage(m,i+r),m.contents.subarray&&e.subarray)m.contents.set(e.subarray(s,s+r),i);else for(var g=0;g<r;g++)m.contents[i+g]=e[s+g];return m.usedBytes=Math.max(m.usedBytes,i+r),r},llseek:function(n,e,s){var r=e;if(s===1?r+=n.position:s===2&&o.isFile(n.node.mode)&&(r+=n.node.usedBytes),r<0)throw new o.ErrnoError(28);return r},allocate:function(n,e,s){oe.expandFileStorage(n.node,e+s),n.node.usedBytes=Math.max(n.node.usedBytes,e+s)},mmap:function(n,e,s,r,i){if(!o.isFile(n.node.mode))throw new o.ErrnoError(43);var l,m,g=n.node.contents;if(!(i&2)&&g.buffer===Ee.buffer)m=!1,l=g.byteOffset;else{if((s>0||s+e<g.length)&&(g.subarray?g=g.subarray(s,s+e):g=Array.prototype.slice.call(g,s,s+e)),m=!0,l=wt(e),!l)throw new o.ErrnoError(48);Ee.set(g,l)}return{ptr:l,allocated:m}},msync:function(n,e,s,r,i){return oe.stream_ops.write(n,e,0,r,s,!1),0}}};function Gt(n,e,s,r){var i=r?"":"al "+n;ct(n,l=>{Lt(l,'Loading data file "'+n+'" failed (no arrayBuffer).'),e(new Uint8Array(l)),i&&Ve()},l=>{if(s)s();else throw'Loading data file "'+n+'" failed.'}),i&&Ye()}d(Gt,"asyncLoad");var o={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(n,e={})=>{if(n=Ie.resolve(n),!n)return{path:"",node:null};var s={follow_mount:!0,recurse_count:0};if(e=Object.assign(s,e),e.recurse_count>8)throw new o.ErrnoError(32);for(var r=n.split("/").filter(Q=>!!Q),i=o.root,l="/",m=0;m<r.length;m++){var g=m===r.length-1;if(g&&e.parent)break;if(i=o.lookupNode(i,r[m]),l=_e.join2(l,r[m]),o.isMountpoint(i)&&(!g||g&&e.follow_mount)&&(i=i.mounted.root),!g||e.follow)for(var O=0;o.isLink(i.mode);){var L=o.readlink(l);l=Ie.resolve(_e.dirname(l),L);var j=o.lookupPath(l,{recurse_count:e.recurse_count+1});if(i=j.node,O++>40)throw new o.ErrnoError(32)}}return{path:l,node:i}},getPath:n=>{for(var e;;){if(o.isRoot(n)){var s=n.mount.mountpoint;return e?s[s.length-1]!=="/"?s+"/"+e:s+e:s}e=e?n.name+"/"+e:n.name,n=n.parent}},hashName:(n,e)=>{for(var s=0,r=0;r<e.length;r++)s=(s<<5)-s+e.charCodeAt(r)|0;return(n+s>>>0)%o.nameTable.length},hashAddNode:n=>{var e=o.hashName(n.parent.id,n.name);n.name_next=o.nameTable[e],o.nameTable[e]=n},hashRemoveNode:n=>{var e=o.hashName(n.parent.id,n.name);if(o.nameTable[e]===n)o.nameTable[e]=n.name_next;else for(var s=o.nameTable[e];s;){if(s.name_next===n){s.name_next=n.name_next;break}s=s.name_next}},lookupNode:(n,e)=>{var s=o.mayLookup(n);if(s)throw new o.ErrnoError(s,n);for(var r=o.hashName(n.id,e),i=o.nameTable[r];i;i=i.name_next){var l=i.name;if(i.parent.id===n.id&&l===e)return i}return o.lookup(n,e)},createNode:(n,e,s,r)=>{var i=new o.FSNode(n,e,s,r);return o.hashAddNode(i),i},destroyNode:n=>{o.hashRemoveNode(n)},isRoot:n=>n===n.parent,isMountpoint:n=>!!n.mounted,isFile:n=>(n&61440)===32768,isDir:n=>(n&61440)===16384,isLink:n=>(n&61440)===40960,isChrdev:n=>(n&61440)===8192,isBlkdev:n=>(n&61440)===24576,isFIFO:n=>(n&61440)===4096,isSocket:n=>(n&49152)===49152,flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:n=>{var e=o.flagModes[n];if(typeof e>"u")throw new Error("Unknown file open mode: "+n);return e},flagsToPermissionString:n=>{var e=["r","w","rw"][n&3];return n&512&&(e+="w"),e},nodePermissions:(n,e)=>o.ignorePermissions?0:e.includes("r")&&!(n.mode&292)||e.includes("w")&&!(n.mode&146)||e.includes("x")&&!(n.mode&73)?2:0,mayLookup:n=>{var e=o.nodePermissions(n,"x");return e||(n.node_ops.lookup?0:2)},mayCreate:(n,e)=>{try{var s=o.lookupNode(n,e);return 20}catch{}return o.nodePermissions(n,"wx")},mayDelete:(n,e,s)=>{var r;try{r=o.lookupNode(n,e)}catch(l){return l.errno}var i=o.nodePermissions(n,"wx");if(i)return i;if(s){if(!o.isDir(r.mode))return 54;if(o.isRoot(r)||o.getPath(r)===o.cwd())return 10}else if(o.isDir(r.mode))return 31;return 0},mayOpen:(n,e)=>n?o.isLink(n.mode)?32:o.isDir(n.mode)&&(o.flagsToPermissionString(e)!=="r"||e&512)?31:o.nodePermissions(n,o.flagsToPermissionString(e)):44,MAX_OPEN_FDS:4096,nextfd:(n=0,e=o.MAX_OPEN_FDS)=>{for(var s=n;s<=e;s++)if(!o.streams[s])return s;throw new o.ErrnoError(33)},getStream:n=>o.streams[n],createStream:(n,e,s)=>{o.FSStream||(o.FSStream=function(){this.shared={}},o.FSStream.prototype={},Object.defineProperties(o.FSStream.prototype,{object:{get:function(){return this.node},set:function(i){this.node=i}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(i){this.shared.flags=i}},position:{get:function(){return this.shared.position},set:function(i){this.shared.position=i}}})),n=Object.assign(new o.FSStream,n);var r=o.nextfd(e,s);return n.fd=r,o.streams[r]=n,n},closeStream:n=>{o.streams[n]=null},chrdev_stream_ops:{open:n=>{var e=o.getDevice(n.node.rdev);n.stream_ops=e.stream_ops,n.stream_ops.open&&n.stream_ops.open(n)},llseek:()=>{throw new o.ErrnoError(70)}},major:n=>n>>8,minor:n=>n&255,makedev:(n,e)=>n<<8|e,registerDevice:(n,e)=>{o.devices[n]={stream_ops:e}},getDevice:n=>o.devices[n],getMounts:n=>{for(var e=[],s=[n];s.length;){var r=s.pop();e.push(r),s.push.apply(s,r.mounts)}return e},syncfs:(n,e)=>{typeof n=="function"&&(e=n,n=!1),o.syncFSRequests++,o.syncFSRequests>1&&Te("warning: "+o.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var s=o.getMounts(o.root.mount),r=0;function i(m){return o.syncFSRequests--,e(m)}d(i,"doCallback");function l(m){if(m)return l.errored?void 0:(l.errored=!0,i(m));++r>=s.length&&i(null)}d(l,"done"),s.forEach(m=>{if(!m.type.syncfs)return l(null);m.type.syncfs(m,n,l)})},mount:(n,e,s)=>{var r=s==="/",i=!s,l;if(r&&o.root)throw new o.ErrnoError(10);if(!r&&!i){var m=o.lookupPath(s,{follow_mount:!1});if(s=m.path,l=m.node,o.isMountpoint(l))throw new o.ErrnoError(10);if(!o.isDir(l.mode))throw new o.ErrnoError(54)}var g={type:n,opts:e,mountpoint:s,mounts:[]},O=n.mount(g);return O.mount=g,g.root=O,r?o.root=O:l&&(l.mounted=g,l.mount&&l.mount.mounts.push(g)),O},unmount:n=>{var e=o.lookupPath(n,{follow_mount:!1});if(!o.isMountpoint(e.node))throw new o.ErrnoError(28);var s=e.node,r=s.mounted,i=o.getMounts(r);Object.keys(o.nameTable).forEach(m=>{for(var g=o.nameTable[m];g;){var O=g.name_next;i.includes(g.mount)&&o.destroyNode(g),g=O}}),s.mounted=null;var l=s.mount.mounts.indexOf(r);s.mount.mounts.splice(l,1)},lookup:(n,e)=>n.node_ops.lookup(n,e),mknod:(n,e,s)=>{var r=o.lookupPath(n,{parent:!0}),i=r.node,l=_e.basename(n);if(!l||l==="."||l==="..")throw new o.ErrnoError(28);var m=o.mayCreate(i,l);if(m)throw new o.ErrnoError(m);if(!i.node_ops.mknod)throw new o.ErrnoError(63);return i.node_ops.mknod(i,l,e,s)},create:(n,e)=>(e=e!==void 0?e:438,e&=4095,e|=32768,o.mknod(n,e,0)),mkdir:(n,e)=>(e=e!==void 0?e:511,e&=1023,e|=16384,o.mknod(n,e,0)),mkdirTree:(n,e)=>{for(var s=n.split("/"),r="",i=0;i<s.length;++i)if(s[i]){r+="/"+s[i];try{o.mkdir(r,e)}catch(l){if(l.errno!=20)throw l}}},mkdev:(n,e,s)=>(typeof s>"u"&&(s=e,e=438),e|=8192,o.mknod(n,e,s)),symlink:(n,e)=>{if(!Ie.resolve(n))throw new o.ErrnoError(44);var s=o.lookupPath(e,{parent:!0}),r=s.node;if(!r)throw new o.ErrnoError(44);var i=_e.basename(e),l=o.mayCreate(r,i);if(l)throw new o.ErrnoError(l);if(!r.node_ops.symlink)throw new o.ErrnoError(63);return r.node_ops.symlink(r,i,n)},rename:(n,e)=>{var s=_e.dirname(n),r=_e.dirname(e),i=_e.basename(n),l=_e.basename(e),m,g,O;if(m=o.lookupPath(n,{parent:!0}),g=m.node,m=o.lookupPath(e,{parent:!0}),O=m.node,!g||!O)throw new o.ErrnoError(44);if(g.mount!==O.mount)throw new o.ErrnoError(75);var L=o.lookupNode(g,i),j=Ie.relative(n,r);if(j.charAt(0)!==".")throw new o.ErrnoError(28);if(j=Ie.relative(e,s),j.charAt(0)!==".")throw new o.ErrnoError(55);var Q;try{Q=o.lookupNode(O,l)}catch{}if(L!==Q){var I=o.isDir(L.mode),E=o.mayDelete(g,i,I);if(E)throw new o.ErrnoError(E);if(E=Q?o.mayDelete(O,l,I):o.mayCreate(O,l),E)throw new o.ErrnoError(E);if(!g.node_ops.rename)throw new o.ErrnoError(63);if(o.isMountpoint(L)||Q&&o.isMountpoint(Q))throw new o.ErrnoError(10);if(O!==g&&(E=o.nodePermissions(g,"w"),E))throw new o.ErrnoError(E);o.hashRemoveNode(L);try{g.node_ops.rename(L,O,l)}catch(C){throw C}finally{o.hashAddNode(L)}}},rmdir:n=>{var e=o.lookupPath(n,{parent:!0}),s=e.node,r=_e.basename(n),i=o.lookupNode(s,r),l=o.mayDelete(s,r,!0);if(l)throw new o.ErrnoError(l);if(!s.node_ops.rmdir)throw new o.ErrnoError(63);if(o.isMountpoint(i))throw new o.ErrnoError(10);s.node_ops.rmdir(s,r),o.destroyNode(i)},readdir:n=>{var e=o.lookupPath(n,{follow:!0}),s=e.node;if(!s.node_ops.readdir)throw new o.ErrnoError(54);return s.node_ops.readdir(s)},unlink:n=>{var e=o.lookupPath(n,{parent:!0}),s=e.node;if(!s)throw new o.ErrnoError(44);var r=_e.basename(n),i=o.lookupNode(s,r),l=o.mayDelete(s,r,!1);if(l)throw new o.ErrnoError(l);if(!s.node_ops.unlink)throw new o.ErrnoError(63);if(o.isMountpoint(i))throw new o.ErrnoError(10);s.node_ops.unlink(s,r),o.destroyNode(i)},readlink:n=>{var e=o.lookupPath(n),s=e.node;if(!s)throw new o.ErrnoError(44);if(!s.node_ops.readlink)throw new o.ErrnoError(28);return Ie.resolve(o.getPath(s.parent),s.node_ops.readlink(s))},stat:(n,e)=>{var s=o.lookupPath(n,{follow:!e}),r=s.node;if(!r)throw new o.ErrnoError(44);if(!r.node_ops.getattr)throw new o.ErrnoError(63);return r.node_ops.getattr(r)},lstat:n=>o.stat(n,!0),chmod:(n,e,s)=>{var r;if(typeof n=="string"){var i=o.lookupPath(n,{follow:!s});r=i.node}else r=n;if(!r.node_ops.setattr)throw new o.ErrnoError(63);r.node_ops.setattr(r,{mode:e&4095|r.mode&-4096,timestamp:Date.now()})},lchmod:(n,e)=>{o.chmod(n,e,!0)},fchmod:(n,e)=>{var s=o.getStream(n);if(!s)throw new o.ErrnoError(8);o.chmod(s.node,e)},chown:(n,e,s,r)=>{var i;if(typeof n=="string"){var l=o.lookupPath(n,{follow:!r});i=l.node}else i=n;if(!i.node_ops.setattr)throw new o.ErrnoError(63);i.node_ops.setattr(i,{timestamp:Date.now()})},lchown:(n,e,s)=>{o.chown(n,e,s,!0)},fchown:(n,e,s)=>{var r=o.getStream(n);if(!r)throw new o.ErrnoError(8);o.chown(r.node,e,s)},truncate:(n,e)=>{if(e<0)throw new o.ErrnoError(28);var s;if(typeof n=="string"){var r=o.lookupPath(n,{follow:!0});s=r.node}else s=n;if(!s.node_ops.setattr)throw new o.ErrnoError(63);if(o.isDir(s.mode))throw new o.ErrnoError(31);if(!o.isFile(s.mode))throw new o.ErrnoError(28);var i=o.nodePermissions(s,"w");if(i)throw new o.ErrnoError(i);s.node_ops.setattr(s,{size:e,timestamp:Date.now()})},ftruncate:(n,e)=>{var s=o.getStream(n);if(!s)throw new o.ErrnoError(8);if(!(s.flags&2097155))throw new o.ErrnoError(28);o.truncate(s.node,e)},utime:(n,e,s)=>{var r=o.lookupPath(n,{follow:!0}),i=r.node;i.node_ops.setattr(i,{timestamp:Math.max(e,s)})},open:(n,e,s)=>{if(n==="")throw new o.ErrnoError(44);e=typeof e=="string"?o.modeStringToFlags(e):e,s=typeof s>"u"?438:s,e&64?s=s&4095|32768:s=0;var r;if(typeof n=="object")r=n;else{n=_e.normalize(n);try{var i=o.lookupPath(n,{follow:!(e&131072)});r=i.node}catch{}}var l=!1;if(e&64)if(r){if(e&128)throw new o.ErrnoError(20)}else r=o.mknod(n,s,0),l=!0;if(!r)throw new o.ErrnoError(44);if(o.isChrdev(r.mode)&&(e&=-513),e&65536&&!o.isDir(r.mode))throw new o.ErrnoError(54);if(!l){var m=o.mayOpen(r,e);if(m)throw new o.ErrnoError(m)}e&512&&!l&&o.truncate(r,0),e&=-131713;var g=o.createStream({node:r,path:o.getPath(r),flags:e,seekable:!0,position:0,stream_ops:r.stream_ops,ungotten:[],error:!1});return g.stream_ops.open&&g.stream_ops.open(g),t.logReadFiles&&!(e&1)&&(o.readFiles||(o.readFiles={}),n in o.readFiles||(o.readFiles[n]=1)),g},close:n=>{if(o.isClosed(n))throw new o.ErrnoError(8);n.getdents&&(n.getdents=null);try{n.stream_ops.close&&n.stream_ops.close(n)}catch(e){throw e}finally{o.closeStream(n.fd)}n.fd=null},isClosed:n=>n.fd===null,llseek:(n,e,s)=>{if(o.isClosed(n))throw new o.ErrnoError(8);if(!n.seekable||!n.stream_ops.llseek)throw new o.ErrnoError(70);if(s!=0&&s!=1&&s!=2)throw new o.ErrnoError(28);return n.position=n.stream_ops.llseek(n,e,s),n.ungotten=[],n.position},read:(n,e,s,r,i)=>{if(r<0||i<0)throw new o.ErrnoError(28);if(o.isClosed(n))throw new o.ErrnoError(8);if((n.flags&2097155)===1)throw new o.ErrnoError(8);if(o.isDir(n.node.mode))throw new o.ErrnoError(31);if(!n.stream_ops.read)throw new o.ErrnoError(28);var l=typeof i<"u";if(!l)i=n.position;else if(!n.seekable)throw new o.ErrnoError(70);var m=n.stream_ops.read(n,e,s,r,i);return l||(n.position+=m),m},write:(n,e,s,r,i,l)=>{if(r<0||i<0)throw new o.ErrnoError(28);if(o.isClosed(n))throw new o.ErrnoError(8);if(!(n.flags&2097155))throw new o.ErrnoError(8);if(o.isDir(n.node.mode))throw new o.ErrnoError(31);if(!n.stream_ops.write)throw new o.ErrnoError(28);n.seekable&&n.flags&1024&&o.llseek(n,0,2);var m=typeof i<"u";if(!m)i=n.position;else if(!n.seekable)throw new o.ErrnoError(70);var g=n.stream_ops.write(n,e,s,r,i,l);return m||(n.position+=g),g},allocate:(n,e,s)=>{if(o.isClosed(n))throw new o.ErrnoError(8);if(e<0||s<=0)throw new o.ErrnoError(28);if(!(n.flags&2097155))throw new o.ErrnoError(8);if(!o.isFile(n.node.mode)&&!o.isDir(n.node.mode))throw new o.ErrnoError(43);if(!n.stream_ops.allocate)throw new o.ErrnoError(138);n.stream_ops.allocate(n,e,s)},mmap:(n,e,s,r,i)=>{if(r&2&&!(i&2)&&(n.flags&2097155)!==2)throw new o.ErrnoError(2);if((n.flags&2097155)===1)throw new o.ErrnoError(2);if(!n.stream_ops.mmap)throw new o.ErrnoError(43);return n.stream_ops.mmap(n,e,s,r,i)},msync:(n,e,s,r,i)=>n.stream_ops.msync?n.stream_ops.msync(n,e,s,r,i):0,munmap:n=>0,ioctl:(n,e,s)=>{if(!n.stream_ops.ioctl)throw new o.ErrnoError(59);return n.stream_ops.ioctl(n,e,s)},readFile:(n,e={})=>{if(e.flags=e.flags||0,e.encoding=e.encoding||"binary",e.encoding!=="utf8"&&e.encoding!=="binary")throw new Error('Invalid encoding type "'+e.encoding+'"');var s,r=o.open(n,e.flags),i=o.stat(n),l=i.size,m=new Uint8Array(l);return o.read(r,m,0,l,0),e.encoding==="utf8"?s=De(m,0):e.encoding==="binary"&&(s=m),o.close(r),s},writeFile:(n,e,s={})=>{s.flags=s.flags||577;var r=o.open(n,s.flags,s.mode);if(typeof e=="string"){var i=new Uint8Array(Be(e)+1),l=He(e,i,0,i.length);o.write(r,i,0,l,void 0,s.canOwn)}else if(ArrayBuffer.isView(e))o.write(r,e,0,e.byteLength,void 0,s.canOwn);else throw new Error("Unsupported data type");o.close(r)},cwd:()=>o.currentPath,chdir:n=>{var e=o.lookupPath(n,{follow:!0});if(e.node===null)throw new o.ErrnoError(44);if(!o.isDir(e.node.mode))throw new o.ErrnoError(54);var s=o.nodePermissions(e.node,"x");if(s)throw new o.ErrnoError(s);o.currentPath=e.path},createDefaultDirectories:()=>{o.mkdir("/tmp"),o.mkdir("/home"),o.mkdir("/home/web_user")},createDefaultDevices:()=>{o.mkdir("/dev"),o.registerDevice(o.makedev(1,3),{read:()=>0,write:(e,s,r,i,l)=>i}),o.mkdev("/dev/null",o.makedev(1,3)),Le.register(o.makedev(5,0),Le.default_tty_ops),Le.register(o.makedev(6,0),Le.default_tty1_ops),o.mkdev("/dev/tty",o.makedev(5,0)),o.mkdev("/dev/tty1",o.makedev(6,0));var n=Qt();o.createDevice("/dev","random",n),o.createDevice("/dev","urandom",n),o.mkdir("/dev/shm"),o.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{o.mkdir("/proc");var n=o.mkdir("/proc/self");o.mkdir("/proc/self/fd"),o.mount({mount:()=>{var e=o.createNode(n,"fd",16895,73);return e.node_ops={lookup:(s,r)=>{var i=+r,l=o.getStream(i);if(!l)throw new o.ErrnoError(8);var m={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>l.path}};return m.parent=m,m}},e}},{},"/proc/self/fd")},createStandardStreams:()=>{t.stdin?o.createDevice("/dev","stdin",t.stdin):o.symlink("/dev/tty","/dev/stdin"),t.stdout?o.createDevice("/dev","stdout",null,t.stdout):o.symlink("/dev/tty","/dev/stdout"),t.stderr?o.createDevice("/dev","stderr",null,t.stderr):o.symlink("/dev/tty1","/dev/stderr"),o.open("/dev/stdin",0),o.open("/dev/stdout",1),o.open("/dev/stderr",1)},ensureErrnoError:()=>{o.ErrnoError||(o.ErrnoError=d(function(e,s){this.node=s,this.setErrno=function(r){this.errno=r},this.setErrno(e),this.message="FS error"},"ErrnoError"),o.ErrnoError.prototype=new Error,o.ErrnoError.prototype.constructor=o.ErrnoError,[44].forEach(n=>{o.genericErrors[n]=new o.ErrnoError(n),o.genericErrors[n].stack="<generic error, no stack>"}))},staticInit:()=>{o.ensureErrnoError(),o.nameTable=new Array(4096),o.mount(oe,{},"/"),o.createDefaultDirectories(),o.createDefaultDevices(),o.createSpecialDirectories(),o.filesystems={MEMFS:oe}},init:(n,e,s)=>{o.init.initialized=!0,o.ensureErrnoError(),t.stdin=n||t.stdin,t.stdout=e||t.stdout,t.stderr=s||t.stderr,o.createStandardStreams()},quit:()=>{o.init.initialized=!1;for(var n=0;n<o.streams.length;n++){var e=o.streams[n];e&&o.close(e)}},getMode:(n,e)=>{var s=0;return n&&(s|=365),e&&(s|=146),s},findObject:(n,e)=>{var s=o.analyzePath(n,e);return s.exists?s.object:null},analyzePath:(n,e)=>{try{var s=o.lookupPath(n,{follow:!e});n=s.path}catch{}var r={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var s=o.lookupPath(n,{parent:!0});r.parentExists=!0,r.parentPath=s.path,r.parentObject=s.node,r.name=_e.basename(n),s=o.lookupPath(n,{follow:!e}),r.exists=!0,r.path=s.path,r.object=s.node,r.name=s.node.name,r.isRoot=s.path==="/"}catch(i){r.error=i.errno}return r},createPath:(n,e,s,r)=>{n=typeof n=="string"?n:o.getPath(n);for(var i=e.split("/").reverse();i.length;){var l=i.pop();if(l){var m=_e.join2(n,l);try{o.mkdir(m)}catch{}n=m}}return m},createFile:(n,e,s,r,i)=>{var l=_e.join2(typeof n=="string"?n:o.getPath(n),e),m=o.getMode(r,i);return o.create(l,m)},createDataFile:(n,e,s,r,i,l)=>{var m=e;n&&(n=typeof n=="string"?n:o.getPath(n),m=e?_e.join2(n,e):n);var g=o.getMode(r,i),O=o.create(m,g);if(s){if(typeof s=="string"){for(var L=new Array(s.length),j=0,Q=s.length;j<Q;++j)L[j]=s.charCodeAt(j);s=L}o.chmod(O,g|146);var I=o.open(O,577);o.write(I,s,0,s.length,0,l),o.close(I),o.chmod(O,g)}return O},createDevice:(n,e,s,r)=>{var i=_e.join2(typeof n=="string"?n:o.getPath(n),e),l=o.getMode(!!s,!!r);o.createDevice.major||(o.createDevice.major=64);var m=o.makedev(o.createDevice.major++,0);return o.registerDevice(m,{open:g=>{g.seekable=!1},close:g=>{r&&r.buffer&&r.buffer.length&&r(10)},read:(g,O,L,j,Q)=>{for(var I=0,E=0;E<j;E++){var C;try{C=s()}catch{throw new o.ErrnoError(29)}if(C===void 0&&I===0)throw new o.ErrnoError(6);if(C==null)break;I++,O[L+E]=C}return I&&(g.node.timestamp=Date.now()),I},write:(g,O,L,j,Q)=>{for(var I=0;I<j;I++)try{r(O[L+I])}catch{throw new o.ErrnoError(29)}return j&&(g.node.timestamp=Date.now()),I}}),o.mkdev(i,l,m)},forceLoadFile:n=>{if(n.isDevice||n.isFolder||n.link||n.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(Je)try{n.contents=et(Je(n.url),!0),n.usedBytes=n.contents.length}catch{throw new o.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(n,e,s,r,i)=>{function l(){this.lengthKnown=!1,this.chunks=[]}if(d(l,"LazyUint8Array"),l.prototype.get=d(function(E){if(!(E>this.length-1||E<0)){var C=E%this.chunkSize,y=E/this.chunkSize|0;return this.getter(y)[C]}},"LazyUint8Array_get"),l.prototype.setDataGetter=d(function(E){this.getter=E},"LazyUint8Array_setDataGetter"),l.prototype.cacheLength=d(function(){var E=new XMLHttpRequest;if(E.open("HEAD",s,!1),E.send(null),!(E.status>=200&&E.status<300||E.status===304))throw new Error("Couldn't load "+s+". Status: "+E.status);var C=Number(E.getResponseHeader("Content-length")),y,w=(y=E.getResponseHeader("Accept-Ranges"))&&y==="bytes",x=(y=E.getResponseHeader("Content-Encoding"))&&y==="gzip",R=1024*1024;w||(R=C);var D=d((P,K)=>{if(P>K)throw new Error("invalid range ("+P+", "+K+") or no bytes requested!");if(K>C-1)throw new Error("only "+C+" bytes available! programmer error!");var c=new XMLHttpRequest;if(c.open("GET",s,!1),C!==R&&c.setRequestHeader("Range","bytes="+P+"-"+K),c.responseType="arraybuffer",c.overrideMimeType&&c.overrideMimeType("text/plain; charset=x-user-defined"),c.send(null),!(c.status>=200&&c.status<300||c.status===304))throw new Error("Couldn't load "+s+". Status: "+c.status);return c.response!==void 0?new Uint8Array(c.response||[]):et(c.responseText||"",!0)},"doXHR"),S=this;S.setDataGetter(P=>{var K=P*R,c=(P+1)*R-1;if(c=Math.min(c,C-1),typeof S.chunks[P]>"u"&&(S.chunks[P]=D(K,c)),typeof S.chunks[P]>"u")throw new Error("doXHR failed!");return S.chunks[P]}),(x||!C)&&(R=C=1,C=this.getter(0).length,R=C,Qe("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=C,this._chunkSize=R,this.lengthKnown=!0},"LazyUint8Array_cacheLength"),typeof XMLHttpRequest<"u"){if(!Me)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var m=new l;Object.defineProperties(m,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var g={isDevice:!1,contents:m}}else var g={isDevice:!1,url:s};var O=o.createFile(n,e,g,r,i);g.contents?O.contents=g.contents:g.url&&(O.contents=null,O.url=g.url),Object.defineProperties(O,{usedBytes:{get:function(){return this.contents.length}}});var L={},j=Object.keys(O.stream_ops);j.forEach(I=>{var E=O.stream_ops[I];L[I]=d(function(){return o.forceLoadFile(O),E.apply(null,arguments)},"forceLoadLazyFile")});function Q(I,E,C,y,w){var x=I.node.contents;if(w>=x.length)return 0;var R=Math.min(x.length-w,y);if(x.slice)for(var D=0;D<R;D++)E[C+D]=x[w+D];else for(var D=0;D<R;D++)E[C+D]=x.get(w+D);return R}return d(Q,"writeChunks"),L.read=(I,E,C,y,w)=>(o.forceLoadFile(O),Q(I,E,C,y,w)),L.mmap=(I,E,C,y,w)=>{o.forceLoadFile(O);var x=wt(E);if(!x)throw new o.ErrnoError(48);return Q(I,Ee,x,E,C),{ptr:x,allocated:!0}},O.stream_ops=L,O},createPreloadedFile:(n,e,s,r,i,l,m,g,O,L)=>{var j=e?Ie.resolve(_e.join2(n,e)):n;function Q(I){function E(C){L&&L(),g||o.createDataFile(n,e,C,r,i,O),l&&l(),Ve()}d(E,"finish"),!Browser.handledByPreloadPlugin(I,j,E,()=>{m&&m(),Ve()})&&E(I)}d(Q,"processData"),Ye(),typeof s=="string"?Gt(s,I=>Q(I),m):Q(s)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(n,e,s)=>{e=e||(()=>{}),s=s||(()=>{});var r=o.indexedDB();try{var i=r.open(o.DB_NAME(),o.DB_VERSION)}catch(l){return s(l)}i.onupgradeneeded=()=>{Qe("creating db");var l=i.result;l.createObjectStore(o.DB_STORE_NAME)},i.onsuccess=()=>{var l=i.result,m=l.transaction([o.DB_STORE_NAME],"readwrite"),g=m.objectStore(o.DB_STORE_NAME),O=0,L=0,j=n.length;function Q(){L==0?e():s()}d(Q,"finish"),n.forEach(I=>{var E=g.put(o.analyzePath(I).object.contents,I);E.onsuccess=()=>{O++,O+L==j&&Q()},E.onerror=()=>{L++,O+L==j&&Q()}}),m.onerror=s},i.onerror=s},loadFilesFromDB:(n,e,s)=>{e=e||(()=>{}),s=s||(()=>{});var r=o.indexedDB();try{var i=r.open(o.DB_NAME(),o.DB_VERSION)}catch(l){return s(l)}i.onupgradeneeded=s,i.onsuccess=()=>{var l=i.result;try{var m=l.transaction([o.DB_STORE_NAME],"readonly")}catch(I){s(I);return}var g=m.objectStore(o.DB_STORE_NAME),O=0,L=0,j=n.length;function Q(){L==0?e():s()}d(Q,"finish"),n.forEach(I=>{var E=g.get(I);E.onsuccess=()=>{o.analyzePath(I).exists&&o.unlink(I),o.createDataFile(_e.dirname(I),_e.basename(I),E.result,!0,!0,!0),O++,O+L==j&&Q()},E.onerror=()=>{L++,O+L==j&&Q()}}),m.onerror=s},i.onerror=s}},ie={DEFAULT_POLLMASK:5,calculateAt:function(n,e,s){if(_e.isAbs(e))return e;var r;if(n===-100)r=o.cwd();else{var i=ie.getStreamFromFD(n);r=i.path}if(e.length==0){if(!s)throw new o.ErrnoError(44);return r}return _e.join2(r,e)},doStat:function(n,e,s){try{var r=n(e)}catch(g){if(g&&g.node&&_e.normalize(e)!==_e.normalize(o.getPath(g.node)))return-54;throw g}ae[s>>2]=r.dev,ae[s+8>>2]=r.ino,ae[s+12>>2]=r.mode,me[s+16>>2]=r.nlink,ae[s+20>>2]=r.uid,ae[s+24>>2]=r.gid,ae[s+28>>2]=r.rdev,ye=[r.size>>>0,(ue=r.size,+Math.abs(ue)>=1?ue>0?(Math.min(+Math.floor(ue/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ue-+(~~ue>>>0))/4294967296)>>>0:0)],ae[s+40>>2]=ye[0],ae[s+44>>2]=ye[1],ae[s+48>>2]=4096,ae[s+52>>2]=r.blocks;var i=r.atime.getTime(),l=r.mtime.getTime(),m=r.ctime.getTime();return ye=[Math.floor(i/1e3)>>>0,(ue=Math.floor(i/1e3),+Math.abs(ue)>=1?ue>0?(Math.min(+Math.floor(ue/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ue-+(~~ue>>>0))/4294967296)>>>0:0)],ae[s+56>>2]=ye[0],ae[s+60>>2]=ye[1],me[s+64>>2]=i%1e3*1e3,ye=[Math.floor(l/1e3)>>>0,(ue=Math.floor(l/1e3),+Math.abs(ue)>=1?ue>0?(Math.min(+Math.floor(ue/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ue-+(~~ue>>>0))/4294967296)>>>0:0)],ae[s+72>>2]=ye[0],ae[s+76>>2]=ye[1],me[s+80>>2]=l%1e3*1e3,ye=[Math.floor(m/1e3)>>>0,(ue=Math.floor(m/1e3),+Math.abs(ue)>=1?ue>0?(Math.min(+Math.floor(ue/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ue-+(~~ue>>>0))/4294967296)>>>0:0)],ae[s+88>>2]=ye[0],ae[s+92>>2]=ye[1],me[s+96>>2]=m%1e3*1e3,ye=[r.ino>>>0,(ue=r.ino,+Math.abs(ue)>=1?ue>0?(Math.min(+Math.floor(ue/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ue-+(~~ue>>>0))/4294967296)>>>0:0)],ae[s+104>>2]=ye[0],ae[s+108>>2]=ye[1],0},doMsync:function(n,e,s,r,i){if(!o.isFile(e.node.mode))throw new o.ErrnoError(43);if(r&2)return 0;var l=Ce.slice(n,n+s);o.msync(e,l,i,s,r)},varargs:void 0,get:function(){ie.varargs+=4;var n=ae[ie.varargs-4>>2];return n},getStr:function(n){var e=Dt(n);return e},getStreamFromFD:function(n){var e=o.getStream(n);if(!e)throw new o.ErrnoError(8);return e}};function $t(n,e){try{return n=ie.getStr(n),o.chmod(n,e),0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}d($t,"___syscall_chmod");function Kt(n,e,s,r){try{if(e=ie.getStr(e),e=ie.calculateAt(n,e),s&-8)return-28;var i=o.lookupPath(e,{follow:!0}),l=i.node;if(!l)return-44;var m="";return s&4&&(m+="r"),s&2&&(m+="w"),s&1&&(m+="x"),m&&o.nodePermissions(l,m)?-2:0}catch(g){if(typeof o>"u"||!(g instanceof o.ErrnoError))throw g;return-g.errno}}d(Kt,"___syscall_faccessat");function Jt(n,e){try{return o.fchmod(n,e),0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}d(Jt,"___syscall_fchmod");function Xt(n,e,s){try{return o.fchown(n,e,s),0}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}d(Xt,"___syscall_fchown32");function Yt(n){return ae[It()>>2]=n,n}d(Yt,"setErrNo");function Zt(n,e,s){ie.varargs=s;try{var r=ie.getStreamFromFD(n);switch(e){case 0:{var i=ie.get();if(i<0)return-28;var l;return l=o.createStream(r,i),l.fd}case 1:case 2:return 0;case 3:return r.flags;case 4:{var i=ie.get();return r.flags|=i,0}case 5:{var i=ie.get(),m=0;return pt[i+m>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return Yt(28),-1;default:return-28}}catch(g){if(typeof o>"u"||!(g instanceof o.ErrnoError))throw g;return-g.errno}}d(Zt,"___syscall_fcntl64");function en(n,e){try{var s=ie.getStreamFromFD(n);return ie.doStat(o.stat,s.path,e)}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}d(en,"___syscall_fstat64");var tn=9007199254740992,nn=-9007199254740992;function Et(n){return n<nn||n>tn?NaN:Number(n)}d(Et,"bigintToI53Checked");function rn(n,e){try{return e=Et(e),isNaN(e)?-61:(o.ftruncate(n,e),0)}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}d(rn,"___syscall_ftruncate64");function sn(n,e){try{if(e===0)return-28;var s=o.cwd(),r=Be(s)+1;return e<r?-68:(ft(s,n,e),r)}catch(i){if(typeof o>"u"||!(i instanceof o.ErrnoError))throw i;return-i.errno}}d(sn,"___syscall_getcwd");function on(n,e,s){ie.varargs=s;try{var r=ie.getStreamFromFD(n);switch(e){case 21509:case 21505:return r.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return r.tty?0:-59;case 21519:{if(!r.tty)return-59;var i=ie.get();return ae[i>>2]=0,0}case 21520:return r.tty?-28:-59;case 21531:{var i=ie.get();return o.ioctl(r,e,i)}case 21523:return r.tty?0:-59;case 21524:return r.tty?0:-59;default:return-28}}catch(l){if(typeof o>"u"||!(l instanceof o.ErrnoError))throw l;return-l.errno}}d(on,"___syscall_ioctl");function ln(n,e){try{return n=ie.getStr(n),ie.doStat(o.lstat,n,e)}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}d(ln,"___syscall_lstat64");function an(n,e,s){try{return e=ie.getStr(e),e=ie.calculateAt(n,e),e=_e.normalize(e),e[e.length-1]==="/"&&(e=e.substr(0,e.length-1)),o.mkdir(e,s,0),0}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}d(an,"___syscall_mkdirat");function cn(n,e,s,r){try{e=ie.getStr(e);var i=r&256,l=r&4096;return r=r&-6401,e=ie.calculateAt(n,e,l),ie.doStat(i?o.lstat:o.stat,e,s)}catch(m){if(typeof o>"u"||!(m instanceof o.ErrnoError))throw m;return-m.errno}}d(cn,"___syscall_newfstatat");function un(n,e,s,r){ie.varargs=r;try{e=ie.getStr(e),e=ie.calculateAt(n,e);var i=r?ie.get():0;return o.open(e,s,i).fd}catch(l){if(typeof o>"u"||!(l instanceof o.ErrnoError))throw l;return-l.errno}}d(un,"___syscall_openat");function _n(n,e,s,r){try{if(e=ie.getStr(e),e=ie.calculateAt(n,e),r<=0)return-28;var i=o.readlink(e),l=Math.min(r,Be(i)),m=Ee[s+l];return ft(i,s,r+1),Ee[s+l]=m,l}catch(g){if(typeof o>"u"||!(g instanceof o.ErrnoError))throw g;return-g.errno}}d(_n,"___syscall_readlinkat");function fn(n){try{return n=ie.getStr(n),o.rmdir(n),0}catch(e){if(typeof o>"u"||!(e instanceof o.ErrnoError))throw e;return-e.errno}}d(fn,"___syscall_rmdir");function pn(n,e){try{return n=ie.getStr(n),ie.doStat(o.stat,n,e)}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return-s.errno}}d(pn,"___syscall_stat64");function dn(n,e,s){try{return e=ie.getStr(e),e=ie.calculateAt(n,e),s===0?o.unlink(e):s===512?o.rmdir(e):Re("Invalid flags passed to unlinkat"),0}catch(r){if(typeof o>"u"||!(r instanceof o.ErrnoError))throw r;return-r.errno}}d(dn,"___syscall_unlinkat");function tt(n){return me[n>>2]+ae[n+4>>2]*4294967296}d(tt,"readI53FromI64");function mn(n,e,s,r){try{if(e=ie.getStr(e),e=ie.calculateAt(n,e,!0),s){var m=tt(s),g=ae[s+8>>2];i=m*1e3+g/(1e3*1e3),s+=16,m=tt(s),g=ae[s+8>>2],l=m*1e3+g/(1e3*1e3)}else var i=Date.now(),l=i;return o.utime(e,i,l),0}catch(O){if(typeof o>"u"||!(O instanceof o.ErrnoError))throw O;return-O.errno}}d(mn,"___syscall_utimensat");var hn=!0;function gn(){return hn}d(gn,"__emscripten_get_now_is_monotonic");function yn(n){return n%4===0&&(n%100!==0||n%400===0)}d(yn,"__isLeapYear");var qn=[0,31,60,91,121,152,182,213,244,274,305,335],bn=[0,31,59,90,120,151,181,212,243,273,304,334];function wn(n){var e=yn(n.getFullYear()),s=e?qn:bn,r=s[n.getMonth()]+n.getDate()-1;return r}d(wn,"__yday_from_date");function En(n,e){var s=new Date(tt(n)*1e3);ae[e>>2]=s.getSeconds(),ae[e+4>>2]=s.getMinutes(),ae[e+8>>2]=s.getHours(),ae[e+12>>2]=s.getDate(),ae[e+16>>2]=s.getMonth(),ae[e+20>>2]=s.getFullYear()-1900,ae[e+24>>2]=s.getDay();var r=wn(s)|0;ae[e+28>>2]=r,ae[e+36>>2]=-(s.getTimezoneOffset()*60);var i=new Date(s.getFullYear(),0,1),l=new Date(s.getFullYear(),6,1).getTimezoneOffset(),m=i.getTimezoneOffset(),g=(l!=m&&s.getTimezoneOffset()==Math.min(m,l))|0;ae[e+32>>2]=g}d(En,"__localtime_js");function vn(n,e,s,r,i,l,m){try{var g=ie.getStreamFromFD(r),O=o.mmap(g,n,i,e,s),L=O.ptr;return ae[l>>2]=O.allocated,me[m>>2]=L,0}catch(j){if(typeof o>"u"||!(j instanceof o.ErrnoError))throw j;return-j.errno}}d(vn,"__mmap_js");function Sn(n,e,s,r,i,l){try{var m=ie.getStreamFromFD(i);s&2&&ie.doMsync(n,m,e,r,l),o.munmap(m)}catch(g){if(typeof o>"u"||!(g instanceof o.ErrnoError))throw g;return-g.errno}}d(Sn,"__munmap_js");function vt(n){var e=Be(n)+1,s=kt(e);return s&&He(n,Ee,s,e),s}d(vt,"allocateUTF8");function xn(n,e,s){var r=new Date().getFullYear(),i=new Date(r,0,1),l=new Date(r,6,1),m=i.getTimezoneOffset(),g=l.getTimezoneOffset(),O=Math.max(m,g);me[n>>2]=O*60,ae[e>>2]=+(m!=g);function L(C){var y=C.toTimeString().match(/\(([A-Za-z ]+)\)$/);return y?y[1]:"GMT"}d(L,"extractZone");var j=L(i),Q=L(l),I=vt(j),E=vt(Q);g<m?(me[s>>2]=I,me[s+4>>2]=E):(me[s>>2]=E,me[s+4>>2]=I)}d(xn,"__tzset_js");function An(){return Date.now()}d(An,"_emscripten_date_now");var St;St=d(()=>performance.now(),"_emscripten_get_now");function In(){return 2147483648}d(In,"getHeapMax");function kn(n){var e=Fe.buffer;try{return Fe.grow(n-e.byteLength+65535>>>16),dt(),1}catch{}}d(kn,"emscripten_realloc_buffer");function Tn(n){var e=Ce.length;n=n>>>0;var s=In();if(n>s)return!1;let r=d((O,L)=>O+(L-O%L)%L,"alignUp");for(var i=1;i<=4;i*=2){var l=e*(1+.2/i);l=Math.min(l,n+100663296);var m=Math.min(s,r(Math.max(n,l),65536)),g=kn(m);if(g)return!0}return!1}d(Tn,"_emscripten_resize_heap");var nt={};function Fn(){return lt||"./this.program"}d(Fn,"getExecutableName");function Ue(){if(!Ue.strings){var n=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:n,_:Fn()};for(var s in nt)nt[s]===void 0?delete e[s]:e[s]=nt[s];var r=[];for(var s in e)r.push(s+"="+e[s]);Ue.strings=r}return Ue.strings}d(Ue,"getEnvStrings");function On(n,e,s){for(var r=0;r<n.length;++r)Ee[e++>>0]=n.charCodeAt(r);s||(Ee[e>>0]=0)}d(On,"writeAsciiToMemory");function Pn(n,e){var s=0;return Ue().forEach(function(r,i){var l=e+s;me[n+i*4>>2]=l,On(r,l),s+=r.length+1}),0}d(Pn,"_environ_get");function Ln(n,e){var s=Ue();me[n>>2]=s.length;var r=0;return s.forEach(function(i){r+=i.length+1}),me[e>>2]=r,0}d(Ln,"_environ_sizes_get");function Dn(n){try{var e=ie.getStreamFromFD(n);return o.close(e),0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return s.errno}}d(Dn,"_fd_close");function Cn(n,e){try{var s=ie.getStreamFromFD(n),r=s.tty?2:o.isDir(s.mode)?3:o.isLink(s.mode)?7:4;return Ee[e>>0]=r,0}catch(i){if(typeof o>"u"||!(i instanceof o.ErrnoError))throw i;return i.errno}}d(Cn,"_fd_fdstat_get");function Rn(n,e,s,r){for(var i=0,l=0;l<s;l++){var m=me[e>>2],g=me[e+4>>2];e+=8;var O=o.read(n,Ee,m,g,r);if(O<0)return-1;if(i+=O,O<g)break;typeof r<"u"&&(r+=O)}return i}d(Rn,"doReadv");function Nn(n,e,s,r){try{var i=ie.getStreamFromFD(n),l=Rn(i,e,s);return me[r>>2]=l,0}catch(m){if(typeof o>"u"||!(m instanceof o.ErrnoError))throw m;return m.errno}}d(Nn,"_fd_read");function Mn(n,e,s,r){try{if(e=Et(e),isNaN(e))return 61;var i=ie.getStreamFromFD(n);return o.llseek(i,e,s),ye=[i.position>>>0,(ue=i.position,+Math.abs(ue)>=1?ue>0?(Math.min(+Math.floor(ue/4294967296),4294967295)|0)>>>0:~~+Math.ceil((ue-+(~~ue>>>0))/4294967296)>>>0:0)],ae[r>>2]=ye[0],ae[r+4>>2]=ye[1],i.getdents&&e===0&&s===0&&(i.getdents=null),0}catch(l){if(typeof o>"u"||!(l instanceof o.ErrnoError))throw l;return l.errno}}d(Mn,"_fd_seek");function jn(n){try{var e=ie.getStreamFromFD(n);return e.stream_ops&&e.stream_ops.fsync?e.stream_ops.fsync(e):0}catch(s){if(typeof o>"u"||!(s instanceof o.ErrnoError))throw s;return s.errno}}d(jn,"_fd_sync");function Bn(n,e,s,r){for(var i=0,l=0;l<s;l++){var m=me[e>>2],g=me[e+4>>2];e+=8;var O=o.write(n,Ee,m,g,r);if(O<0)return-1;i+=O,typeof r<"u"&&(r+=O)}return i}d(Bn,"doWritev");function zn(n,e,s,r){try{var i=ie.getStreamFromFD(n),l=Bn(i,e,s);return me[r>>2]=l,0}catch(m){if(typeof o>"u"||!(m instanceof o.ErrnoError))throw m;return m.errno}}d(zn,"_fd_write");var xt=d(function(n,e,s,r){n||(n=this),this.parent=n,this.mount=n.mount,this.mounted=null,this.id=o.nextInode++,this.name=e,this.mode=s,this.node_ops={},this.stream_ops={},this.rdev=r},"FSNode"),Ge=365,$e=146;Object.defineProperties(xt.prototype,{read:{get:function(){return(this.mode&Ge)===Ge},set:function(n){n?this.mode|=Ge:this.mode&=~Ge}},write:{get:function(){return(this.mode&$e)===$e},set:function(n){n?this.mode|=$e:this.mode&=~$e}},isFolder:{get:function(){return o.isDir(this.mode)}},isDevice:{get:function(){return o.isChrdev(this.mode)}}}),o.FSNode=xt,o.staticInit();var At={__syscall_chmod:$t,__syscall_faccessat:Kt,__syscall_fchmod:Jt,__syscall_fchown32:Xt,__syscall_fcntl64:Zt,__syscall_fstat64:en,__syscall_ftruncate64:rn,__syscall_getcwd:sn,__syscall_ioctl:on,__syscall_lstat64:ln,__syscall_mkdirat:an,__syscall_newfstatat:cn,__syscall_openat:un,__syscall_readlinkat:_n,__syscall_rmdir:fn,__syscall_stat64:pn,__syscall_unlinkat:dn,__syscall_utimensat:mn,_emscripten_get_now_is_monotonic:gn,_localtime_js:En,_mmap_js:vn,_munmap_js:Sn,_tzset_js:xn,emscripten_date_now:An,emscripten_get_now:St,emscripten_resize_heap:Tn,environ_get:Pn,environ_sizes_get:Ln,fd_close:Dn,fd_fdstat_get:Cn,fd_read:Nn,fd_seek:Mn,fd_sync:jn,fd_write:zn,memory:Fe};Wt(),t.___wasm_call_ctors=function(){return(t.___wasm_call_ctors=t.asm.__wasm_call_ctors).apply(null,arguments)},t._sqlite3_status64=function(){return(t._sqlite3_status64=t.asm.sqlite3_status64).apply(null,arguments)},t._sqlite3_status=function(){return(t._sqlite3_status=t.asm.sqlite3_status).apply(null,arguments)},t._sqlite3_db_status=function(){return(t._sqlite3_db_status=t.asm.sqlite3_db_status).apply(null,arguments)},t._sqlite3_msize=function(){return(t._sqlite3_msize=t.asm.sqlite3_msize).apply(null,arguments)},t._sqlite3_vfs_find=function(){return(t._sqlite3_vfs_find=t.asm.sqlite3_vfs_find).apply(null,arguments)},t._sqlite3_initialize=function(){return(t._sqlite3_initialize=t.asm.sqlite3_initialize).apply(null,arguments)},t._sqlite3_malloc=function(){return(t._sqlite3_malloc=t.asm.sqlite3_malloc).apply(null,arguments)},t._sqlite3_free=function(){return(t._sqlite3_free=t.asm.sqlite3_free).apply(null,arguments)},t._sqlite3_vfs_register=function(){return(t._sqlite3_vfs_register=t.asm.sqlite3_vfs_register).apply(null,arguments)},t._sqlite3_vfs_unregister=function(){return(t._sqlite3_vfs_unregister=t.asm.sqlite3_vfs_unregister).apply(null,arguments)},t._sqlite3_malloc64=function(){return(t._sqlite3_malloc64=t.asm.sqlite3_malloc64).apply(null,arguments)},t._sqlite3_realloc=function(){return(t._sqlite3_realloc=t.asm.sqlite3_realloc).apply(null,arguments)},t._sqlite3_realloc64=function(){return(t._sqlite3_realloc64=t.asm.sqlite3_realloc64).apply(null,arguments)},t._sqlite3_value_text=function(){return(t._sqlite3_value_text=t.asm.sqlite3_value_text).apply(null,arguments)},t._sqlite3_randomness=function(){return(t._sqlite3_randomness=t.asm.sqlite3_randomness).apply(null,arguments)},t._sqlite3_stricmp=function(){return(t._sqlite3_stricmp=t.asm.sqlite3_stricmp).apply(null,arguments)},t._sqlite3_strnicmp=function(){return(t._sqlite3_strnicmp=t.asm.sqlite3_strnicmp).apply(null,arguments)},t._sqlite3_uri_parameter=function(){return(t._sqlite3_uri_parameter=t.asm.sqlite3_uri_parameter).apply(null,arguments)};var It=t.___errno_location=function(){return(It=t.___errno_location=t.asm.__errno_location).apply(null,arguments)};t._sqlite3_uri_boolean=function(){return(t._sqlite3_uri_boolean=t.asm.sqlite3_uri_boolean).apply(null,arguments)},t._sqlite3_serialize=function(){return(t._sqlite3_serialize=t.asm.sqlite3_serialize).apply(null,arguments)},t._sqlite3_prepare_v2=function(){return(t._sqlite3_prepare_v2=t.asm.sqlite3_prepare_v2).apply(null,arguments)},t._sqlite3_step=function(){return(t._sqlite3_step=t.asm.sqlite3_step).apply(null,arguments)},t._sqlite3_column_int64=function(){return(t._sqlite3_column_int64=t.asm.sqlite3_column_int64).apply(null,arguments)},t._sqlite3_reset=function(){return(t._sqlite3_reset=t.asm.sqlite3_reset).apply(null,arguments)},t._sqlite3_exec=function(){return(t._sqlite3_exec=t.asm.sqlite3_exec).apply(null,arguments)},t._sqlite3_column_int=function(){return(t._sqlite3_column_int=t.asm.sqlite3_column_int).apply(null,arguments)},t._sqlite3_finalize=function(){return(t._sqlite3_finalize=t.asm.sqlite3_finalize).apply(null,arguments)},t._sqlite3_file_control=function(){return(t._sqlite3_file_control=t.asm.sqlite3_file_control).apply(null,arguments)},t._sqlite3_column_name=function(){return(t._sqlite3_column_name=t.asm.sqlite3_column_name).apply(null,arguments)},t._sqlite3_column_text=function(){return(t._sqlite3_column_text=t.asm.sqlite3_column_text).apply(null,arguments)},t._sqlite3_column_type=function(){return(t._sqlite3_column_type=t.asm.sqlite3_column_type).apply(null,arguments)},t._sqlite3_errmsg=function(){return(t._sqlite3_errmsg=t.asm.sqlite3_errmsg).apply(null,arguments)},t._sqlite3_deserialize=function(){return(t._sqlite3_deserialize=t.asm.sqlite3_deserialize).apply(null,arguments)},t._sqlite3_clear_bindings=function(){return(t._sqlite3_clear_bindings=t.asm.sqlite3_clear_bindings).apply(null,arguments)},t._sqlite3_value_blob=function(){return(t._sqlite3_value_blob=t.asm.sqlite3_value_blob).apply(null,arguments)},t._sqlite3_value_bytes=function(){return(t._sqlite3_value_bytes=t.asm.sqlite3_value_bytes).apply(null,arguments)},t._sqlite3_value_double=function(){return(t._sqlite3_value_double=t.asm.sqlite3_value_double).apply(null,arguments)},t._sqlite3_value_int=function(){return(t._sqlite3_value_int=t.asm.sqlite3_value_int).apply(null,arguments)},t._sqlite3_value_int64=function(){return(t._sqlite3_value_int64=t.asm.sqlite3_value_int64).apply(null,arguments)},t._sqlite3_value_subtype=function(){return(t._sqlite3_value_subtype=t.asm.sqlite3_value_subtype).apply(null,arguments)},t._sqlite3_value_pointer=function(){return(t._sqlite3_value_pointer=t.asm.sqlite3_value_pointer).apply(null,arguments)},t._sqlite3_value_type=function(){return(t._sqlite3_value_type=t.asm.sqlite3_value_type).apply(null,arguments)},t._sqlite3_value_nochange=function(){return(t._sqlite3_value_nochange=t.asm.sqlite3_value_nochange).apply(null,arguments)},t._sqlite3_value_frombind=function(){return(t._sqlite3_value_frombind=t.asm.sqlite3_value_frombind).apply(null,arguments)},t._sqlite3_value_dup=function(){return(t._sqlite3_value_dup=t.asm.sqlite3_value_dup).apply(null,arguments)},t._sqlite3_value_free=function(){return(t._sqlite3_value_free=t.asm.sqlite3_value_free).apply(null,arguments)},t._sqlite3_result_blob=function(){return(t._sqlite3_result_blob=t.asm.sqlite3_result_blob).apply(null,arguments)},t._sqlite3_result_error_toobig=function(){return(t._sqlite3_result_error_toobig=t.asm.sqlite3_result_error_toobig).apply(null,arguments)},t._sqlite3_result_error_nomem=function(){return(t._sqlite3_result_error_nomem=t.asm.sqlite3_result_error_nomem).apply(null,arguments)},t._sqlite3_result_double=function(){return(t._sqlite3_result_double=t.asm.sqlite3_result_double).apply(null,arguments)},t._sqlite3_result_error=function(){return(t._sqlite3_result_error=t.asm.sqlite3_result_error).apply(null,arguments)},t._sqlite3_result_int=function(){return(t._sqlite3_result_int=t.asm.sqlite3_result_int).apply(null,arguments)},t._sqlite3_result_int64=function(){return(t._sqlite3_result_int64=t.asm.sqlite3_result_int64).apply(null,arguments)},t._sqlite3_result_null=function(){return(t._sqlite3_result_null=t.asm.sqlite3_result_null).apply(null,arguments)},t._sqlite3_result_pointer=function(){return(t._sqlite3_result_pointer=t.asm.sqlite3_result_pointer).apply(null,arguments)},t._sqlite3_result_subtype=function(){return(t._sqlite3_result_subtype=t.asm.sqlite3_result_subtype).apply(null,arguments)},t._sqlite3_result_text=function(){return(t._sqlite3_result_text=t.asm.sqlite3_result_text).apply(null,arguments)},t._sqlite3_result_zeroblob=function(){return(t._sqlite3_result_zeroblob=t.asm.sqlite3_result_zeroblob).apply(null,arguments)},t._sqlite3_result_zeroblob64=function(){return(t._sqlite3_result_zeroblob64=t.asm.sqlite3_result_zeroblob64).apply(null,arguments)},t._sqlite3_result_error_code=function(){return(t._sqlite3_result_error_code=t.asm.sqlite3_result_error_code).apply(null,arguments)},t._sqlite3_user_data=function(){return(t._sqlite3_user_data=t.asm.sqlite3_user_data).apply(null,arguments)},t._sqlite3_context_db_handle=function(){return(t._sqlite3_context_db_handle=t.asm.sqlite3_context_db_handle).apply(null,arguments)},t._sqlite3_vtab_nochange=function(){return(t._sqlite3_vtab_nochange=t.asm.sqlite3_vtab_nochange).apply(null,arguments)},t._sqlite3_vtab_in_first=function(){return(t._sqlite3_vtab_in_first=t.asm.sqlite3_vtab_in_first).apply(null,arguments)},t._sqlite3_vtab_in_next=function(){return(t._sqlite3_vtab_in_next=t.asm.sqlite3_vtab_in_next).apply(null,arguments)},t._sqlite3_aggregate_context=function(){return(t._sqlite3_aggregate_context=t.asm.sqlite3_aggregate_context).apply(null,arguments)},t._sqlite3_get_auxdata=function(){return(t._sqlite3_get_auxdata=t.asm.sqlite3_get_auxdata).apply(null,arguments)},t._sqlite3_set_auxdata=function(){return(t._sqlite3_set_auxdata=t.asm.sqlite3_set_auxdata).apply(null,arguments)},t._sqlite3_column_count=function(){return(t._sqlite3_column_count=t.asm.sqlite3_column_count).apply(null,arguments)},t._sqlite3_data_count=function(){return(t._sqlite3_data_count=t.asm.sqlite3_data_count).apply(null,arguments)},t._sqlite3_column_blob=function(){return(t._sqlite3_column_blob=t.asm.sqlite3_column_blob).apply(null,arguments)},t._sqlite3_column_bytes=function(){return(t._sqlite3_column_bytes=t.asm.sqlite3_column_bytes).apply(null,arguments)},t._sqlite3_column_double=function(){return(t._sqlite3_column_double=t.asm.sqlite3_column_double).apply(null,arguments)},t._sqlite3_column_value=function(){return(t._sqlite3_column_value=t.asm.sqlite3_column_value).apply(null,arguments)},t._sqlite3_bind_blob=function(){return(t._sqlite3_bind_blob=t.asm.sqlite3_bind_blob).apply(null,arguments)},t._sqlite3_bind_double=function(){return(t._sqlite3_bind_double=t.asm.sqlite3_bind_double).apply(null,arguments)},t._sqlite3_bind_int=function(){return(t._sqlite3_bind_int=t.asm.sqlite3_bind_int).apply(null,arguments)},t._sqlite3_bind_int64=function(){return(t._sqlite3_bind_int64=t.asm.sqlite3_bind_int64).apply(null,arguments)},t._sqlite3_bind_null=function(){return(t._sqlite3_bind_null=t.asm.sqlite3_bind_null).apply(null,arguments)},t._sqlite3_bind_pointer=function(){return(t._sqlite3_bind_pointer=t.asm.sqlite3_bind_pointer).apply(null,arguments)},t._sqlite3_bind_text=function(){return(t._sqlite3_bind_text=t.asm.sqlite3_bind_text).apply(null,arguments)},t._sqlite3_bind_parameter_count=function(){return(t._sqlite3_bind_parameter_count=t.asm.sqlite3_bind_parameter_count).apply(null,arguments)},t._sqlite3_bind_parameter_index=function(){return(t._sqlite3_bind_parameter_index=t.asm.sqlite3_bind_parameter_index).apply(null,arguments)},t._sqlite3_db_handle=function(){return(t._sqlite3_db_handle=t.asm.sqlite3_db_handle).apply(null,arguments)},t._sqlite3_stmt_readonly=function(){return(t._sqlite3_stmt_readonly=t.asm.sqlite3_stmt_readonly).apply(null,arguments)},t._sqlite3_stmt_isexplain=function(){return(t._sqlite3_stmt_isexplain=t.asm.sqlite3_stmt_isexplain).apply(null,arguments)},t._sqlite3_stmt_status=function(){return(t._sqlite3_stmt_status=t.asm.sqlite3_stmt_status).apply(null,arguments)},t._sqlite3_sql=function(){return(t._sqlite3_sql=t.asm.sqlite3_sql).apply(null,arguments)},t._sqlite3_expanded_sql=function(){return(t._sqlite3_expanded_sql=t.asm.sqlite3_expanded_sql).apply(null,arguments)},t._sqlite3_preupdate_old=function(){return(t._sqlite3_preupdate_old=t.asm.sqlite3_preupdate_old).apply(null,arguments)},t._sqlite3_preupdate_count=function(){return(t._sqlite3_preupdate_count=t.asm.sqlite3_preupdate_count).apply(null,arguments)},t._sqlite3_preupdate_depth=function(){return(t._sqlite3_preupdate_depth=t.asm.sqlite3_preupdate_depth).apply(null,arguments)},t._sqlite3_preupdate_blobwrite=function(){return(t._sqlite3_preupdate_blobwrite=t.asm.sqlite3_preupdate_blobwrite).apply(null,arguments)},t._sqlite3_preupdate_new=function(){return(t._sqlite3_preupdate_new=t.asm.sqlite3_preupdate_new).apply(null,arguments)},t._sqlite3_value_numeric_type=function(){return(t._sqlite3_value_numeric_type=t.asm.sqlite3_value_numeric_type).apply(null,arguments)},t._sqlite3_set_authorizer=function(){return(t._sqlite3_set_authorizer=t.asm.sqlite3_set_authorizer).apply(null,arguments)},t._sqlite3_strglob=function(){return(t._sqlite3_strglob=t.asm.sqlite3_strglob).apply(null,arguments)},t._sqlite3_strlike=function(){return(t._sqlite3_strlike=t.asm.sqlite3_strlike).apply(null,arguments)},t._sqlite3_auto_extension=function(){return(t._sqlite3_auto_extension=t.asm.sqlite3_auto_extension).apply(null,arguments)},t._sqlite3_cancel_auto_extension=function(){return(t._sqlite3_cancel_auto_extension=t.asm.sqlite3_cancel_auto_extension).apply(null,arguments)},t._sqlite3_reset_auto_extension=function(){return(t._sqlite3_reset_auto_extension=t.asm.sqlite3_reset_auto_extension).apply(null,arguments)},t._sqlite3_prepare_v3=function(){return(t._sqlite3_prepare_v3=t.asm.sqlite3_prepare_v3).apply(null,arguments)},t._sqlite3_create_module=function(){return(t._sqlite3_create_module=t.asm.sqlite3_create_module).apply(null,arguments)},t._sqlite3_create_module_v2=function(){return(t._sqlite3_create_module_v2=t.asm.sqlite3_create_module_v2).apply(null,arguments)},t._sqlite3_drop_modules=function(){return(t._sqlite3_drop_modules=t.asm.sqlite3_drop_modules).apply(null,arguments)},t._sqlite3_declare_vtab=function(){return(t._sqlite3_declare_vtab=t.asm.sqlite3_declare_vtab).apply(null,arguments)},t._sqlite3_vtab_on_conflict=function(){return(t._sqlite3_vtab_on_conflict=t.asm.sqlite3_vtab_on_conflict).apply(null,arguments)},t._sqlite3_vtab_collation=function(){return(t._sqlite3_vtab_collation=t.asm.sqlite3_vtab_collation).apply(null,arguments)},t._sqlite3_vtab_in=function(){return(t._sqlite3_vtab_in=t.asm.sqlite3_vtab_in).apply(null,arguments)},t._sqlite3_vtab_rhs_value=function(){return(t._sqlite3_vtab_rhs_value=t.asm.sqlite3_vtab_rhs_value).apply(null,arguments)},t._sqlite3_vtab_distinct=function(){return(t._sqlite3_vtab_distinct=t.asm.sqlite3_vtab_distinct).apply(null,arguments)},t._sqlite3_keyword_name=function(){return(t._sqlite3_keyword_name=t.asm.sqlite3_keyword_name).apply(null,arguments)},t._sqlite3_keyword_count=function(){return(t._sqlite3_keyword_count=t.asm.sqlite3_keyword_count).apply(null,arguments)},t._sqlite3_keyword_check=function(){return(t._sqlite3_keyword_check=t.asm.sqlite3_keyword_check).apply(null,arguments)},t._sqlite3_complete=function(){return(t._sqlite3_complete=t.asm.sqlite3_complete).apply(null,arguments)},t._sqlite3_libversion=function(){return(t._sqlite3_libversion=t.asm.sqlite3_libversion).apply(null,arguments)},t._sqlite3_libversion_number=function(){return(t._sqlite3_libversion_number=t.asm.sqlite3_libversion_number).apply(null,arguments)},t._sqlite3_shutdown=function(){return(t._sqlite3_shutdown=t.asm.sqlite3_shutdown).apply(null,arguments)},t._sqlite3_last_insert_rowid=function(){return(t._sqlite3_last_insert_rowid=t.asm.sqlite3_last_insert_rowid).apply(null,arguments)},t._sqlite3_set_last_insert_rowid=function(){return(t._sqlite3_set_last_insert_rowid=t.asm.sqlite3_set_last_insert_rowid).apply(null,arguments)},t._sqlite3_changes64=function(){return(t._sqlite3_changes64=t.asm.sqlite3_changes64).apply(null,arguments)},t._sqlite3_changes=function(){return(t._sqlite3_changes=t.asm.sqlite3_changes).apply(null,arguments)},t._sqlite3_total_changes64=function(){return(t._sqlite3_total_changes64=t.asm.sqlite3_total_changes64).apply(null,arguments)},t._sqlite3_total_changes=function(){return(t._sqlite3_total_changes=t.asm.sqlite3_total_changes).apply(null,arguments)},t._sqlite3_txn_state=function(){return(t._sqlite3_txn_state=t.asm.sqlite3_txn_state).apply(null,arguments)},t._sqlite3_close_v2=function(){return(t._sqlite3_close_v2=t.asm.sqlite3_close_v2).apply(null,arguments)},t._sqlite3_busy_handler=function(){return(t._sqlite3_busy_handler=t.asm.sqlite3_busy_handler).apply(null,arguments)},t._sqlite3_progress_handler=function(){return(t._sqlite3_progress_handler=t.asm.sqlite3_progress_handler).apply(null,arguments)},t._sqlite3_busy_timeout=function(){return(t._sqlite3_busy_timeout=t.asm.sqlite3_busy_timeout).apply(null,arguments)},t._sqlite3_create_function=function(){return(t._sqlite3_create_function=t.asm.sqlite3_create_function).apply(null,arguments)},t._sqlite3_create_function_v2=function(){return(t._sqlite3_create_function_v2=t.asm.sqlite3_create_function_v2).apply(null,arguments)},t._sqlite3_create_window_function=function(){return(t._sqlite3_create_window_function=t.asm.sqlite3_create_window_function).apply(null,arguments)},t._sqlite3_overload_function=function(){return(t._sqlite3_overload_function=t.asm.sqlite3_overload_function).apply(null,arguments)},t._sqlite3_trace_v2=function(){return(t._sqlite3_trace_v2=t.asm.sqlite3_trace_v2).apply(null,arguments)},t._sqlite3_commit_hook=function(){return(t._sqlite3_commit_hook=t.asm.sqlite3_commit_hook).apply(null,arguments)},t._sqlite3_update_hook=function(){return(t._sqlite3_update_hook=t.asm.sqlite3_update_hook).apply(null,arguments)},t._sqlite3_rollback_hook=function(){return(t._sqlite3_rollback_hook=t.asm.sqlite3_rollback_hook).apply(null,arguments)},t._sqlite3_preupdate_hook=function(){return(t._sqlite3_preupdate_hook=t.asm.sqlite3_preupdate_hook).apply(null,arguments)},t._sqlite3_error_offset=function(){return(t._sqlite3_error_offset=t.asm.sqlite3_error_offset).apply(null,arguments)},t._sqlite3_errcode=function(){return(t._sqlite3_errcode=t.asm.sqlite3_errcode).apply(null,arguments)},t._sqlite3_extended_errcode=function(){return(t._sqlite3_extended_errcode=t.asm.sqlite3_extended_errcode).apply(null,arguments)},t._sqlite3_errstr=function(){return(t._sqlite3_errstr=t.asm.sqlite3_errstr).apply(null,arguments)},t._sqlite3_limit=function(){return(t._sqlite3_limit=t.asm.sqlite3_limit).apply(null,arguments)},t._sqlite3_open=function(){return(t._sqlite3_open=t.asm.sqlite3_open).apply(null,arguments)},t._sqlite3_open_v2=function(){return(t._sqlite3_open_v2=t.asm.sqlite3_open_v2).apply(null,arguments)},t._sqlite3_create_collation=function(){return(t._sqlite3_create_collation=t.asm.sqlite3_create_collation).apply(null,arguments)},t._sqlite3_create_collation_v2=function(){return(t._sqlite3_create_collation_v2=t.asm.sqlite3_create_collation_v2).apply(null,arguments)},t._sqlite3_collation_needed=function(){return(t._sqlite3_collation_needed=t.asm.sqlite3_collation_needed).apply(null,arguments)},t._sqlite3_get_autocommit=function(){return(t._sqlite3_get_autocommit=t.asm.sqlite3_get_autocommit).apply(null,arguments)},t._sqlite3_table_column_metadata=function(){return(t._sqlite3_table_column_metadata=t.asm.sqlite3_table_column_metadata).apply(null,arguments)},t._sqlite3_extended_result_codes=function(){return(t._sqlite3_extended_result_codes=t.asm.sqlite3_extended_result_codes).apply(null,arguments)},t._sqlite3_uri_key=function(){return(t._sqlite3_uri_key=t.asm.sqlite3_uri_key).apply(null,arguments)},t._sqlite3_uri_int64=function(){return(t._sqlite3_uri_int64=t.asm.sqlite3_uri_int64).apply(null,arguments)},t._sqlite3_db_name=function(){return(t._sqlite3_db_name=t.asm.sqlite3_db_name).apply(null,arguments)},t._sqlite3_db_filename=function(){return(t._sqlite3_db_filename=t.asm.sqlite3_db_filename).apply(null,arguments)},t._sqlite3_compileoption_used=function(){return(t._sqlite3_compileoption_used=t.asm.sqlite3_compileoption_used).apply(null,arguments)},t._sqlite3_compileoption_get=function(){return(t._sqlite3_compileoption_get=t.asm.sqlite3_compileoption_get).apply(null,arguments)},t._sqlite3session_diff=function(){return(t._sqlite3session_diff=t.asm.sqlite3session_diff).apply(null,arguments)},t._sqlite3session_attach=function(){return(t._sqlite3session_attach=t.asm.sqlite3session_attach).apply(null,arguments)},t._sqlite3session_create=function(){return(t._sqlite3session_create=t.asm.sqlite3session_create).apply(null,arguments)},t._sqlite3session_delete=function(){return(t._sqlite3session_delete=t.asm.sqlite3session_delete).apply(null,arguments)},t._sqlite3session_table_filter=function(){return(t._sqlite3session_table_filter=t.asm.sqlite3session_table_filter).apply(null,arguments)},t._sqlite3session_changeset=function(){return(t._sqlite3session_changeset=t.asm.sqlite3session_changeset).apply(null,arguments)},t._sqlite3session_changeset_strm=function(){return(t._sqlite3session_changeset_strm=t.asm.sqlite3session_changeset_strm).apply(null,arguments)},t._sqlite3session_patchset_strm=function(){return(t._sqlite3session_patchset_strm=t.asm.sqlite3session_patchset_strm).apply(null,arguments)},t._sqlite3session_patchset=function(){return(t._sqlite3session_patchset=t.asm.sqlite3session_patchset).apply(null,arguments)},t._sqlite3session_enable=function(){return(t._sqlite3session_enable=t.asm.sqlite3session_enable).apply(null,arguments)},t._sqlite3session_indirect=function(){return(t._sqlite3session_indirect=t.asm.sqlite3session_indirect).apply(null,arguments)},t._sqlite3session_isempty=function(){return(t._sqlite3session_isempty=t.asm.sqlite3session_isempty).apply(null,arguments)},t._sqlite3session_memory_used=function(){return(t._sqlite3session_memory_used=t.asm.sqlite3session_memory_used).apply(null,arguments)},t._sqlite3session_object_config=function(){return(t._sqlite3session_object_config=t.asm.sqlite3session_object_config).apply(null,arguments)},t._sqlite3session_changeset_size=function(){return(t._sqlite3session_changeset_size=t.asm.sqlite3session_changeset_size).apply(null,arguments)},t._sqlite3changeset_start=function(){return(t._sqlite3changeset_start=t.asm.sqlite3changeset_start).apply(null,arguments)},t._sqlite3changeset_start_v2=function(){return(t._sqlite3changeset_start_v2=t.asm.sqlite3changeset_start_v2).apply(null,arguments)},t._sqlite3changeset_start_strm=function(){return(t._sqlite3changeset_start_strm=t.asm.sqlite3changeset_start_strm).apply(null,arguments)},t._sqlite3changeset_start_v2_strm=function(){return(t._sqlite3changeset_start_v2_strm=t.asm.sqlite3changeset_start_v2_strm).apply(null,arguments)},t._sqlite3changeset_next=function(){return(t._sqlite3changeset_next=t.asm.sqlite3changeset_next).apply(null,arguments)},t._sqlite3changeset_op=function(){return(t._sqlite3changeset_op=t.asm.sqlite3changeset_op).apply(null,arguments)},t._sqlite3changeset_pk=function(){return(t._sqlite3changeset_pk=t.asm.sqlite3changeset_pk).apply(null,arguments)},t._sqlite3changeset_old=function(){return(t._sqlite3changeset_old=t.asm.sqlite3changeset_old).apply(null,arguments)},t._sqlite3changeset_new=function(){return(t._sqlite3changeset_new=t.asm.sqlite3changeset_new).apply(null,arguments)},t._sqlite3changeset_conflict=function(){return(t._sqlite3changeset_conflict=t.asm.sqlite3changeset_conflict).apply(null,arguments)},t._sqlite3changeset_fk_conflicts=function(){return(t._sqlite3changeset_fk_conflicts=t.asm.sqlite3changeset_fk_conflicts).apply(null,arguments)},t._sqlite3changeset_finalize=function(){return(t._sqlite3changeset_finalize=t.asm.sqlite3changeset_finalize).apply(null,arguments)},t._sqlite3changeset_invert=function(){return(t._sqlite3changeset_invert=t.asm.sqlite3changeset_invert).apply(null,arguments)},t._sqlite3changeset_invert_strm=function(){return(t._sqlite3changeset_invert_strm=t.asm.sqlite3changeset_invert_strm).apply(null,arguments)},t._sqlite3changeset_apply_v2=function(){return(t._sqlite3changeset_apply_v2=t.asm.sqlite3changeset_apply_v2).apply(null,arguments)},t._sqlite3changeset_apply=function(){return(t._sqlite3changeset_apply=t.asm.sqlite3changeset_apply).apply(null,arguments)},t._sqlite3changeset_apply_v2_strm=function(){return(t._sqlite3changeset_apply_v2_strm=t.asm.sqlite3changeset_apply_v2_strm).apply(null,arguments)},t._sqlite3changeset_apply_strm=function(){return(t._sqlite3changeset_apply_strm=t.asm.sqlite3changeset_apply_strm).apply(null,arguments)},t._sqlite3changegroup_new=function(){return(t._sqlite3changegroup_new=t.asm.sqlite3changegroup_new).apply(null,arguments)},t._sqlite3changegroup_add=function(){return(t._sqlite3changegroup_add=t.asm.sqlite3changegroup_add).apply(null,arguments)},t._sqlite3changegroup_output=function(){return(t._sqlite3changegroup_output=t.asm.sqlite3changegroup_output).apply(null,arguments)},t._sqlite3changegroup_add_strm=function(){return(t._sqlite3changegroup_add_strm=t.asm.sqlite3changegroup_add_strm).apply(null,arguments)},t._sqlite3changegroup_output_strm=function(){return(t._sqlite3changegroup_output_strm=t.asm.sqlite3changegroup_output_strm).apply(null,arguments)},t._sqlite3changegroup_delete=function(){return(t._sqlite3changegroup_delete=t.asm.sqlite3changegroup_delete).apply(null,arguments)},t._sqlite3changeset_concat=function(){return(t._sqlite3changeset_concat=t.asm.sqlite3changeset_concat).apply(null,arguments)},t._sqlite3changeset_concat_strm=function(){return(t._sqlite3changeset_concat_strm=t.asm.sqlite3changeset_concat_strm).apply(null,arguments)},t._sqlite3session_config=function(){return(t._sqlite3session_config=t.asm.sqlite3session_config).apply(null,arguments)},t._sqlite3_sourceid=function(){return(t._sqlite3_sourceid=t.asm.sqlite3_sourceid).apply(null,arguments)},t._sqlite3__wasm_pstack_ptr=function(){return(t._sqlite3__wasm_pstack_ptr=t.asm.sqlite3__wasm_pstack_ptr).apply(null,arguments)},t._sqlite3__wasm_pstack_restore=function(){return(t._sqlite3__wasm_pstack_restore=t.asm.sqlite3__wasm_pstack_restore).apply(null,arguments)},t._sqlite3__wasm_pstack_alloc=function(){return(t._sqlite3__wasm_pstack_alloc=t.asm.sqlite3__wasm_pstack_alloc).apply(null,arguments)},t._sqlite3__wasm_pstack_remaining=function(){return(t._sqlite3__wasm_pstack_remaining=t.asm.sqlite3__wasm_pstack_remaining).apply(null,arguments)},t._sqlite3__wasm_pstack_quota=function(){return(t._sqlite3__wasm_pstack_quota=t.asm.sqlite3__wasm_pstack_quota).apply(null,arguments)},t._sqlite3__wasm_db_error=function(){return(t._sqlite3__wasm_db_error=t.asm.sqlite3__wasm_db_error).apply(null,arguments)},t._sqlite3__wasm_test_struct=function(){return(t._sqlite3__wasm_test_struct=t.asm.sqlite3__wasm_test_struct).apply(null,arguments)},t._sqlite3__wasm_enum_json=function(){return(t._sqlite3__wasm_enum_json=t.asm.sqlite3__wasm_enum_json).apply(null,arguments)},t._sqlite3__wasm_vfs_unlink=function(){return(t._sqlite3__wasm_vfs_unlink=t.asm.sqlite3__wasm_vfs_unlink).apply(null,arguments)},t._sqlite3__wasm_db_vfs=function(){return(t._sqlite3__wasm_db_vfs=t.asm.sqlite3__wasm_db_vfs).apply(null,arguments)},t._sqlite3__wasm_db_reset=function(){return(t._sqlite3__wasm_db_reset=t.asm.sqlite3__wasm_db_reset).apply(null,arguments)},t._sqlite3__wasm_db_export_chunked=function(){return(t._sqlite3__wasm_db_export_chunked=t.asm.sqlite3__wasm_db_export_chunked).apply(null,arguments)},t._sqlite3__wasm_db_serialize=function(){return(t._sqlite3__wasm_db_serialize=t.asm.sqlite3__wasm_db_serialize).apply(null,arguments)},t._sqlite3__wasm_vfs_create_file=function(){return(t._sqlite3__wasm_vfs_create_file=t.asm.sqlite3__wasm_vfs_create_file).apply(null,arguments)},t._sqlite3__wasm_posix_create_file=function(){return(t._sqlite3__wasm_posix_create_file=t.asm.sqlite3__wasm_posix_create_file).apply(null,arguments)},t._sqlite3__wasm_kvvfsMakeKeyOnPstack=function(){return(t._sqlite3__wasm_kvvfsMakeKeyOnPstack=t.asm.sqlite3__wasm_kvvfsMakeKeyOnPstack).apply(null,arguments)},t._sqlite3__wasm_kvvfs_methods=function(){return(t._sqlite3__wasm_kvvfs_methods=t.asm.sqlite3__wasm_kvvfs_methods).apply(null,arguments)},t._sqlite3__wasm_vtab_config=function(){return(t._sqlite3__wasm_vtab_config=t.asm.sqlite3__wasm_vtab_config).apply(null,arguments)},t._sqlite3__wasm_db_config_ip=function(){return(t._sqlite3__wasm_db_config_ip=t.asm.sqlite3__wasm_db_config_ip).apply(null,arguments)},t._sqlite3__wasm_db_config_pii=function(){return(t._sqlite3__wasm_db_config_pii=t.asm.sqlite3__wasm_db_config_pii).apply(null,arguments)},t._sqlite3__wasm_db_config_s=function(){return(t._sqlite3__wasm_db_config_s=t.asm.sqlite3__wasm_db_config_s).apply(null,arguments)},t._sqlite3__wasm_config_i=function(){return(t._sqlite3__wasm_config_i=t.asm.sqlite3__wasm_config_i).apply(null,arguments)},t._sqlite3__wasm_config_ii=function(){return(t._sqlite3__wasm_config_ii=t.asm.sqlite3__wasm_config_ii).apply(null,arguments)},t._sqlite3__wasm_config_j=function(){return(t._sqlite3__wasm_config_j=t.asm.sqlite3__wasm_config_j).apply(null,arguments)},t._sqlite3__wasm_qfmt_token=function(){return(t._sqlite3__wasm_qfmt_token=t.asm.sqlite3__wasm_qfmt_token).apply(null,arguments)},t._sqlite3__wasm_init_wasmfs=function(){return(t._sqlite3__wasm_init_wasmfs=t.asm.sqlite3__wasm_init_wasmfs).apply(null,arguments)},t._sqlite3__wasm_test_intptr=function(){return(t._sqlite3__wasm_test_intptr=t.asm.sqlite3__wasm_test_intptr).apply(null,arguments)},t._sqlite3__wasm_test_voidptr=function(){return(t._sqlite3__wasm_test_voidptr=t.asm.sqlite3__wasm_test_voidptr).apply(null,arguments)},t._sqlite3__wasm_test_int64_max=function(){return(t._sqlite3__wasm_test_int64_max=t.asm.sqlite3__wasm_test_int64_max).apply(null,arguments)},t._sqlite3__wasm_test_int64_min=function(){return(t._sqlite3__wasm_test_int64_min=t.asm.sqlite3__wasm_test_int64_min).apply(null,arguments)},t._sqlite3__wasm_test_int64_times2=function(){return(t._sqlite3__wasm_test_int64_times2=t.asm.sqlite3__wasm_test_int64_times2).apply(null,arguments)},t._sqlite3__wasm_test_int64_minmax=function(){return(t._sqlite3__wasm_test_int64_minmax=t.asm.sqlite3__wasm_test_int64_minmax).apply(null,arguments)},t._sqlite3__wasm_test_int64ptr=function(){return(t._sqlite3__wasm_test_int64ptr=t.asm.sqlite3__wasm_test_int64ptr).apply(null,arguments)},t._sqlite3__wasm_test_stack_overflow=function(){return(t._sqlite3__wasm_test_stack_overflow=t.asm.sqlite3__wasm_test_stack_overflow).apply(null,arguments)},t._sqlite3__wasm_test_str_hello=function(){return(t._sqlite3__wasm_test_str_hello=t.asm.sqlite3__wasm_test_str_hello).apply(null,arguments)},t._sqlite3__wasm_SQLTester_strglob=function(){return(t._sqlite3__wasm_SQLTester_strglob=t.asm.sqlite3__wasm_SQLTester_strglob).apply(null,arguments)};var kt=t._malloc=function(){return(kt=t._malloc=t.asm.malloc).apply(null,arguments)};t._free=function(){return(t._free=t.asm.free).apply(null,arguments)},t._realloc=function(){return(t._realloc=t.asm.realloc).apply(null,arguments)};var Tt=t._emscripten_builtin_memalign=function(){return(Tt=t._emscripten_builtin_memalign=t.asm.emscripten_builtin_memalign).apply(null,arguments)};t.stackSave=function(){return(t.stackSave=t.asm.stackSave).apply(null,arguments)},t.stackRestore=function(){return(t.stackRestore=t.asm.stackRestore).apply(null,arguments)},t.stackAlloc=function(){return(t.stackAlloc=t.asm.stackAlloc).apply(null,arguments)},t.wasmMemory=Fe;var Ke;ze=d(function n(){Ke||Ft(),Ke||(ze=n)},"runCaller");function Ft(n){if(Pe>0||(Ct(),Pe>0))return;function e(){Ke||(Ke=!0,t.calledRun=!0,!ut&&(Rt(),Oe(t),t.onRuntimeInitialized&&t.onRuntimeInitialized(),Nt()))}d(e,"doRun"),t.setStatus?(t.setStatus("Running..."),setTimeout(function(){setTimeout(function(){t.setStatus("")},1),e()},1)):e()}if(d(Ft,"run"),t.preInit)for(typeof t.preInit=="function"&&(t.preInit=[t.preInit]);t.preInit.length>0;)t.preInit.pop()();return Ft(),t.postRun||(t.postRun=[]),t.postRun.push(function(n){if(globalThis.sqlite3ApiBootstrap=d(function e(s=globalThis.sqlite3ApiConfig||e.defaultConfig){if(e.sqlite3)return(e.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),e.sqlite3;const r=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof n<"u"&&n.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},s||{});Object.assign(r,{allocExportName:r.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:r.useStdAlloc?"free":"sqlite3_free",reallocExportName:r.useStdAlloc?"realloc":"sqlite3_realloc"},r),["exports","memory","wasmfsOpfsDir"].forEach(a=>{typeof r[a]=="function"&&(r[a]=r[a]())}),delete globalThis.sqlite3ApiConfig,delete e.defaultConfig;const i=Object.create(null),l=Object.create(null),m=d(a=>i.sqlite3_js_rc_str&&i.sqlite3_js_rc_str(a)||"Unknown result code #"+a,"__rcStr"),g=d(a=>typeof a=="number"&&a===(a|0),"__isInt");class O extends Error{static{d(this,"SQLite3Error")}constructor(...u){let _;if(u.length)if(g(u[0]))if(_=u[0],u.length===1)super(m(u[0]));else{const k=m(_);typeof u[1]=="object"?super(k,u[1]):(u[0]=k+":",super(u.join(" ")))}else u.length===2&&typeof u[1]=="object"?super(...u):super(u.join(" "));this.resultCode=_||i.SQLITE_ERROR,this.name="SQLite3Error"}}O.toss=(...a)=>{throw new O(...a)};const L=O.toss;r.wasmfsOpfsDir&&!/^\/[^/]+$/.test(r.wasmfsOpfsDir)&&L("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const j=d(a=>typeof a!="bigint"&&a===(a|0)&&a<=2147483647&&a>=-2147483648,"isInt32"),Q=d(function a(u){return a._max||(a._max=BigInt("0x7fffffffffffffff"),a._min=~a._max),u>=a._min&&u<=a._max},"f"),I=d(a=>a>=-0x7fffffffn-1n&&a<=0x7fffffffn,"bigIntFits32"),E=d(function a(u){return a._min||(a._min=Number.MIN_SAFE_INTEGER,a._max=Number.MAX_SAFE_INTEGER),u>=a._min&&u<=a._max},"f"),C=d(a=>a&&a.constructor&&j(a.constructor.BYTES_PER_ELEMENT)?a:!1,"isTypedArray"),y=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,w=d(a=>a.buffer instanceof y,"isSharedTypedArray"),x=d((a,u,_)=>w(a)?a.slice(u,_):a.subarray(u,_),"typedArrayPart"),R=d(a=>a&&(a instanceof Uint8Array||a instanceof Int8Array||a instanceof ArrayBuffer),"isBindableTypedArray"),D=d(a=>a&&(a instanceof Uint8Array||a instanceof Int8Array||a instanceof ArrayBuffer),"isSQLableTypedArray"),S=d(a=>R(a)||L("Value is not of a supported TypedArray type."),"affirmBindableTypedArray"),P=new TextDecoder("utf-8"),K=d(function(a,u,_){return P.decode(x(a,u,_))},"typedArrayToString"),c=d(function(a){return D(a)?K(a instanceof ArrayBuffer?new Uint8Array(a):a):Array.isArray(a)?a.join(""):(l.isPtr(a)&&(a=l.cstrToJs(a)),a)},"flexibleString");class p extends Error{static{d(this,"WasmAllocError")}constructor(...u){u.length===2&&typeof u[1]=="object"?super(...u):u.length?super(u.join(" ")):super("Allocation failed."),this.resultCode=i.SQLITE_NOMEM,this.name="WasmAllocError"}}p.toss=(...a)=>{throw new p(...a)},Object.assign(i,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(a,u,_,k,z,ee,ne,se,U)=>{},sqlite3_create_function:(a,u,_,k,z,ee,ne,se)=>{},sqlite3_create_window_function:(a,u,_,k,z,ee,ne,se,U,q)=>{},sqlite3_prepare_v3:(a,u,_,k,z,ee)=>{},sqlite3_prepare_v2:(a,u,_,k,z)=>{},sqlite3_exec:(a,u,_,k,z)=>{},sqlite3_randomness:(a,u)=>{}});const b={affirmBindableTypedArray:S,flexibleString:c,bigIntFits32:I,bigIntFits64:Q,bigIntFitsDouble:E,isBindableTypedArray:R,isInt32:j,isSQLableTypedArray:D,isTypedArray:C,typedArrayToString:K,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:w,toss:function(...a){throw new Error(a.join(" "))},toss3:L,typedArrayPart:x,affirmDbHeader:function(a){a instanceof ArrayBuffer&&(a=new Uint8Array(a));const u="SQLite format 3";u.length>a.byteLength&&L("Input does not contain an SQLite3 database header.");for(let _=0;_<u.length;++_)u.charCodeAt(_)!==a[_]&&L("Input does not contain an SQLite3 database header.")},affirmIsDb:function(a){a instanceof ArrayBuffer&&(a=new Uint8Array(a));const u=a.byteLength;(u<512||u%512!==0)&&L("Byte array size",u,"is invalid for an SQLite3 db."),b.affirmDbHeader(a)}};Object.assign(l,{ptrSizeof:r.wasmPtrSizeof||4,ptrIR:r.wasmPtrIR||"i32",bigIntEnabled:!!r.bigIntEnabled,exports:r.exports||L("Missing API config.exports (WASM module exports)."),memory:r.memory||r.exports.memory||L("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),l.allocFromTypedArray=function(a){a instanceof ArrayBuffer&&(a=new Uint8Array(a)),S(a);const u=l.alloc(a.byteLength||1);return l.heapForSize(a.constructor).set(a.byteLength?a:[0],u),u};{const a=r.allocExportName,u=r.deallocExportName,_=r.reallocExportName;for(const k of[a,u,_])l.exports[k]instanceof Function||L("Missing required exports[",k,"] function.");l.alloc=d(function k(z){return k.impl(z)||p.toss("Failed to allocate",z," bytes.")},"f"),l.alloc.impl=l.exports[a],l.realloc=d(function k(z,ee){const ne=k.impl(z,ee);return ee?ne||p.toss("Failed to reallocate",ee," bytes."):0},"f"),l.realloc.impl=l.exports[_],l.dealloc=l.exports[u]}l.compileOptionUsed=d(function a(u){if(arguments.length){if(Array.isArray(u)){const _={};return u.forEach(k=>{_[k]=i.sqlite3_compileoption_used(k)}),_}else if(typeof u=="object")return Object.keys(u).forEach(_=>{u[_]=i.sqlite3_compileoption_used(_)}),u}else{if(a._result)return a._result;a._opt||(a._rx=/^([^=]+)=(.+)/,a._rxInt=/^-?\d+$/,a._opt=function(ne,se){const U=a._rx.exec(ne);se[0]=U?U[1]:ne,se[1]=U?a._rxInt.test(U[2])?+U[2]:U[2]:!0});const _={},k=[0,0];let z=0,ee;for(;ee=i.sqlite3_compileoption_get(z++);)a._opt(ee,k),_[k[0]]=k[1];return a._result=_}return typeof u=="string"?!!i.sqlite3_compileoption_used(u):!1},"f"),l.pstack=Object.assign(Object.create(null),{restore:l.exports.sqlite3__wasm_pstack_restore,alloc:function(a){return typeof a=="string"&&!(a=l.sizeofIR(a))&&p.toss("Invalid value for pstack.alloc(",arguments[0],")"),l.exports.sqlite3__wasm_pstack_alloc(a)||p.toss("Could not allocate",a,"bytes from the pstack.")},allocChunks:function(a,u){typeof u=="string"&&!(u=l.sizeofIR(u))&&p.toss("Invalid size value for allocChunks(",arguments[1],")");const _=l.pstack.alloc(a*u),k=[];let z=0,ee=0;for(;z<a;++z,ee+=u)k.push(_+ee);return k},allocPtr:(a=1,u=!0)=>a===1?l.pstack.alloc(u?8:l.ptrSizeof):l.pstack.allocChunks(a,u?8:l.ptrSizeof),call:function(a){const u=l.pstack.pointer;try{return a(h)}finally{l.pstack.restore(u)}}}),Object.defineProperties(l.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:l.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:l.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:l.exports.sqlite3__wasm_pstack_remaining}}),i.sqlite3_randomness=(...a)=>{if(a.length===1&&b.isTypedArray(a[0])&&a[0].BYTES_PER_ELEMENT===1){const u=a[0];if(u.byteLength===0)return l.exports.sqlite3_randomness(0,0),u;const _=l.pstack.pointer;try{let k=u.byteLength,z=0;const ee=l.exports.sqlite3_randomness,ne=l.heap8u(),se=k<512?k:512,U=l.pstack.alloc(se);do{const q=k>se?se:k;ee(q,U),u.set(x(ne,U,U+q),z),k-=q,z+=q}while(k>0)}catch(k){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",k)}finally{l.pstack.restore(_)}return u}l.exports.sqlite3_randomness(...a)};let B;if(i.sqlite3_wasmfs_opfs_dir=function(){if(B!==void 0)return B;const a=r.wasmfsOpfsDir;if(!a||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return B="";try{return a&&l.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],a)===0?B=a:B=""}catch{return B=""}},i.sqlite3_wasmfs_filename_is_persistent=function(a){const u=i.sqlite3_wasmfs_opfs_dir();return u&&a?a.startsWith(u+"/"):!1},i.sqlite3_js_db_uses_vfs=function(a,u,_=0){try{const k=i.sqlite3_vfs_find(u);return k?a?k===i.sqlite3_js_db_vfs(a,_)?k:!1:k===i.sqlite3_vfs_find(0)?k:!1:!1}catch{return!1}},i.sqlite3_js_vfs_list=function(){const a=[];let u=i.sqlite3_vfs_find(0);for(;u;){const _=new i.sqlite3_vfs(u);a.push(l.cstrToJs(_.$zName)),u=_.$pNext,_.dispose()}return a},i.sqlite3_js_db_export=function(a,u=0){a=l.xWrap.testConvertArg("sqlite3*",a),a||L("Invalid sqlite3* argument."),l.bigIntEnabled||L("BigInt64 support is not enabled.");const _=l.scopedAllocPush();let k;try{const z=l.scopedAlloc(8+l.ptrSizeof),ee=z+8,ne=u?l.isPtr(u)?u:l.scopedAllocCString(""+u):0;let se=l.exports.sqlite3__wasm_db_serialize(a,ne,ee,z,0);se&&L("Database serialization failed with code",h.capi.sqlite3_js_rc_str(se)),k=l.peekPtr(ee);const U=l.peek(z,"i64");return se=U?l.heap8u().slice(k,k+Number(U)):new Uint8Array,se}finally{k&&l.exports.sqlite3_free(k),l.scopedAllocPop(_)}},i.sqlite3_js_db_vfs=(a,u=0)=>b.sqlite3__wasm_db_vfs(a,u),i.sqlite3_js_aggregate_context=(a,u)=>i.sqlite3_aggregate_context(a,u)||(u?p.toss("Cannot allocate",u,"bytes for sqlite3_aggregate_context()"):0),i.sqlite3_js_posix_create_file=function(a,u,_){let k;u&&l.isPtr(u)?k=u:u instanceof ArrayBuffer||u instanceof Uint8Array?(k=l.allocFromTypedArray(u),(arguments.length<3||!b.isInt32(_)||_<0)&&(_=u.byteLength)):O.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!b.isInt32(_)||_<0)&&O.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const z=b.sqlite3__wasm_posix_create_file(a,k,_);z&&O.toss("Creation of file failed with sqlite3 result code",i.sqlite3_js_rc_str(z))}finally{l.dealloc(k)}},i.sqlite3_js_vfs_create_file=function(a,u,_,k){r.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let z;_?(l.isPtr(_)?z=_:_ instanceof ArrayBuffer&&(_=new Uint8Array(_)),_ instanceof Uint8Array?(z=l.allocFromTypedArray(_),(arguments.length<4||!b.isInt32(k)||k<0)&&(k=_.byteLength)):O.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):z=0,(!b.isInt32(k)||k<0)&&(l.dealloc(z),O.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const ee=b.sqlite3__wasm_vfs_create_file(a,u,z,k);ee&&O.toss("Creation of file failed with sqlite3 result code",i.sqlite3_js_rc_str(ee))}finally{l.dealloc(z)}},i.sqlite3_js_sql_to_string=a=>{if(typeof a=="string")return a;const u=c(v);return u===v?void 0:u},b.isUIThread()){const a=d(function(u){const _=Object.create(null);return _.prefix="kvvfs-"+u,_.stores=[],(u==="session"||u==="")&&_.stores.push(globalThis.sessionStorage),(u==="local"||u==="")&&_.stores.push(globalThis.localStorage),_},"__kvvfsInfo");i.sqlite3_js_kvvfs_clear=function(u=""){let _=0;const k=a(u);return k.stores.forEach(z=>{const ee=[];let ne;for(ne=0;ne<z.length;++ne){const se=z.key(ne);se.startsWith(k.prefix)&&ee.push(se)}ee.forEach(se=>z.removeItem(se)),_+=ee.length}),_},i.sqlite3_js_kvvfs_size=function(u=""){let _=0;const k=a(u);return k.stores.forEach(z=>{let ee;for(ee=0;ee<z.length;++ee){const ne=z.key(ee);ne.startsWith(k.prefix)&&(_+=ne.length,_+=z.getItem(ne).length)}}),_*2}}i.sqlite3_db_config=function(a,u,..._){switch(this.s||(this.s=l.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=l.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=l.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),u){case i.SQLITE_DBCONFIG_ENABLE_FKEY:case i.SQLITE_DBCONFIG_ENABLE_TRIGGER:case i.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case i.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case i.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case i.SQLITE_DBCONFIG_ENABLE_QPSG:case i.SQLITE_DBCONFIG_TRIGGER_EQP:case i.SQLITE_DBCONFIG_RESET_DATABASE:case i.SQLITE_DBCONFIG_DEFENSIVE:case i.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case i.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case i.SQLITE_DBCONFIG_DQS_DML:case i.SQLITE_DBCONFIG_DQS_DDL:case i.SQLITE_DBCONFIG_ENABLE_VIEW:case i.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case i.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case i.SQLITE_DBCONFIG_STMT_SCANSTATUS:case i.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(a,u,_[0],_[1]||0);case i.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(a,u,_[0],_[1],_[2]);case i.SQLITE_DBCONFIG_MAINDBNAME:return this.s(a,u,_[0]);default:return i.SQLITE_MISUSE}}.bind(Object.create(null)),i.sqlite3_value_to_js=function(a,u=!0){let _;const k=i.sqlite3_value_type(a);switch(k){case i.SQLITE_INTEGER:l.bigIntEnabled?(_=i.sqlite3_value_int64(a),b.bigIntFitsDouble(_)&&(_=Number(_))):_=i.sqlite3_value_double(a);break;case i.SQLITE_FLOAT:_=i.sqlite3_value_double(a);break;case i.SQLITE_TEXT:_=i.sqlite3_value_text(a);break;case i.SQLITE_BLOB:{const z=i.sqlite3_value_bytes(a),ee=i.sqlite3_value_blob(a);z&&!ee&&h.WasmAllocError.toss("Cannot allocate memory for blob argument of",z,"byte(s)"),_=z?l.heap8u().slice(ee,ee+Number(z)):null;break}case i.SQLITE_NULL:_=null;break;default:u&&L(i.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",k),_=void 0}return _},i.sqlite3_values_to_js=function(a,u,_=!0){let k;const z=[];for(k=0;k<a;++k)z.push(i.sqlite3_value_to_js(l.peekPtr(u+l.ptrSizeof*k),_));return z},i.sqlite3_result_error_js=function(a,u){u instanceof p?i.sqlite3_result_error_nomem(a):i.sqlite3_result_error(a,""+u,-1)},i.sqlite3_result_js=function(a,u){if(u instanceof Error){i.sqlite3_result_error_js(a,u);return}try{switch(typeof u){case"undefined":break;case"boolean":i.sqlite3_result_int(a,u?1:0);break;case"bigint":b.bigIntFits32(u)?i.sqlite3_result_int(a,Number(u)):b.bigIntFitsDouble(u)?i.sqlite3_result_double(a,Number(u)):l.bigIntEnabled?b.bigIntFits64(u)?i.sqlite3_result_int64(a,u):L("BigInt value",u.toString(),"is too BigInt for int64."):L("BigInt value",u.toString(),"is too BigInt.");break;case"number":{let _;b.isInt32(u)?_=i.sqlite3_result_int:l.bigIntEnabled&&Number.isInteger(u)&&b.bigIntFits64(BigInt(u))?_=i.sqlite3_result_int64:_=i.sqlite3_result_double,_(a,u);break}case"string":{const[_,k]=l.allocCString(u,!0);i.sqlite3_result_text(a,_,k,i.SQLITE_WASM_DEALLOC);break}case"object":if(u===null){i.sqlite3_result_null(a);break}else if(b.isBindableTypedArray(u)){const _=l.allocFromTypedArray(u);i.sqlite3_result_blob(a,_,u.byteLength,i.SQLITE_WASM_DEALLOC);break}default:L("Don't not how to handle this UDF result value:",typeof u,u)}}catch(_){i.sqlite3_result_error_js(a,_)}},i.sqlite3_column_js=function(a,u,_=!0){const k=i.sqlite3_column_value(a,u);return k===0?void 0:i.sqlite3_value_to_js(k,_)};const f=function(a,u,_){_=i[_],this.ptr?l.pokePtr(this.ptr,0):this.ptr=l.allocPtr();const k=_(a,u,this.ptr);if(k)return O.toss(k,arguments[2]+"() failed with code "+k);const z=l.peekPtr(this.ptr);return z?i.sqlite3_value_to_js(z,!0):void 0}.bind(Object.create(null));i.sqlite3_preupdate_new_js=(a,u)=>f(a,u,"sqlite3_preupdate_new"),i.sqlite3_preupdate_old_js=(a,u)=>f(a,u,"sqlite3_preupdate_old"),i.sqlite3changeset_new_js=(a,u)=>f(a,u,"sqlite3changeset_new"),i.sqlite3changeset_old_js=(a,u)=>f(a,u,"sqlite3changeset_old");const h={WasmAllocError:p,SQLite3Error:O,capi:i,util:b,wasm:l,config:r,version:Object.create(null),client:void 0,asyncPostInit:d(async function a(){if(a.isReady instanceof Promise)return a.isReady;let u=e.initializersAsync;delete e.initializersAsync;const _=d(async()=>(h.__isUnderTest||(delete h.util,delete h.StructBinder),h),"postInit"),k=d(ee=>{throw r.error("an async sqlite3 initializer failed:",ee),ee},"catcher");if(!u||!u.length)return a.isReady=_().catch(k);u=u.map(ee=>ee instanceof Function?async ne=>ee(h):ee),u.push(_);let z=Promise.resolve(h);for(;u.length;)z=z.then(u.shift());return a.isReady=z.catch(k)},"ff"),scriptInfo:void 0};try{e.initializers.forEach(a=>{a(h)})}catch(a){throw console.error("sqlite3 bootstrap initializer threw:",a),a}return delete e.initializers,e.sqlite3=h,h},"sqlite3ApiBootstrap"),globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(e){e.bigIntEnabled===void 0&&(e.bigIntEnabled=!!globalThis.BigInt64Array);const s=d((...c)=>{throw new Error(c.join(" "))},"toss");e.exports||Object.defineProperty(e,"exports",{enumerable:!0,configurable:!0,get:()=>e.instance&&e.instance.exports});const r=e.pointerIR||"i32",i=e.ptrSizeof=r==="i32"?4:r==="i64"?8:s("Unhandled ptrSizeof:",r),l=Object.create(null);l.heapSize=0,l.memory=null,l.freeFuncIndexes=[],l.scopedAlloc=[],l.utf8Decoder=new TextDecoder,l.utf8Encoder=new TextEncoder("utf-8"),e.sizeofIR=c=>{switch(c){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return i;default:return(""+c).endsWith("*")?i:void 0}};const m=d(function(){if(!l.memory)l.memory=e.memory instanceof WebAssembly.Memory?e.memory:e.exports.memory;else if(l.heapSize===l.memory.buffer.byteLength)return l;const c=l.memory.buffer;return l.HEAP8=new Int8Array(c),l.HEAP8U=new Uint8Array(c),l.HEAP16=new Int16Array(c),l.HEAP16U=new Uint16Array(c),l.HEAP32=new Int32Array(c),l.HEAP32U=new Uint32Array(c),e.bigIntEnabled&&(l.HEAP64=new BigInt64Array(c),l.HEAP64U=new BigUint64Array(c)),l.HEAP32F=new Float32Array(c),l.HEAP64F=new Float64Array(c),l.heapSize=c.byteLength,l},"heapWrappers");e.heap8=()=>m().HEAP8,e.heap8u=()=>m().HEAP8U,e.heap16=()=>m().HEAP16,e.heap16u=()=>m().HEAP16U,e.heap32=()=>m().HEAP32,e.heap32u=()=>m().HEAP32U,e.heapForSize=function(c,p=!0){const b=l.memory&&l.heapSize===l.memory.buffer.byteLength?l:m();switch(c){case Int8Array:return b.HEAP8;case Uint8Array:return b.HEAP8U;case Int16Array:return b.HEAP16;case Uint16Array:return b.HEAP16U;case Int32Array:return b.HEAP32;case Uint32Array:return b.HEAP32U;case 8:return p?b.HEAP8U:b.HEAP8;case 16:return p?b.HEAP16U:b.HEAP16;case 32:return p?b.HEAP32U:b.HEAP32;case 64:if(b.HEAP64)return p?b.HEAP64U:b.HEAP64;break;default:if(e.bigIntEnabled){if(c===globalThis.BigUint64Array)return b.HEAP64U;if(c===globalThis.BigInt64Array)return b.HEAP64;break}}s("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},e.functionTable=function(){return e.exports.__indirect_function_table},e.functionEntry=function(c){const p=e.functionTable();return c<p.length?p.get(c):void 0},e.jsFuncToWasm=d(function c(p,b){if(c._||(c._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(h,a,u){u<128?h[a](u):h[a](u%128|128,u>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(h){const a=c._.rxJSig.exec(h);return a?a[2]:h.substr(1)},letterType:h=>c._.sigTypes[h]||s("Invalid signature letter:",h),pushSigType:(h,a)=>h.push(c._.typeCodes[c._.letterType(a)])}),typeof p=="string"){const h=b;b=p,p=h}const B=c._.sigParams(b),f=[1,96];c._.uleb128Encode(f,"push",B.length);for(const h of B)c._.pushSigType(f,h);return b[0]==="v"?f.push(0):(f.push(1),c._.pushSigType(f,b[0])),c._.uleb128Encode(f,"unshift",f.length),f.unshift(0,97,115,109,1,0,0,0,1),f.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(f)),{e:{f:p}}).exports.f},"f");const g=d(function(p,b,B){if(B&&!l.scopedAlloc.length&&s("No scopedAllocPush() scope is active."),typeof p=="string"){const u=b;b=p,p=u}(typeof b!="string"||!(p instanceof Function))&&s("Invalid arguments: expecting (function,signature) or (signature,function).");const f=e.functionTable(),h=f.length;let a;for(;l.freeFuncIndexes.length&&(a=l.freeFuncIndexes.pop(),f.get(a));){a=null;continue}a||(a=h,f.grow(1));try{return f.set(a,p),B&&l.scopedAlloc[l.scopedAlloc.length-1].push(a),a}catch(u){if(!(u instanceof TypeError))throw a===h&&l.freeFuncIndexes.push(h),u}try{const u=e.jsFuncToWasm(p,b);f.set(a,u),B&&l.scopedAlloc[l.scopedAlloc.length-1].push(a)}catch(u){throw a===h&&l.freeFuncIndexes.push(h),u}return a},"f");e.installFunction=(c,p)=>g(c,p,!1),e.scopedInstallFunction=(c,p)=>g(c,p,!0),e.uninstallFunction=function(c){if(!c&&c!==0)return;const p=l.freeFuncIndexes,b=e.functionTable();p.push(c);const B=b.get(c);return b.set(c,null),B},e.peek=d(function(p,b="i8"){b.endsWith("*")&&(b=r);const B=l.memory&&l.heapSize===l.memory.buffer.byteLength?l:m(),f=Array.isArray(p)?[]:void 0;let h;do{switch(f&&(p=arguments[0].shift()),b){case"i1":case"i8":h=B.HEAP8[p>>0];break;case"i16":h=B.HEAP16[p>>1];break;case"i32":h=B.HEAP32[p>>2];break;case"float":case"f32":h=B.HEAP32F[p>>2];break;case"double":case"f64":h=Number(B.HEAP64F[p>>3]);break;case"i64":if(e.bigIntEnabled){h=BigInt(B.HEAP64[p>>3]);break}default:s("Invalid type for peek():",b)}f&&f.push(h)}while(f&&arguments[0].length);return f||h},"f"),e.poke=function(c,p,b="i8"){b.endsWith("*")&&(b=r);const B=l.memory&&l.heapSize===l.memory.buffer.byteLength?l:m();for(const f of Array.isArray(c)?c:[c])switch(b){case"i1":case"i8":B.HEAP8[f>>0]=p;continue;case"i16":B.HEAP16[f>>1]=p;continue;case"i32":B.HEAP32[f>>2]=p;continue;case"float":case"f32":B.HEAP32F[f>>2]=p;continue;case"double":case"f64":B.HEAP64F[f>>3]=p;continue;case"i64":if(B.HEAP64){B.HEAP64[f>>3]=BigInt(p);continue}default:s("Invalid type for poke(): "+b)}return this},e.peekPtr=(...c)=>e.peek(c.length===1?c[0]:c,r),e.pokePtr=(c,p=0)=>e.poke(c,p,r),e.peek8=(...c)=>e.peek(c.length===1?c[0]:c,"i8"),e.poke8=(c,p)=>e.poke(c,p,"i8"),e.peek16=(...c)=>e.peek(c.length===1?c[0]:c,"i16"),e.poke16=(c,p)=>e.poke(c,p,"i16"),e.peek32=(...c)=>e.peek(c.length===1?c[0]:c,"i32"),e.poke32=(c,p)=>e.poke(c,p,"i32"),e.peek64=(...c)=>e.peek(c.length===1?c[0]:c,"i64"),e.poke64=(c,p)=>e.poke(c,p,"i64"),e.peek32f=(...c)=>e.peek(c.length===1?c[0]:c,"f32"),e.poke32f=(c,p)=>e.poke(c,p,"f32"),e.peek64f=(...c)=>e.peek(c.length===1?c[0]:c,"f64"),e.poke64f=(c,p)=>e.poke(c,p,"f64"),e.getMemValue=e.peek,e.getPtrValue=e.peekPtr,e.setMemValue=e.poke,e.setPtrValue=e.pokePtr,e.isPtr32=c=>typeof c=="number"&&c===(c|0)&&c>=0,e.isPtr=e.isPtr32,e.cstrlen=function(c){if(!c||!e.isPtr(c))return null;const p=m().HEAP8U;let b=c;for(;p[b]!==0;++b);return b-c};const O=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,L=d(function(c,p,b){return l.utf8Decoder.decode(c.buffer instanceof O?c.slice(p,b):c.subarray(p,b))},"__utf8Decode");e.cstrToJs=function(c){const p=e.cstrlen(c);return p?L(m().HEAP8U,c,c+p):p===null?p:""},e.jstrlen=function(c){if(typeof c!="string")return null;const p=c.length;let b=0;for(let B=0;B<p;++B){let f=c.charCodeAt(B);f>=55296&&f<=57343&&(f=65536+((f&1023)<<10)|c.charCodeAt(++B)&1023),f<=127?++b:f<=2047?b+=2:f<=65535?b+=3:b+=4}return b},e.jstrcpy=function(c,p,b=0,B=-1,f=!0){if((!p||!(p instanceof Int8Array)&&!(p instanceof Uint8Array))&&s("jstrcpy() target must be an Int8Array or Uint8Array."),B<0&&(B=p.length-b),!(B>0)||!(b>=0))return 0;let h=0,a=c.length;const u=b,_=b+B-(f?1:0);for(;h<a&&b<_;++h){let k=c.charCodeAt(h);if(k>=55296&&k<=57343&&(k=65536+((k&1023)<<10)|c.charCodeAt(++h)&1023),k<=127){if(b>=_)break;p[b++]=k}else if(k<=2047){if(b+1>=_)break;p[b++]=192|k>>6,p[b++]=128|k&63}else if(k<=65535){if(b+2>=_)break;p[b++]=224|k>>12,p[b++]=128|k>>6&63,p[b++]=128|k&63}else{if(b+3>=_)break;p[b++]=240|k>>18,p[b++]=128|k>>12&63,p[b++]=128|k>>6&63,p[b++]=128|k&63}}return f&&(p[b++]=0),b-u},e.cstrncpy=function(c,p,b){if((!c||!p)&&s("cstrncpy() does not accept NULL strings."),b<0)b=e.cstrlen(strPtr)+1;else if(!(b>0))return 0;const B=e.heap8u();let f=0,h;for(;f<b&&(h=B[p+f]);++f)B[c+f]=h;return f<b&&(B[c+f++]=0),f},e.jstrToUintArray=(c,p=!1)=>l.utf8Encoder.encode(p?c+"\0":c);const j=d((c,p)=>{(!(c.alloc instanceof Function)||!(c.dealloc instanceof Function))&&s("Object is missing alloc() and/or dealloc() function(s)","required by",p+"().")},"__affirmAlloc"),Q=d(function(c,p,b,B){if(j(e,B),typeof c!="string")return null;{const f=l.utf8Encoder.encode(c),h=b(f.length+1),a=m().HEAP8U;return a.set(f,h),a[h+f.length]=0,p?[h,f.length]:h}},"__allocCStr");e.allocCString=(c,p=!1)=>Q(c,p,e.alloc,"allocCString()"),e.scopedAllocPush=function(){j(e,"scopedAllocPush");const c=[];return l.scopedAlloc.push(c),c},e.scopedAllocPop=function(c){j(e,"scopedAllocPop");const p=arguments.length?l.scopedAlloc.indexOf(c):l.scopedAlloc.length-1;p<0&&s("Invalid state object for scopedAllocPop()."),arguments.length===0&&(c=l.scopedAlloc[p]),l.scopedAlloc.splice(p,1);for(let b;b=c.pop();)e.functionEntry(b)?e.uninstallFunction(b):e.dealloc(b)},e.scopedAlloc=function(c){l.scopedAlloc.length||s("No scopedAllocPush() scope is active.");const p=e.alloc(c);return l.scopedAlloc[l.scopedAlloc.length-1].push(p),p},Object.defineProperty(e.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>l.scopedAlloc.length,set:()=>s("The 'active' property is read-only.")}),e.scopedAllocCString=(c,p=!1)=>Q(c,p,e.scopedAlloc,"scopedAllocCString()");const I=d(function(c,p){const b=e[c?"scopedAlloc":"alloc"]((p.length+1)*e.ptrSizeof);let B=0;return p.forEach(f=>{e.pokePtr(b+e.ptrSizeof*B++,e[c?"scopedAllocCString":"allocCString"](""+f))}),e.pokePtr(b+e.ptrSizeof*B,0),b},"__allocMainArgv");e.scopedAllocMainArgv=c=>I(!0,c),e.allocMainArgv=c=>I(!1,c),e.cArgvToJs=(c,p)=>{const b=[];for(let B=0;B<c;++B){const f=e.peekPtr(p+e.ptrSizeof*B);b.push(f?e.cstrToJs(f):null)}return b},e.scopedAllocCall=function(c){e.scopedAllocPush();try{return c()}finally{e.scopedAllocPop()}};const E=d(function(c,p,b){j(e,b);const B=p?"i64":r;let f=e[b](c*(p?8:i));if(e.poke(f,0,B),c===1)return f;const h=[f];for(let a=1;a<c;++a)f+=p?8:i,h[a]=f,e.poke(f,0,B);return h},"__allocPtr");e.allocPtr=(c=1,p=!0)=>E(c,p,"alloc"),e.scopedAllocPtr=(c=1,p=!0)=>E(c,p,"scopedAlloc"),e.xGet=function(c){return e.exports[c]||s("Cannot find exported symbol:",c)};const C=d((c,p)=>s(c+"() requires",p,"argument(s)."),"__argcMismatch");e.xCall=function(c,...p){const b=c instanceof Function?c:e.xGet(c);return b instanceof Function||s("Exported symbol",c,"is not a function."),b.length!==p.length&&C(b===c?b.name:c,b.length),arguments.length===2&&Array.isArray(arguments[1])?b.apply(null,arguments[1]):b.apply(null,p)},l.xWrap=Object.create(null),l.xWrap.convert=Object.create(null),l.xWrap.convert.arg=new Map,l.xWrap.convert.result=new Map;const y=l.xWrap.convert.arg,w=l.xWrap.convert.result;e.bigIntEnabled&&y.set("i64",c=>BigInt(c));const x=r==="i32"?c=>c|0:c=>BigInt(c)|BigInt(0);y.set("i32",x).set("i16",c=>(c|0)&65535).set("i8",c=>(c|0)&255).set("f32",c=>Number(c).valueOf()).set("float",y.get("f32")).set("f64",y.get("f32")).set("double",y.get("f64")).set("int",y.get("i32")).set("null",c=>c).set(null,y.get("null")).set("**",x).set("*",x),w.set("*",x).set("pointer",x).set("number",c=>Number(c)).set("void",c=>{}).set("null",c=>c).set(null,w.get("null"));{const c=["i8","i16","i32","int","f32","float","f64","double"];e.bigIntEnabled&&c.push("i64");const p=y.get(r);for(const b of c)y.set(b+"*",p),w.set(b+"*",p),w.set(b,y.get(b)||s("Missing arg converter:",b))}const R=d(function(c){return typeof c=="string"?e.scopedAllocCString(c):c?x(c):null},"__xArgString");y.set("string",R).set("utf8",R).set("pointer",R),w.set("string",c=>e.cstrToJs(c)).set("utf8",w.get("string")).set("string:dealloc",c=>{try{return c?e.cstrToJs(c):null}finally{e.dealloc(c)}}).set("utf8:dealloc",w.get("string:dealloc")).set("json",c=>JSON.parse(e.cstrToJs(c))).set("json:dealloc",c=>{try{return c?JSON.parse(e.cstrToJs(c)):null}finally{e.dealloc(c)}});const D=class{static{d(this,"AbstractArgAdapter")}constructor(c){this.name=c.name||"unnamed adapter"}convertArg(c,p,b){s("AbstractArgAdapter must be subclassed.")}};y.FuncPtrAdapter=class ke extends D{static{d(this,"FuncPtrAdapter")}constructor(p){super(p),y.FuncPtrAdapter.warnOnUse,this.name=p.name||"unnamed",this.signature=p.signature,p.contextKey instanceof Function&&(this.contextKey=p.contextKey,p.bindScope||(p.bindScope="context")),this.bindScope=p.bindScope||s("FuncPtrAdapter options requires a bindScope (explicit or implied)."),ke.bindScopes.indexOf(p.bindScope)<0&&s("Invalid options.bindScope ("+p.bindMod+") for FuncPtrAdapter. Expecting one of: ("+ke.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=p.callProxy instanceof Function?p.callProxy:void 0}contextKey(p,b){return this}contextMap(p){const b=this.__cmap||(this.__cmap=new Map);let B=b.get(p);return B===void 0&&b.set(p,B=[]),B}convertArg(p,b,B){let f=this.singleton;if(!f&&this.isContext&&(f=this.contextMap(this.contextKey(b,B))),f&&f[0]===p)return f[1];if(p instanceof Function){this.callProxy&&(p=this.callProxy(p));const h=g(p,this.signature,this.isTransient);if(ke.debugFuncInstall&&ke.debugOut("FuncPtrAdapter installed",this,this.contextKey(b,B),"@"+h,p),f){if(f[1]){ke.debugFuncInstall&&ke.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(b,B),"@"+f[1],p);try{l.scopedAlloc[l.scopedAlloc.length-1].push(f[1])}catch{}}f[0]=p,f[1]=h}return h}else if(e.isPtr(p)||p===null||p===void 0){if(f&&f[1]&&f[1]!==p){ke.debugFuncInstall&&ke.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(b,B),"@"+f[1],p);try{l.scopedAlloc[l.scopedAlloc.length-1].push(f[1])}catch{}f[0]=f[1]=p|0}return p||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},y.FuncPtrAdapter.warnOnUse=!1,y.FuncPtrAdapter.debugFuncInstall=!1,y.FuncPtrAdapter.debugOut=console.debug.bind(console),y.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const S=d(c=>y.get(c)||s("Argument adapter not found:",c),"__xArgAdapterCheck"),P=d(c=>w.get(c)||s("Result adapter not found:",c),"__xResultAdapterCheck");l.xWrap.convertArg=(c,...p)=>S(c)(...p),l.xWrap.convertArgNoCheck=(c,...p)=>y.get(c)(...p),l.xWrap.convertResult=(c,p)=>c===null?p:c?P(c)(p):void 0,l.xWrap.convertResultNoCheck=(c,p)=>c===null?p:c?w.get(c)(p):void 0,e.xWrap=function(c,p,...b){arguments.length===3&&Array.isArray(arguments[2])&&(b=arguments[2]),e.isPtr(c)&&(c=e.functionEntry(c)||s("Function pointer not found in WASM function table."));const B=c instanceof Function,f=B?c:e.xGet(c);if(B&&(c=f.name||"unnamed function"),b.length!==f.length&&C(c,f.length),p===null&&f.length===0)return f;p!=null&&P(p);for(const a of b)a instanceof D?y.set(a,(...u)=>a.convertArg(...u)):S(a);const h=l.xWrap;return f.length===0?(...a)=>a.length?C(c,f.length):h.convertResult(p,f.call(null)):function(...a){a.length!==f.length&&C(c,f.length);const u=e.scopedAllocPush();try{let _=0;for(;_<a.length;++_)a[_]=h.convertArgNoCheck(b[_],a[_],a,_);return h.convertResultNoCheck(p,f.apply(null,a))}finally{e.scopedAllocPop(u)}}};const K=d(function(c,p,b,B,f,h){if(typeof b=="string"){if(p===1)return h.get(b);if(p===2){if(B)B instanceof Function||s(f,"requires a function argument.");else return delete h.get(b),c;return h.set(b,B),c}}s("Invalid arguments to",f)},"__xAdapter");return e.xWrap.resultAdapter=d(function c(p,b){return K(c,arguments.length,p,b,"resultAdapter()",w)},"f"),e.xWrap.argAdapter=d(function c(p,b){return K(c,arguments.length,p,b,"argAdapter()",y)},"f"),e.xWrap.FuncPtrAdapter=y.FuncPtrAdapter,e.xCallWrapped=function(c,p,b,...B){return Array.isArray(arguments[3])&&(B=arguments[3]),e.xWrap(c,p,b||[]).apply(null,B||[])},e.xWrap.testConvertArg=l.xWrap.convertArg,e.xWrap.testConvertResult=l.xWrap.convertResult,e},globalThis.WhWasmUtilInstaller.yawl=function(e){const s=d(()=>fetch(e.uri,{credentials:"same-origin"}),"wfetch"),r=this,i=d(function(m){if(e.wasmUtilTarget){const g=d((...L)=>{throw new Error(L.join(" "))},"toss"),O=e.wasmUtilTarget;if(O.module=m.module,O.instance=m.instance,O.instance.exports.memory||(O.memory=e.imports&&e.imports.env&&e.imports.env.memory||g("Missing 'memory' object!")),!O.alloc&&m.instance.exports.malloc){const L=m.instance.exports;O.alloc=function(j){return L.malloc(j)||g("Allocation of",j,"bytes failed.")},O.dealloc=function(j){L.free(j)}}r(O)}return e.onload&&e.onload(m,e),m},"finalThen");return WebAssembly.instantiateStreaming?d(function(){return WebAssembly.instantiateStreaming(s(),e.imports||{}).then(i)},"loadWasmStreaming"):d(function(){return s().then(g=>g.arrayBuffer()).then(g=>WebAssembly.instantiate(g,e.imports||{})).then(i)},"loadWasmOldSchool")}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=d(function e(s){const r=d((...F)=>{throw new Error(F.join(" "))},"toss");!(s.heap instanceof WebAssembly.Memory)&&!(s.heap instanceof Function)&&r("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(F){s[F]instanceof Function||r("Config option '"+F+"' must be a function.")});const i=e,l=s.heap instanceof Function?s.heap:()=>new Uint8Array(s.heap.buffer),m=s.alloc,g=s.dealloc,O=s.log||console.log.bind(console),L=s.memberPrefix||"",j=s.memberSuffix||"",Q=s.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!s.bigIntEnabled,I=globalThis.BigInt,E=globalThis.BigInt64Array,C=s.ptrSizeof||4,y=s.ptrIR||"i32";i.debugFlags||(i.__makeDebugFlags=function(F=null){F&&F.__flags&&(F=F.__flags);const V=d(function G(X){return arguments.length===0?G.__flags:(X<0?(delete G.__flags.getter,delete G.__flags.setter,delete G.__flags.alloc,delete G.__flags.dealloc):(G.__flags.getter=(1&X)!==0,G.__flags.setter=(2&X)!==0,G.__flags.alloc=(4&X)!==0,G.__flags.dealloc=(8&X)!==0),G._flags)},"f");return Object.defineProperty(V,"__flags",{iterable:!1,writable:!1,value:Object.create(F)}),F||V(0),V},i.debugFlags=i.__makeDebugFlags());const w=function(){const F=new ArrayBuffer(2);return new DataView(F).setInt16(0,256,!0),new Int16Array(F)[0]===256}(),x=d(F=>F[1]==="(","isFuncSig"),R=d(F=>F==="P","isAutoPtrSig"),D=d(F=>x(F)?"p":F[0],"sigLetter"),S=d(function(F){switch(D(F)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return y;case"j":return"i64";case"f":return"float";case"d":return"double"}r("Unhandled signature IR:",F)},"sigIR"),P=E?()=>!0:()=>r("BigInt64Array is not available."),K=d(function(F){switch(D(F)){case"p":case"P":case"s":{switch(C){case 4:return"getInt32";case 8:return P()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return P()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}r("Unhandled DataView getter for signature:",F)},"sigDVGetter"),c=d(function(F){switch(D(F)){case"p":case"P":case"s":{switch(C){case 4:return"setInt32";case 8:return P()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return P()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}r("Unhandled DataView setter for signature:",F)},"sigDVSetter"),p=d(function(F){switch(D(F)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return P()&&I;case"p":case"P":case"s":switch(C){case 4:return Number;case 8:return P()&&I}break}r("Unhandled DataView set wrapper for signature:",F)},"sigDVSetWrapper"),b=d((F,V)=>F+"::"+V,"sPropName"),B=d(function(F,V){return()=>r(b(F,V),"is read-only.")},"__propThrowOnSet"),f=new WeakMap,h="(pointer-is-external)",a=d(function(F,V,G){if(G||(G=f.get(V)),G){if(f.delete(V),Array.isArray(V.ondispose)){let X;for(;X=V.ondispose.shift();)try{X instanceof Function?X.call(V):X instanceof te?X.dispose():typeof X=="number"&&g(X)}catch(ce){F.structName}}else if(V.ondispose instanceof Function)try{V.ondispose()}catch(X){F.structName}delete V.ondispose,F.debugFlags.__flags.dealloc&&O("debug.dealloc:",V[h]?"EXTERNAL":"",F.structName,"instance:",F.structInfo.sizeof,"bytes @"+G),V[h]||g(G)}},"__freeStruct"),u=d(F=>({configurable:!1,writable:!1,iterable:!1,value:F}),"rop"),_=d(function(F,V,G){let X=!G;G?Object.defineProperty(V,h,u(G)):(G=m(F.structInfo.sizeof),G||r("Allocation of",F.structName,"structure failed."));try{F.debugFlags.__flags.alloc&&O("debug.alloc:",X?"":"EXTERNAL",F.structName,"instance:",F.structInfo.sizeof,"bytes @"+G),X&&l().fill(0,G,G+F.structInfo.sizeof),f.set(V,G)}catch(ce){throw a(F,V,G),ce}},"__allocStruct"),k=d(function(){const F=this.pointer;return F?new Uint8Array(l().slice(F,F+this.structInfo.sizeof)):null},"__memoryDump"),ee=u(d(F=>L+F+j,"__memberKey")),ne=d(function(F,V,G=!0){let X=F.members[V];if(!X&&(L||j)){for(const ce of Object.values(F.members))if(ce.key===V){X=ce;break}!X&&G&&r(b(F.name,V),"is not a mapped struct member.")}return X},"__lookupMember"),se=d(function F(V,G,X=!1){F._||(F._=de=>de.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const ce=ne(V.structInfo,G,!0);return X?F._(ce.signature):ce.signature},"f"),U={configurable:!1,enumerable:!1,get:function(){return f.get(this)},set:()=>r("Cannot assign the 'pointer' property of a struct.")},q=u(function(){const F=[];for(const V of Object.keys(this.structInfo.members))F.push(this.memberKey(V));return F}),T=new TextDecoder("utf-8"),M=new TextEncoder,H=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Z=d(function(F,V,G){return T.decode(F.buffer instanceof H?F.slice(V,G):F.subarray(V,G))},"__utf8Decode"),re=d(function(F,V,G=!1){const X=ne(F.structInfo,V,G);return X&&X.signature.length===1&&X.signature[0]==="s"?X:!1},"__memberIsString"),A=d(function(F){F.signature!=="s"&&r("Invalid member type signature for C-string value:",JSON.stringify(F))},"__affirmCStringSignature"),N=d(function(V,G){const X=ne(V.structInfo,G,!0);A(X);const ce=V[X.key];if(!ce)return null;let de=ce;const fe=l();for(;fe[de]!==0;++de);return ce===de?"":Z(fe,ce,de)},"f"),W=d(function(F,...V){F.ondispose?Array.isArray(F.ondispose)||(F.ondispose=[F.ondispose]):F.ondispose=[],F.ondispose.push(...V)},"__addOnDispose"),J=d(function(F){const V=M.encode(F),G=m(V.length+1);G||r("Allocation error while duplicating string:",F);const X=l();return X.set(V,G),X[G+V.length]=0,G},"__allocCString"),$=d(function(F,V,G){const X=ne(F.structInfo,V,!0);A(X);const ce=J(G);return F[X.key]=ce,W(F,ce),F},"__setMemberCString"),te=d(function(V,G){arguments[2]!==u&&r("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:u(V),structInfo:u(G)})},"ctor");te.prototype=Object.create(null,{dispose:u(function(){a(this.constructor,this)}),lookupMember:u(function(F,V=!0){return ne(this.structInfo,F,V)}),memberToJsString:u(function(F){return N(this,F)}),memberIsString:u(function(F,V=!0){return re(this,F,V)}),memberKey:ee,memberKeys:q,memberSignature:u(function(F,V=!1){return se(this,F,V)}),memoryDump:u(k),pointer:U,setMemberCString:u(function(F,V){return $(this,F,V)})}),Object.assign(te.prototype,{addOnDispose:function(...F){return W(this,...F),this}}),Object.defineProperties(te,{allocCString:u(J),isA:u(F=>F instanceof te),hasExternalPointer:u(F=>F instanceof te&&!!F[h]),memberKey:ee});const le=d(F=>Number.isFinite(F)||F instanceof(I||Number),"isNumericValue"),Y=d(function F(V,G,X){if(!F._){F._={getters:{},setters:{},sw:{}};const be=["i","c","C","p","P","s","f","d","v()"];Q&&be.push("j"),be.forEach(function(xe){F._.getters[xe]=K(xe),F._.setters[xe]=c(xe),F._.sw[xe]=p(xe)});const Un=/^[ipPsjfdcC]$/,Wn=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;F.sigCheck=function(xe,Qn,Ot,rt){Object.prototype.hasOwnProperty.call(xe,Ot)&&r(xe.structName,"already has a property named",Ot+"."),Un.test(rt)||Wn.test(rt)||r("Malformed signature for",b(xe.structName,Qn)+":",rt)}}const ce=V.memberKey(G);F.sigCheck(V.prototype,G,ce,X.signature),X.key=ce,X.name=G;const de=D(X.signature),fe=b(V.prototype.structName,ce),pe=V.prototype.debugFlags.__flags,Ne=Object.create(null);Ne.configurable=!1,Ne.enumerable=!1,Ne.get=function(){pe.getter&&O("debug.getter:",F._.getters[de],"for",S(de),fe,"@",this.pointer,"+",X.offset,"sz",X.sizeof);let be=new DataView(l().buffer,this.pointer+X.offset,X.sizeof)[F._.getters[de]](0,w);return pe.getter&&O("debug.getter:",fe,"result =",be),be},X.readOnly?Ne.set=B(V.prototype.structName,ce):Ne.set=function(be){if(pe.setter&&O("debug.setter:",F._.setters[de],"for",S(de),fe,"@",this.pointer,"+",X.offset,"sz",X.sizeof,be),this.pointer||r("Cannot set struct property on disposed instance."),be===null)be=0;else for(;!le(be);){if(R(X.signature)&&be instanceof te){be=be.pointer||0,pe.setter&&O("debug.setter:",fe,"resolved to",be);break}r("Invalid value for pointer-type",fe+".")}new DataView(l().buffer,this.pointer+X.offset,X.sizeof)[F._.setters[de]](0,F._.sw[de](be),w)},Object.defineProperty(V.prototype,ce,Ne)},"f"),he=d(function F(V,G){arguments.length===1?(G=V,V=G.name):G.name||(G.name=V),V||r("Struct name is required.");let X=!1;Object.keys(G.members).forEach(fe=>{const pe=G.members[fe];pe.sizeof?pe.sizeof===1?pe.signature==="c"||pe.signature==="C"||r("Unexpected sizeof==1 member",b(G.name,fe),"with signature",pe.signature):(pe.sizeof%4!==0&&r(V,"member",fe,"sizeof is not aligned. sizeof="+pe.sizeof),pe.offset%4!==0&&r(V,"member",fe,"offset is not aligned. offset="+pe.offset)):r(V,"member",fe,"is missing sizeof."),(!X||X.offset<pe.offset)&&(X=pe)}),X?G.sizeof<X.offset+X.sizeof&&r("Invalid struct config:",V,"max member offset ("+X.offset+") ","extends past end of struct (sizeof="+G.sizeof+")."):r("No member property descriptions found.");const ce=u(i.__makeDebugFlags(F.debugFlags)),de=d(function fe(pe){this instanceof fe?arguments.length?((pe!==(pe|0)||pe<=0)&&r("Invalid pointer value for",V,"constructor."),_(fe,this,pe)):_(fe,this):r("The",V,"constructor may only be called via 'new'.")},"StructCtor");return Object.defineProperties(de,{debugFlags:ce,isA:u(fe=>fe instanceof de),memberKey:ee,memberKeys:q,methodInfoForKey:u(function(fe){}),structInfo:u(G),structName:u(V)}),de.prototype=new te(V,G,u),Object.defineProperties(de.prototype,{debugFlags:ce,constructor:u(de)}),Object.keys(G.members).forEach(fe=>Y(de,fe,G.members[fe])),de},"StructBinder");return he.StructType=te,he.config=s,he.allocCString=J,he.debugFlags||(he.debugFlags=i.__makeDebugFlags(i.debugFlags)),he},"StructBinderFactory"),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=d((...y)=>{throw new Error(y.join(" "))},"toss");e.SQLite3Error.toss;const r=e.capi,i=e.wasm,l=e.util;if(globalThis.WhWasmUtilInstaller(i),delete globalThis.WhWasmUtilInstaller,i.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(y,w)=>y[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:y=>y[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new i.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:y=>{let w;return(x,R,D,S)=>{try{const P=i.cArgvToJs(R,D);return w||(w=i.cArgvToJs(R,S)),y(P,w)|0}catch(P){return P.resultCode||r.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_progress_handler",void 0,["sqlite3*","int",new i.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(y,w)=>y[0]}),"*"]],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:y=>y[0]}),"*"]],["sqlite3_set_authorizer","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(y,w)=>y[0],callProxy:y=>(w,x,R,D,S,P)=>{try{return R=R&&i.cstrToJs(R),D=D&&i.cstrToJs(D),S=S&&i.cstrToJs(S),P=P&&i.cstrToJs(P),y(w,x,R,D,S,P)||0}catch(K){return K.resultCode||r.SQLITE_ERROR}}}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new i.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(y,w)=>y[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_isexplain","int",["sqlite3_stmt*"]],["sqlite3_stmt_readonly","int",["sqlite3_stmt*"]],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new i.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(y,w)=>y[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],i.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:y=>y[0],callProxy:y=>(w,x,R,D,S,P,K)=>{y(w,x,R,i.cstrToJs(D),i.cstrToJs(S),P,K)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:y=>y[0],callProxy:y=>(w,x,R,D,S)=>{y(w,x,i.cstrToJs(R),i.cstrToJs(D),S)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]],i.bigIntEnabled&&i.exports.sqlite3changegroup_add){const y={signature:"i(ps)",callProxy:w=>(x,R)=>{try{return w(x,i.cstrToJs(R))|0}catch(D){return D.resultCode||r.SQLITE_ERROR}}};i.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...y}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...y}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...y}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...y}),new i.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new i.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new i.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new i.xWrap.FuncPtrAdapter({name:"xFilter",...y,contextKey:(w,x)=>w[0]}),"*"]])}i.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],e.StructBinder=globalThis.Jaccwabyt({heap:i.heap8u,alloc:i.alloc,dealloc:i.dealloc,bigIntEnabled:i.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const y=i.xWrap.argAdapter("string");i.xWrap.argAdapter("string:flexible",S=>y(l.flexibleString(S))),i.xWrap.argAdapter("string:static",function(S){return i.isPtr(S)?S:(S=""+S,this[S]||(this[S]=i.allocCString(S)))}.bind(Object.create(null)));const w=i.xWrap.argAdapter("*"),x=d(function(){},"nilType");i.xWrap.argAdapter("sqlite3_filename",w)("sqlite3_context*",w)("sqlite3_value*",w)("void*",w)("sqlite3_changegroup*",w)("sqlite3_changeset_iter*",w)("sqlite3_session*",w)("sqlite3_stmt*",S=>w(S instanceof(e?.oo1?.Stmt||x)?S.pointer:S))("sqlite3*",S=>w(S instanceof(e?.oo1?.DB||x)?S.pointer:S))("sqlite3_index_info*",S=>w(S instanceof(r.sqlite3_index_info||x)?S.pointer:S))("sqlite3_module*",S=>w(S instanceof(r.sqlite3_module||x)?S.pointer:S))("sqlite3_vfs*",S=>typeof S=="string"?r.sqlite3_vfs_find(S)||e.SQLite3Error.toss(r.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",S):w(S instanceof(r.sqlite3_vfs||x)?S.pointer:S));const R=i.xWrap.resultAdapter("*");i.xWrap.resultAdapter("sqlite3*",R)("sqlite3_context*",R)("sqlite3_stmt*",R)("sqlite3_value*",R)("sqlite3_vfs*",R)("void*",R),i.exports.sqlite3_step.length===0&&(i.xWrap.doArgcCheck=!1,e.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const S of i.bindingSignatures)r[S[0]]=i.xWrap.apply(null,S);for(const S of i.bindingSignatures.wasmInternal)l[S[0]]=i.xWrap.apply(null,S);const D=d(function(S){return()=>s(S+"() is unavailable due to lack","of BigInt support in this build.")},"fI64Disabled");for(const S of i.bindingSignatures.int64)r[S[0]]=i.bigIntEnabled?i.xWrap.apply(null,S):D(S[0]);if(delete i.bindingSignatures,i.exports.sqlite3__wasm_db_error){const S=i.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");l.sqlite3__wasm_db_error=function(P,K,c){return K instanceof e.WasmAllocError?(K=r.SQLITE_NOMEM,c=0):K instanceof Error&&(c=c||""+K,K=K.resultCode||r.SQLITE_ERROR),P?S(P,K,c):K}}else l.sqlite3__wasm_db_error=function(S,P,K){return P}}{const y=i.xCall("sqlite3__wasm_enum_json");y||s("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),i.ctype=JSON.parse(i.cstrToJs(y));const w=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];i.bigIntEnabled&&w.push("serialize","session","vtab");for(const D of w)for(const S of Object.entries(i.ctype[D]))r[S[0]]=S[1];i.functionEntry(r.SQLITE_WASM_DEALLOC)||s("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+r.SQLITE_WASM_DEALLOC+").");const x=Object.create(null);for(const D of["resultCodes"])for(const S of Object.entries(i.ctype[D]))x[S[1]]=S[0];r.sqlite3_js_rc_str=D=>x[D];const R=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!l.isUIThread(),sqlite3_index_info:!i.bigIntEnabled,sqlite3_index_constraint:!i.bigIntEnabled,sqlite3_index_orderby:!i.bigIntEnabled,sqlite3_index_constraint_usage:!i.bigIntEnabled});for(const D of i.ctype.structs)R[D.name]||(r[D.name]=e.StructBinder(D));if(r.sqlite3_index_info){for(const D of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])r.sqlite3_index_info[D]=r[D],delete r[D];r.sqlite3_vtab_config=i.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const m=d((y,w,x)=>l.sqlite3__wasm_db_error(y,r.SQLITE_MISUSE,w+"() requires "+x+" argument"+(x===1?"":"s")+"."),"__dbArgcMismatch"),g=d(y=>l.sqlite3__wasm_db_error(y,r.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),"__errEncoding"),O=d(y=>i.xWrap.argAdapter("sqlite3*")(y),"__argPDb"),L=d(y=>i.isPtr(y)?i.cstrToJs(y):y,"__argStr"),j=function(y,w){y=O(y);let x=this.dbMap.get(y);if(w)!x&&w>0&&this.dbMap.set(y,x=Object.create(null));else return this.dbMap.delete(y),x;return x}.bind(Object.assign(Object.create(null),{dbMap:new Map}));j.addCollation=function(y,w){const x=j(y,1);x.collation||(x.collation=new Set),x.collation.add(L(w).toLowerCase())},j._addUDF=function(y,w,x,R){w=L(w).toLowerCase();let D=R.get(w);D||R.set(w,D=new Set),D.add(x<0?-1:x)},j.addFunction=function(y,w,x){const R=j(y,1);R.udf||(R.udf=new Map),this._addUDF(y,w,x,R.udf)},j.addWindowFunc=function(y,w,x){const R=j(y,1);R.wudf||(R.wudf=new Map),this._addUDF(y,w,x,R.wudf)},j.cleanup=function(y){y=O(y);const w=[y];for(const D of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const S=i.exports[D];w.length=S.length;try{r[D](...w)}catch(P){D+""}}const x=j(y,0);if(!x)return;if(x.collation){for(const D of x.collation)try{r.sqlite3_create_collation_v2(y,D,r.SQLITE_UTF8,0,0,0)}catch{}delete x.collation}let R;for(R=0;R<2;++R){const D=R?x.wudf:x.udf;if(!D)continue;const S=R?r.sqlite3_create_window_function:r.sqlite3_create_function_v2;for(const P of D){const K=P[0],c=P[1],p=[y,K,0,r.SQLITE_UTF8,0,0,0,0,0];R&&p.push(0);for(const b of c)try{p[2]=b,S.apply(null,p)}catch{}c.clear()}D.clear()}delete x.udf,delete x.wudf};{const y=i.xWrap("sqlite3_close_v2","int","sqlite3*");r.sqlite3_close_v2=function(w){if(arguments.length!==1)return m(w,"sqlite3_close_v2",1);if(w)try{j.cleanup(w)}catch{}return y(w)}}if(r.sqlite3session_table_filter){const y=i.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);r.sqlite3session_delete=function(w){if(arguments.length!==1)return m(pDb,"sqlite3session_delete",1);w&&r.sqlite3session_table_filter(w,0,0),y(w)}}{const y=d((x,R)=>"argv["+R+"]:"+x[0]+":"+i.cstrToJs(x[1]).toLowerCase(),"contextKey"),w=i.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new i.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:y}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:y})]);r.sqlite3_create_collation_v2=function(x,R,D,S,P,K){if(arguments.length!==6)return m(x,"sqlite3_create_collation_v2",6);if(!(D&15))D|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(D&15))return g(x);try{const c=w(x,R,D,S,P,K);return c===0&&P instanceof Function&&j.addCollation(x,R),c}catch(c){return l.sqlite3__wasm_db_error(x,c)}},r.sqlite3_create_collation=(x,R,D,S,P)=>arguments.length===5?r.sqlite3_create_collation_v2(x,R,D,S,P,0):m(x,"sqlite3_create_collation",5)}{const y=d(function(D,S){return D[0]+":"+(D[2]<0?-1:D[2])+":"+S+":"+i.cstrToJs(D[1]).toLowerCase()},"contextKey"),w=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:y,callProxy:D=>(S,P,K)=>{try{D(S,...r.sqlite3_values_to_js(P,K))}catch(c){r.sqlite3_result_error_js(S,c)}}},xFinalAndValue:{signature:"v(p)",contextKey:y,callProxy:D=>S=>{try{r.sqlite3_result_js(S,D(S))}catch(P){r.sqlite3_result_error_js(S,P)}}},xFunc:{signature:"v(pip)",contextKey:y,callProxy:D=>(S,P,K)=>{try{r.sqlite3_result_js(S,D(S,...r.sqlite3_values_to_js(P,K)))}catch(c){r.sqlite3_result_error_js(S,c)}}},xDestroy:{signature:"v(p)",contextKey:y,callProxy:D=>S=>{try{D(S)}catch(P){console.error("UDF xDestroy method threw:",P)}}}}),x=i.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new i.xWrap.FuncPtrAdapter({name:"xFunc",...w.xFunc}),new i.xWrap.FuncPtrAdapter({name:"xStep",...w.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xFinal",...w.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",...w.xDestroy})]),R=i.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new i.xWrap.FuncPtrAdapter({name:"xStep",...w.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xFinal",...w.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xValue",...w.xFinalAndValue}),new i.xWrap.FuncPtrAdapter({name:"xInverse",...w.xInverseAndStep}),new i.xWrap.FuncPtrAdapter({name:"xDestroy",...w.xDestroy})]);r.sqlite3_create_function_v2=d(function D(S,P,K,c,p,b,B,f,h){if(D.length!==arguments.length)return m(S,"sqlite3_create_function_v2",D.length);if(!(c&15))c|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(c&15))return g(S);try{const a=x(S,P,K,c,p,b,B,f,h);return a===0&&(b instanceof Function||B instanceof Function||f instanceof Function||h instanceof Function)&&j.addFunction(S,P,K),a}catch(a){return console.error("sqlite3_create_function_v2() setup threw:",a),l.sqlite3__wasm_db_error(S,a,"Creation of UDF threw: "+a)}},"f"),r.sqlite3_create_function=d(function D(S,P,K,c,p,b,B,f){return D.length===arguments.length?r.sqlite3_create_function_v2(S,P,K,c,p,b,B,f,0):m(S,"sqlite3_create_function",D.length)},"f"),r.sqlite3_create_window_function=d(function D(S,P,K,c,p,b,B,f,h,a){if(D.length!==arguments.length)return m(S,"sqlite3_create_window_function",D.length);if(!(c&15))c|=r.SQLITE_UTF8;else if(r.SQLITE_UTF8!==(c&15))return g(S);try{const u=R(S,P,K,c,p,b,B,f,h,a);return u===0&&(b instanceof Function||B instanceof Function||f instanceof Function||h instanceof Function||a instanceof Function)&&j.addWindowFunc(S,P,K),u}catch(u){return console.error("sqlite3_create_window_function() setup threw:",u),l.sqlite3__wasm_db_error(S,u,"Creation of UDF threw: "+u)}},"f"),r.sqlite3_create_function_v2.udfSetResult=r.sqlite3_create_function.udfSetResult=r.sqlite3_create_window_function.udfSetResult=r.sqlite3_result_js,r.sqlite3_create_function_v2.udfConvertArgs=r.sqlite3_create_function.udfConvertArgs=r.sqlite3_create_window_function.udfConvertArgs=r.sqlite3_values_to_js,r.sqlite3_create_function_v2.udfSetError=r.sqlite3_create_function.udfSetError=r.sqlite3_create_window_function.udfSetError=r.sqlite3_result_error_js}{const y=d((x,R)=>(typeof x=="string"?R=-1:l.isSQLableTypedArray(x)?(R=x.byteLength,x=l.typedArrayToString(x instanceof ArrayBuffer?new Uint8Array(x):x)):Array.isArray(x)&&(x=x.join(""),R=-1),[x,R]),"__flexiString"),w={basic:i.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:i.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};r.sqlite3_prepare_v3=d(function x(R,D,S,P,K,c){if(x.length!==arguments.length)return m(R,"sqlite3_prepare_v3",x.length);const[p,b]=y(D,S);switch(typeof p){case"string":return w.basic(R,p,b,P,K,null);case"number":return w.full(R,p,b,P,K,c);default:return l.sqlite3__wasm_db_error(R,r.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},"f"),r.sqlite3_prepare_v2=d(function x(R,D,S,P,K){return x.length===arguments.length?r.sqlite3_prepare_v3(R,D,S,0,P,K):m(R,"sqlite3_prepare_v2",x.length)},"f")}{const y=i.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),w=i.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);r.sqlite3_bind_text=d(function x(R,D,S,P,K){if(x.length!==arguments.length)return m(r.sqlite3_db_handle(R),"sqlite3_bind_text",x.length);if(i.isPtr(S)||S===null)return y(R,D,S,P,K);S instanceof ArrayBuffer?S=new Uint8Array(S):Array.isArray(pMem)&&(S=pMem.join(""));let c,p;try{if(l.isSQLableTypedArray(S))c=i.allocFromTypedArray(S),p=S.byteLength;else if(typeof S=="string")[c,p]=i.allocCString(S);else return l.sqlite3__wasm_db_error(r.sqlite3_db_handle(R),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return y(R,D,c,p,r.SQLITE_WASM_DEALLOC)}catch(b){return i.dealloc(c),l.sqlite3__wasm_db_error(r.sqlite3_db_handle(R),b)}},"f"),r.sqlite3_bind_blob=d(function x(R,D,S,P,K){if(x.length!==arguments.length)return m(r.sqlite3_db_handle(R),"sqlite3_bind_blob",x.length);if(i.isPtr(S)||S===null)return w(R,D,S,P,K);S instanceof ArrayBuffer?S=new Uint8Array(S):Array.isArray(S)&&(S=S.join(""));let c,p;try{if(l.isBindableTypedArray(S))c=i.allocFromTypedArray(S),p=P>=0?P:S.byteLength;else if(typeof S=="string")[c,p]=i.allocCString(S);else return l.sqlite3__wasm_db_error(r.sqlite3_db_handle(R),r.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return w(R,D,c,p,r.SQLITE_WASM_DEALLOC)}catch(b){return i.dealloc(c),l.sqlite3__wasm_db_error(r.sqlite3_db_handle(R),b)}},"f")}r.sqlite3_config=function(y,...w){if(arguments.length<2)return r.SQLITE_MISUSE;switch(y){case r.SQLITE_CONFIG_COVERING_INDEX_SCAN:case r.SQLITE_CONFIG_MEMSTATUS:case r.SQLITE_CONFIG_SMALL_MALLOC:case r.SQLITE_CONFIG_SORTERREF_SIZE:case r.SQLITE_CONFIG_STMTJRNL_SPILL:case r.SQLITE_CONFIG_URI:return i.exports.sqlite3__wasm_config_i(y,w[0]);case r.SQLITE_CONFIG_LOOKASIDE:return i.exports.sqlite3__wasm_config_ii(y,w[0],w[1]);case r.SQLITE_CONFIG_MEMDB_MAXSIZE:return i.exports.sqlite3__wasm_config_j(y,w[0]);case r.SQLITE_CONFIG_GETMALLOC:case r.SQLITE_CONFIG_GETMUTEX:case r.SQLITE_CONFIG_GETPCACHE2:case r.SQLITE_CONFIG_GETPCACHE:case r.SQLITE_CONFIG_HEAP:case r.SQLITE_CONFIG_LOG:case r.SQLITE_CONFIG_MALLOC:case r.SQLITE_CONFIG_MMAP_SIZE:case r.SQLITE_CONFIG_MULTITHREAD:case r.SQLITE_CONFIG_MUTEX:case r.SQLITE_CONFIG_PAGECACHE:case r.SQLITE_CONFIG_PCACHE2:case r.SQLITE_CONFIG_PCACHE:case r.SQLITE_CONFIG_PCACHE_HDRSZ:case r.SQLITE_CONFIG_PMASZ:case r.SQLITE_CONFIG_SERIALIZED:case r.SQLITE_CONFIG_SINGLETHREAD:case r.SQLITE_CONFIG_SQLLOG:case r.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return r.SQLITE_NOTFOUND}};{const y=new Set;r.sqlite3_auto_extension=function(w){if(w instanceof Function)w=i.installFunction("i(ppp)",w);else if(arguments.length!==1||!i.isPtr(w))return r.SQLITE_MISUSE;const x=i.exports.sqlite3_auto_extension(w);return w!==arguments[0]&&(x===0?y.add(w):i.uninstallFunction(w)),x},r.sqlite3_cancel_auto_extension=function(w){return!w||arguments.length!==1||!i.isPtr(w)?0:i.exports.sqlite3_cancel_auto_extension(w)},r.sqlite3_reset_auto_extension=function(){i.exports.sqlite3_reset_auto_extension();for(const w of y)i.uninstallFunction(w);y.clear()}}const Q=r.sqlite3_vfs_find("kvvfs");if(Q)if(l.isUIThread()){const y=new r.sqlite3_kvvfs_methods(i.exports.sqlite3__wasm_kvvfs_methods());delete r.sqlite3_kvvfs_methods;const w=i.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,x=i.pstack,R=d(S=>i.peek(S)===115?sessionStorage:localStorage,"kvvfsStorage"),D={xRead:(S,P,K,c)=>{const p=x.pointer,b=i.scopedAllocPush();try{const B=w(S,P);if(!B)return-3;const f=i.cstrToJs(B),h=R(S).getItem(f);if(!h)return-1;const a=h.length;if(c<=0)return a;if(c===1)return i.poke(K,0),a;const u=i.scopedAllocCString(h);return c>a+1&&(c=a+1),i.heap8u().copyWithin(K,u,u+c-1),i.poke(K+c-1,0),c-1}catch(B){return console.error("kvstorageRead()",B),-2}finally{x.restore(p),i.scopedAllocPop(b)}},xWrite:(S,P,K)=>{const c=x.pointer;try{const p=w(S,P);if(!p)return 1;const b=i.cstrToJs(p);return R(S).setItem(b,i.cstrToJs(K)),0}catch(p){return console.error("kvstorageWrite()",p),r.SQLITE_IOERR}finally{x.restore(c)}},xDelete:(S,P)=>{const K=x.pointer;try{const c=w(S,P);return c?(R(S).removeItem(i.cstrToJs(c)),0):1}catch(c){return console.error("kvstorageDelete()",c),r.SQLITE_IOERR}finally{x.restore(K)}}};for(const S of Object.keys(D))y[y.memberKey(S)]=i.installFunction(y.memberSignature(S),D[S])}else r.sqlite3_vfs_unregister(Q);i.xWrap.FuncPtrAdapter.warnOnUse=!0;const I=e.StructBinder,E=d(function y(w,x,R,D=y.installMethodArgcCheck){if(w instanceof I.StructType?!(R instanceof Function)&&!i.isPtr(R)&&s("Usage errror: expecting a Function or WASM pointer to one."):s("Usage error: target object is-not-a StructType."),arguments.length===1)return(c,p)=>y(w,c,p,D);y.argcProxy||(y.argcProxy=function(c,p,b,B){return function(...f){return b.length!==arguments.length&&s("Argument mismatch for",c.structInfo.name+"::"+p+": Native signature is:",B),b.apply(this,f)}},y.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((c,p)=>{if(typeof c=="number")try{i.uninstallFunction(c)}catch{}}),delete this.ondispose.__removeFuncList)});const S=w.memberSignature(x);S.length<2&&s("Member",x,"does not have a function pointer signature:",S);const P=w.memberKey(x),K=D&&!i.isPtr(R)?y.argcProxy(w,P,R,S):R;if(i.isPtr(K))K&&!i.functionEntry(K)&&s("Pointer",K,"is not a WASM function table entry."),w[P]=K;else{const c=i.installFunction(K,w.memberSignature(x,!0));w[P]=c,(!w.ondispose||!w.ondispose.__removeFuncList)&&(w.addOnDispose("ondispose.__removeFuncList handler",y.removeFuncList),w.ondispose.__removeFuncList=[]),w.ondispose.__removeFuncList.push(P,c)}return(c,p)=>y(w,c,p,D)},"callee");E.installMethodArgcCheck=!1;const C=d(function(y,w,x=E.installMethodArgcCheck){const R=new Map;for(const D of Object.keys(w)){const S=w[D],P=R.get(S);if(P){const K=y.memberKey(D);y[K]=y[y.memberKey(P)]}else E(y,D,S,x),R.set(S,D)}return y},"installMethods");I.StructType.prototype.installMethod=d(function(w,x,R=E.installMethodArgcCheck){return arguments.length<3&&w&&typeof w=="object"?C(this,...arguments):E(this,...arguments)},"callee"),I.StructType.prototype.installMethods=function(y,w=E.installMethodArgcCheck){return C(this,y,w)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){e.version={libVersion:"3.46.0",libVersionNumber:3046e3,sourceId:"2024-05-23 13:25:27 96c92aba00c8375bc32fafcdf12429c58bd8aabfcadab6683e35bbb9cdebf19e",downloadVersion:346e4}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=d((...f)=>{throw new e.SQLite3Error(...f)},"toss3"),r=e.capi,i=e.wasm,l=e.util,m=new WeakMap,g=new WeakMap,O=d((f,h,a)=>{const u=Object.getOwnPropertyDescriptor(f,h);return u?u.value:a},"getOwnOption"),L=d(function(f,h){return h&&(f instanceof E&&(f=f.pointer),s(h,"sqlite3 result code",h+":",f?r.sqlite3_errmsg(f):r.sqlite3_errstr(h))),arguments[0]},"checkSqlite3Rc"),j=i.installFunction("i(ippp)",function(f,h,a,u){r.SQLITE_TRACE_STMT===f&&(""+ ++this.counter+h,i.cstrToJs(u))}.bind({counter:0})),Q=Object.create(null),I=d(function f(...h){if(!f._name2vfs){f._name2vfs=Object.create(null);const q=typeof importScripts=="function"?T=>s("The VFS for",T,"is only available in the main window thread."):!1;f._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:q||(()=>"local")},f._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:q||(()=>"session")}}const a=f.normalizeArgs(...h);let u=a.filename,_=a.vfs,k=a.flags;(typeof u!="string"&&typeof u!="number"||typeof k!="string"||_&&typeof _!="string"&&typeof _!="number")&&(e.config.error("Invalid DB ctor args",a,arguments),s("Invalid arguments for DB constructor."));let z=typeof u=="number"?i.cstrToJs(u):u;const ee=f._name2vfs[z];ee&&(_=ee.vfs,u=z=ee.filename(z));let ne,se=0;k.indexOf("c")>=0&&(se|=r.SQLITE_OPEN_CREATE|r.SQLITE_OPEN_READWRITE),k.indexOf("w")>=0&&(se|=r.SQLITE_OPEN_READWRITE),se===0&&(se|=r.SQLITE_OPEN_READONLY),se|=r.SQLITE_OPEN_EXRESCODE;const U=i.pstack.pointer;try{const q=i.pstack.allocPtr();let T=r.sqlite3_open_v2(u,q,se,_||0);ne=i.peekPtr(q),L(ne,T),r.sqlite3_extended_result_codes(ne,1),k.indexOf("t")>=0&&r.sqlite3_trace_v2(ne,r.SQLITE_TRACE_STMT,j,ne)}catch(q){throw ne&&r.sqlite3_close_v2(ne),q}finally{i.pstack.restore(U)}this.filename=z,m.set(this,ne),g.set(this,Object.create(null));try{const q=r.sqlite3_js_db_vfs(ne)||s("Internal error: cannot get VFS for new db handle."),T=Q[q];T&&(T instanceof Function?T(this,e):L(ne,r.sqlite3_exec(ne,T,0,0,0)))}catch(q){throw this.close(),q}},"ctor");I.setVfsPostOpenSql=function(f,h){Q[f]=h},I.normalizeArgs=function(f=":memory:",h="c",a=null){const u={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(u,arguments[0]),u.flags===void 0&&(u.flags="c"),u.vfs===void 0&&(u.vfs=null),u.filename===void 0&&(u.filename=":memory:")):(u.filename=f,u.flags=h,u.vfs=a),u};const E=d(function(...f){I.apply(this,f)},"DB");E.dbCtorHelper=I;const C={null:1,number:2,string:3,boolean:4,blob:5};C.undefined==C.null,i.bigIntEnabled&&(C.bigint=C.number);const y=d(function(){C!==arguments[2]&&s(r.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],m.set(this,arguments[1]),this.parameterCount=r.sqlite3_bind_parameter_count(this.pointer)},"Stmt"),w=d(function(f){return f.pointer||s("DB has been closed."),f},"affirmDbOpen"),x=d(function(f,h){return(h!==(h|0)||h<0||h>=f.columnCount)&&s("Column index",h,"is out of range."),f},"affirmColIndex"),R=d(function(f,h){const a=Object.create(null);switch(a.opt=Object.create(null),h.length){case 1:typeof h[0]=="string"||l.isSQLableTypedArray(h[0])||Array.isArray(h[0])?a.sql=h[0]:h[0]&&typeof h[0]=="object"&&(a.opt=h[0],a.sql=a.opt.sql);break;case 2:a.sql=h[0],a.opt=h[1];break;default:s("Invalid argument count for exec().")}a.sql=l.flexibleString(a.sql),typeof a.sql!="string"&&s("Missing SQL argument or unsupported SQL value type.");const u=a.opt;switch(u.returnValue){case"resultRows":u.resultRows||(u.resultRows=[]),a.returnVal=()=>u.resultRows;break;case"saveSql":u.saveSql||(u.saveSql=[]),a.returnVal=()=>u.saveSql;break;case void 0:case"this":a.returnVal=()=>f;break;default:s("Invalid returnValue value:",u.returnValue)}if(!u.callback&&!u.returnValue&&u.rowMode!==void 0&&(u.resultRows||(u.resultRows=[]),a.returnVal=()=>u.resultRows),u.callback||u.resultRows)switch(u.rowMode===void 0?"array":u.rowMode){case"object":a.cbArg=(_,k)=>{k.columnNames||(k.columnNames=_.getColumnNames([]));const z=_.get([]),ee=Object.create(null);for(const ne in k.columnNames)ee[k.columnNames[ne]]=z[ne];return ee};break;case"array":a.cbArg=_=>_.get([]);break;case"stmt":Array.isArray(u.resultRows)&&s("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),a.cbArg=_=>_;break;default:if(l.isInt32(u.rowMode)){a.cbArg=_=>_.get(u.rowMode);break}else if(typeof u.rowMode=="string"&&u.rowMode.length>1&&u.rowMode[0]==="$"){const _=u.rowMode.substr(1);a.cbArg=k=>{const z=k.get(Object.create(null))[_];return z===void 0?s(r.SQLITE_NOTFOUND,"exec(): unknown result column:",_):z};break}s("Invalid rowMode:",u.rowMode)}return a},"parseExecArgs"),D=d((f,h,a,...u)=>{const _=f.prepare(h);try{const k=_.bind(a).step()?_.get(...u):void 0;return _.reset(),k}finally{_.finalize()}},"__selectFirstRow"),S=d((f,h,a,u)=>f.exec({sql:h,bind:a,rowMode:u,returnValue:"resultRows"}),"__selectAll");E.checkRc=(f,h)=>L(f,h),E.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return w(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const f=this.pointer;if(Object.keys(g.get(this)).forEach((h,a)=>{if(a&&a.pointer)try{a.finalize()}catch{}}),m.delete(this),g.delete(this),r.sqlite3_close_v2(f),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(f=!1,h=!1){const a=w(this).pointer;return f?h?r.sqlite3_total_changes64(a):r.sqlite3_total_changes(a):h?r.sqlite3_changes64(a):r.sqlite3_changes(a)},dbFilename:function(f="main"){return r.sqlite3_db_filename(w(this).pointer,f)},dbName:function(f=0){return r.sqlite3_db_name(w(this).pointer,f)},dbVfsName:function(f=0){let h;const a=r.sqlite3_js_db_vfs(w(this).pointer,f);if(a){const u=new r.sqlite3_vfs(a);try{h=i.cstrToJs(u.$zName)}finally{u.dispose()}}return h},prepare:function(f){w(this);const h=i.pstack.pointer;let a,u;try{a=i.pstack.alloc(8),E.checkRc(this,r.sqlite3_prepare_v2(this.pointer,f,-1,a,null)),u=i.peekPtr(a)}finally{i.pstack.restore(h)}u||s("Cannot prepare empty SQL.");const _=new y(this,u,C);return g.get(this)[u]=_,_},exec:function(){w(this);const f=R(this,arguments);if(!f.sql)return s("exec() requires an SQL string.");const h=f.opt,a=h.callback,u=Array.isArray(h.resultRows)?h.resultRows:void 0;let _,k=h.bind,z=!!(f.cbArg||h.columnNames||u);const ee=i.scopedAllocPush(),ne=Array.isArray(h.saveSql)?h.saveSql:void 0;try{const se=l.isSQLableTypedArray(f.sql);let U=se?f.sql.byteLength:i.jstrlen(f.sql);const q=i.scopedAlloc(2*i.ptrSizeof+(U+1)),T=q+i.ptrSizeof;let M=T+i.ptrSizeof;const H=M+U;for(se?i.heap8().set(f.sql,M):i.jstrcpy(f.sql,i.heap8(),M,U,!1),i.poke(M+U,0);M&&i.peek(M,"i8");){i.pokePtr([q,T],0),E.checkRc(this,r.sqlite3_prepare_v3(this.pointer,M,U,0,q,T));const Z=i.peekPtr(q);if(M=i.peekPtr(T),U=H-M,!!Z){if(ne&&ne.push(r.sqlite3_sql(Z).trim()),_=new y(this,Z,C),k&&_.parameterCount&&(_.bind(k),k=null),z&&_.columnCount){let re=Array.isArray(h.columnNames)?0:1;if(z=!1,f.cbArg||u){const A=Object.create(null);for(;_.step();_._lockedByExec=!1){re++===0&&_.getColumnNames(A.columnNames=h.columnNames||[]),_._lockedByExec=!0;const N=f.cbArg(_,A);if(u&&u.push(N),a&&a.call(h,N,_)===!1)break}_._lockedByExec=!1}re===0&&_.getColumnNames(h.columnNames)}else _.step();_.reset().finalize(),_=null}}}finally{i.scopedAllocPop(ee),_&&(delete _._lockedByExec,_.finalize())}return f.returnVal()},createFunction:d(function(h,a,u){const _=d(A=>A instanceof Function,"isFunc");switch(arguments.length){case 1:u=h,h=u.name,a=u.xFunc||0;break;case 2:_(a)||(u=a,a=u.xFunc||0);break}u||(u={}),typeof h!="string"&&s("Invalid arguments: missing function name.");let k=u.xStep||0,z=u.xFinal||0;const ee=u.xValue||0,ne=u.xInverse||0;let se;_(a)?(se=!1,(_(k)||_(z))&&s("Ambiguous arguments: scalar or aggregate?"),k=z=null):_(k)?(_(z)||s("Missing xFinal() callback for aggregate or window UDF."),a=null):_(z)?s("Missing xStep() callback for aggregate or window UDF."):s("Missing function-type properties."),se===!1?(_(ee)||_(ne))&&s("xValue and xInverse are not permitted for non-window UDFs."):_(ee)?(_(ne)||s("xInverse must be provided if xValue is."),se=!0):_(ne)&&s("xValue must be provided if xInverse is.");const U=u.pApp;U!=null&&(typeof U!="number"||!l.isInt32(U))&&s("Invalid value for pApp property. Must be a legal WASM pointer value.");const q=u.xDestroy||0;q&&!_(q)&&s("xDestroy property must be a function.");let T=0;O(u,"deterministic")&&(T|=r.SQLITE_DETERMINISTIC),O(u,"directOnly")&&(T|=r.SQLITE_DIRECTONLY),O(u,"innocuous")&&(T|=r.SQLITE_INNOCUOUS),h=h.toLowerCase();const M=a||k,H=O(u,"arity"),Z=typeof H=="number"?H:M.length?M.length-1:0;let re;return se?re=r.sqlite3_create_window_function(this.pointer,h,Z,r.SQLITE_UTF8|T,U||0,k,z,ee,ne,q):re=r.sqlite3_create_function_v2(this.pointer,h,Z,r.SQLITE_UTF8|T,U||0,a,k,z,q),E.checkRc(this,re),this},"f"),selectValue:function(f,h,a){return D(this,f,h,0,a)},selectValues:function(f,h,a){const u=this.prepare(f),_=[];try{for(u.bind(h);u.step();)_.push(u.get(0,a));u.reset()}finally{u.finalize()}return _},selectArray:function(f,h){return D(this,f,h,[])},selectObject:function(f,h){return D(this,f,h,{})},selectArrays:function(f,h){return S(this,f,h,"array")},selectObjects:function(f,h){return S(this,f,h,"object")},openStatementCount:function(){return this.pointer?Object.keys(g.get(this)).length:0},transaction:function(f){let h="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&s(r.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),h+=" "+arguments[0],f=arguments[1]),w(this).exec(h);try{const a=f(this);return this.exec("COMMIT"),a}catch(a){throw this.exec("ROLLBACK"),a}},savepoint:function(f){w(this).exec("SAVEPOINT oo1");try{const h=f(this);return this.exec("RELEASE oo1"),h}catch(h){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),h}},checkRc:function(f){return L(this,f)}};const P=d(function(f){return f.pointer||s("Stmt has been closed."),f},"affirmStmtOpen"),K=d(function(f){let h=C[f==null?"null":typeof f];switch(h){case C.boolean:case C.null:case C.number:case C.string:return h;case C.bigint:if(i.bigIntEnabled)return h;default:return l.isBindableTypedArray(f)?C.blob:void 0}},"isSupportedBindType"),c=d(function(f){return K(f)||s("Unsupported bind() argument type:",typeof f)},"affirmSupportedBindType"),p=d(function(f,h){const a=typeof h=="number"?h:r.sqlite3_bind_parameter_index(f.pointer,h);return a===0||!l.isInt32(a)?s("Invalid bind() parameter name: "+h):(a<1||a>f.parameterCount)&&s("Bind index",h,"is out of range."),a},"affirmParamIndex"),b=d(function(f,h){return f._lockedByExec&&s("Operation is illegal when statement is locked:",h),f},"affirmNotLockedByExec"),B=d(function f(h,a,u,_){b(P(h),"bind()"),f._||(f._tooBigInt=z=>s("BigInt value is too big to store without precision loss:",z),f._={string:function(z,ee,ne,se){const[U,q]=i.allocCString(ne,!0);return(se?r.sqlite3_bind_blob:r.sqlite3_bind_text)(z.pointer,ee,U,q,r.SQLITE_WASM_DEALLOC)}}),c(_),a=p(h,a);let k=0;switch(_==null?C.null:u){case C.null:k=r.sqlite3_bind_null(h.pointer,a);break;case C.string:k=f._.string(h,a,_,!1);break;case C.number:{let z;l.isInt32(_)?z=r.sqlite3_bind_int:typeof _=="bigint"?l.bigIntFits64(_)?i.bigIntEnabled?z=r.sqlite3_bind_int64:l.bigIntFitsDouble(_)?(_=Number(_),z=r.sqlite3_bind_double):f._tooBigInt(_):f._tooBigInt(_):(_=Number(_),i.bigIntEnabled&&Number.isInteger(_)?z=r.sqlite3_bind_int64:z=r.sqlite3_bind_double),k=z(h.pointer,a,_);break}case C.boolean:k=r.sqlite3_bind_int(h.pointer,a,_?1:0);break;case C.blob:{if(typeof _=="string"){k=f._.string(h,a,_,!0);break}else _ instanceof ArrayBuffer?_=new Uint8Array(_):l.isBindableTypedArray(_)||s("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const z=i.alloc(_.byteLength||1);i.heap8().set(_.byteLength?_:[0],z),k=r.sqlite3_bind_blob(h.pointer,a,z,_.byteLength,r.SQLITE_WASM_DEALLOC);break}default:e.config.warn("Unsupported bind() argument type:",_),s("Unsupported bind() argument type: "+typeof _)}return k&&E.checkRc(h.db.pointer,k),h._mayGet=!1,h},"f");y.prototype={finalize:function(){if(this.pointer){b(this,"finalize()");const f=r.sqlite3_finalize(this.pointer);return delete g.get(this.db)[this.pointer],m.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,f}},clearBindings:function(){return b(P(this),"clearBindings()"),r.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(f){b(this,"reset()"),f&&this.clearBindings();const h=r.sqlite3_reset(P(this).pointer);return this._mayGet=!1,L(this.db,h),this},bind:function(){P(this);let f,h;switch(arguments.length){case 1:f=1,h=arguments[0];break;case 2:f=arguments[0],h=arguments[1];break;default:s("Invalid bind() arguments.")}return h===void 0?this:(this.parameterCount||s("This statement has no bindable parameters."),this._mayGet=!1,h===null?B(this,f,C.null,h):Array.isArray(h)?(arguments.length!==1&&s("When binding an array, an index argument is not permitted."),h.forEach((a,u)=>B(this,u+1,c(a),a)),this):(h instanceof ArrayBuffer&&(h=new Uint8Array(h)),typeof h=="object"&&!l.isBindableTypedArray(h)?(arguments.length!==1&&s("When binding an object, an index argument is not permitted."),Object.keys(h).forEach(a=>B(this,a,c(h[a]),h[a])),this):B(this,f,c(h),h)))},bindAsBlob:function(f,h){P(this),arguments.length===1&&(h=f,f=1);const a=c(h);return C.string!==a&&C.blob!==a&&C.null!==a&&s("Invalid value type for bindAsBlob()"),B(this,f,C.blob,h)},step:function(){b(this,"step()");const f=r.sqlite3_step(P(this).pointer);switch(f){case r.SQLITE_DONE:return this._mayGet=!1;case r.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,e.config.warn("sqlite3_step() rc=",f,r.sqlite3_js_rc_str(f),"SQL =",r.sqlite3_sql(this.pointer)),E.checkRc(this.db.pointer,f)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const f=this.step();return this.reset(),f}finally{try{this.finalize()}catch{}}},get:function(f,h){if(P(this)._mayGet||s("Stmt.step() has not (recently) returned true."),Array.isArray(f)){let a=0;const u=this.columnCount;for(;a<u;)f[a]=this.get(a++);return f}else if(f&&typeof f=="object"){let a=0;const u=this.columnCount;for(;a<u;)f[r.sqlite3_column_name(this.pointer,a)]=this.get(a++);return f}switch(x(this,f),h===void 0?r.sqlite3_column_type(this.pointer,f):h){case r.SQLITE_NULL:return null;case r.SQLITE_INTEGER:if(i.bigIntEnabled){const a=r.sqlite3_column_int64(this.pointer,f);return a>=Number.MIN_SAFE_INTEGER&&a<=Number.MAX_SAFE_INTEGER?Number(a).valueOf():a}else{const a=r.sqlite3_column_double(this.pointer,f);return(a>Number.MAX_SAFE_INTEGER||a<Number.MIN_SAFE_INTEGER)&&s("Integer is out of range for JS integer range: "+a),l.isInt32(a)?a|0:a}case r.SQLITE_FLOAT:return r.sqlite3_column_double(this.pointer,f);case r.SQLITE_TEXT:return r.sqlite3_column_text(this.pointer,f);case r.SQLITE_BLOB:{const a=r.sqlite3_column_bytes(this.pointer,f),u=r.sqlite3_column_blob(this.pointer,f),_=new Uint8Array(a);return a&&_.set(i.heap8u().slice(u,u+a),0),a&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(_.buffer),_}default:s("Don't know how to translate","type of result column #"+f+".")}s("Not reached.")},getInt:function(f){return this.get(f,r.SQLITE_INTEGER)},getFloat:function(f){return this.get(f,r.SQLITE_FLOAT)},getString:function(f){return this.get(f,r.SQLITE_TEXT)},getBlob:function(f){return this.get(f,r.SQLITE_BLOB)},getJSON:function(f){const h=this.get(f,r.SQLITE_STRING);return h===null?h:JSON.parse(h)},getColumnName:function(f){return r.sqlite3_column_name(x(P(this),f).pointer,f)},getColumnNames:function(f=[]){x(P(this),0);const h=this.columnCount;for(let a=0;a<h;++a)f.push(r.sqlite3_column_name(this.pointer,a));return f},getParamIndex:function(f){return P(this).parameterCount?r.sqlite3_bind_parameter_index(this.pointer,f):void 0}};{const f={enumerable:!0,get:function(){return m.get(this)},set:()=>s("The pointer property is read-only.")};Object.defineProperty(y.prototype,"pointer",f),Object.defineProperty(E.prototype,"pointer",f)}if(Object.defineProperty(y.prototype,"columnCount",{enumerable:!1,get:function(){return r.sqlite3_column_count(this.pointer)},set:()=>s("The columnCount property is read-only.")}),e.oo1={DB:E,Stmt:y},l.isUIThread()){e.oo1.JsStorageDb=function(h="session"){const a=I.normalizeArgs(...arguments);h=a.filename,h!=="session"&&h!=="local"&&s("JsStorageDb db name must be one of 'session' or 'local'."),a.vfs="kvvfs",I.call(this,a)};const f=e.oo1.JsStorageDb;f.prototype=Object.create(E.prototype),f.clearStorage=r.sqlite3_js_kvvfs_clear,f.prototype.clearStorage=function(){return f.clearStorage(w(this).filename)},f.storageSize=r.sqlite3_js_kvvfs_size,f.prototype.storageSize=function(){return f.storageSize(w(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=e.util;e.initWorker1API=function(){const r=d((...I)=>{throw new Error(I.join(" "))},"toss");globalThis.WorkerGlobalScope instanceof Function||r("initWorker1API() must be run from a Worker thread.");const i=this.sqlite3||r("Missing this.sqlite3 object."),l=i.oo1.DB,m=d(function(I){let E=g.idMap.get(I);return E||(E="db#"+ ++g.idSeq+"@"+I.pointer,g.idMap.set(I,E),E)},"getDbId"),g={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(I){const E=new l(I);return this.dbs[m(E)]=E,this.dbList.indexOf(E)<0&&this.dbList.push(E),E},close:function(I,E){if(I){delete this.dbs[m(I)];const C=I.filename,y=s.sqlite3__wasm_db_vfs(I.pointer,0);I.close();const w=this.dbList.indexOf(I);w>=0&&this.dbList.splice(w,1),E&&C&&y&&s.sqlite3__wasm_vfs_unlink(y,C)}},post:function(I,E){E&&E.length?(globalThis.postMessage(I,Array.from(E)),E.length=0):globalThis.postMessage(I)},dbs:Object.create(null),getDb:function(I,E=!0){return this.dbs[I]||(E?r("Unknown (or closed) DB ID:",I):void 0)}},O=d(function(I=g.dbList[0]){return I&&I.pointer?I:r("DB is not opened.")},"affirmDbOpen"),L=d(function(I,E=!0){const C=g.getDb(I.dbId,!1)||g.dbList[0];return E?O(C):C},"getMsgDb"),j=d(function(){return g.dbList[0]&&m(g.dbList[0])},"getDefaultDbId"),Q={open:function(I){const E=Object.create(null),C=I.args||Object.create(null);C.simulateError&&r("Throwing because of simulateError flag.");const y=Object.create(null);E.vfs=C.vfs,E.filename=C.filename||"";const w=g.open(E);return y.filename=w.filename,y.persistent=!!i.capi.sqlite3_js_db_uses_vfs(w.pointer,"opfs"),y.dbId=m(w),y.vfs=w.dbVfsName(),y},close:function(I){const E=L(I,!1),C={filename:E&&E.filename};if(E){const y=I.args&&typeof I.args=="object"?!!I.args.unlink:!1;g.close(E,y)}return C},exec:function(I){const E=typeof I.args=="string"?{sql:I.args}:I.args||Object.create(null);E.rowMode==="stmt"?r("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):E.sql||r("'exec' requires input SQL.");const C=L(I);(E.callback||Array.isArray(E.resultRows))&&(C._blobXfer=g.xfer);const y=E.callback;let w=0;const x=!!E.columnNames;typeof y=="string"&&(x||(E.columnNames=[]),E.callback=function(R,D){g.post({type:y,columnNames:E.columnNames,rowNumber:++w,row:R},g.xfer)});try{const R=E.countChanges?C.changes(!0,E.countChanges===64):void 0;C.exec(E),R!==void 0&&(E.changeCount=C.changes(!0,E.countChanges===64)-R),E.callback instanceof Function&&(E.callback=y,g.post({type:y,columnNames:E.columnNames,rowNumber:null,row:void 0}))}finally{delete C._blobXfer,E.callback&&(E.callback=y)}return E},"config-get":function(){const I=Object.create(null),E=i.config;return["bigIntEnabled"].forEach(function(C){Object.getOwnPropertyDescriptor(E,C)&&(I[C]=E[C])}),I.version=i.version,I.vfsList=i.capi.sqlite3_js_vfs_list(),I.opfsEnabled=!!i.opfs,I},export:function(I){const E=L(I),C={byteArray:i.capi.sqlite3_js_db_export(E.pointer),filename:E.filename,mimetype:"application/x-sqlite3"};return g.xfer.push(C.byteArray.buffer),C},toss:function(I){r("Testing worker exception")},"opfs-tree":async function(I){return i.opfs||r("OPFS support is unavailable."),await i.opfs.treeList()}};globalThis.onmessage=async function(I){I=I.data;let E,C=I.dbId,y=I.type;const w=performance.now();try{Q.hasOwnProperty(y)&&Q[y]instanceof Function?E=await Q[y](I):r("Unknown db worker message type:",I.type)}catch(x){y="error",E={operation:I.type,message:x.message,errorClass:x.name,input:I},x.stack&&(E.stack=typeof x.stack=="string"?x.stack.split(/\n\s*/):x.stack)}C||(C=E.dbId||j()),g.post({type:y,dbId:C,messageId:I.messageId,workerReceivedTime:w,workerRespondTime:performance.now(),departureTime:I.departureTime,result:E},g.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({sqlite3:e})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=e.wasm,r=e.capi,i=e.util.toss3,l=Object.create(null);e.vfs=l,r.sqlite3_vfs.prototype.registerVfs=function(m=!1){this instanceof e.capi.sqlite3_vfs||i("Expecting a sqlite3_vfs-type argument.");const g=r.sqlite3_vfs_register(this,m?1:0);return g&&i("sqlite3_vfs_register(",this,") failed with rc",g),this.pointer!==r.sqlite3_vfs_find(this.$zName)&&i("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},l.installVfs=function(m){let g=0;const O=["io","vfs"];for(const L of O){const j=m[L];j&&(++g,j.struct.installMethods(j.methods,!!j.applyArgcCheck),L==="vfs"&&(!j.struct.$zName&&typeof j.name=="string"&&j.struct.addOnDispose(j.struct.$zName=s.allocCString(j.name)),j.struct.registerVfs(!!j.asDefault)))}return g||i("Misuse: installVfs() options object requires at least","one of:",O),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=e.wasm,r=e.capi,i=e.util.toss3,l=Object.create(null);e.vtab=l;const m=r.sqlite3_index_info;m.prototype.nthConstraint=function(L,j=!1){if(L<0||L>=this.$nConstraint)return!1;const Q=this.$aConstraint+m.sqlite3_index_constraint.structInfo.sizeof*L;return j?Q:new m.sqlite3_index_constraint(Q)},m.prototype.nthConstraintUsage=function(L,j=!1){if(L<0||L>=this.$nConstraint)return!1;const Q=this.$aConstraintUsage+m.sqlite3_index_constraint_usage.structInfo.sizeof*L;return j?Q:new m.sqlite3_index_constraint_usage(Q)},m.prototype.nthOrderBy=function(L,j=!1){if(L<0||L>=this.$nOrderBy)return!1;const Q=this.$aOrderBy+m.sqlite3_index_orderby.structInfo.sizeof*L;return j?Q:new m.sqlite3_index_orderby(Q)};const g=d(function(L,j){return function(Q,I=!1){if(arguments.length===0&&(Q=new j),Q instanceof j)return this.set(Q.pointer,Q),Q;s.isPtr(Q)||e.SQLite3Error.toss("Invalid argument to",L+"()");let E=this.get(Q);return I&&this.delete(Q),E}.bind(new Map)},"__xWrapFactory"),O=d(function(L,j){const Q=g(L,j);return Object.assign(Object.create(null),{StructType:j,create:I=>{const E=Q();return s.pokePtr(I,E.pointer),E},get:I=>Q(I),unget:I=>Q(I,!0),dispose:I=>{const E=Q(I,!0);E&&E.dispose()}})},"StructPtrMapper");l.xVtab=O("xVtab",r.sqlite3_vtab),l.xCursor=O("xCursor",r.sqlite3_vtab_cursor),l.xIndexInfo=L=>new r.sqlite3_index_info(L),l.xError=d(function L(j,Q,I){if(L.errorReporter instanceof Function)try{L.errorReporter("sqlite3_module::"+j+"(): "+Q.message)}catch{}let E;return Q instanceof e.WasmAllocError?E=r.SQLITE_NOMEM:arguments.length>2?E=I:Q instanceof e.SQLite3Error&&(E=Q.resultCode),E||r.SQLITE_ERROR},"f"),l.xError.errorReporter=console.error.bind(console),l.xRowid=(L,j)=>s.poke(L,j,"i64"),l.setupModule=function(L){let j=!1;const Q=this instanceof r.sqlite3_module?this:L.struct||(j=new r.sqlite3_module);try{const I=L.methods||i("Missing 'methods' object.");for(const E of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const C=E[0],y=E[1];I[C]===!0?I[C]=I[y]:I[y]===!0&&(I[y]=I[C])}if(L.catchExceptions){const E=d(function(w,x){return["xConnect","xCreate"].indexOf(w)>=0?function(R,D,S,P,K,c){try{return x(...arguments)||0}catch(p){return p instanceof e.WasmAllocError||(s.dealloc(s.peekPtr(c)),s.pokePtr(c,s.allocCString(p.message))),l.xError(w,p)}}:function(...R){try{return x(...R)||0}catch(D){return l.xError(w,D)}}},"fwrap"),C=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],y=Object.create(null);for(const w of C){const x=I[w];if(x instanceof Function)w==="xConnect"&&I.xCreate===x?y[w]=I.xCreate:w==="xCreate"&&I.xConnect===x?y[w]=I.xConnect:y[w]=E(w,x);else continue}Q.installMethods(y,!1)}else Q.installMethods(I,!!L.applyArgcCheck);if(Q.$iVersion===0){let E;typeof L.iVersion=="number"?E=L.iVersion:Q.$xShadowName?E=3:Q.$xSavePoint||Q.$xRelease||Q.$xRollbackTo?E=2:E=1,Q.$iVersion=E}}catch(I){throw j&&j.dispose(),I}return Q},r.sqlite3_module.prototype.setupModule=function(L){return l.setupModule.call(this,L)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=d(function r(i){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!i||typeof i!="object")&&(i=Object.create(null));const l=new URL(globalThis.location.href).searchParams;return l.has("opfs-disable")?Promise.resolve(e):(i.verbose===void 0&&(i.verbose=l.has("opfs-verbose")?+l.get("opfs-verbose")||2:1),i.sanityChecks===void 0&&(i.sanityChecks=l.has("opfs-sanity-check")),i.proxyUri===void 0&&(i.proxyUri=r.defaultProxyUri),typeof i.proxyUri=="function"&&(i.proxyUri=i.proxyUri()),new Promise(function(g,O){const L=[e.config.error,e.config.warn,e.config.log],j=d((A,...N)=>{i.verbose>A&&L[A]("OPFS syncer:",...N)},"logImpl"),Q=d((...A)=>j(2,...A),"log"),I=d((...A)=>j(1,...A),"warn"),E=d((...A)=>j(0,...A),"error"),C=e.util.toss,y=e.capi,w=e.util,x=e.wasm,R=y.sqlite3_vfs,D=y.sqlite3_file,S=y.sqlite3_io_methods,P=Object.create(null),K=d(()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory,"thisThreadHasOPFS");P.metrics={dump:function(){let A,N=0,W=0,J=0;for(A in _.opIds){const $=k[A];N+=$.count,W+=$.time,J+=$.wait,$.avgTime=$.count&&$.time?$.time/$.count:0,$.avgWait=$.count&&$.wait?$.wait/$.count:0}e.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",k,`
Total of`,N,"op(s) for",W,"ms (incl. "+J+" ms of waiting on the async side)"),e.config.log("Serialization metrics:",k.s11n),h.postMessage({type:"opfs-async-metrics"})},reset:function(){let A;const N=d(J=>J.count=J.time=J.wait=0,"r");for(A in _.opIds)N(k[A]=Object.create(null));let W=k.s11n=Object.create(null);W=W.serialize=Object.create(null),W.count=W.time=0,W=k.s11n.deserialize=Object.create(null),W.count=W.time=0}};const c=new S,p=new R().addOnDispose(()=>c.dispose());let b;const B=d(A=>(b=!0,p.dispose(),O(A)),"promiseReject"),f=d(()=>(b=!1,g(e)),"promiseResolve"),h=new Worker(new URL("/assets/sqlite3-opfs-async-proxy-CLW7preb.js",import.meta.url));setTimeout(()=>{b===void 0&&B(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),h._originalOnError=h.onerror,h.onerror=function(A){E("Error initializing OPFS asyncer:",A),B(new Error("Loading OPFS async Worker failed for unknown reasons."))};const a=y.sqlite3_vfs_find(null),u=a?new R(a):null;c.$iVersion=1,p.$iVersion=2,p.$szOsFile=y.sqlite3_file.structInfo.sizeof,p.$mxPathname=1024,p.$zName=x.allocCString("opfs"),p.$xDlOpen=p.$xDlError=p.$xDlSym=p.$xDlClose=null,p.addOnDispose("$zName",p.$zName,"cleanup default VFS wrapper",()=>u?u.dispose():null);const _=Object.create(null);_.verbose=i.verbose,_.littleEndian=(()=>{const A=new ArrayBuffer(2);return new DataView(A).setInt16(0,256,!0),new Int16Array(A)[0]===256})(),_.asyncIdleWaitTime=150,_.asyncS11nExceptions=1,_.fileBufferSize=1024*64,_.sabS11nOffset=_.fileBufferSize,_.sabS11nSize=p.$mxPathname*2,_.sabIO=new SharedArrayBuffer(_.fileBufferSize+_.sabS11nSize),_.opIds=Object.create(null);const k=Object.create(null);{let A=0;_.opIds.whichOp=A++,_.opIds.rc=A++,_.opIds.xAccess=A++,_.opIds.xClose=A++,_.opIds.xDelete=A++,_.opIds.xDeleteNoWait=A++,_.opIds.xFileSize=A++,_.opIds.xLock=A++,_.opIds.xOpen=A++,_.opIds.xRead=A++,_.opIds.xSleep=A++,_.opIds.xSync=A++,_.opIds.xTruncate=A++,_.opIds.xUnlock=A++,_.opIds.xWrite=A++,_.opIds.mkdir=A++,_.opIds["opfs-async-metrics"]=A++,_.opIds["opfs-async-shutdown"]=A++,_.opIds.retry=A++,_.sabOP=new SharedArrayBuffer(A*4),P.metrics.reset()}_.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach(A=>{(_.sq3Codes[A]=y[A])===void 0&&C("Maintenance required: not found:",A)}),_.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const z=d((A,...N)=>{const W=_.opIds[A]||C("Invalid op ID:",A);_.s11n.serialize(...N),Atomics.store(_.sabOPView,_.opIds.rc,-1),Atomics.store(_.sabOPView,_.opIds.whichOp,W),Atomics.notify(_.sabOPView,_.opIds.whichOp);const J=performance.now();Atomics.wait(_.sabOPView,_.opIds.rc,-1);const $=Atomics.load(_.sabOPView,_.opIds.rc);if(k[A].wait+=performance.now()-J,$&&_.asyncS11nExceptions){const te=_.s11n.deserialize();te&&E(A+"() async error:",...te)}return $},"opRun");P.debug={asyncShutdown:()=>{I("Shutting down OPFS async listener. The OPFS VFS will no longer work."),z("opfs-async-shutdown")},asyncRestart:()=>{I("Attempting to restart OPFS VFS async listener. Might work, might not."),h.postMessage({type:"opfs-async-restart"})}};const ee=d(()=>{if(_.s11n)return _.s11n;const A=new TextDecoder,N=new TextEncoder("utf-8"),W=new Uint8Array(_.sabIO,_.sabS11nOffset,_.sabS11nSize),J=new DataView(_.sabIO,_.sabS11nOffset,_.sabS11nSize);_.s11n=Object.create(null);const $=Object.create(null);$.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},$.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},$.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},$.string={id:4};const te=d(Y=>$[typeof Y]||C("Maintenance required: this value type cannot be serialized.",Y),"getTypeId"),le=d(Y=>{switch(Y){case $.number.id:return $.number;case $.bigint.id:return $.bigint;case $.boolean.id:return $.boolean;case $.string.id:return $.string;default:C("Invalid type ID:",Y)}},"getTypeIdById");return _.s11n.deserialize=function(Y=!1){++k.s11n.deserialize.count;const he=performance.now(),F=W[0],V=F?[]:null;if(F){const G=[];let X=1,ce,de,fe;for(ce=0;ce<F;++ce,++X)G.push(le(W[X]));for(ce=0;ce<F;++ce){const pe=G[ce];pe.getter?(fe=J[pe.getter](X,_.littleEndian),X+=pe.size):(de=J.getInt32(X,_.littleEndian),X+=4,fe=A.decode(W.slice(X,X+de)),X+=de),V.push(fe)}}return Y&&(W[0]=0),k.s11n.deserialize.time+=performance.now()-he,V},_.s11n.serialize=function(...Y){const he=performance.now();if(++k.s11n.serialize.count,Y.length){const F=[];let V=0,G=1;for(W[0]=Y.length&255;V<Y.length;++V,++G)F.push(te(Y[V])),W[G]=F[V].id;for(V=0;V<Y.length;++V){const X=F[V];if(X.setter)J[X.setter](G,Y[V],_.littleEndian),G+=X.size;else{const ce=N.encode(Y[V]);J.setInt32(G,ce.byteLength,_.littleEndian),G+=4,W.set(ce,G),G+=ce.byteLength}}}else W[0]=0;k.s11n.serialize.time+=performance.now()-he},_.s11n},"initS11n"),ne=d(function A(N=16){A._chars||(A._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",A._n=A._chars.length);const W=[];let J=0;for(;J<N;++J){const $=Math.random()*(A._n*64)%A._n|0;W[J]=A._chars[$]}return W.join("")},"f"),se=Object.create(null),U=Object.create(null);U.op=void 0,U.start=void 0;const q=d(A=>{U.start=performance.now(),U.op=A,++k[A].count},"mTimeStart"),T=d(()=>k[U.op].time+=performance.now()-U.start,"mTimeEnd"),M={xCheckReservedLock:function(A,N){const W=se[A];return x.poke(N,W.lockType?1:0,"i32"),0},xClose:function(A){q("xClose");let N=0;const W=se[A];return W&&(delete se[A],N=z("xClose",A),W.sq3File&&W.sq3File.dispose()),T(),N},xDeviceCharacteristics:function(A){return y.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(A,N,W){return y.SQLITE_NOTFOUND},xFileSize:function(A,N){q("xFileSize");let W=z("xFileSize",A);if(W==0)try{const J=_.s11n.deserialize()[0];x.poke(N,J,"i64")}catch(J){E("Unexpected error reading xFileSize() result:",J),W=_.sq3Codes.SQLITE_IOERR}return T(),W},xLock:function(A,N){q("xLock");const W=se[A];let J=0;return W.lockType?W.lockType=N:(J=z("xLock",A,N),J===0&&(W.lockType=N)),T(),J},xRead:function(A,N,W,J){q("xRead");const $=se[A];let te;try{te=z("xRead",A,W,Number(J)),(te===0||y.SQLITE_IOERR_SHORT_READ===te)&&x.heap8u().set($.sabView.subarray(0,W),N)}catch(le){E("xRead(",arguments,") failed:",le,$),te=y.SQLITE_IOERR_READ}return T(),te},xSync:function(A,N){q("xSync"),++k.xSync.count;const W=z("xSync",A,N);return T(),W},xTruncate:function(A,N){q("xTruncate");const W=z("xTruncate",A,Number(N));return T(),W},xUnlock:function(A,N){q("xUnlock");const W=se[A];let J=0;return y.SQLITE_LOCK_NONE===N&&W.lockType&&(J=z("xUnlock",A,N)),J===0&&(W.lockType=N),T(),J},xWrite:function(A,N,W,J){q("xWrite");const $=se[A];let te;try{$.sabView.set(x.heap8u().subarray(N,N+W)),te=z("xWrite",A,W,Number(J))}catch(le){E("xWrite(",arguments,") failed:",le,$),te=y.SQLITE_IOERR_WRITE}return T(),te}},H={xAccess:function(A,N,W,J){q("xAccess");const $=z("xAccess",x.cstrToJs(N));return x.poke(J,$?0:1,"i32"),T(),0},xCurrentTime:function(A,N){return x.poke(N,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(A,N){return x.poke(N,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(A,N,W){q("xDelete");const J=z("xDelete",x.cstrToJs(N),W,!1);return T(),J},xFullPathname:function(A,N,W,J){return x.cstrncpy(J,N,W)<W?0:y.SQLITE_CANTOPEN},xGetLastError:function(A,N,W){return I("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:d(function(N,W,J,$,te){q("xOpen");let le=0;W===0?W=ne():x.isPtr(W)&&(y.sqlite3_uri_boolean(W,"opfs-unlock-asap",0)&&(le|=_.opfsFlags.OPFS_UNLOCK_ASAP),y.sqlite3_uri_boolean(W,"delete-before-open",0)&&(le|=_.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),W=x.cstrToJs(W));const Y=Object.create(null);Y.fid=J,Y.filename=W,Y.sab=new SharedArrayBuffer(_.fileBufferSize),Y.flags=$;const he=z("xOpen",J,W,$,le);return he||(Y.readOnly&&x.poke(te,y.SQLITE_OPEN_READONLY,"i32"),se[J]=Y,Y.sabView=_.sabFileBufView,Y.sq3File=new D(J),Y.sq3File.$pMethods=c.pointer,Y.lockType=y.SQLITE_LOCK_NONE),T(),he},"f")};u&&(p.$xRandomness=u.$xRandomness,p.$xSleep=u.$xSleep),p.$xRandomness||(H.xRandomness=function(A,N,W){const J=x.heap8u();let $=0;for(;$<N;++$)J[W+$]=Math.random()*255e3&255;return $}),p.$xSleep||(H.xSleep=function(A,N){return Atomics.wait(_.sabOPView,_.opIds.xSleep,0,N),0}),P.getResolvedPath=function(A,N){const W=new URL(A,"file://irrelevant").pathname;return N?W.split("/").filter(J=>!!J):W},P.getDirForFilename=d(async function(N,W=!1){const J=P.getResolvedPath(N,!0),$=J.pop();let te=P.rootDirectory;for(const le of J)le&&(te=await te.getDirectoryHandle(le,{create:!!W}));return[te,$]},"f"),P.mkdir=async function(A){try{return await P.getDirForFilename(A+"/filepart",!0),!0}catch{return!1}},P.entryExists=async function(A){try{const[N,W]=await P.getDirForFilename(A);return await N.getFileHandle(W),!0}catch{return!1}},P.randomFilename=ne,P.treeList=async function(){const A=d(async function W(J,$){$.name=J.name,$.dirs=[],$.files=[];for await(const te of J.values())if(te.kind==="directory"){const le=Object.create(null);$.dirs.push(le),await W(te,le)}else $.files.push(te.name)},"callee"),N=Object.create(null);return await A(P.rootDirectory,N),N},P.rmfr=async function(){const A=P.rootDirectory,N={recurse:!0};for await(const W of A.values())A.removeEntry(W.name,N)},P.unlink=async function(A,N=!1,W=!1){try{const[J,$]=await P.getDirForFilename(A,!1);return await J.removeEntry($,{recursive:N}),!0}catch(J){if(W)throw new Error("unlink(",arguments[0],") failed: "+J.message,{cause:J});return!1}},P.traverse=async function(A){const N={recursive:!0,directory:P.rootDirectory};typeof A=="function"&&(A={callback:A}),A=Object.assign(N,A||{}),d(async function J($,te){for await(const le of $.values()){if(A.callback(le,$,te)===!1)return!1;if(A.recursive&&le.kind==="directory"&&await J(le,te+1)===!1)break}},"callee")(A.directory,0)};const Z=d(async function(A,N){const[W,J]=await P.getDirForFilename(A,!0);let te=await(await W.getFileHandle(J,{create:!0})).createSyncAccessHandle(),le=0,Y,he=!1;try{for(te.truncate(0);(Y=await N())!==void 0;)Y instanceof ArrayBuffer&&(Y=new Uint8Array(Y)),le===0&&Y.byteLength>=15&&(w.affirmDbHeader(Y),he=!0),te.write(Y,{at:le}),le+=Y.byteLength;if((le<512||le%512!==0)&&C("Input size",le,"is not correct for an SQLite database."),!he){const F=new Uint8Array(20);te.read(F,{at:0}),w.affirmDbHeader(F)}return te.write(new Uint8Array([1,1]),{at:18}),le}catch(F){throw await te.close(),te=void 0,await W.removeEntry(J).catch(()=>{}),F}finally{te&&await te.close()}},"importDbChunked");if(P.importDb=async function(A,N){if(N instanceof Function)return Z(A,N);N instanceof ArrayBuffer&&(N=new Uint8Array(N)),w.affirmIsDb(N);const W=N.byteLength,[J,$]=await P.getDirForFilename(A,!0);let te,le=0;try{return te=await(await J.getFileHandle($,{create:!0})).createSyncAccessHandle(),te.truncate(0),le=te.write(N,{at:0}),le!=W&&C("Expected to write "+W+" bytes but wrote "+le+"."),te.write(new Uint8Array([1,1]),{at:18}),le}catch(Y){throw te&&(await te.close(),te=void 0),await J.removeEntry($).catch(()=>{}),Y}finally{te&&await te.close()}},e.oo1){const A=d(function(...N){const W=e.oo1.DB.dbCtorHelper.normalizeArgs(...N);W.vfs=p.$zName,e.oo1.DB.dbCtorHelper.call(this,W)},"OpfsDb");A.prototype=Object.create(e.oo1.DB.prototype),e.oo1.OpfsDb=A,A.importDb=P.importDb,e.oo1.DB.dbCtorHelper.setVfsPostOpenSql(p.pointer,function(N,W){W.capi.sqlite3_busy_timeout(N,1e4),W.capi.sqlite3_exec(N,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}const re=d(function(){const A=x.scopedAllocPush(),N=new D;try{const W=N.pointer,J=y.SQLITE_OPEN_CREATE|y.SQLITE_OPEN_READWRITE|y.SQLITE_OPEN_MAIN_DB,$=x.scopedAlloc(8),te="/sanity/check/file"+ne(8),le=x.scopedAllocCString(te);let Y;if(_.s11n.serialize("This is ä string."),Y=_.s11n.deserialize(),Q("deserialize() says:",Y),Y[0]!=="This is ä string."&&C("String d13n error."),H.xAccess(p.pointer,le,0,$),Y=x.peek($,"i32"),Q("xAccess(",te,") exists ?=",Y),Y=H.xOpen(p.pointer,le,W,J,$),Q("open rc =",Y,"state.sabOPView[xOpen] =",_.sabOPView[_.opIds.xOpen]),Y!==0){E("open failed with code",Y);return}H.xAccess(p.pointer,le,0,$),Y=x.peek($,"i32"),Y||C("xAccess() failed to detect file."),Y=M.xSync(N.pointer,0),Y&&C("sync failed w/ rc",Y),Y=M.xTruncate(N.pointer,1024),Y&&C("truncate failed w/ rc",Y),x.poke($,0,"i64"),Y=M.xFileSize(N.pointer,$),Y&&C("xFileSize failed w/ rc",Y),Q("xFileSize says:",x.peek($,"i64")),Y=M.xWrite(N.pointer,le,10,1),Y&&C("xWrite() failed!");const he=x.scopedAlloc(16);Y=M.xRead(N.pointer,he,6,2),x.poke(he+6,0);let F=x.cstrToJs(he);Q("xRead() got:",F),F!=="sanity"&&C("Unexpected xRead() value."),H.xSleep&&(Q("xSleep()ing before close()ing..."),H.xSleep(p.pointer,2e3),Q("waking up from xSleep()")),Y=M.xClose(W),Q("xClose rc =",Y,"sabOPView =",_.sabOPView),Q("Deleting file:",te),H.xDelete(p.pointer,le,4660),H.xAccess(p.pointer,le,0,$),Y=x.peek($,"i32"),Y&&C("Expecting 0 from xAccess(",te,") after xDelete()."),I("End of OPFS sanity checks.")}finally{N.dispose(),x.scopedAllocPop(A)}},"sanityCheck");h.onmessage=function({data:A}){switch(A.type){case"opfs-unavailable":B(new Error(A.payload.join(" ")));break;case"opfs-async-loaded":h.postMessage({type:"opfs-async-init",args:_});break;case"opfs-async-inited":{if(b===!0)break;try{e.vfs.installVfs({io:{struct:c,methods:M},vfs:{struct:p,methods:H}}),_.sabOPView=new Int32Array(_.sabOP),_.sabFileBufView=new Uint8Array(_.sabIO,0,_.fileBufferSize),_.sabS11nView=new Uint8Array(_.sabIO,_.sabS11nOffset,_.sabS11nSize),ee(),i.sanityChecks&&(I("Running sanity checks because of opfs-sanity-check URL arg..."),re()),K()?navigator.storage.getDirectory().then(N=>{h.onerror=h._originalOnError,delete h._originalOnError,e.opfs=P,P.rootDirectory=N,Q("End of OPFS sqlite3_vfs setup.",p),f()}).catch(B):f()}catch(N){E(N),B(N)}break}default:{const N="Unexpected message from the OPFS async worker: "+JSON.stringify(A);E(N),B(new Error(N));break}}}}))},"callee");s.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async r=>{try{let i=s.defaultProxyUri;return r.scriptInfo.sqlite3Dir&&(s.defaultProxyUri=r.scriptInfo.sqlite3Dir+i),s().catch(l=>{r.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",l.message)})}catch(i){return r.config.error("installOpfsVfs() exception:",i),Promise.reject(i)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(e){const s=e.util.toss,r=e.util.toss3,i=Object.create(null),l=e.capi,m=e.util,g=e.wasm,O=4096,L=512,j=4,Q=8,I=L+j,E=L,C=I,y=O,w=l.SQLITE_OPEN_MAIN_DB|l.SQLITE_OPEN_MAIN_JOURNAL|l.SQLITE_OPEN_SUPER_JOURNAL|l.SQLITE_OPEN_WAL,x=".opaque",R=d(()=>Math.random().toString(36).slice(2),"getRandomName"),D=new TextDecoder,S=new TextEncoder,P=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2}),K=[e.config.error,e.config.warn,e.config.log];e.config.log;const c=e.config.warn;e.config.error;const p=new Map,b=d(U=>p.get(U),"getPoolForVfs"),B=d((U,q)=>{q?p.set(U,q):p.delete(U)},"setPoolForVfs"),f=new Map,h=d(U=>f.get(U),"getPoolForPFile"),a=d((U,q)=>{q?f.set(U,q):f.delete(U)},"setPoolForPFile"),u={xCheckReservedLock:function(U,q){const T=h(U);return T.log("xCheckReservedLock"),T.storeErr(),g.poke32(q,1),0},xClose:function(U){const q=h(U);q.storeErr();const T=q.getOFileForS3File(U);if(T)try{q.log(`xClose ${T.path}`),q.mapS3FileToOFile(U,!1),T.sah.flush(),T.flags&l.SQLITE_OPEN_DELETEONCLOSE&&q.deletePath(T.path)}catch(M){return q.storeErr(M,l.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(U){return l.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(U,q,T){return l.SQLITE_NOTFOUND},xFileSize:function(U,q){const T=h(U);T.log("xFileSize");const H=T.getOFileForS3File(U).sah.getSize()-y;return g.poke64(q,BigInt(H)),0},xLock:function(U,q){const T=h(U);T.log(`xLock ${q}`),T.storeErr();const M=T.getOFileForS3File(U);return M.lockType=q,0},xRead:function(U,q,T,M){const H=h(U);H.storeErr();const Z=H.getOFileForS3File(U);H.log(`xRead ${Z.path} ${T} @ ${M}`);try{const re=Z.sah.read(g.heap8u().subarray(q,q+T),{at:y+Number(M)});return re<T?(g.heap8u().fill(0,q+re,q+T),l.SQLITE_IOERR_SHORT_READ):0}catch(re){return H.storeErr(re,l.SQLITE_IOERR)}},xSectorSize:function(U){return O},xSync:function(U,q){const T=h(U);T.log(`xSync ${q}`),T.storeErr();const M=T.getOFileForS3File(U);try{return M.sah.flush(),0}catch(H){return T.storeErr(H,l.SQLITE_IOERR)}},xTruncate:function(U,q){const T=h(U);T.log(`xTruncate ${q}`),T.storeErr();const M=T.getOFileForS3File(U);try{return M.sah.truncate(y+Number(q)),0}catch(H){return T.storeErr(H,l.SQLITE_IOERR)}},xUnlock:function(U,q){const T=h(U);T.log("xUnlock");const M=T.getOFileForS3File(U);return M.lockType=q,0},xWrite:function(U,q,T,M){const H=h(U);H.storeErr();const Z=H.getOFileForS3File(U);H.log(`xWrite ${Z.path} ${T} ${M}`);try{const re=Z.sah.write(g.heap8u().subarray(q,q+T),{at:y+Number(M)});return T===re?0:s("Unknown write() failure.")}catch(re){return H.storeErr(re,l.SQLITE_IOERR)}}},_=new l.sqlite3_io_methods;_.$iVersion=1,e.vfs.installVfs({io:{struct:_,methods:u}});const k={xAccess:function(U,q,T,M){const H=b(U);H.storeErr();try{const Z=H.getPath(q);g.poke32(M,H.hasFilename(Z)?1:0)}catch{g.poke32(M,0)}return 0},xCurrentTime:function(U,q){return g.poke(q,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(U,q){return g.poke(q,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(U,q,T){const M=b(U);M.log(`xDelete ${g.cstrToJs(q)}`),M.storeErr();try{return M.deletePath(M.getPath(q)),0}catch(H){return M.storeErr(H),l.SQLITE_IOERR_DELETE}},xFullPathname:function(U,q,T,M){return g.cstrncpy(M,q,T)<T?0:l.SQLITE_CANTOPEN},xGetLastError:function(U,q,T){const M=b(U),H=M.popErr();if(M.log(`xGetLastError ${q} e =`,H),H){const Z=g.scopedAllocPush();try{const[re,A]=g.scopedAllocCString(H.message,!0);g.cstrncpy(T,re,q),A>q&&g.poke8(T+q-1,0)}catch{return l.SQLITE_NOMEM}finally{g.scopedAllocPop(Z)}}return H?H.sqlite3Rc||l.SQLITE_IOERR:0},xOpen:d(function(q,T,M,H,Z){const re=b(q);try{re.log(`xOpen ${g.cstrToJs(T)} ${H}`);const A=T&&g.peek8(T)?re.getPath(T):R();let N=re.getSAHForPath(A);!N&&H&l.SQLITE_OPEN_CREATE&&(re.getFileCount()<re.getCapacity()?(N=re.nextAvailableSAH(),re.setAssociatedPath(N,A,H)):s("SAH pool is full. Cannot create file",A)),N||s("file not found:",A);const W={path:A,flags:H,sah:N};re.mapS3FileToOFile(M,W),W.lockType=l.SQLITE_LOCK_NONE;const J=new l.sqlite3_file(M);return J.$pMethods=_.pointer,J.dispose(),g.poke32(Z,H),0}catch(A){return re.storeErr(A),l.SQLITE_CANTOPEN}},"f")},z=d(function(U){e.capi.sqlite3_vfs_find(U)&&r("VFS name is already registered:",U);const q=new l.sqlite3_vfs,T=l.sqlite3_vfs_find(null),M=T?new l.sqlite3_vfs(T):null;return q.$iVersion=2,q.$szOsFile=l.sqlite3_file.structInfo.sizeof,q.$mxPathname=L,q.addOnDispose(q.$zName=g.allocCString(U),()=>B(q.pointer,0)),M&&(q.$xRandomness=M.$xRandomness,q.$xSleep=M.$xSleep,M.dispose()),!q.$xRandomness&&!k.xRandomness&&(k.xRandomness=function(H,Z,re){const A=g.heap8u();let N=0;for(;N<Z;++N)A[re+N]=Math.random()*255e3&255;return N}),!q.$xSleep&&!k.xSleep&&(k.xSleep=(H,Z)=>0),e.vfs.installVfs({vfs:{struct:q,methods:k}}),q},"createOpfsVfs");class ee{static{d(this,"OpfsSAHPool")}vfsDir;#e;#i;#l;#r=new Map;#t=new Map;#s=new Set;#a=new Map;#n=new Uint8Array(I);#c;#o;#_;constructor(q=Object.create(null)){this.#_=q.verbosity??P.verbosity,this.vfsName=q.name||P.name,this.#o=z(this.vfsName),B(this.#o.pointer,this),this.vfsDir=q.directory||"."+this.vfsName,this.#c=new DataView(this.#n.buffer,this.#n.byteOffset),this.isReady=this.reset(!!(q.clearOnInit??P.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(q.initialCapacity||P.initialCapacity)})}#u(q,...T){this.#_>q&&K[q](this.vfsName+":",...T)}log(...q){this.#u(2,...q)}warn(...q){this.#u(1,...q)}error(...q){this.#u(0,...q)}getVfs(){return this.#o}getCapacity(){return this.#r.size}getFileCount(){return this.#t.size}getFileNames(){const q=[],T=this.#t.keys();for(const M of T)q.push(M);return q}async addCapacity(q){for(let T=0;T<q;++T){const M=R(),Z=await(await this.#i.getFileHandle(M,{create:!0})).createSyncAccessHandle();this.#r.set(Z,M),this.setAssociatedPath(Z,"",0)}return this.getCapacity()}async reduceCapacity(q){let T=0;for(const M of Array.from(this.#s)){if(T===q||this.getFileCount()===this.getCapacity())break;const H=this.#r.get(M);M.close(),await this.#i.removeEntry(H),this.#r.delete(M),this.#s.delete(M),++T}return T}releaseAccessHandles(){for(const q of this.#r.keys())q.close();this.#r.clear(),this.#t.clear(),this.#s.clear()}async acquireAccessHandles(q){const T=[];for await(const[M,H]of this.#i)H.kind==="file"&&T.push([M,H]);return Promise.all(T.map(async([M,H])=>{try{const Z=await H.createSyncAccessHandle();if(this.#r.set(Z,M),q)Z.truncate(y),this.setAssociatedPath(Z,"",0);else{const re=this.getAssociatedPath(Z);re?this.#t.set(re,Z):this.#s.add(Z)}}catch(Z){throw this.storeErr(Z),this.releaseAccessHandles(),Z}}))}getAssociatedPath(q){q.read(this.#n,{at:0});const T=this.#c.getUint32(E);if(this.#n[0]&&(T&l.SQLITE_OPEN_DELETEONCLOSE||!(T&w)))return c(`Removing file with unexpected flags ${T.toString(16)}`,this.#n),this.setAssociatedPath(q,"",0),"";const M=new Uint32Array(Q/4);q.read(M,{at:C});const H=this.computeDigest(this.#n);if(M.every((Z,re)=>Z===H[re])){const Z=this.#n.findIndex(re=>re===0);return Z===0&&q.truncate(y),Z?D.decode(this.#n.subarray(0,Z)):""}else return c("Disassociating file with bad digest."),this.setAssociatedPath(q,"",0),""}setAssociatedPath(q,T,M){const H=S.encodeInto(T,this.#n);L<=H.written+1&&s("Path too long:",T),this.#n.fill(0,H.written,L),this.#c.setUint32(E,M);const Z=this.computeDigest(this.#n);q.write(this.#n,{at:0}),q.write(Z,{at:C}),q.flush(),T?(this.#t.set(T,q),this.#s.delete(q)):(q.truncate(y),this.#s.add(q))}computeDigest(q){let T=3735928559,M=1103547991;for(const H of q)T=31*T+H*307,M=31*M+H*307;return new Uint32Array([T>>>0,M>>>0])}async reset(q){await this.isReady;let T=await navigator.storage.getDirectory(),M;for(const H of this.vfsDir.split("/"))H&&(M=T,T=await T.getDirectoryHandle(H,{create:!0}));return this.#e=T,this.#l=M,this.#i=await this.#e.getDirectoryHandle(x,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(q)}getPath(q){return g.isPtr(q)&&(q=g.cstrToJs(q)),(q instanceof URL?q:new URL(q,"file://localhost/")).pathname}deletePath(q){const T=this.#t.get(q);return T&&(this.#t.delete(q),this.setAssociatedPath(T,"",0)),!!T}storeErr(q,T){return q&&(q.sqlite3Rc=T||l.SQLITE_IOERR,this.error(q)),this.$error=q,T}popErr(){const q=this.$error;return this.$error=void 0,q}nextAvailableSAH(){const[q]=this.#s.keys();return q}getOFileForS3File(q){return this.#a.get(q)}mapS3FileToOFile(q,T){T?(this.#a.set(q,T),a(q,this)):(this.#a.delete(q),a(q,!1))}hasFilename(q){return this.#t.has(q)}getSAHForPath(q){return this.#t.get(q)}async removeVfs(){if(!this.#o.pointer||!this.#i)return!1;l.sqlite3_vfs_unregister(this.#o.pointer),this.#o.dispose();try{this.releaseAccessHandles(),await this.#e.removeEntry(x,{recursive:!0}),this.#i=void 0,await this.#l.removeEntry(this.#e.name,{recursive:!0}),this.#e=this.#l=void 0}catch(q){e.config.error(this.vfsName,"removeVfs() failed:",q)}return!0}exportFile(q){const T=this.#t.get(q)||s("File not found:",q),M=T.getSize()-y,H=new Uint8Array(M>0?M:0);if(M>0){const Z=T.read(H,{at:y});Z!=M&&s("Expected to read "+M+" bytes but read "+Z+".")}return H}async importDbChunked(q,T){const M=this.#t.get(q)||this.nextAvailableSAH()||s("No available handles to import to.");M.truncate(0);let H=0,Z,re=!1;try{for(;(Z=await T())!==void 0;)Z instanceof ArrayBuffer&&(Z=new Uint8Array(Z)),H===0&&Z.byteLength>=15&&(m.affirmDbHeader(Z),re=!0),M.write(Z,{at:y+H}),H+=Z.byteLength;if((H<512||H%512!==0)&&s("Input size",H,"is not correct for an SQLite database."),!re){const A=new Uint8Array(20);M.read(A,{at:0}),m.affirmDbHeader(A)}M.write(new Uint8Array([1,1]),{at:y+18})}catch(A){throw this.setAssociatedPath(M,"",0),A}return this.setAssociatedPath(M,q,l.SQLITE_OPEN_MAIN_DB),H}importDb(q,T){if(T instanceof ArrayBuffer)T=new Uint8Array(T);else if(T instanceof Function)return this.importDbChunked(q,T);const M=this.#t.get(q)||this.nextAvailableSAH()||s("No available handles to import to."),H=T.byteLength;(H<512||H%512!=0)&&s("Byte array size is invalid for an SQLite db.");const Z="SQLite format 3";for(let A=0;A<Z.length;++A)Z.charCodeAt(A)!==T[A]&&s("Input does not contain an SQLite database header.");const re=M.write(T,{at:y});return re!=H?(this.setAssociatedPath(M,"",0),s("Expected to write "+H+" bytes but wrote "+re+".")):(M.write(new Uint8Array([1,1]),{at:y+18}),this.setAssociatedPath(M,q,l.SQLITE_OPEN_MAIN_DB)),re}}class ne{static{d(this,"OpfsSAHPoolUtil")}#e;constructor(q){this.#e=q,this.vfsName=q.vfsName}async addCapacity(q){return this.#e.addCapacity(q)}async reduceCapacity(q){return this.#e.reduceCapacity(q)}getCapacity(){return this.#e.getCapacity(this.#e)}getFileCount(){return this.#e.getFileCount()}getFileNames(){return this.#e.getFileNames()}async reserveMinimumCapacity(q){const T=this.#e.getCapacity();return T<q?this.#e.addCapacity(q-T):T}exportFile(q){return this.#e.exportFile(q)}importDb(q,T){return this.#e.importDb(q,T)}async wipeFiles(){return this.#e.reset(!0)}unlink(q){return this.#e.deletePath(q)}async removeVfs(){return this.#e.removeVfs()}}const se=d(async()=>{const U=await navigator.storage.getDirectory(),q=".opfs-sahpool-sync-check-"+R(),H=(await(await U.getFileHandle(q,{create:!0})).createSyncAccessHandle()).close();return await H,await U.removeEntry(q),H?.then&&s("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0},"apiVersionCheck");e.installOpfsSAHPoolVfs=async function(U=Object.create(null)){const q=U.name||P.name;return i[q]?i[q]:!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?i[q]=Promise.reject(new Error("Missing required OPFS APIs.")):i[q]=se().then(async function(){if(U.$testThrowInInit)throw U.$testThrowInInit;const T=new ee(U);return T.isReady.then(async()=>{const M=new ne(T);if(e.oo1){const H=e.oo1,Z=T.getVfs(),re=d(function(...A){const N=H.DB.dbCtorHelper.normalizeArgs(...A);N.vfs=Z.$zName,H.DB.dbCtorHelper.call(this,N)},"OpfsSAHPoolDb");re.prototype=Object.create(H.DB.prototype),M.OpfsSAHPoolDb=re,H.DB.dbCtorHelper.setVfsPostOpenSql(Z.pointer,function(A,N){N.capi.sqlite3_exec(A,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}return T.log("VFS initialized."),M}).catch(async M=>{throw await T.removeVfs().catch(()=>{}),M})}).catch(T=>i[q]=Promise.reject(T))}}),typeof n<"u"){const e=Object.assign(Object.create(null),{exports:typeof wasmExports>"u"?n.asm:wasmExports,memory:n.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=e;let s;try{s=globalThis.sqlite3ApiBootstrap()}catch(r){throw console.error("sqlite3ApiBootstrap() error:",r),r}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}n.sqlite3=s}}),we.ready}})();const Vn=function(){const qe=st;if(!qe)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const ge=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(ge.debugModule=ge.urlParams.has("sqlite3.debugModule")?(...we)=>console.warn("sqlite3.debugModule:",...we):()=>{},ge.urlParams.has("sqlite3.dir"))ge.sqlite3Dir=ge.urlParams.get("sqlite3.dir")+"/";else if(ge.moduleScript){const we=ge.moduleScript.src.split("/");we.pop(),ge.sqlite3Dir=we.join("/")+"/"}if(globalThis.sqlite3InitModule=d(function we(...t){return qe(...t).then(Oe=>{const Ae=Oe.sqlite3;Ae.scriptInfo=ge,we.__isUnderTest&&(Ae.__isUnderTest=!0);const We=Ae.asyncPostInit;return delete Ae.asyncPostInit,We()}).catch(Oe=>{throw console.error("Exception loading sqlite3 module:",Oe),Oe})},"ff"),globalThis.sqlite3InitModule.ready=qe.ready,globalThis.sqlite3InitModuleState.moduleScript){const we=globalThis.sqlite3InitModuleState;let t=we.moduleScript.src.split("/");t.pop(),we.scriptDir=t.join("/")+"/"}return ge.debugModule("sqlite3InitModuleState =",ge),globalThis.sqlite3InitModule}();st=Vn;var Gn=st;Gn().then(qe=>qe.initWorker1API());
//# sourceMappingURL=sqlite3-worker1-bundler-friendly-ucYijUbt.js.map
