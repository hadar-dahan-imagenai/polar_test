var S_=Object.defineProperty;var i=(t,e)=>S_(t,"name",{value:e,configurable:!0});/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new t.Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="b7b612de-edff-4097-90e7-25b83d45a574",t._sentryDebugIdIdentifier="sentry-dbid-b7b612de-edff-4097-90e7-25b83d45a574")}catch{}})();const Ku=Symbol("Comlink.proxy"),w_=Symbol("Comlink.endpoint"),v_=Symbol("Comlink.releaseProxy"),wo=Symbol("Comlink.finalizer"),oi=Symbol("Comlink.thrown"),Xu=i(t=>typeof t=="object"&&t!==null||typeof t=="function","isObject$1"),A_={canHandle:t=>Xu(t)&&t[Ku],serialize(t){const{port1:e,port2:r}=new MessageChannel;return Fa(t,e),[r,[r]]},deserialize(t){return t.start(),ef(t)}},I_={canHandle:t=>Xu(t)&&oi in t,serialize({value:t}){let e;return t instanceof Error?e={isError:!0,value:{message:t.message,name:t.name,stack:t.stack}}:e={isError:!1,value:t},[e,[]]},deserialize(t){throw t.isError?Object.assign(new Error(t.value.message),t.value):t.value}},Yu=new Map([["proxy",A_],["throw",I_]]);function T_(t,e){for(const r of t)if(e===r||r==="*"||r instanceof RegExp&&r.test(e))return!0;return!1}i(T_,"isAllowedOrigin");function Fa(t,e=globalThis,r=["*"]){e.addEventListener("message",i(function n(s){if(!s||!s.data)return;if(!T_(r,s.origin)){`${s.origin}`;return}const{id:o,type:a,path:l}=Object.assign({path:[]},s.data),f=(s.data.argumentList||[]).map(nr);let _;try{const b=l.slice(0,-1).reduce((w,x)=>w[x],t),m=l.reduce((w,x)=>w[x],t);switch(a){case"GET":_=m;break;case"SET":b[l.slice(-1)[0]]=nr(s.data.value),_=!0;break;case"APPLY":_=m.apply(b,f);break;case"CONSTRUCT":{const w=new m(...f);_=O_(w)}break;case"ENDPOINT":{const{port1:w,port2:x}=new MessageChannel;Fa(t,x),_=rf(w,[w])}break;case"RELEASE":_=void 0;break;default:return}}catch(b){_={value:b,[oi]:0}}Promise.resolve(_).catch(b=>({value:b,[oi]:0})).then(b=>{const[m,w]=vi(b);e.postMessage(Object.assign(Object.assign({},m),{id:o}),w),a==="RELEASE"&&(e.removeEventListener("message",n),Zu(e),wo in t&&typeof t[wo]=="function"&&t[wo]())}).catch(b=>{const[m,w]=vi({value:new TypeError("Unserializable return value"),[oi]:0});e.postMessage(Object.assign(Object.assign({},m),{id:o}),w)})},"callback")),e.start&&e.start()}i(Fa,"expose");function q_(t){return t.constructor.name==="MessagePort"}i(q_,"isMessagePort");function Zu(t){q_(t)&&t.close()}i(Zu,"closeEndPoint");function ef(t,e){const r=new Map;return t.addEventListener("message",i(function(s){const{data:o}=s;if(!o||!o.id)return;const a=r.get(o.id);if(a)try{a(o)}finally{r.delete(o.id)}},"handleMessage")),Wo(t,r,[],e)}i(ef,"wrap$1");function Hs(t){if(t)throw new Error("Proxy has been released and is not useable")}i(Hs,"throwIfProxyReleased");function tf(t){return wr(t,new Map,{type:"RELEASE"}).then(()=>{Zu(t)})}i(tf,"releaseEndpoint");const Si=new WeakMap,wi="FinalizationRegistry"in globalThis&&new FinalizationRegistry(t=>{const e=(Si.get(t)||0)-1;Si.set(t,e),e===0&&tf(t)});function x_(t,e){const r=(Si.get(e)||0)+1;Si.set(e,r),wi&&wi.register(t,e,t)}i(x_,"registerProxy");function k_(t){wi&&wi.unregister(t)}i(k_,"unregisterProxy");function Wo(t,e,r=[],n=function(){}){let s=!1;const o=new Proxy(n,{get(a,l){if(Hs(s),l===v_)return()=>{k_(o),tf(t),e.clear(),s=!0};if(l==="then"){if(r.length===0)return{then:()=>o};const f=wr(t,e,{type:"GET",path:r.map(_=>_.toString())}).then(nr);return f.then.bind(f)}return Wo(t,e,[...r,l])},set(a,l,f){Hs(s);const[_,b]=vi(f);return wr(t,e,{type:"SET",path:[...r,l].map(m=>m.toString()),value:_},b).then(nr)},apply(a,l,f){Hs(s);const _=r[r.length-1];if(_===w_)return wr(t,e,{type:"ENDPOINT"}).then(nr);if(_==="bind")return Wo(t,e,r.slice(0,-1));const[b,m]=Kc(f);return wr(t,e,{type:"APPLY",path:r.map(w=>w.toString()),argumentList:b},m).then(nr)},construct(a,l){Hs(s);const[f,_]=Kc(l);return wr(t,e,{type:"CONSTRUCT",path:r.map(b=>b.toString()),argumentList:f},_).then(nr)}});return x_(o,t),o}i(Wo,"createProxy");function C_(t){return Array.prototype.concat.apply([],t)}i(C_,"myFlat");function Kc(t){const e=t.map(vi);return[e.map(r=>r[0]),C_(e.map(r=>r[1]))]}i(Kc,"processArguments");const nf=new WeakMap;function rf(t,e){return nf.set(t,e),t}i(rf,"transfer");function O_(t){return Object.assign(t,{[Ku]:!0})}i(O_,"proxy");function vi(t){for(const[e,r]of Yu)if(r.canHandle(t)){const[n,s]=r.serialize(t);return[{type:"HANDLER",name:e,value:n},s]}return[{type:"RAW",value:t},nf.get(t)||[]]}i(vi,"toWireValue");function nr(t){switch(t.type){case"HANDLER":return Yu.get(t.name).deserialize(t.value);case"RAW":return t.value}}i(nr,"fromWireValue");function wr(t,e,r,n){return new Promise(s=>{const o=R_();e.set(o,s),t.start&&t.start(),t.postMessage(Object.assign({id:o},r),n)})}i(wr,"requestResponseMessage");function R_(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}i(R_,"generateUUID");var L_=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};L_.SENTRY_RELEASE={id:"2.2.10+c54b50e"};function F_(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{}}i(F_,"getGlobalObject");function N_(t){const e=F_();try{e._sentryDebugIds=e._sentryDebugIds||{};for(const r in t)e._sentryDebugIds[r]=t[r];return JSON.stringify(e._sentryDebugIds)}catch{}}i(N_,"registerSentryDebugIds");function sf(t,e){return i(function(){return t.apply(e,arguments)},"wrap")}i(sf,"bind");const{toString:P_}=Object.prototype,{getPrototypeOf:Na}=Object,Vi=(t=>e=>{const r=P_.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),mn=i(t=>(t=t.toLowerCase(),e=>Vi(e)===t),"kindOfTest"),Ji=i(t=>e=>typeof e===t,"typeOfTest"),{isArray:$r}=Array,ps=Ji("undefined");function D_(t){return t!==null&&!ps(t)&&t.constructor!==null&&!ps(t.constructor)&&Jt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}i(D_,"isBuffer");const of=mn("ArrayBuffer");function M_(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&of(t.buffer),e}i(M_,"isArrayBufferView");const B_=Ji("string"),Jt=Ji("function"),af=Ji("number"),Ki=i(t=>t!==null&&typeof t=="object","isObject"),U_=i(t=>t===!0||t===!1,"isBoolean"),ai=i(t=>{if(Vi(t)!=="object")return!1;const e=Na(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},"isPlainObject$2"),j_=mn("Date"),H_=mn("File"),z_=mn("Blob"),W_=mn("FileList"),$_=i(t=>Ki(t)&&Jt(t.pipe),"isStream"),Q_=i(t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Jt(t.append)&&((e=Vi(t))==="formdata"||e==="object"&&Jt(t.toString)&&t.toString()==="[object FormData]"))},"isFormData"),G_=mn("URLSearchParams"),V_=i(t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),"trim");function As(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let n,s;if(typeof t!="object"&&(t=[t]),$r(t))for(n=0,s=t.length;n<s;n++)e.call(null,t[n],n,t);else{const o=r?Object.getOwnPropertyNames(t):Object.keys(t),a=o.length;let l;for(n=0;n<a;n++)l=o[n],e.call(null,t[l],l,t)}}i(As,"forEach");function cf(t,e){e=e.toLowerCase();const r=Object.keys(t);let n=r.length,s;for(;n-- >0;)if(s=r[n],e===s.toLowerCase())return s;return null}i(cf,"findKey");const lf=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,uf=i(t=>!ps(t)&&t!==lf,"isContextDefined");function $o(){const{caseless:t}=uf(this)&&this||{},e={},r=i((n,s)=>{const o=t&&cf(e,s)||s;ai(e[o])&&ai(n)?e[o]=$o(e[o],n):ai(n)?e[o]=$o({},n):$r(n)?e[o]=n.slice():e[o]=n},"assignValue");for(let n=0,s=arguments.length;n<s;n++)arguments[n]&&As(arguments[n],r);return e}i($o,"merge");const J_=i((t,e,r,{allOwnKeys:n}={})=>(As(e,(s,o)=>{r&&Jt(s)?t[o]=sf(s,r):t[o]=s},{allOwnKeys:n}),t),"extend"),K_=i(t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),"stripBOM"),X_=i((t,e,r,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},"inherits"),Y_=i((t,e,r,n)=>{let s,o,a;const l={};if(e=e||{},t==null)return e;do{for(s=Object.getOwnPropertyNames(t),o=s.length;o-- >0;)a=s[o],(!n||n(a,t,e))&&!l[a]&&(e[a]=t[a],l[a]=!0);t=r!==!1&&Na(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},"toFlatObject"),Z_=i((t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const n=t.indexOf(e,r);return n!==-1&&n===r},"endsWith"),em=i(t=>{if(!t)return null;if($r(t))return t;let e=t.length;if(!af(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},"toArray"),tm=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Na(Uint8Array)),nm=i((t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let s;for(;(s=n.next())&&!s.done;){const o=s.value;e.call(t,o[0],o[1])}},"forEachEntry"),rm=i((t,e)=>{let r;const n=[];for(;(r=t.exec(e))!==null;)n.push(r);return n},"matchAll"),sm=mn("HTMLFormElement"),im=i(t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,i(function(r,n,s){return n.toUpperCase()+s},"replacer")),"toCamelCase"),Xc=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),om=mn("RegExp"),ff=i((t,e)=>{const r=Object.getOwnPropertyDescriptors(t),n={};As(r,(s,o)=>{let a;(a=e(s,o,t))!==!1&&(n[o]=a||s)}),Object.defineProperties(t,n)},"reduceDescriptors"),am=i(t=>{ff(t,(e,r)=>{if(Jt(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const n=t[r];if(Jt(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},"freezeMethods"),cm=i((t,e)=>{const r={},n=i(s=>{s.forEach(o=>{r[o]=!0})},"define");return $r(t)?n(t):n(String(t).split(e)),r},"toObjectSet"),lm=i(()=>{},"noop$1"),um=i((t,e)=>(t=+t,Number.isFinite(t)?t:e),"toFiniteNumber"),vo="abcdefghijklmnopqrstuvwxyz",Yc="0123456789",df={DIGIT:Yc,ALPHA:vo,ALPHA_DIGIT:vo+vo.toUpperCase()+Yc},fm=i((t=16,e=df.ALPHA_DIGIT)=>{let r="";const{length:n}=e;for(;t--;)r+=e[Math.random()*n|0];return r},"generateString");function dm(t){return!!(t&&Jt(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}i(dm,"isSpecCompliantForm");const pm=i(t=>{const e=new Array(10),r=i((n,s)=>{if(Ki(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[s]=n;const o=$r(n)?[]:{};return As(n,(a,l)=>{const f=r(a,s+1);!ps(f)&&(o[l]=f)}),e[s]=void 0,o}}return n},"visit");return r(t,0)},"toJSONObject"),hm=mn("AsyncFunction"),_m=i(t=>t&&(Ki(t)||Jt(t))&&Jt(t.then)&&Jt(t.catch),"isThenable$1");var le={isArray:$r,isArrayBuffer:of,isBuffer:D_,isFormData:Q_,isArrayBufferView:M_,isString:B_,isNumber:af,isBoolean:U_,isObject:Ki,isPlainObject:ai,isUndefined:ps,isDate:j_,isFile:H_,isBlob:z_,isRegExp:om,isFunction:Jt,isStream:$_,isURLSearchParams:G_,isTypedArray:tm,isFileList:W_,forEach:As,merge:$o,extend:J_,trim:V_,stripBOM:K_,inherits:X_,toFlatObject:Y_,kindOf:Vi,kindOfTest:mn,endsWith:Z_,toArray:em,forEachEntry:nm,matchAll:rm,isHTMLForm:sm,hasOwnProperty:Xc,hasOwnProp:Xc,reduceDescriptors:ff,freezeMethods:am,toObjectSet:cm,toCamelCase:im,noop:lm,toFiniteNumber:um,findKey:cf,global:lf,isContextDefined:uf,ALPHABET:df,generateString:fm,isSpecCompliantForm:dm,toJSONObject:pm,isAsyncFn:hm,isThenable:_m};function st(t,e,r,n,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),s&&(this.response=s)}i(st,"AxiosError");le.inherits(st,Error,{toJSON:i(function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:le.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}},"toJSON")});const pf=st.prototype,hf={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{hf[t]={value:t}});Object.defineProperties(st,hf);Object.defineProperty(pf,"isAxiosError",{value:!0});st.from=(t,e,r,n,s,o)=>{const a=Object.create(pf);return le.toFlatObject(t,a,i(function(f){return f!==Error.prototype},"filter"),l=>l!=="isAxiosError"),st.call(a,t.message,e,r,n,s),a.cause=t,a.name=t.name,o&&Object.assign(a,o),a};var mm=null;function Qo(t){return le.isPlainObject(t)||le.isArray(t)}i(Qo,"isVisitable");function _f(t){return le.endsWith(t,"[]")?t.slice(0,-2):t}i(_f,"removeBrackets");function Zc(t,e,r){return t?t.concat(e).map(i(function(s,o){return s=_f(s),!r&&o?"["+s+"]":s},"each")).join(r?".":""):e}i(Zc,"renderKey");function gm(t){return le.isArray(t)&&!t.some(Qo)}i(gm,"isFlatArray");const ym=le.toFlatObject(le,{},null,i(function(e){return/^is[A-Z]/.test(e)},"filter"));function Xi(t,e,r){if(!le.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=le.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,i(function(R,U){return!le.isUndefined(U[R])},"defined"));const n=r.metaTokens,s=r.visitor||b,o=r.dots,a=r.indexes,f=(r.Blob||typeof Blob<"u"&&Blob)&&le.isSpecCompliantForm(e);if(!le.isFunction(s))throw new TypeError("visitor must be a function");function _(q){if(q===null)return"";if(le.isDate(q))return q.toISOString();if(!f&&le.isBlob(q))throw new st("Blob is not supported. Use a Buffer instead.");return le.isArrayBuffer(q)||le.isTypedArray(q)?f&&typeof Blob=="function"?new Blob([q]):Buffer.from(q):q}i(_,"convertValue");function b(q,R,U){let j=q;if(q&&!U&&typeof q=="object"){if(le.endsWith(R,"{}"))R=n?R:R.slice(0,-2),q=JSON.stringify(q);else if(le.isArray(q)&&gm(q)||(le.isFileList(q)||le.endsWith(R,"[]"))&&(j=le.toArray(q)))return R=_f(R),j.forEach(i(function(fe,ge){!(le.isUndefined(fe)||fe===null)&&e.append(a===!0?Zc([R],ge,o):a===null?R:R+"[]",_(fe))},"each")),!1}return Qo(q)?!0:(e.append(Zc(U,R,o),_(q)),!1)}i(b,"defaultVisitor");const m=[],w=Object.assign(ym,{defaultVisitor:b,convertValue:_,isVisitable:Qo});function x(q,R){if(!le.isUndefined(q)){if(m.indexOf(q)!==-1)throw Error("Circular reference detected in "+R.join("."));m.push(q),le.forEach(q,i(function(j,ae){(!(le.isUndefined(j)||j===null)&&s.call(e,j,le.isString(ae)?ae.trim():ae,R,w))===!0&&x(j,R?R.concat(ae):[ae])},"each")),m.pop()}}if(i(x,"build"),!le.isObject(t))throw new TypeError("data must be an object");return x(t),e}i(Xi,"toFormData");function el(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,i(function(n){return e[n]},"replacer"))}i(el,"encode$1");function Pa(t,e){this._pairs=[],t&&Xi(t,this,e)}i(Pa,"AxiosURLSearchParams");const mf=Pa.prototype;mf.append=i(function(e,r){this._pairs.push([e,r])},"append");mf.toString=i(function(e){const r=e?function(n){return e.call(this,n,el)}:el;return this._pairs.map(i(function(s){return r(s[0])+"="+r(s[1])},"each"),"").join("&")},"toString");function bm(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}i(bm,"encode");function gf(t,e,r){if(!e)return t;const n=r&&r.encode||bm,s=r&&r.serialize;let o;if(s?o=s(e,r):o=le.isURLSearchParams(e)?e.toString():new Pa(e,r).toString(n),o){const a=t.indexOf("#");a!==-1&&(t=t.slice(0,a)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}i(gf,"buildURL");class tl{static{i(this,"InterceptorManager")}constructor(){this.handlers=[]}use(e,r,n){return this.handlers.push({fulfilled:e,rejected:r,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){le.forEach(this.handlers,i(function(n){n!==null&&e(n)},"forEachHandler"))}}var yf={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Em=typeof URLSearchParams<"u"?URLSearchParams:Pa,Sm=typeof FormData<"u"?FormData:null,wm=typeof Blob<"u"?Blob:null,vm={isBrowser:!0,classes:{URLSearchParams:Em,FormData:Sm,Blob:wm},protocols:["http","https","file","blob","url","data"]};const bf=typeof window<"u"&&typeof document<"u",Am=(t=>bf&&["ReactNative","NativeScript","NS"].indexOf(t)<0)(typeof navigator<"u"&&navigator.product),Im=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function";var Tm=Object.freeze({__proto__:null,hasBrowserEnv:bf,hasStandardBrowserEnv:Am,hasStandardBrowserWebWorkerEnv:Im}),hn={...Tm,...vm};function qm(t,e){return Xi(t,new hn.classes.URLSearchParams,Object.assign({visitor:function(r,n,s,o){return hn.isNode&&le.isBuffer(r)?(this.append(n,r.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}i(qm,"toURLEncodedForm");function xm(t){return le.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}i(xm,"parsePropPath");function km(t){const e={},r=Object.keys(t);let n;const s=r.length;let o;for(n=0;n<s;n++)o=r[n],e[o]=t[o];return e}i(km,"arrayToObject");function Ef(t){function e(r,n,s,o){let a=r[o++];if(a==="__proto__")return!0;const l=Number.isFinite(+a),f=o>=r.length;return a=!a&&le.isArray(s)?s.length:a,f?(le.hasOwnProp(s,a)?s[a]=[s[a],n]:s[a]=n,!l):((!s[a]||!le.isObject(s[a]))&&(s[a]=[]),e(r,n,s[a],o)&&le.isArray(s[a])&&(s[a]=km(s[a])),!l)}if(i(e,"buildPath"),le.isFormData(t)&&le.isFunction(t.entries)){const r={};return le.forEachEntry(t,(n,s)=>{e(xm(n),s,r,0)}),r}return null}i(Ef,"formDataToJSON");function Cm(t,e,r){if(le.isString(t))try{return(e||JSON.parse)(t),le.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(r||JSON.stringify)(t)}i(Cm,"stringifySafely");const Da={transitional:yf,adapter:["xhr","http"],transformRequest:[i(function(e,r){const n=r.getContentType()||"",s=n.indexOf("application/json")>-1,o=le.isObject(e);if(o&&le.isHTMLForm(e)&&(e=new FormData(e)),le.isFormData(e))return s?JSON.stringify(Ef(e)):e;if(le.isArrayBuffer(e)||le.isBuffer(e)||le.isStream(e)||le.isFile(e)||le.isBlob(e))return e;if(le.isArrayBufferView(e))return e.buffer;if(le.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return qm(e,this.formSerializer).toString();if((l=le.isFileList(e))||n.indexOf("multipart/form-data")>-1){const f=this.env&&this.env.FormData;return Xi(l?{"files[]":e}:e,f&&new f,this.formSerializer)}}return o||s?(r.setContentType("application/json",!1),Cm(e)):e},"transformRequest")],transformResponse:[i(function(e){const r=this.transitional||Da.transitional,n=r&&r.forcedJSONParsing,s=this.responseType==="json";if(e&&le.isString(e)&&(n&&!this.responseType||s)){const a=!(r&&r.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(l){if(a)throw l.name==="SyntaxError"?st.from(l,st.ERR_BAD_RESPONSE,this,null,this.response):l}}return e},"transformResponse")],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:hn.classes.FormData,Blob:hn.classes.Blob},validateStatus:i(function(e){return e>=200&&e<300},"validateStatus"),headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};le.forEach(["delete","get","head","post","put","patch"],t=>{Da.headers[t]={}});var Ma=Da;const Om=le.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);var Rm=i(t=>{const e={};let r,n,s;return t&&t.split(`
`).forEach(i(function(a){s=a.indexOf(":"),r=a.substring(0,s).trim().toLowerCase(),n=a.substring(s+1).trim(),!(!r||e[r]&&Om[r])&&(r==="set-cookie"?e[r]?e[r].push(n):e[r]=[n]:e[r]=e[r]?e[r]+", "+n:n)},"parser")),e},"parseHeaders");const nl=Symbol("internals");function ss(t){return t&&String(t).trim().toLowerCase()}i(ss,"normalizeHeader");function ci(t){return t===!1||t==null?t:le.isArray(t)?t.map(ci):String(t)}i(ci,"normalizeValue");function Lm(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=r.exec(t);)e[n[1]]=n[2];return e}i(Lm,"parseTokens");const Fm=i(t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim()),"isValidHeaderName");function Ao(t,e,r,n,s){if(le.isFunction(n))return n.call(this,e,r);if(s&&(e=r),!!le.isString(e)){if(le.isString(n))return e.indexOf(n)!==-1;if(le.isRegExp(n))return n.test(e)}}i(Ao,"matchHeaderValue");function Nm(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,n)=>r.toUpperCase()+n)}i(Nm,"formatHeader");function Pm(t,e){const r=le.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+r,{value:function(s,o,a){return this[n].call(this,e,s,o,a)},configurable:!0})})}i(Pm,"buildAccessors");class Yi{static{i(this,"AxiosHeaders")}constructor(e){e&&this.set(e)}set(e,r,n){const s=this;function o(l,f,_){const b=ss(f);if(!b)throw new Error("header name must be a non-empty string");const m=le.findKey(s,b);(!m||s[m]===void 0||_===!0||_===void 0&&s[m]!==!1)&&(s[m||f]=ci(l))}i(o,"setHeader");const a=i((l,f)=>le.forEach(l,(_,b)=>o(_,b,f)),"setHeaders");return le.isPlainObject(e)||e instanceof this.constructor?a(e,r):le.isString(e)&&(e=e.trim())&&!Fm(e)?a(Rm(e),r):e!=null&&o(r,e,n),this}get(e,r){if(e=ss(e),e){const n=le.findKey(this,e);if(n){const s=this[n];if(!r)return s;if(r===!0)return Lm(s);if(le.isFunction(r))return r.call(this,s,n);if(le.isRegExp(r))return r.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=ss(e),e){const n=le.findKey(this,e);return!!(n&&this[n]!==void 0&&(!r||Ao(this,this[n],n,r)))}return!1}delete(e,r){const n=this;let s=!1;function o(a){if(a=ss(a),a){const l=le.findKey(n,a);l&&(!r||Ao(n,n[l],l,r))&&(delete n[l],s=!0)}}return i(o,"deleteHeader"),le.isArray(e)?e.forEach(o):o(e),s}clear(e){const r=Object.keys(this);let n=r.length,s=!1;for(;n--;){const o=r[n];(!e||Ao(this,this[o],o,e,!0))&&(delete this[o],s=!0)}return s}normalize(e){const r=this,n={};return le.forEach(this,(s,o)=>{const a=le.findKey(n,o);if(a){r[a]=ci(s),delete r[o];return}const l=e?Nm(o):String(o).trim();l!==o&&delete r[o],r[l]=ci(s),n[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return le.forEach(this,(n,s)=>{n!=null&&n!==!1&&(r[s]=e&&le.isArray(n)?n.join(", "):n)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const n=new this(e);return r.forEach(s=>n.set(s)),n}static accessor(e){const n=(this[nl]=this[nl]={accessors:{}}).accessors,s=this.prototype;function o(a){const l=ss(a);n[l]||(Pm(s,a),n[l]=!0)}return i(o,"defineAccessor"),le.isArray(e)?e.forEach(o):o(e),this}}Yi.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);le.reduceDescriptors(Yi.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[r]=n}}});le.freezeMethods(Yi);var In=Yi;function Io(t,e){const r=this||Ma,n=e||r,s=In.from(n.headers);let o=n.data;return le.forEach(t,i(function(l){o=l.call(r,o,s.normalize(),e?e.status:void 0)},"transform")),s.normalize(),o}i(Io,"transformData");function Sf(t){return!!(t&&t.__CANCEL__)}i(Sf,"isCancel");function Is(t,e,r){st.call(this,t??"canceled",st.ERR_CANCELED,e,r),this.name="CanceledError"}i(Is,"CanceledError");le.inherits(Is,st,{__CANCEL__:!0});function Dm(t,e,r){const n=r.config.validateStatus;!r.status||!n||n(r.status)?t(r):e(new st("Request failed with status code "+r.status,[st.ERR_BAD_REQUEST,st.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}i(Dm,"settle");var Mm=hn.hasStandardBrowserEnv?{write(t,e,r,n,s,o){const a=[t+"="+encodeURIComponent(e)];le.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),le.isString(n)&&a.push("path="+n),le.isString(s)&&a.push("domain="+s),o===!0&&a.push("secure"),document.cookie=a.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function Bm(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}i(Bm,"isAbsoluteURL");function Um(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}i(Um,"combineURLs");function wf(t,e){return t&&!Bm(e)?Um(t,e):e}i(wf,"buildFullPath");var jm=hn.hasStandardBrowserEnv?i(function(){const e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let n;function s(o){let a=o;return e&&(r.setAttribute("href",a),a=r.href),r.setAttribute("href",a),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i(s,"resolveURL"),n=s(window.location.href),i(function(a){const l=le.isString(a)?s(a):a;return l.protocol===n.protocol&&l.host===n.host},"isURLSameOrigin")},"standardBrowserEnv")():i(function(){return i(function(){return!0},"isURLSameOrigin")},"nonStandardBrowserEnv")();function Hm(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}i(Hm,"parseProtocol");function zm(t,e){t=t||10;const r=new Array(t),n=new Array(t);let s=0,o=0,a;return e=e!==void 0?e:1e3,i(function(f){const _=Date.now(),b=n[o];a||(a=_),r[s]=f,n[s]=_;let m=o,w=0;for(;m!==s;)w+=r[m++],m=m%t;if(s=(s+1)%t,s===o&&(o=(o+1)%t),_-a<e)return;const x=b&&_-b;return x?Math.round(w*1e3/x):void 0},"push")}i(zm,"speedometer");function rl(t,e){let r=0;const n=zm(50,250);return s=>{const o=s.loaded,a=s.lengthComputable?s.total:void 0,l=o-r,f=n(l),_=o<=a;r=o;const b={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:f||void 0,estimated:f&&a&&_?(a-o)/f:void 0,event:s};b[e?"download":"upload"]=!0,t(b)}}i(rl,"progressEventReducer");const Wm=typeof XMLHttpRequest<"u";var $m=Wm&&function(t){return new Promise(i(function(r,n){let s=t.data;const o=In.from(t.headers).normalize();let{responseType:a,withXSRFToken:l}=t,f;function _(){t.cancelToken&&t.cancelToken.unsubscribe(f),t.signal&&t.signal.removeEventListener("abort",f)}i(_,"done");let b;if(le.isFormData(s)){if(hn.hasStandardBrowserEnv||hn.hasStandardBrowserWebWorkerEnv)o.setContentType(!1);else if((b=o.getContentType())!==!1){const[R,...U]=b?b.split(";").map(j=>j.trim()).filter(Boolean):[];o.setContentType([R||"multipart/form-data",...U].join("; "))}}let m=new XMLHttpRequest;if(t.auth){const R=t.auth.username||"",U=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(R+":"+U))}const w=wf(t.baseURL,t.url);m.open(t.method.toUpperCase(),gf(w,t.params,t.paramsSerializer),!0),m.timeout=t.timeout;function x(){if(!m)return;const R=In.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders()),j={data:!a||a==="text"||a==="json"?m.responseText:m.response,status:m.status,statusText:m.statusText,headers:R,config:t,request:m};Dm(i(function(fe){r(fe),_()},"_resolve"),i(function(fe){n(fe),_()},"_reject"),j),m=null}if(i(x,"onloadend"),"onloadend"in m?m.onloadend=x:m.onreadystatechange=i(function(){!m||m.readyState!==4||m.status===0&&!(m.responseURL&&m.responseURL.indexOf("file:")===0)||setTimeout(x)},"handleLoad"),m.onabort=i(function(){m&&(n(new st("Request aborted",st.ECONNABORTED,t,m)),m=null)},"handleAbort"),m.onerror=i(function(){n(new st("Network Error",st.ERR_NETWORK,t,m)),m=null},"handleError"),m.ontimeout=i(function(){let U=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const j=t.transitional||yf;t.timeoutErrorMessage&&(U=t.timeoutErrorMessage),n(new st(U,j.clarifyTimeoutError?st.ETIMEDOUT:st.ECONNABORTED,t,m)),m=null},"handleTimeout"),hn.hasStandardBrowserEnv&&(l&&le.isFunction(l)&&(l=l(t)),l||l!==!1&&jm(w))){const R=t.xsrfHeaderName&&t.xsrfCookieName&&Mm.read(t.xsrfCookieName);R&&o.set(t.xsrfHeaderName,R)}s===void 0&&o.setContentType(null),"setRequestHeader"in m&&le.forEach(o.toJSON(),i(function(U,j){m.setRequestHeader(j,U)},"setRequestHeader")),le.isUndefined(t.withCredentials)||(m.withCredentials=!!t.withCredentials),a&&a!=="json"&&(m.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&m.addEventListener("progress",rl(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&m.upload&&m.upload.addEventListener("progress",rl(t.onUploadProgress)),(t.cancelToken||t.signal)&&(f=i(R=>{m&&(n(!R||R.type?new Is(null,t,m):R),m.abort(),m=null)},"onCanceled"),t.cancelToken&&t.cancelToken.subscribe(f),t.signal&&(t.signal.aborted?f():t.signal.addEventListener("abort",f)));const q=Hm(w);if(q&&hn.protocols.indexOf(q)===-1){n(new st("Unsupported protocol "+q+":",st.ERR_BAD_REQUEST,t));return}m.send(s||null)},"dispatchXhrRequest"))};const Go={http:mm,xhr:$m};le.forEach(Go,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const sl=i(t=>`- ${t}`,"renderReason"),Qm=i(t=>le.isFunction(t)||t===null||t===!1,"isResolvedHandle");var vf={getAdapter:t=>{t=le.isArray(t)?t:[t];const{length:e}=t;let r,n;const s={};for(let o=0;o<e;o++){r=t[o];let a;if(n=r,!Qm(r)&&(n=Go[(a=String(r)).toLowerCase()],n===void 0))throw new st(`Unknown adapter '${a}'`);if(n)break;s[a||"#"+o]=n}if(!n){const o=Object.entries(s).map(([l,f])=>`adapter ${l} `+(f===!1?"is not supported by the environment":"is not available in the build"));let a=e?o.length>1?`since :
`+o.map(sl).join(`
`):" "+sl(o[0]):"as no adapter specified";throw new st("There is no suitable adapter to dispatch the request "+a,"ERR_NOT_SUPPORT")}return n},adapters:Go};function To(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Is(null,t)}i(To,"throwIfCancellationRequested");function il(t){return To(t),t.headers=In.from(t.headers),t.data=Io.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),vf.getAdapter(t.adapter||Ma.adapter)(t).then(i(function(n){return To(t),n.data=Io.call(t,t.transformResponse,n),n.headers=In.from(n.headers),n},"onAdapterResolution"),i(function(n){return Sf(n)||(To(t),n&&n.response&&(n.response.data=Io.call(t,t.transformResponse,n.response),n.response.headers=In.from(n.response.headers))),Promise.reject(n)},"onAdapterRejection"))}i(il,"dispatchRequest");const ol=i(t=>t instanceof In?{...t}:t,"headersToObject");function Lr(t,e){e=e||{};const r={};function n(_,b,m){return le.isPlainObject(_)&&le.isPlainObject(b)?le.merge.call({caseless:m},_,b):le.isPlainObject(b)?le.merge({},b):le.isArray(b)?b.slice():b}i(n,"getMergedValue");function s(_,b,m){if(le.isUndefined(b)){if(!le.isUndefined(_))return n(void 0,_,m)}else return n(_,b,m)}i(s,"mergeDeepProperties");function o(_,b){if(!le.isUndefined(b))return n(void 0,b)}i(o,"valueFromConfig2");function a(_,b){if(le.isUndefined(b)){if(!le.isUndefined(_))return n(void 0,_)}else return n(void 0,b)}i(a,"defaultToConfig2");function l(_,b,m){if(m in e)return n(_,b);if(m in t)return n(void 0,_)}i(l,"mergeDirectKeys");const f={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:l,headers:(_,b)=>s(ol(_),ol(b),!0)};return le.forEach(Object.keys(Object.assign({},t,e)),i(function(b){const m=f[b]||s,w=m(t[b],e[b],b);le.isUndefined(w)&&m!==l||(r[b]=w)},"computeConfigValue")),r}i(Lr,"mergeConfig");const Af="1.6.8",Ba={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Ba[t]=i(function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t},"validator")});const al={};Ba.transitional=i(function(e,r,n){function s(o,a){return"[Axios v"+Af+"] Transitional option '"+o+"'"+a+(n?". "+n:"")}return i(s,"formatMessage"),(o,a,l)=>{if(e===!1)throw new st(s(a," has been removed"+(r?" in "+r:"")),st.ERR_DEPRECATED);return r&&!al[a]&&(al[a]=!0,s(a," has been deprecated since v"+r+" and will be removed in the near future")),e?e(o,a,l):!0}},"transitional");function Gm(t,e,r){if(typeof t!="object")throw new st("options must be an object",st.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let s=n.length;for(;s-- >0;){const o=n[s],a=e[o];if(a){const l=t[o],f=l===void 0||a(l,o,t);if(f!==!0)throw new st("option "+o+" must be "+f,st.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new st("Unknown option "+o,st.ERR_BAD_OPTION)}}i(Gm,"assertOptions");var Vo={assertOptions:Gm,validators:Ba};const Nn=Vo.validators;class Ai{static{i(this,"Axios")}constructor(e){this.defaults=e,this.interceptors={request:new tl,response:new tl}}async request(e,r){try{return await this._request(e,r)}catch(n){if(n instanceof Error){let s;Error.captureStackTrace?Error.captureStackTrace(s={}):s=new Error;const o=s.stack?s.stack.replace(/^.+\n/,""):"";n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}throw n}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=Lr(this.defaults,r);const{transitional:n,paramsSerializer:s,headers:o}=r;n!==void 0&&Vo.assertOptions(n,{silentJSONParsing:Nn.transitional(Nn.boolean),forcedJSONParsing:Nn.transitional(Nn.boolean),clarifyTimeoutError:Nn.transitional(Nn.boolean)},!1),s!=null&&(le.isFunction(s)?r.paramsSerializer={serialize:s}:Vo.assertOptions(s,{encode:Nn.function,serialize:Nn.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let a=o&&le.merge(o.common,o[r.method]);o&&le.forEach(["delete","get","head","post","put","patch","common"],q=>{delete o[q]}),r.headers=In.concat(a,o);const l=[];let f=!0;this.interceptors.request.forEach(i(function(R){typeof R.runWhen=="function"&&R.runWhen(r)===!1||(f=f&&R.synchronous,l.unshift(R.fulfilled,R.rejected))},"unshiftRequestInterceptors"));const _=[];this.interceptors.response.forEach(i(function(R){_.push(R.fulfilled,R.rejected)},"pushResponseInterceptors"));let b,m=0,w;if(!f){const q=[il.bind(this),void 0];for(q.unshift.apply(q,l),q.push.apply(q,_),w=q.length,b=Promise.resolve(r);m<w;)b=b.then(q[m++],q[m++]);return b}w=l.length;let x=r;for(m=0;m<w;){const q=l[m++],R=l[m++];try{x=q(x)}catch(U){R.call(this,U);break}}try{b=il.call(this,x)}catch(q){return Promise.reject(q)}for(m=0,w=_.length;m<w;)b=b.then(_[m++],_[m++]);return b}getUri(e){e=Lr(this.defaults,e);const r=wf(e.baseURL,e.url);return gf(r,e.params,e.paramsSerializer)}}le.forEach(["delete","get","head","options"],i(function(e){Ai.prototype[e]=function(r,n){return this.request(Lr(n||{},{method:e,url:r,data:(n||{}).data}))}},"forEachMethodNoData"));le.forEach(["post","put","patch"],i(function(e){function r(n){return i(function(o,a,l){return this.request(Lr(l||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:a}))},"httpMethod")}i(r,"generateHTTPMethod"),Ai.prototype[e]=r(),Ai.prototype[e+"Form"]=r(!0)},"forEachMethodWithData"));var li=Ai;class Ua{static{i(this,"CancelToken")}constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(i(function(o){r=o},"promiseExecutor"));const n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o;const a=new Promise(l=>{n.subscribe(l),o=l}).then(s);return a.cancel=i(function(){n.unsubscribe(o)},"reject"),a},e(i(function(o,a,l){n.reason||(n.reason=new Is(o,a,l),r(n.reason))},"cancel"))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}static source(){let e;return{token:new Ua(i(function(s){e=s},"executor")),cancel:e}}}var Vm=Ua;function Jm(t){return i(function(r){return t.apply(null,r)},"wrap")}i(Jm,"spread");function Km(t){return le.isObject(t)&&t.isAxiosError===!0}i(Km,"isAxiosError");const Jo={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Jo).forEach(([t,e])=>{Jo[e]=t});var Xm=Jo;function If(t){const e=new li(t),r=sf(li.prototype.request,e);return le.extend(r,li.prototype,e,{allOwnKeys:!0}),le.extend(r,e,null,{allOwnKeys:!0}),r.create=i(function(s){return If(Lr(t,s))},"create"),r}i(If,"createInstance");const St=If(Ma);St.Axios=li;St.CanceledError=Is;St.CancelToken=Vm;St.isCancel=Sf;St.VERSION=Af;St.toFormData=Xi;St.AxiosError=st;St.Cancel=St.CanceledError;St.all=i(function(e){return Promise.all(e)},"all");St.spread=Jm;St.isAxiosError=Km;St.mergeConfig=Lr;St.AxiosHeaders=In;St.formToJSON=t=>Ef(le.isHTMLForm(t)?new FormData(t):t);St.getAdapter=vf.getAdapter;St.HttpStatusCode=Xm;St.default=St;var Ym=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zm(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}i(Zm,"getDefaultExportFromCjs");const eg=new Set(["ENOTFOUND","ENETUNREACH","UNABLE_TO_GET_ISSUER_CERT","UNABLE_TO_GET_CRL","UNABLE_TO_DECRYPT_CERT_SIGNATURE","UNABLE_TO_DECRYPT_CRL_SIGNATURE","UNABLE_TO_DECODE_ISSUER_PUBLIC_KEY","CERT_SIGNATURE_FAILURE","CRL_SIGNATURE_FAILURE","CERT_NOT_YET_VALID","CERT_HAS_EXPIRED","CRL_NOT_YET_VALID","CRL_HAS_EXPIRED","ERROR_IN_CERT_NOT_BEFORE_FIELD","ERROR_IN_CERT_NOT_AFTER_FIELD","ERROR_IN_CRL_LAST_UPDATE_FIELD","ERROR_IN_CRL_NEXT_UPDATE_FIELD","OUT_OF_MEM","DEPTH_ZERO_SELF_SIGNED_CERT","SELF_SIGNED_CERT_IN_CHAIN","UNABLE_TO_GET_ISSUER_CERT_LOCALLY","UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_CHAIN_TOO_LONG","CERT_REVOKED","INVALID_CA","PATH_LENGTH_EXCEEDED","INVALID_PURPOSE","CERT_UNTRUSTED","CERT_REJECTED","HOSTNAME_MISMATCH"]);var tg=i(t=>!eg.has(t&&t.code),"isRetryAllowed"),ng=Zm(tg);const ja="axios-retry";function Tf(t){const e=["ERR_CANCELED","ECONNABORTED"];return t.response||!t.code||e.includes(t.code)?!1:ng(t)}i(Tf,"isNetworkError");const qf=["get","head","options"],rg=qf.concat(["put","delete"]);function Ha(t){return t.code!=="ECONNABORTED"&&(!t.response||t.response.status===429||t.response.status>=500&&t.response.status<=599)}i(Ha,"isRetryableError");function sg(t){return t.config?.method?Ha(t)&&qf.indexOf(t.config.method)!==-1:!1}i(sg,"isSafeRequestError");function xf(t){return t.config?.method?Ha(t)&&rg.indexOf(t.config.method)!==-1:!1}i(xf,"isIdempotentRequestError");function kf(t){return Tf(t)||xf(t)}i(kf,"isNetworkOrIdempotentRequestError");function Cf(t=void 0){const e=t?.response?.headers["retry-after"];if(!e)return 0;let r=(Number(e)||0)*1e3;return r===0&&(r=(new Date(e).valueOf()||0)-Date.now()),Math.max(0,r)}i(Cf,"retryAfter");function ig(t=0,e=void 0){return Math.max(0,Cf(e))}i(ig,"noDelay");function og(t=0,e=void 0,r=100){const n=2**t*r,s=Math.max(n,Cf(e)),o=s*.2*Math.random();return s+o}i(og,"exponentialDelay");const ag={retries:3,retryCondition:kf,retryDelay:ig,shouldResetTimeout:!1,onRetry:()=>{},onMaxRetryTimesExceeded:()=>{},validateResponse:null};function cg(t,e){return{...ag,...e,...t[ja]}}i(cg,"getRequestOptions");function cl(t,e){const r=cg(t,e||{});return r.retryCount=r.retryCount||0,r.lastRequestTime=r.lastRequestTime||Date.now(),t[ja]=r,r}i(cl,"setCurrentState");function lg(t,e){t.defaults.agent===e.agent&&delete e.agent,t.defaults.httpAgent===e.httpAgent&&delete e.httpAgent,t.defaults.httpsAgent===e.httpsAgent&&delete e.httpsAgent}i(lg,"fixConfig");async function ug(t,e){const{retries:r,retryCondition:n}=t,s=(t.retryCount||0)<r&&n(e);if(typeof s=="object")try{return await s!==!1}catch{return!1}return s}i(ug,"shouldRetry");async function fg(t,e,r,n){e.retryCount+=1;const{retryDelay:s,shouldResetTimeout:o,onRetry:a}=e,l=s(e.retryCount,r);if(lg(t,n),!o&&n.timeout&&e.lastRequestTime){const f=Date.now()-e.lastRequestTime,_=n.timeout-f-l;if(_<=0)return Promise.reject(r);n.timeout=_}return n.transformRequest=[f=>f],await a(e.retryCount,r,n),n.signal?.aborted?Promise.resolve(t(n)):new Promise(f=>{const _=i(()=>{clearTimeout(b),f(t(n))},"abortListener"),b=setTimeout(()=>{f(t(n)),n.signal?.removeEventListener&&n.signal.removeEventListener("abort",_)},l);n.signal?.addEventListener&&n.signal.addEventListener("abort",_,{once:!0})})}i(fg,"handleRetry");async function dg(t,e){t.retryCount>=t.retries&&await t.onMaxRetryTimesExceeded(e,t.retryCount)}i(dg,"handleMaxRetryTimesExceeded");const Gn=i((t,e)=>{const r=t.interceptors.request.use(s=>(cl(s,e),s[ja]?.validateResponse&&(s.validateStatus=()=>!1),s)),n=t.interceptors.response.use(null,async s=>{const{config:o}=s;if(!o)return Promise.reject(s);const a=cl(o,e);return s.response&&a.validateResponse?.(s.response)?s.response:await ug(a,s)?fg(t,a,s,o):(await dg(a,s),Promise.reject(s))});return{requestInterceptorId:r,responseInterceptorId:n}},"axiosRetry");Gn.isNetworkError=Tf;Gn.isSafeRequestError=sg;Gn.isIdempotentRequestError=xf;Gn.isNetworkOrIdempotentRequestError=kf;Gn.exponentialDelay=og;Gn.isRetryableError=Ha;class Zi{static{i(this,"Subscribable")}constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){const r={listener:e};return this.listeners.add(r),this.onSubscribe(),()=>{this.listeners.delete(r),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}}const za=typeof window>"u"||"Deno"in window;function nn(){}i(nn,"noop");function pg(t,e){return typeof t=="function"?t(e):t}i(pg,"functionalUpdate");function hg(t){return typeof t=="number"&&t>=0&&t!==1/0}i(hg,"isValidTimeout");function _g(t,e){return Math.max(t+(e||0)-Date.now(),0)}i(_g,"timeUntilStale");function zs(t,e,r){return eo(t)?typeof e=="function"?{...r,queryKey:t,queryFn:e}:{...e,queryKey:t}:t}i(zs,"parseQueryArgs");function Mn(t,e,r){return eo(t)?[{...e,queryKey:t},r]:[t||{},e]}i(Mn,"parseFilterArgs");function ll(t,e){const{type:r="all",exact:n,fetchStatus:s,predicate:o,queryKey:a,stale:l}=t;if(eo(a)){if(n){if(e.queryHash!==Wa(a,e.options))return!1}else if(!Ii(e.queryKey,a))return!1}if(r!=="all"){const f=e.isActive();if(r==="active"&&!f||r==="inactive"&&f)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||typeof s<"u"&&s!==e.state.fetchStatus||o&&!o(e))}i(ll,"matchQuery");function ul(t,e){const{exact:r,fetching:n,predicate:s,mutationKey:o}=t;if(eo(o)){if(!e.options.mutationKey)return!1;if(r){if(rr(e.options.mutationKey)!==rr(o))return!1}else if(!Ii(e.options.mutationKey,o))return!1}return!(typeof n=="boolean"&&e.state.status==="loading"!==n||s&&!s(e))}i(ul,"matchMutation");function Wa(t,e){return(e?.queryKeyHashFn||rr)(t)}i(Wa,"hashQueryKeyByOptions");function rr(t){return JSON.stringify(t,(e,r)=>Ko(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}i(rr,"hashQueryKey");function Ii(t,e){return Of(t,e)}i(Ii,"partialMatchKey");function Of(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(r=>!Of(t[r],e[r])):!1}i(Of,"partialDeepEqual");function Rf(t,e){if(t===e)return t;const r=fl(t)&&fl(e);if(r||Ko(t)&&Ko(e)){const n=r?t.length:Object.keys(t).length,s=r?e:Object.keys(e),o=s.length,a=r?[]:{};let l=0;for(let f=0;f<o;f++){const _=r?f:s[f];a[_]=Rf(t[_],e[_]),a[_]===t[_]&&l++}return n===o&&l===n?t:a}return e}i(Rf,"replaceEqualDeep");function fl(t){return Array.isArray(t)&&t.length===Object.keys(t).length}i(fl,"isPlainArray");function Ko(t){if(!dl(t))return!1;const e=t.constructor;if(typeof e>"u")return!0;const r=e.prototype;return!(!dl(r)||!r.hasOwnProperty("isPrototypeOf"))}i(Ko,"isPlainObject$1");function dl(t){return Object.prototype.toString.call(t)==="[object Object]"}i(dl,"hasObjectPrototype");function eo(t){return Array.isArray(t)}i(eo,"isQueryKey");function Lf(t){return new Promise(e=>{setTimeout(e,t)})}i(Lf,"sleep");function pl(t){Lf(0).then(t)}i(pl,"scheduleMicrotask");function mg(){if(typeof AbortController=="function")return new AbortController}i(mg,"getAbortController");function gg(t,e,r){return r.isDataEqual!=null&&r.isDataEqual(t,e)?t:typeof r.structuralSharing=="function"?r.structuralSharing(t,e):r.structuralSharing!==!1?Rf(t,e):e}i(gg,"replaceData");class yg extends Zi{static{i(this,"FocusManager")}constructor(){super(),this.setup=e=>{if(!za&&window.addEventListener){const r=i(()=>e(),"listener");return window.addEventListener("visibilitychange",r,!1),window.addEventListener("focus",r,!1),()=>{window.removeEventListener("visibilitychange",r),window.removeEventListener("focus",r)}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var r;this.setup=e,(r=this.cleanup)==null||r.call(this),this.cleanup=e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()})}setFocused(e){this.focused!==e&&(this.focused=e,this.onFocus())}onFocus(){this.listeners.forEach(({listener:e})=>{e()})}isFocused(){return typeof this.focused=="boolean"?this.focused:typeof document>"u"?!0:[void 0,"visible","prerender"].includes(document.visibilityState)}}const Xo=new yg,hl=["online","offline"];class bg extends Zi{static{i(this,"OnlineManager")}constructor(){super(),this.setup=e=>{if(!za&&window.addEventListener){const r=i(()=>e(),"listener");return hl.forEach(n=>{window.addEventListener(n,r,!1)}),()=>{hl.forEach(n=>{window.removeEventListener(n,r)})}}}}onSubscribe(){this.cleanup||this.setEventListener(this.setup)}onUnsubscribe(){if(!this.hasListeners()){var e;(e=this.cleanup)==null||e.call(this),this.cleanup=void 0}}setEventListener(e){var r;this.setup=e,(r=this.cleanup)==null||r.call(this),this.cleanup=e(n=>{typeof n=="boolean"?this.setOnline(n):this.onOnline()})}setOnline(e){this.online!==e&&(this.online=e,this.onOnline())}onOnline(){this.listeners.forEach(({listener:e})=>{e()})}isOnline(){return typeof this.online=="boolean"?this.online:typeof navigator>"u"||typeof navigator.onLine>"u"?!0:navigator.onLine}}const Ti=new bg;function Eg(t){return Math.min(1e3*2**t,3e4)}i(Eg,"defaultRetryDelay");function $a(t){return(t??"online")==="online"?Ti.isOnline():!0}i($a,"canFetch");class Ff{static{i(this,"CancelledError")}constructor(e){this.revert=e?.revert,this.silent=e?.silent}}function qo(t){return t instanceof Ff}i(qo,"isCancelledError");function Nf(t){let e=!1,r=0,n=!1,s,o,a;const l=new Promise((U,j)=>{o=U,a=j}),f=i(U=>{n||(x(new Ff(U)),t.abort==null||t.abort())},"cancel"),_=i(()=>{e=!0},"cancelRetry"),b=i(()=>{e=!1},"continueRetry"),m=i(()=>!Xo.isFocused()||t.networkMode!=="always"&&!Ti.isOnline(),"shouldPause"),w=i(U=>{n||(n=!0,t.onSuccess==null||t.onSuccess(U),s?.(),o(U))},"resolve"),x=i(U=>{n||(n=!0,t.onError==null||t.onError(U),s?.(),a(U))},"reject"),q=i(()=>new Promise(U=>{s=i(j=>{const ae=n||!m();return ae&&U(j),ae},"continueFn"),t.onPause==null||t.onPause()}).then(()=>{s=void 0,n||t.onContinue==null||t.onContinue()}),"pause"),R=i(()=>{if(n)return;let U;try{U=t.fn()}catch(j){U=Promise.reject(j)}Promise.resolve(U).then(w).catch(j=>{var ae,fe;if(n)return;const ge=(ae=t.retry)!=null?ae:3,Se=(fe=t.retryDelay)!=null?fe:Eg,te=typeof Se=="function"?Se(r,j):Se,ne=ge===!0||typeof ge=="number"&&r<ge||typeof ge=="function"&&ge(r,j);if(e||!ne){x(j);return}r++,t.onFail==null||t.onFail(r,j),Lf(te).then(()=>{if(m())return q()}).then(()=>{e?x(j):R()})})},"run");return $a(t.networkMode)?R():q().then(R),{promise:l,cancel:f,continue:()=>s?.()?l:Promise.resolve(),cancelRetry:_,continueRetry:b}}i(Nf,"createRetryer");const Qa=console;function Sg(){let t=[],e=0,r=i(b=>{b()},"notifyFn"),n=i(b=>{b()},"batchNotifyFn");const s=i(b=>{let m;e++;try{m=b()}finally{e--,e||l()}return m},"batch"),o=i(b=>{e?t.push(b):pl(()=>{r(b)})},"schedule"),a=i(b=>(...m)=>{o(()=>{b(...m)})},"batchCalls"),l=i(()=>{const b=t;t=[],b.length&&pl(()=>{n(()=>{b.forEach(m=>{r(m)})})})},"flush");return{batch:s,batchCalls:a,schedule:o,setNotifyFunction:i(b=>{r=b},"setNotifyFunction"),setBatchNotifyFunction:i(b=>{n=b},"setBatchNotifyFunction")}}i(Sg,"createNotifyManager");const Ft=Sg();class Pf{static{i(this,"Removable")}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),hg(this.cacheTime)&&(this.gcTimeout=setTimeout(()=>{this.optionalRemove()},this.cacheTime))}updateCacheTime(e){this.cacheTime=Math.max(this.cacheTime||0,e??(za?1/0:5*60*1e3))}clearGcTimeout(){this.gcTimeout&&(clearTimeout(this.gcTimeout),this.gcTimeout=void 0)}}class wg extends Pf{static{i(this,"Query")}constructor(e){super(),this.abortSignalConsumed=!1,this.defaultOptions=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.cache=e.cache,this.logger=e.logger||Qa,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.initialState=e.state||vg(this.options),this.state=this.initialState,this.scheduleGc()}get meta(){return this.options.meta}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.cache.remove(this)}setData(e,r){const n=gg(this.state.data,e,this.options);return this.dispatch({data:n,type:"success",dataUpdatedAt:r?.updatedAt,manual:r?.manual}),n}setState(e,r){this.dispatch({type:"setState",state:e,setStateOptions:r})}cancel(e){var r;const n=this.promise;return(r=this.retryer)==null||r.cancel(e),n?n.then(nn).catch(nn):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.initialState)}isActive(){return this.observers.some(e=>e.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||this.observers.some(e=>e.getCurrentResult().isStale)}isStaleByTime(e=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!_g(this.state.dataUpdatedAt,e)}onFocus(){var e;const r=this.observers.find(n=>n.shouldFetchOnWindowFocus());r&&r.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}onOnline(){var e;const r=this.observers.find(n=>n.shouldFetchOnReconnect());r&&r.refetch({cancelRefetch:!1}),(e=this.retryer)==null||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.cache.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(r=>r!==e),this.observers.length||(this.retryer&&(this.abortSignalConsumed?this.retryer.cancel({revert:!0}):this.retryer.cancelRetry()),this.scheduleGc()),this.cache.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.dispatch({type:"invalidate"})}fetch(e,r){var n,s;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&r!=null&&r.cancelRefetch)this.cancel({silent:!0});else if(this.promise){var o;return(o=this.retryer)==null||o.continueRetry(),this.promise}}if(e&&this.setOptions(e),!this.options.queryFn){const x=this.observers.find(q=>q.options.queryFn);x&&this.setOptions(x.options)}const a=mg(),l={queryKey:this.queryKey,pageParam:void 0,meta:this.meta},f=i(x=>{Object.defineProperty(x,"signal",{enumerable:!0,get:()=>{if(a)return this.abortSignalConsumed=!0,a.signal}})},"addSignalProperty");f(l);const _=i(()=>this.options.queryFn?(this.abortSignalConsumed=!1,this.options.queryFn(l)):Promise.reject("Missing queryFn for queryKey '"+this.options.queryHash+"'"),"fetchFn"),b={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:_};if(f(b),(n=this.options.behavior)==null||n.onFetch(b),this.revertState=this.state,this.state.fetchStatus==="idle"||this.state.fetchMeta!==((s=b.fetchOptions)==null?void 0:s.meta)){var m;this.dispatch({type:"fetch",meta:(m=b.fetchOptions)==null?void 0:m.meta})}const w=i(x=>{if(qo(x)&&x.silent||this.dispatch({type:"error",error:x}),!qo(x)){var q,R,U,j;(q=(R=this.cache.config).onError)==null||q.call(R,x,this),(U=(j=this.cache.config).onSettled)==null||U.call(j,this.state.data,x,this)}this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},"onError");return this.retryer=Nf({fn:b.fetchFn,abort:a?.abort.bind(a),onSuccess:x=>{var q,R,U,j;if(typeof x>"u"){w(new Error(this.queryHash+" data is undefined"));return}this.setData(x),(q=(R=this.cache.config).onSuccess)==null||q.call(R,x,this),(U=(j=this.cache.config).onSettled)==null||U.call(j,x,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:w,onFail:(x,q)=>{this.dispatch({type:"failed",failureCount:x,error:q})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:b.options.retry,retryDelay:b.options.retryDelay,networkMode:b.options.networkMode}),this.promise=this.retryer.promise,this.promise}dispatch(e){const r=i(n=>{var s,o;switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:(s=e.meta)!=null?s:null,fetchStatus:$a(this.options.networkMode)?"fetching":"paused",...!n.dataUpdatedAt&&{error:null,status:"loading"}};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:(o=e.dataUpdatedAt)!=null?o:Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const a=e.error;return qo(a)&&a.revert&&this.revertState?{...this.revertState,fetchStatus:"idle"}:{...n,error:a,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}},"reducer");this.state=r(this.state),Ft.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate(e)}),this.cache.notify({query:this,type:"updated",action:e})})}}function vg(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,r=typeof e<"u",n=r?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"loading",fetchStatus:"idle"}}i(vg,"getDefaultState$1");class Ag extends Zi{static{i(this,"QueryCache")}constructor(e){super(),this.config=e||{},this.queries=[],this.queriesMap={}}build(e,r,n){var s;const o=r.queryKey,a=(s=r.queryHash)!=null?s:Wa(o,r);let l=this.get(a);return l||(l=new wg({cache:this,logger:e.getLogger(),queryKey:o,queryHash:a,options:e.defaultQueryOptions(r),state:n,defaultOptions:e.getQueryDefaults(o)}),this.add(l)),l}add(e){this.queriesMap[e.queryHash]||(this.queriesMap[e.queryHash]=e,this.queries.push(e),this.notify({type:"added",query:e}))}remove(e){const r=this.queriesMap[e.queryHash];r&&(e.destroy(),this.queries=this.queries.filter(n=>n!==e),r===e&&delete this.queriesMap[e.queryHash],this.notify({type:"removed",query:e}))}clear(){Ft.batch(()=>{this.queries.forEach(e=>{this.remove(e)})})}get(e){return this.queriesMap[e]}getAll(){return this.queries}find(e,r){const[n]=Mn(e,r);return typeof n.exact>"u"&&(n.exact=!0),this.queries.find(s=>ll(n,s))}findAll(e,r){const[n]=Mn(e,r);return Object.keys(n).length>0?this.queries.filter(s=>ll(n,s)):this.queries}notify(e){Ft.batch(()=>{this.listeners.forEach(({listener:r})=>{r(e)})})}onFocus(){Ft.batch(()=>{this.queries.forEach(e=>{e.onFocus()})})}onOnline(){Ft.batch(()=>{this.queries.forEach(e=>{e.onOnline()})})}}class Ig extends Pf{static{i(this,"Mutation")}constructor(e){super(),this.defaultOptions=e.defaultOptions,this.mutationId=e.mutationId,this.mutationCache=e.mutationCache,this.logger=e.logger||Qa,this.observers=[],this.state=e.state||Tg(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options={...this.defaultOptions,...e},this.updateCacheTime(this.options.cacheTime)}get meta(){return this.options.meta}setState(e){this.dispatch({type:"setState",state:e})}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.mutationCache.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.observers=this.observers.filter(r=>r!==e),this.scheduleGc(),this.mutationCache.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.observers.length||(this.state.status==="loading"?this.scheduleGc():this.mutationCache.remove(this))}continue(){var e,r;return(e=(r=this.retryer)==null?void 0:r.continue())!=null?e:this.execute()}async execute(){const e=i(()=>{var ne;return this.retryer=Nf({fn:()=>this.options.mutationFn?this.options.mutationFn(this.state.variables):Promise.reject("No mutationFn found"),onFail:(M,J)=>{this.dispatch({type:"failed",failureCount:M,error:J})},onPause:()=>{this.dispatch({type:"pause"})},onContinue:()=>{this.dispatch({type:"continue"})},retry:(ne=this.options.retry)!=null?ne:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode}),this.retryer.promise},"executeMutation"),r=this.state.status==="loading";try{var n,s,o,a,l,f,_,b;if(!r){var m,w,x,q;this.dispatch({type:"loading",variables:this.options.variables}),await((m=(w=this.mutationCache.config).onMutate)==null?void 0:m.call(w,this.state.variables,this));const M=await((x=(q=this.options).onMutate)==null?void 0:x.call(q,this.state.variables));M!==this.state.context&&this.dispatch({type:"loading",context:M,variables:this.state.variables})}const ne=await e();return await((n=(s=this.mutationCache.config).onSuccess)==null?void 0:n.call(s,ne,this.state.variables,this.state.context,this)),await((o=(a=this.options).onSuccess)==null?void 0:o.call(a,ne,this.state.variables,this.state.context)),await((l=(f=this.mutationCache.config).onSettled)==null?void 0:l.call(f,ne,null,this.state.variables,this.state.context,this)),await((_=(b=this.options).onSettled)==null?void 0:_.call(b,ne,null,this.state.variables,this.state.context)),this.dispatch({type:"success",data:ne}),ne}catch(ne){try{var R,U,j,ae,fe,ge,Se,te;throw await((R=(U=this.mutationCache.config).onError)==null?void 0:R.call(U,ne,this.state.variables,this.state.context,this)),await((j=(ae=this.options).onError)==null?void 0:j.call(ae,ne,this.state.variables,this.state.context)),await((fe=(ge=this.mutationCache.config).onSettled)==null?void 0:fe.call(ge,void 0,ne,this.state.variables,this.state.context,this)),await((Se=(te=this.options).onSettled)==null?void 0:Se.call(te,void 0,ne,this.state.variables,this.state.context)),ne}finally{this.dispatch({type:"error",error:ne})}}}dispatch(e){const r=i(n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"loading":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!$a(this.options.networkMode),status:"loading",variables:e.variables};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"};case"setState":return{...n,...e.state}}},"reducer");this.state=r(this.state),Ft.batch(()=>{this.observers.forEach(n=>{n.onMutationUpdate(e)}),this.mutationCache.notify({mutation:this,type:"updated",action:e})})}}function Tg(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0}}i(Tg,"getDefaultState");class qg extends Zi{static{i(this,"MutationCache")}constructor(e){super(),this.config=e||{},this.mutations=[],this.mutationId=0}build(e,r,n){const s=new Ig({mutationCache:this,logger:e.getLogger(),mutationId:++this.mutationId,options:e.defaultMutationOptions(r),state:n,defaultOptions:r.mutationKey?e.getMutationDefaults(r.mutationKey):void 0});return this.add(s),s}add(e){this.mutations.push(e),this.notify({type:"added",mutation:e})}remove(e){this.mutations=this.mutations.filter(r=>r!==e),this.notify({type:"removed",mutation:e})}clear(){Ft.batch(()=>{this.mutations.forEach(e=>{this.remove(e)})})}getAll(){return this.mutations}find(e){return typeof e.exact>"u"&&(e.exact=!0),this.mutations.find(r=>ul(e,r))}findAll(e){return this.mutations.filter(r=>ul(e,r))}notify(e){Ft.batch(()=>{this.listeners.forEach(({listener:r})=>{r(e)})})}resumePausedMutations(){var e;return this.resuming=((e=this.resuming)!=null?e:Promise.resolve()).then(()=>{const r=this.mutations.filter(n=>n.state.isPaused);return Ft.batch(()=>r.reduce((n,s)=>n.then(()=>s.continue().catch(nn)),Promise.resolve()))}).then(()=>{this.resuming=void 0}),this.resuming}}function xg(){return{onFetch:t=>{t.fetchFn=()=>{var e,r,n,s,o,a;const l=(e=t.fetchOptions)==null||(r=e.meta)==null?void 0:r.refetchPage,f=(n=t.fetchOptions)==null||(s=n.meta)==null?void 0:s.fetchMore,_=f?.pageParam,b=f?.direction==="forward",m=f?.direction==="backward",w=((o=t.state.data)==null?void 0:o.pages)||[],x=((a=t.state.data)==null?void 0:a.pageParams)||[];let q=x,R=!1;const U=i(te=>{Object.defineProperty(te,"signal",{enumerable:!0,get:()=>{var ne;if((ne=t.signal)!=null&&ne.aborted)R=!0;else{var M;(M=t.signal)==null||M.addEventListener("abort",()=>{R=!0})}return t.signal}})},"addSignalProperty"),j=t.options.queryFn||(()=>Promise.reject("Missing queryFn for queryKey '"+t.options.queryHash+"'")),ae=i((te,ne,M,J)=>(q=J?[ne,...q]:[...q,ne],J?[M,...te]:[...te,M]),"buildNewPages"),fe=i((te,ne,M,J)=>{if(R)return Promise.reject("Cancelled");if(typeof M>"u"&&!ne&&te.length)return Promise.resolve(te);const P={queryKey:t.queryKey,pageParam:M,meta:t.options.meta};U(P);const X=j(P);return Promise.resolve(X).then(Ae=>ae(te,M,Ae,J))},"fetchPage");let ge;if(!w.length)ge=fe([]);else if(b){const te=typeof _<"u",ne=te?_:_l(t.options,w);ge=fe(w,te,ne)}else if(m){const te=typeof _<"u",ne=te?_:kg(t.options,w);ge=fe(w,te,ne,!0)}else{q=[];const te=typeof t.options.getNextPageParam>"u";ge=(l&&w[0]?l(w[0],0,w):!0)?fe([],te,x[0]):Promise.resolve(ae([],x[0],w[0]));for(let M=1;M<w.length;M++)ge=ge.then(J=>{if(l&&w[M]?l(w[M],M,w):!0){const X=te?x[M]:_l(t.options,J);return fe(J,te,X)}return Promise.resolve(ae(J,x[M],w[M]))})}return ge.then(te=>({pages:te,pageParams:q}))}}}}i(xg,"infiniteQueryBehavior");function _l(t,e){return t.getNextPageParam==null?void 0:t.getNextPageParam(e[e.length-1],e)}i(_l,"getNextPageParam");function kg(t,e){return t.getPreviousPageParam==null?void 0:t.getPreviousPageParam(e[0],e)}i(kg,"getPreviousPageParam");class Cg{static{i(this,"QueryClient")}constructor(e={}){this.queryCache=e.queryCache||new Ag,this.mutationCache=e.mutationCache||new qg,this.logger=e.logger||Qa,this.defaultOptions=e.defaultOptions||{},this.queryDefaults=[],this.mutationDefaults=[],this.mountCount=0}mount(){this.mountCount++,this.mountCount===1&&(this.unsubscribeFocus=Xo.subscribe(()=>{Xo.isFocused()&&(this.resumePausedMutations(),this.queryCache.onFocus())}),this.unsubscribeOnline=Ti.subscribe(()=>{Ti.isOnline()&&(this.resumePausedMutations(),this.queryCache.onOnline())}))}unmount(){var e,r;this.mountCount--,this.mountCount===0&&((e=this.unsubscribeFocus)==null||e.call(this),this.unsubscribeFocus=void 0,(r=this.unsubscribeOnline)==null||r.call(this),this.unsubscribeOnline=void 0)}isFetching(e,r){const[n]=Mn(e,r);return n.fetchStatus="fetching",this.queryCache.findAll(n).length}isMutating(e){return this.mutationCache.findAll({...e,fetching:!0}).length}getQueryData(e,r){var n;return(n=this.queryCache.find(e,r))==null?void 0:n.state.data}ensureQueryData(e,r,n){const s=zs(e,r,n),o=this.getQueryData(s.queryKey);return o?Promise.resolve(o):this.fetchQuery(s)}getQueriesData(e){return this.getQueryCache().findAll(e).map(({queryKey:r,state:n})=>{const s=n.data;return[r,s]})}setQueryData(e,r,n){const s=this.queryCache.find(e),o=s?.state.data,a=pg(r,o);if(typeof a>"u")return;const l=zs(e),f=this.defaultQueryOptions(l);return this.queryCache.build(this,f).setData(a,{...n,manual:!0})}setQueriesData(e,r,n){return Ft.batch(()=>this.getQueryCache().findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,r,n)]))}getQueryState(e,r){var n;return(n=this.queryCache.find(e,r))==null?void 0:n.state}removeQueries(e,r){const[n]=Mn(e,r),s=this.queryCache;Ft.batch(()=>{s.findAll(n).forEach(o=>{s.remove(o)})})}resetQueries(e,r,n){const[s,o]=Mn(e,r,n),a=this.queryCache,l={type:"active",...s};return Ft.batch(()=>(a.findAll(s).forEach(f=>{f.reset()}),this.refetchQueries(l,o)))}cancelQueries(e,r,n){const[s,o={}]=Mn(e,r,n);typeof o.revert>"u"&&(o.revert=!0);const a=Ft.batch(()=>this.queryCache.findAll(s).map(l=>l.cancel(o)));return Promise.all(a).then(nn).catch(nn)}invalidateQueries(e,r,n){const[s,o]=Mn(e,r,n);return Ft.batch(()=>{var a,l;if(this.queryCache.findAll(s).forEach(_=>{_.invalidate()}),s.refetchType==="none")return Promise.resolve();const f={...s,type:(a=(l=s.refetchType)!=null?l:s.type)!=null?a:"active"};return this.refetchQueries(f,o)})}refetchQueries(e,r,n){const[s,o]=Mn(e,r,n),a=Ft.batch(()=>this.queryCache.findAll(s).filter(f=>!f.isDisabled()).map(f=>{var _;return f.fetch(void 0,{...o,cancelRefetch:(_=o?.cancelRefetch)!=null?_:!0,meta:{refetchPage:s.refetchPage}})}));let l=Promise.all(a).then(nn);return o!=null&&o.throwOnError||(l=l.catch(nn)),l}fetchQuery(e,r,n){const s=zs(e,r,n),o=this.defaultQueryOptions(s);typeof o.retry>"u"&&(o.retry=!1);const a=this.queryCache.build(this,o);return a.isStaleByTime(o.staleTime)?a.fetch(o):Promise.resolve(a.state.data)}prefetchQuery(e,r,n){return this.fetchQuery(e,r,n).then(nn).catch(nn)}fetchInfiniteQuery(e,r,n){const s=zs(e,r,n);return s.behavior=xg(),this.fetchQuery(s)}prefetchInfiniteQuery(e,r,n){return this.fetchInfiniteQuery(e,r,n).then(nn).catch(nn)}resumePausedMutations(){return this.mutationCache.resumePausedMutations()}getQueryCache(){return this.queryCache}getMutationCache(){return this.mutationCache}getLogger(){return this.logger}getDefaultOptions(){return this.defaultOptions}setDefaultOptions(e){this.defaultOptions=e}setQueryDefaults(e,r){const n=this.queryDefaults.find(s=>rr(e)===rr(s.queryKey));n?n.defaultOptions=r:this.queryDefaults.push({queryKey:e,defaultOptions:r})}getQueryDefaults(e){if(!e)return;const r=this.queryDefaults.find(n=>Ii(e,n.queryKey));return r?.defaultOptions}setMutationDefaults(e,r){const n=this.mutationDefaults.find(s=>rr(e)===rr(s.mutationKey));n?n.defaultOptions=r:this.mutationDefaults.push({mutationKey:e,defaultOptions:r})}getMutationDefaults(e){if(!e)return;const r=this.mutationDefaults.find(n=>Ii(e,n.mutationKey));return r?.defaultOptions}defaultQueryOptions(e){if(e!=null&&e._defaulted)return e;const r={...this.defaultOptions.queries,...this.getQueryDefaults(e?.queryKey),...e,_defaulted:!0};return!r.queryHash&&r.queryKey&&(r.queryHash=Wa(r.queryKey,r)),typeof r.refetchOnReconnect>"u"&&(r.refetchOnReconnect=r.networkMode!=="always"),typeof r.useErrorBoundary>"u"&&(r.useErrorBoundary=!!r.suspense),r}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...this.defaultOptions.mutations,...this.getMutationDefaults(e?.mutationKey),...e,_defaulted:!0}}clear(){this.queryCache.clear(),this.mutationCache.clear()}}const Pn="https://api.polarr.co/polarr-next";new Cg;const Yo=new Map;function Og(t){Yo.set(t,!0),setTimeout(()=>Yo.delete(t),1e4)}i(Og,"registerProjectIdAsDeleted");function Rg(t){Yo.delete(t)}i(Rg,"removeProjectIdAsDeleted");const mt=St.create({baseURL:Pn});Gn(mt,{retryDelay:Gn.exponentialDelay});class ml{static{i(this,"PNApiOperations")}static basePaths={payment:`${Pn}/payment`,presets:`${Pn}/presets`,projects:`${Pn}/projects`,images:`${Pn}/images`,serviceStatus:`${Pn}/service-status`,signedUrls:`${Pn}/upload/signed-urls`,users:`${Pn}/iam/users`};static listImages=async e=>(await mt.get(this.basePaths.images,{params:e})).data;static getImage=async e=>(await mt.get(`${this.basePaths.images}/${e}`)).data;static createImage=async e=>(await mt.post(this.basePaths.images,e)).data;static deleteImage=async e=>{await mt.delete(`${this.basePaths.images}/${e}`)};static listPresets=async e=>(await mt.get(this.basePaths.presets,{params:e})).data;static getPreset=async e=>(await mt.get(`${this.basePaths.presets}/${e}`)).data;static createPreset=async e=>(await mt.post(this.basePaths.presets,e)).data;static updatePreset=async(e,r)=>(await mt.patch(`${this.basePaths.presets}/${e}`,r)).data;static deletePreset=async e=>{await mt.delete(`${this.basePaths.presets}/${e}`)};static listProjects=async e=>(await mt.get(this.basePaths.projects,{params:e})).data;static getProject=async e=>(await mt.get(`${this.basePaths.projects}/${e}`)).data;static createProject=async e=>{const r=await mt.post(this.basePaths.projects,e);return Rg(r.data.projectId),r.data};static updateProject=async(e,r)=>(await mt.patch(`${this.basePaths.projects}/${e}`,r)).data;static deleteProject=async e=>{await mt.delete(`${this.basePaths.projects}/${e}`),Og(e)};static getSignedUrls=async e=>{const r={"content-types":e.map(s=>s.contentType).join(","),"entity-types":e.map(s=>s.entityType).join(","),"content-digests":e.map(s=>s.contentDigest??"").join(",")};return(await mt.get(this.basePaths.signedUrls,{params:r})).data.urls};static getCurrentUser=async()=>(await mt.get(`${this.basePaths.users}/@me`)).data;static deleteCurrentUser=async()=>{const e=await mt.delete(`${this.basePaths.users}/@me`);return e.status===200||e.status===202||e.status===204};static getUserActivities=async e=>{const r=`${this.basePaths.users}/@me/activity-events`;return(await mt.get(r,{params:e})).data};static getServiceStatus=async()=>(await fetch(this.basePaths.serviceStatus)).json();static getPaymentPlans=async()=>(await fetch(`${this.basePaths.payment}/plans`)).json();static createStripeCheckoutSession=async e=>(await mt.post(`${this.basePaths.payment}/stripe/checkout-sessions`,e)).data;static createStripeCustomerPortalSession=async()=>(await mt.post(`${this.basePaths.payment}/stripe/customer-portal-sessions`)).data;static redeemPromoCode=async e=>(await mt.post(`${this.basePaths.payment}/promo-codes/redemptions`,e)).data;static reportCreditConsumptionEvents=async e=>{await mt.post(`${this.basePaths.payment}/credit-consumption/events`,e)};static uploadContent=async e=>{const r=await mt.put(e.url,e.data,{transformRequest:(n,s)=>(delete s.Authorization,s["Content-Type"]=e.contentType??e.data.type,n)});return{url:this.convertToCDNUrl(r.data.url)}};static convertToCDNUrl=e=>{const r=new URL(e);return r.host==="polarr-playground-images.s3.us-west-1.amazonaws.com"&&(r.host="images.polarr.co"),r.toString()}}const Df=Object.prototype.toString;function Ga(t){switch(Df.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return xn(t,Error)}}i(Ga,"isError");function Qr(t,e){return Df.call(t)===`[object ${e}]`}i(Qr,"isBuiltin");function Mf(t){return Qr(t,"ErrorEvent")}i(Mf,"isErrorEvent$2");function gl(t){return Qr(t,"DOMError")}i(gl,"isDOMError");function Lg(t){return Qr(t,"DOMException")}i(Lg,"isDOMException");function Tn(t){return Qr(t,"String")}i(Tn,"isString");function Va(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}i(Va,"isParameterizedString");function Ja(t){return t===null||Va(t)||typeof t!="object"&&typeof t!="function"}i(Ja,"isPrimitive");function Fr(t){return Qr(t,"Object")}i(Fr,"isPlainObject");function to(t){return typeof Event<"u"&&xn(t,Event)}i(to,"isEvent");function Fg(t){return typeof Element<"u"&&xn(t,Element)}i(Fg,"isElement$2");function Ng(t){return Qr(t,"RegExp")}i(Ng,"isRegExp");function no(t){return!!(t&&t.then&&typeof t.then=="function")}i(no,"isThenable");function Pg(t){return Fr(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}i(Pg,"isSyntheticEvent");function xn(t,e){try{return t instanceof e}catch{return!1}}i(xn,"isInstanceOf");function Bf(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue))}i(Bf,"isVueViewModel");function Or(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}i(Or,"truncate");function yl(t,e){if(!Array.isArray(t))return"";const r=[];for(let n=0;n<t.length;n++){const s=t[n];try{Bf(s)?r.push("[VueViewModel]"):r.push(String(s))}catch{r.push("[value cannot be serialized]")}}return r.join(e)}i(yl,"safeJoin");function Dg(t,e,r=!1){return Tn(t)?Ng(e)?e.test(t):Tn(e)?r?t===e:t.includes(e):!1:!1}i(Dg,"isMatchingPattern");function $n(t,e=[],r=!1){return e.some(n=>Dg(t,n,r))}i($n,"stringMatchesSomePattern");function Mg(t,e,r=250,n,s,o,a){if(!o.exception||!o.exception.values||!a||!xn(a.originalException,Error))return;const l=o.exception.values.length>0?o.exception.values[o.exception.values.length-1]:void 0;l&&(o.exception.values=Bg(Zo(t,e,s,a.originalException,n,o.exception.values,l,0),r))}i(Mg,"applyAggregateErrorsToEvent");function Zo(t,e,r,n,s,o,a,l){if(o.length>=r+1)return o;let f=[...o];if(xn(n[s],Error)){bl(a,l);const _=t(e,n[s]),b=f.length;El(_,s,b,l),f=Zo(t,e,r,n[s],s,[_,...f],_,b)}return Array.isArray(n.errors)&&n.errors.forEach((_,b)=>{if(xn(_,Error)){bl(a,l);const m=t(e,_),w=f.length;El(m,`errors[${b}]`,w,l),f=Zo(t,e,r,_,s,[m,...f],m,w)}}),f}i(Zo,"aggregateExceptionsFromError");function bl(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}i(bl,"applyExceptionGroupFieldsForParentException");function El(t,e,r,n){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:r,parent_id:n}}i(El,"applyExceptionGroupFieldsForChildException");function Bg(t,e){return t.map(r=>(r.value&&(r.value=Or(r.value,e)),r))}i(Bg,"truncateAggregateExceptions");function Uf(t){if(t!==void 0)return t>=400&&t<500?"warning":t>=500?"error":void 0}i(Uf,"getBreadcrumbLogLevelFromHttpStatusCode");const or="8.37.1",rt=globalThis;function ro(t,e,r){const n=r||rt,s=n.__SENTRY__=n.__SENTRY__||{},o=s[or]=s[or]||{};return o[t]||(o[t]=e())}i(ro,"getGlobalSingleton");const Rr=rt,Ug=80;function kn(t,e={}){if(!t)return"<unknown>";try{let r=t;const n=5,s=[];let o=0,a=0;const l=" > ",f=l.length;let _;const b=Array.isArray(e)?e:e.keyAttrs,m=!Array.isArray(e)&&e.maxStringLength||Ug;for(;r&&o++<n&&(_=jg(r,b),!(_==="html"||o>1&&a+s.length*f+_.length>=m));)s.push(_),a+=_.length,r=r.parentNode;return s.reverse().join(l)}catch{return"<unknown>"}}i(kn,"htmlTreeAsString");function jg(t,e){const r=t,n=[];if(!r||!r.tagName)return"";if(Rr.HTMLElement&&r instanceof HTMLElement&&r.dataset){if(r.dataset.sentryComponent)return r.dataset.sentryComponent;if(r.dataset.sentryElement)return r.dataset.sentryElement}n.push(r.tagName.toLowerCase());const s=e&&e.length?e.filter(a=>r.getAttribute(a)).map(a=>[a,r.getAttribute(a)]):null;if(s&&s.length)s.forEach(a=>{n.push(`[${a[0]}="${a[1]}"]`)});else{r.id&&n.push(`#${r.id}`);const a=r.className;if(a&&Tn(a)){const l=a.split(/\s+/);for(const f of l)n.push(`.${f}`)}}const o=["aria-label","type","name","title","alt"];for(const a of o){const l=r.getAttribute(a);l&&n.push(`[${a}="${l}"]`)}return n.join("")}i(jg,"_htmlElementAsString");function jf(){try{return Rr.document.location.href}catch{return""}}i(jf,"getLocationHref");function Hg(t){return Rr.document&&Rr.document.querySelector?Rr.document.querySelector(t):null}i(Hg,"getDomElement");function Hf(t){if(!Rr.HTMLElement)return null;let e=t;const r=5;for(let n=0;n<r;n++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}i(Hf,"getComponentName");const pr=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,zg="Sentry Logger ",ea=["debug","info","warn","error","log","assert","trace"],qi={};function Gr(t){if(!("console"in rt))return t();const e=rt.console,r={},n=Object.keys(qi);n.forEach(s=>{const o=qi[s];r[s]=e[s],e[s]=o});try{return t()}finally{n.forEach(s=>{e[s]=r[s]})}}i(Gr,"consoleSandbox");function Wg(){let t=!1;const e={enable:()=>{t=!0},disable:()=>{t=!1},isEnabled:()=>t};return pr?ea.forEach(r=>{e[r]=(...n)=>{t&&Gr(()=>{rt.console[r](`${zg}[${r}]:`,...n)})}}):ea.forEach(r=>{e[r]=()=>{}}),e}i(Wg,"makeLogger");const Ie=ro("logger",Wg),$g=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Qg(t){return t==="http"||t==="https"}i(Qg,"isValidProtocol");function Ts(t,e=!1){const{host:r,path:n,pass:s,port:o,projectId:a,protocol:l,publicKey:f}=t;return`${l}://${f}${e&&s?`:${s}`:""}@${r}${o?`:${o}`:""}/${n&&`${n}/`}${a}`}i(Ts,"dsnToString");function Gg(t){const e=$g.exec(t);if(!e){Gr(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}const[r,n,s="",o="",a="",l=""]=e.slice(1);let f="",_=l;const b=_.split("/");if(b.length>1&&(f=b.slice(0,-1).join("/"),_=b.pop()),_){const m=_.match(/^\d+/);m&&(_=m[0])}return zf({host:o,pass:s,path:f,projectId:_,port:a,protocol:r,publicKey:n})}i(Gg,"dsnFromString");function zf(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}i(zf,"dsnFromComponents");function Vg(t){if(!pr)return!0;const{port:e,projectId:r,protocol:n}=t;return["protocol","publicKey","host","projectId"].find(a=>t[a]?!1:(Ie.error(`Invalid Sentry Dsn: ${a} missing`),!0))?!1:r.match(/^\d+$/)?Qg(n)?e&&isNaN(parseInt(e,10))?(Ie.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(Ie.error(`Invalid Sentry Dsn: Invalid protocol ${n}`),!1):(Ie.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),!1)}i(Vg,"validateDsn");function Jg(t){const e=typeof t=="string"?Gg(t):zf(t);if(!(!e||!Vg(e)))return e}i(Jg,"makeDsn");class pn extends Error{static{i(this,"SentryError")}constructor(e,r="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=r}}function Ht(t,e,r){if(!(e in t))return;const n=t[e],s=r(n);typeof s=="function"&&Wf(s,n),t[e]=s}i(Ht,"fill");function Xt(t,e,r){try{Object.defineProperty(t,e,{value:r,writable:!0,configurable:!0})}catch{pr&&Ie.log(`Failed to add non-enumerable property "${e}" to object`,t)}}i(Xt,"addNonEnumerableProperty");function Wf(t,e){try{const r=e.prototype||{};t.prototype=e.prototype=r,Xt(t,"__sentry_original__",e)}catch{}}i(Wf,"markFunctionWrapped");function Ka(t){return t.__sentry_original__}i(Ka,"getOriginalFunction");function Kg(t){return Object.keys(t).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(t[e])}`).join("&")}i(Kg,"urlEncode");function $f(t){if(Ga(t))return{message:t.message,name:t.name,stack:t.stack,...wl(t)};if(to(t)){const e={type:t.type,target:Sl(t.target),currentTarget:Sl(t.currentTarget),...wl(t)};return typeof CustomEvent<"u"&&xn(t,CustomEvent)&&(e.detail=t.detail),e}else return t}i($f,"convertToPlainObject");function Sl(t){try{return Fg(t)?kn(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}i(Sl,"serializeEventTarget");function wl(t){if(typeof t=="object"&&t!==null){const e={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}else return{}}i(wl,"getOwnProperties");function Xg(t,e=40){const r=Object.keys($f(t));r.sort();const n=r[0];if(!n)return"[object has no keys]";if(n.length>=e)return Or(n,e);for(let s=r.length;s>0;s--){const o=r.slice(0,s).join(", ");if(!(o.length>e))return s===r.length?o:Or(o,e)}return""}i(Xg,"extractExceptionKeysForMessage");function At(t){return ta(t,new Map)}i(At,"dropUndefinedKeys");function ta(t,e){if(Yg(t)){const r=e.get(t);if(r!==void 0)return r;const n={};e.set(t,n);for(const s of Object.getOwnPropertyNames(t))typeof t[s]<"u"&&(n[s]=ta(t[s],e));return n}if(Array.isArray(t)){const r=e.get(t);if(r!==void 0)return r;const n=[];return e.set(t,n),t.forEach(s=>{n.push(ta(s,e))}),n}return t}i(ta,"_dropUndefinedKeys");function Yg(t){if(!Fr(t))return!1;try{const e=Object.getPrototypeOf(t).constructor.name;return!e||e==="Object"}catch{return!0}}i(Yg,"isPojo");const Qf=50,ur="?",vl=/\(error: (.*)\)/,Al=/captureMessage|captureException/;function Gf(...t){const e=t.sort((r,n)=>r[0]-n[0]).map(r=>r[1]);return(r,n=0,s=0)=>{const o=[],a=r.split(`
`);for(let l=n;l<a.length;l++){const f=a[l];if(f.length>1024)continue;const _=vl.test(f)?f.replace(vl,"$1"):f;if(!_.match(/\S*Error: /)){for(const b of e){const m=b(_);if(m){o.push(m);break}}if(o.length>=Qf+s)break}}return ey(o.slice(s))}}i(Gf,"createStackParser");function Zg(t){return Array.isArray(t)?Gf(...t):t}i(Zg,"stackParserFromStackParserOptions");function ey(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(Ws(e).function||"")&&e.pop(),e.reverse(),Al.test(Ws(e).function||"")&&(e.pop(),Al.test(Ws(e).function||"")&&e.pop()),e.slice(0,Qf).map(r=>({...r,filename:r.filename||Ws(e).filename,function:r.function||ur}))}i(ey,"stripSentryFramesAndReverse");function Ws(t){return t[t.length-1]||{}}i(Ws,"getLastStackFrame");const xo="<anonymous>";function Cn(t){try{return!t||typeof t!="function"?xo:t.name||xo}catch{return xo}}i(Cn,"getFunctionName");function Il(t){const e=t.exception;if(e){const r=[];try{return e.values.forEach(n=>{n.stacktrace.frames&&r.push(...n.stacktrace.frames)}),r}catch{return}}}i(Il,"getFramesFromEvent");const ui={},Tl={};function Kn(t,e){ui[t]=ui[t]||[],ui[t].push(e)}i(Kn,"addHandler$1");function Xn(t,e){if(!Tl[t]){Tl[t]=!0;try{e()}catch(r){pr&&Ie.error(`Error while instrumenting ${t}`,r)}}}i(Xn,"maybeInstrument");function Kt(t,e){const r=t&&ui[t];if(r)for(const n of r)try{n(e)}catch(s){pr&&Ie.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${Cn(n)}
Error:`,s)}}i(Kt,"triggerHandlers$1");function ty(t){const e="console";Kn(e,t),Xn(e,ny)}i(ty,"addConsoleInstrumentationHandler");function ny(){"console"in rt&&ea.forEach(function(t){t in rt.console&&Ht(rt.console,t,function(e){return qi[t]=e,function(...r){Kt("console",{args:r,level:t});const s=qi[t];s&&s.apply(rt.console,r)}})})}i(ny,"instrumentConsole");const na=rt;function Vf(){if(!("fetch"in na))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}i(Vf,"supportsFetch");function ra(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}i(ra,"isNativeFunction");function ry(){if(typeof EdgeRuntime=="string")return!0;if(!Vf())return!1;if(ra(na.fetch))return!0;let t=!1;const e=na.document;if(e&&typeof e.createElement=="function")try{const r=e.createElement("iframe");r.hidden=!0,e.head.appendChild(r),r.contentWindow&&r.contentWindow.fetch&&(t=ra(r.contentWindow.fetch)),e.head.removeChild(r)}catch(r){pr&&Ie.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return t}i(ry,"supportsNativeFetch");const Jf=1e3;function qs(){return Date.now()/Jf}i(qs,"dateTimestampInSeconds");function sy(){const{performance:t}=rt;if(!t||!t.now)return qs;const e=Date.now()-t.now(),r=t.timeOrigin==null?e:t.timeOrigin;return()=>(r+t.now())/Jf}i(sy,"createUnixTimestampInSecondsFunc");const Pt=sy(),Dt=(()=>{const{performance:t}=rt;if(!t||!t.now)return;const e=3600*1e3,r=t.now(),n=Date.now(),s=t.timeOrigin?Math.abs(t.timeOrigin+r-n):e,o=s<e,a=t.timing&&t.timing.navigationStart,f=typeof a=="number"?Math.abs(a+r-n):e,_=f<e;return o||_?s<=f?t.timeOrigin:a:n})();function Kf(t,e){const r="fetch";Kn(r,t),Xn(r,()=>Xf(void 0,e))}i(Kf,"addFetchInstrumentationHandler");function iy(t){const e="fetch-body-resolved";Kn(e,t),Xn(e,()=>Xf(ay))}i(iy,"addFetchEndInstrumentationHandler");function Xf(t,e=!1){e&&!ry()||Ht(rt,"fetch",function(r){return function(...n){const{method:s,url:o}=cy(n),a={args:n,fetchData:{method:s,url:o},startTimestamp:Pt()*1e3};t||Kt("fetch",{...a});const l=new Error().stack;return r.apply(rt,n).then(async f=>(t?t(f):Kt("fetch",{...a,endTimestamp:Pt()*1e3,response:f}),f),f=>{throw Kt("fetch",{...a,endTimestamp:Pt()*1e3,error:f}),Ga(f)&&f.stack===void 0&&(f.stack=l,Xt(f,"framesToPop",1)),f})}})}i(Xf,"instrumentFetch");async function oy(t,e){if(t&&t.body){const r=t.body,n=r.getReader(),s=setTimeout(()=>{r.cancel().then(null,()=>{})},90*1e3);let o=!0;for(;o;){let a;try{a=setTimeout(()=>{r.cancel().then(null,()=>{})},5e3);const{done:l}=await n.read();clearTimeout(a),l&&(e(),o=!1)}catch{o=!1}finally{clearTimeout(a)}}clearTimeout(s),n.releaseLock(),r.cancel().then(null,()=>{})}}i(oy,"resolveResponse");function ay(t){let e;try{e=t.clone()}catch{return}oy(e,()=>{Kt("fetch-body-resolved",{endTimestamp:Pt()*1e3,response:t})})}i(ay,"streamHandler");function sa(t,e){return!!t&&typeof t=="object"&&!!t[e]}i(sa,"hasProp");function ql(t){return typeof t=="string"?t:t?sa(t,"url")?t.url:t.toString?t.toString():"":""}i(ql,"getUrlFromResource");function cy(t){if(t.length===0)return{method:"GET",url:""};if(t.length===2){const[r,n]=t;return{url:ql(r),method:sa(n,"method")?String(n.method).toUpperCase():"GET"}}const e=t[0];return{url:ql(e),method:sa(e,"method")?String(e.method).toUpperCase():"GET"}}i(cy,"parseFetchArgs");let $s=null;function Yf(t){const e="error";Kn(e,t),Xn(e,ly)}i(Yf,"addGlobalErrorInstrumentationHandler");function ly(){$s=rt.onerror,rt.onerror=function(t,e,r,n,s){return Kt("error",{column:n,error:s,line:r,msg:t,url:e}),$s&&!$s.__SENTRY_LOADER__?$s.apply(this,arguments):!1},rt.onerror.__SENTRY_INSTRUMENTED__=!0}i(ly,"instrumentError");let Qs=null;function Zf(t){const e="unhandledrejection";Kn(e,t),Xn(e,uy)}i(Zf,"addGlobalUnhandledRejectionInstrumentationHandler");function uy(){Qs=rt.onunhandledrejection,rt.onunhandledrejection=function(t){return Kt("unhandledrejection",t),Qs&&!Qs.__SENTRY_LOADER__?Qs.apply(this,arguments):!0},rt.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}i(uy,"instrumentUnhandledRejection");function fy(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}i(fy,"isBrowserBundle");function dy(){return"npm"}i(dy,"getSDKSource");function py(){return!fy()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}i(py,"isNodeEnv");function xl(){return typeof window<"u"&&(!py()||hy())}i(xl,"isBrowser");function hy(){return rt.process!==void 0&&rt.process.type==="renderer"}i(hy,"isElectronNodeRenderer");function _y(){const t=typeof WeakSet=="function",e=t?new WeakSet:[];function r(s){if(t)return e.has(s)?!0:(e.add(s),!1);for(let o=0;o<e.length;o++)if(e[o]===s)return!0;return e.push(s),!1}i(r,"memoize");function n(s){if(t)e.delete(s);else for(let o=0;o<e.length;o++)if(e[o]===s){e.splice(o,1);break}}return i(n,"unmemoize"),[r,n]}i(_y,"memoBuilder");function gt(){const t=rt,e=t.crypto||t.msCrypto;let r=i(()=>Math.random()*16,"getRandomByte");try{if(e&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e&&e.getRandomValues&&(r=i(()=>{const n=new Uint8Array(1);return e.getRandomValues(n),n[0]},"getRandomByte"))}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,n=>(n^(r()&15)>>n/4).toString(16))}i(gt,"uuid4");function ed(t){return t.exception&&t.exception.values?t.exception.values[0]:void 0}i(ed,"getFirstException");function Bn(t){const{message:e,event_id:r}=t;if(e)return e;const n=ed(t);return n?n.type&&n.value?`${n.type}: ${n.value}`:n.type||n.value||r||"<unknown>":r||"<unknown>"}i(Bn,"getEventDescription");function ia(t,e,r){const n=t.exception=t.exception||{},s=n.values=n.values||[],o=s[0]=s[0]||{};o.value||(o.value=e||""),o.type||(o.type=r||"Error")}i(ia,"addExceptionTypeValue");function hs(t,e){const r=ed(t);if(!r)return;const n={type:"generic",handled:!0},s=r.mechanism;if(r.mechanism={...n,...s,...e},e&&"data"in e){const o={...s&&s.data,...e.data};r.mechanism.data=o}}i(hs,"addExceptionMechanism");function kl(t){if(t&&t.__sentry_captured__)return!0;try{Xt(t,"__sentry_captured__",!0)}catch{}return!1}i(kl,"checkOrSetAlreadyCaught");function td(t){return Array.isArray(t)?t:[t]}i(td,"arrayify");function dn(t,e=100,r=1/0){try{return oa("",t,e,r)}catch(n){return{ERROR:`**non-serializable** (${n})`}}}i(dn,"normalize");function nd(t,e=3,r=100*1024){const n=dn(t,e);return by(n)>r?nd(t,e-1,r):n}i(nd,"normalizeToSize");function oa(t,e,r=1/0,n=1/0,s=_y()){const[o,a]=s;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const l=my(t,e);if(!l.startsWith("[object "))return l;if(e.__sentry_skip_normalization__)return e;const f=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:r;if(f===0)return l.replace("object ","");if(o(e))return"[Circular ~]";const _=e;if(_&&typeof _.toJSON=="function")try{const x=_.toJSON();return oa("",x,f-1,n,s)}catch{}const b=Array.isArray(e)?[]:{};let m=0;const w=$f(e);for(const x in w){if(!Object.prototype.hasOwnProperty.call(w,x))continue;if(m>=n){b[x]="[MaxProperties ~]";break}const q=w[x];b[x]=oa(x,q,f-1,n,s),m++}return a(e),b}i(oa,"visit");function my(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(Bf(e))return"[VueViewModel]";if(Pg(e))return"[SyntheticEvent]";if(typeof e=="number"&&!Number.isFinite(e))return`[${e}]`;if(typeof e=="function")return`[Function: ${Cn(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const r=gy(e);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(r){return`**non-serializable** (${r})`}}i(my,"stringifyValue");function gy(t){const e=Object.getPrototypeOf(t);return e?e.constructor.name:"null prototype"}i(gy,"getConstructorName");function yy(t){return~-encodeURI(t).split(/%..|./).length}i(yy,"utf8Length");function by(t){return yy(JSON.stringify(t))}i(by,"jsonSize");var wn;(function(t){t[t.PENDING=0]="PENDING";const r=1;t[t.RESOLVED=r]="RESOLVED";const n=2;t[t.REJECTED=n]="REJECTED"})(wn||(wn={}));function On(t){return new Vt(e=>{e(t)})}i(On,"resolvedSyncPromise");function xi(t){return new Vt((e,r)=>{r(t)})}i(xi,"rejectedSyncPromise");class Vt{static{i(this,"SyncPromise")}constructor(e){Vt.prototype.__init.call(this),Vt.prototype.__init2.call(this),Vt.prototype.__init3.call(this),Vt.prototype.__init4.call(this),this._state=wn.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(r){this._reject(r)}}then(e,r){return new Vt((n,s)=>{this._handlers.push([!1,o=>{if(!e)n(o);else try{n(e(o))}catch(a){s(a)}},o=>{if(!r)s(o);else try{n(r(o))}catch(a){s(a)}}]),this._executeHandlers()})}catch(e){return this.then(r=>r,e)}finally(e){return new Vt((r,n)=>{let s,o;return this.then(a=>{o=!1,s=a,e&&e()},a=>{o=!0,s=a,e&&e()}).then(()=>{if(o){n(s);return}r(s)})})}__init(){this._resolve=e=>{this._setResult(wn.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(wn.REJECTED,e)}}__init3(){this._setResult=(e,r)=>{if(this._state===wn.PENDING){if(no(r)){r.then(this._resolve,this._reject);return}this._state=e,this._value=r,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===wn.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(r=>{r[0]||(this._state===wn.RESOLVED&&r[1](this._value),this._state===wn.REJECTED&&r[2](this._value),r[0]=!0)})}}}function Ey(t){const e=[];function r(){return t===void 0||e.length<t}i(r,"isReady");function n(a){return e.splice(e.indexOf(a),1)[0]||Promise.resolve(void 0)}i(n,"remove");function s(a){if(!r())return xi(new pn("Not adding Promise because buffer limit was reached."));const l=a();return e.indexOf(l)===-1&&e.push(l),l.then(()=>n(l)).then(null,()=>n(l).then(null,()=>{})),l}i(s,"add");function o(a){return new Vt((l,f)=>{let _=e.length;if(!_)return l(!0);const b=setTimeout(()=>{a&&a>0&&l(!1)},a);e.forEach(m=>{On(m).then(()=>{--_||(clearTimeout(b),l(!0))},f)})})}return i(o,"drain"),{$:e,add:s,drain:o}}i(Ey,"makePromiseBuffer");function ar(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const r=e[6]||"",n=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:r,hash:n,relative:e[5]+r+n}}i(ar,"parseUrl$1");const Sy=["fatal","error","warning","log","info","debug"];function rd(t){return t==="warn"?"warning":Sy.includes(t)?t:"log"}i(rd,"severityLevelFromString");const vr="baggage",Xa="sentry-",wy=/^sentry-/,vy=8192;function sd(t){const e=Ay(t);if(!e)return;const r=Object.entries(e).reduce((n,[s,o])=>{if(s.match(wy)){const a=s.slice(Xa.length);n[a]=o}return n},{});if(Object.keys(r).length>0)return r}i(sd,"baggageHeaderToDynamicSamplingContext");function id(t){if(!t)return;const e=Object.entries(t).reduce((r,[n,s])=>(s&&(r[`${Xa}${n}`]=s),r),{});return Iy(e)}i(id,"dynamicSamplingContextToSentryBaggageHeader");function Ay(t){if(!(!t||!Tn(t)&&!Array.isArray(t)))return Array.isArray(t)?t.reduce((e,r)=>{const n=Cl(r);return Object.entries(n).forEach(([s,o])=>{e[s]=o}),e},{}):Cl(t)}i(Ay,"parseBaggageHeader");function Cl(t){return t.split(",").map(e=>e.split("=").map(r=>decodeURIComponent(r.trim()))).reduce((e,[r,n])=>(r&&n&&(e[r]=n),e),{})}i(Cl,"baggageHeaderToObject");function Iy(t){if(Object.keys(t).length!==0)return Object.entries(t).reduce((e,[r,n],s)=>{const o=`${encodeURIComponent(r)}=${encodeURIComponent(n)}`,a=s===0?o:`${e},${o}`;return a.length>vy?(pr&&Ie.warn(`Not adding key: ${r} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):a},"")}i(Iy,"objectToBaggageHeader");const Ty=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function qy(t){if(!t)return;const e=t.match(Ty);if(!e)return;let r;return e[3]==="1"?r=!0:e[3]==="0"&&(r=!1),{traceId:e[1],parentSampled:r,parentSpanId:e[2]}}i(qy,"extractTraceparentData");function xy(t,e){const r=qy(t),n=sd(e),{traceId:s,parentSpanId:o,parentSampled:a}=r||{};return r?{traceId:s||gt(),parentSpanId:o||gt().substring(16),spanId:gt().substring(16),sampled:a,dsc:n||{}}:{traceId:s||gt(),spanId:gt().substring(16)}}i(xy,"propagationContextFromHeaders");function Ya(t=gt(),e=gt().substring(16),r){let n="";return r!==void 0&&(n=r?"-1":"-0"),`${t}-${e}${n}`}i(Ya,"generateSentryTraceHeader");function hr(t,e=[]){return[t,e]}i(hr,"createEnvelope");function ky(t,e){const[r,n]=t;return[r,[...n,e]]}i(ky,"addItemToEnvelope");function Ol(t,e){const r=t[1];for(const n of r){const s=n[0].type;if(e(n,s))return!0}return!1}i(Ol,"forEachEnvelopeItem");function aa(t){return rt.__SENTRY__&&rt.__SENTRY__.encodePolyfill?rt.__SENTRY__.encodePolyfill(t):new TextEncoder().encode(t)}i(aa,"encodeUTF8");function Cy(t){const[e,r]=t;let n=JSON.stringify(e);function s(o){typeof n=="string"?n=typeof o=="string"?n+o:[aa(n),o]:n.push(typeof o=="string"?aa(o):o)}i(s,"append");for(const o of r){const[a,l]=o;if(s(`
${JSON.stringify(a)}
`),typeof l=="string"||l instanceof Uint8Array)s(l);else{let f;try{f=JSON.stringify(l)}catch{f=JSON.stringify(dn(l))}s(f)}}return typeof n=="string"?n:Oy(n)}i(Cy,"serializeEnvelope");function Oy(t){const e=t.reduce((s,o)=>s+o.length,0),r=new Uint8Array(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return r}i(Oy,"concatBuffers");function Ry(t){return[{type:"span"},t]}i(Ry,"createSpanEnvelopeItem");function Ly(t){const e=typeof t.data=="string"?aa(t.data):t.data;return[At({type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType}),e]}i(Ly,"createAttachmentEnvelopeItem");const Fy={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function Rl(t){return Fy[t]}i(Rl,"envelopeItemTypeToDataCategory");function Za(t){if(!t||!t.sdk)return;const{name:e,version:r}=t.sdk;return{name:e,version:r}}i(Za,"getSdkMetadataForEnvelopeHeader");function od(t,e,r,n){const s=t.sdkProcessingMetadata&&t.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!r&&n&&{dsn:Ts(n)},...s&&{trace:At({...s})}}}i(od,"createEventEnvelopeHeaders");function Ny(t,e,r){const n=[{type:"client_report"},{timestamp:r||qs(),discarded_events:t}];return hr(e?{dsn:e}:{},[n])}i(Ny,"createClientReportEnvelope");const Py=60*1e3;function Dy(t,e=Date.now()){const r=parseInt(`${t}`,10);if(!isNaN(r))return r*1e3;const n=Date.parse(`${t}`);return isNaN(n)?Py:n-e}i(Dy,"parseRetryAfterHeader");function My(t,e){return t[e]||t.all||0}i(My,"disabledUntil");function ad(t,e,r=Date.now()){return My(t,e)>r}i(ad,"isRateLimited");function cd(t,{statusCode:e,headers:r},n=Date.now()){const s={...t},o=r&&r["x-sentry-rate-limits"],a=r&&r["retry-after"];if(o)for(const l of o.trim().split(",")){const[f,_,,,b]=l.split(":",5),m=parseInt(f,10),w=(isNaN(m)?60:m)*1e3;if(!_)s.all=n+w;else for(const x of _.split(";"))x==="metric_bucket"?(!b||b.split(";").includes("custom"))&&(s[x]=n+w):s[x]=n+w}else a?s.all=n+Dy(a,n):e===429&&(s.all=n+60*1e3);return s}i(cd,"updateRateLimits");function By(t,e){return t??e()}i(By,"_nullishCoalesce");function Wt(t){let e,r=t[0],n=1;for(;n<t.length;){const s=t[n],o=t[n+1];if(n+=2,(s==="optionalAccess"||s==="optionalCall")&&r==null)return;s==="access"||s==="optionalAccess"?(e=r,r=o(r)):(s==="call"||s==="optionalCall")&&(r=o((...a)=>r.call(e,...a)),e=void 0)}return r}i(Wt,"_optionalChain");function ki(){return{traceId:gt(),spanId:gt().substring(16)}}i(ki,"generatePropagationContext");const Gs=rt;function Uy(){const t=Gs.chrome,e=t&&t.app&&t.app.runtime,r="history"in Gs&&!!Gs.history.pushState&&!!Gs.history.replaceState;return!e&&r}i(Uy,"supportsHistory");const Ke=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function Vr(){return ec(rt),rt}i(Vr,"getMainCarrier");function ec(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||or,e[or]=e[or]||{}}i(ec,"getSentryCarrier");function jy(t){const e=Pt(),r={sid:gt(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>zy(r)};return t&&Nr(r,t),r}i(jy,"makeSession$1");function Nr(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Pt(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:gt()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const r=t.timestamp-t.started;t.duration=r>=0?r:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}i(Nr,"updateSession");function Hy(t,e){let r={};e?r={status:e}:t.status==="ok"&&(r={status:"exited"}),Nr(t,r)}i(Hy,"closeSession");function zy(t){return At({sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}})}i(zy,"sessionToJSON");const ca="_sentrySpan";function _s(t,e){e?Xt(t,ca,e):delete t[ca]}i(_s,"_setSpanForScope");function Ci(t){return t[ca]}i(Ci,"_getSpanForScope");const Wy=100;class tc{static{i(this,"ScopeClass")}constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=ki()}clone(){const e=new tc;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,_s(e,Ci(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Nr(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,r){return this._tags={...this._tags,[e]:r},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,r){return this._extra={...this._extra,[e]:r},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,r){return r===null?delete this._contexts[e]:this._contexts[e]=r,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const r=typeof e=="function"?e(this):e,[n,s]=r instanceof Vn?[r.getScopeData(),r.getRequestSession()]:Fr(r)?[e,e.requestSession]:[],{tags:o,extra:a,user:l,contexts:f,level:_,fingerprint:b=[],propagationContext:m}=n||{};return this._tags={...this._tags,...o},this._extra={...this._extra,...a},this._contexts={...this._contexts,...f},l&&Object.keys(l).length&&(this._user=l),_&&(this._level=_),b.length&&(this._fingerprint=b),m&&(this._propagationContext=m),s&&(this._requestSession=s),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._session=void 0,_s(this,void 0),this._attachments=[],this._propagationContext=ki(),this._notifyScopeListeners(),this}addBreadcrumb(e,r){const n=typeof r=="number"?r:Wy;if(n<=0)return this;const s={timestamp:qs(),...e},o=this._breadcrumbs;return o.push(s),this._breadcrumbs=o.length>n?o.slice(-n):o,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:Ci(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,r){const n=r&&r.event_id?r.event_id:gt();if(!this._client)return Ie.warn("No client configured on scope - will not capture exception!"),n;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...r,event_id:n},this),n}captureMessage(e,r,n){const s=n&&n.event_id?n.event_id:gt();if(!this._client)return Ie.warn("No client configured on scope - will not capture message!"),s;const o=new Error(e);return this._client.captureMessage(e,r,{originalException:e,syntheticException:o,...n,event_id:s},this),s}captureEvent(e,r){const n=r&&r.event_id?r.event_id:gt();return this._client?(this._client.captureEvent(e,{...r,event_id:n},this),n):(Ie.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}const Vn=tc;function $y(){return ro("defaultCurrentScope",()=>new Vn)}i($y,"getDefaultCurrentScope");function Qy(){return ro("defaultIsolationScope",()=>new Vn)}i(Qy,"getDefaultIsolationScope");class Gy{static{i(this,"AsyncContextStack")}constructor(e,r){let n;e?n=e:n=new Vn;let s;r?s=r:s=new Vn,this._stack=[{scope:n}],this._isolationScope=s}withScope(e){const r=this._pushScope();let n;try{n=e(r)}catch(s){throw this._popScope(),s}return no(n)?n.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function Pr(){const t=Vr(),e=ec(t);return e.stack=e.stack||new Gy($y(),Qy())}i(Pr,"getAsyncContextStack");function Vy(t){return Pr().withScope(t)}i(Vy,"withScope$1");function Jy(t,e){const r=Pr();return r.withScope(()=>(r.getStackTop().scope=t,e(t)))}i(Jy,"withSetScope");function Ll(t){return Pr().withScope(()=>t(Pr().getIsolationScope()))}i(Ll,"withIsolationScope");function Ky(){return{withIsolationScope:Ll,withScope:Vy,withSetScope:Jy,withSetIsolationScope:(t,e)=>Ll(e),getCurrentScope:()=>Pr().getScope(),getIsolationScope:()=>Pr().getIsolationScope()}}i(Ky,"getStackAsyncContextStrategy");function xs(t){const e=ec(t);return e.acs?e.acs:Ky()}i(xs,"getAsyncContextStrategy");function dt(){const t=Vr();return xs(t).getCurrentScope()}i(dt,"getCurrentScope");function Qt(){const t=Vr();return xs(t).getIsolationScope()}i(Qt,"getIsolationScope");function Xy(){return ro("globalScope",()=>new Vn)}i(Xy,"getGlobalScope");function nc(...t){const e=Vr(),r=xs(e);if(t.length===2){const[n,s]=t;return n?r.withSetScope(n,s):r.withScope(s)}return r.withScope(t[0])}i(nc,"withScope");function et(){return dt().getClient()}i(et,"getClient");const Yy="_sentryMetrics";function la(t){const e=t[Yy];if(!e)return;const r={};for(const[,[n,s]]of e)(r[n]||(r[n]=[])).push(At(s));return r}i(la,"getMetricSummaryJsonForSpan");const An="sentry.source",ld="sentry.sample_rate",fr="sentry.op",Tt="sentry.origin",ua="sentry.idle_span_finish_reason",so="sentry.measurement_unit",io="sentry.measurement_value",Zy="sentry.profile_id",rc="sentry.exclusive_time",eb=0,ud=1,It=2;function tb(t){if(t<400&&t>=100)return{code:ud};if(t>=400&&t<500)switch(t){case 401:return{code:It,message:"unauthenticated"};case 403:return{code:It,message:"permission_denied"};case 404:return{code:It,message:"not_found"};case 409:return{code:It,message:"already_exists"};case 413:return{code:It,message:"failed_precondition"};case 429:return{code:It,message:"resource_exhausted"};case 499:return{code:It,message:"cancelled"};default:return{code:It,message:"invalid_argument"}}if(t>=500&&t<600)switch(t){case 501:return{code:It,message:"unimplemented"};case 503:return{code:It,message:"unavailable"};case 504:return{code:It,message:"deadline_exceeded"};default:return{code:It,message:"internal_error"}}return{code:It,message:"unknown_error"}}i(tb,"getSpanStatusFromHttpCode");function fd(t,e){t.setAttribute("http.response.status_code",e);const r=tb(e);r.message!=="unknown_error"&&t.setStatus(r)}i(fd,"setHttpStatus");const dd=0,pd=1;function nb(t){const{spanId:e,traceId:r}=t.spanContext(),{data:n,op:s,parent_span_id:o,status:a,origin:l}=ot(t);return At({parent_span_id:o,span_id:e,trace_id:r,data:n,op:s,status:a,origin:l})}i(nb,"spanToTransactionTraceContext");function rb(t){const{spanId:e,traceId:r}=t.spanContext(),{parent_span_id:n}=ot(t);return At({parent_span_id:n,span_id:e,trace_id:r})}i(rb,"spanToTraceContext");function hd(t){const{traceId:e,spanId:r}=t.spanContext(),n=_r(t);return Ya(e,r,n)}i(hd,"spanToTraceHeader");function cr(t){return typeof t=="number"?Fl(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?Fl(t.getTime()):Pt()}i(cr,"spanTimeInputToSeconds");function Fl(t){return t>9999999999?t/1e3:t}i(Fl,"ensureTimestampInSeconds");function ot(t){if(ib(t))return t.getSpanJSON();try{const{spanId:e,traceId:r}=t.spanContext();if(sb(t)){const{attributes:n,startTime:s,name:o,endTime:a,parentSpanId:l,status:f}=t;return At({span_id:e,trace_id:r,data:n,description:o,parent_span_id:l,start_timestamp:cr(s),timestamp:cr(a)||void 0,status:_d(f),op:n[fr],origin:n[Tt],_metrics_summary:la(t)})}return{span_id:e,trace_id:r}}catch{return{}}}i(ot,"spanToJSON");function sb(t){const e=t;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}i(sb,"spanIsOpenTelemetrySdkTraceBaseSpan");function ib(t){return typeof t.getSpanJSON=="function"}i(ib,"spanIsSentrySpan");function _r(t){const{traceFlags:e}=t.spanContext();return e===pd}i(_r,"spanIsSampled");function _d(t){if(!(!t||t.code===eb))return t.code===ud?"ok":t.message||"unknown_error"}i(_d,"getStatusMessage");const lr="_sentryChildSpans",fa="_sentryRootSpan";function md(t,e){const r=t[fa]||t;Xt(e,fa,r),t[lr]?t[lr].add(e):Xt(t,lr,new Set([e]))}i(md,"addChildSpanToSpan");function ob(t,e){t[lr]&&t[lr].delete(e)}i(ob,"removeChildSpanFromSpan");function fi(t){const e=new Set;function r(n){if(!e.has(n)&&_r(n)){e.add(n);const s=n[lr]?Array.from(n[lr]):[];for(const o of s)r(o)}}return i(r,"addSpanChildren"),r(t),Array.from(e)}i(fi,"getSpanDescendants");function xt(t){return t[fa]||t}i(xt,"getRootSpan");function kt(){const t=Vr(),e=xs(t);return e.getActiveSpan?e.getActiveSpan():Ci(dt())}i(kt,"getActiveSpan");let Nl=!1;function ab(){Nl||(Nl=!0,Yf(da),Zf(da))}i(ab,"registerSpanErrorInstrumentation");function da(){const t=kt(),e=t&&xt(t);if(e){const r="internal_error";Ke&&Ie.log(`[Tracing] Root span: ${r} -> Global error occurred`),e.setStatus({code:It,message:r})}}i(da,"errorCallback");da.tag="sentry_tracingErrorCallback";const gd="_sentryScope",yd="_sentryIsolationScope";function cb(t,e,r){t&&(Xt(t,yd,r),Xt(t,gd,e))}i(cb,"setCapturedScopesOnSpan");function Pl(t){return{scope:t[gd],isolationScope:t[yd]}}i(Pl,"getCapturedScopesOnSpan");function Rn(t){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=et(),r=t||e&&e.getOptions();return!!r&&(r.enableTracing||"tracesSampleRate"in r||"tracesSampler"in r)}i(Rn,"hasTracingEnabled");class Jr{static{i(this,"SentryNonRecordingSpan")}constructor(e={}){this._traceId=e.traceId||gt(),this._spanId=e.spanId||gt().substring(16)}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:dd}}end(e){}setAttribute(e,r){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,r,n){return this}addLink(e){return this}addLinks(e){return this}recordException(e,r){}}const sc="production",bd="_frozenDsc";function Dl(t,e){Xt(t,bd,e)}i(Dl,"freezeDscOnSpan");function oo(t,e){const r=e.getOptions(),{publicKey:n}=e.getDsn()||{},s=At({environment:r.environment||sc,release:r.release,public_key:n,trace_id:t});return e.emit("createDsc",s),s}i(oo,"getDynamicSamplingContextFromClient");function Yn(t){const e=et();if(!e)return{};const r=oo(ot(t).trace_id||"",e),n=xt(t),s=n[bd];if(s)return s;const o=n.spanContext().traceState,a=o&&o.get("sentry.dsc"),l=a&&sd(a);if(l)return l;const f=ot(n),_=f.data||{},b=_[ld];b!=null&&(r.sample_rate=`${b}`);const m=_[An],w=f.description;return m!=="url"&&w&&(r.transaction=w),Rn()&&(r.sampled=String(_r(n))),e.emit("createDsc",r,n),r}i(Yn,"getDynamicSamplingContextFromSpan");function lb(t){if(!Ke)return;const{description:e="< unknown name >",op:r="< unknown op >",parent_span_id:n}=ot(t),{spanId:s}=t.spanContext(),o=_r(t),a=xt(t),l=a===t,f=`[Tracing] Starting ${o?"sampled":"unsampled"} ${l?"root ":""}span`,_=[`op: ${r}`,`name: ${e}`,`ID: ${s}`];if(n&&_.push(`parent ID: ${n}`),!l){const{op:b,description:m}=ot(a);_.push(`root ID: ${a.spanContext().spanId}`),b&&_.push(`root op: ${b}`),m&&_.push(`root description: ${m}`)}Ie.log(`${f}
  ${_.join(`
  `)}`)}i(lb,"logSpanStart");function ub(t){if(!Ke)return;const{description:e="< unknown name >",op:r="< unknown op >"}=ot(t),{spanId:n}=t.spanContext(),o=xt(t)===t,a=`[Tracing] Finishing "${r}" ${o?"root ":""}span "${e}" with ID ${n}`;Ie.log(a)}i(ub,"logSpanEnd");function Oi(t){if(typeof t=="boolean")return Number(t);const e=typeof t=="string"?parseFloat(t):t;if(typeof e!="number"||isNaN(e)||e<0||e>1){Ke&&Ie.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(t)} of type ${JSON.stringify(typeof t)}.`);return}return e}i(Oi,"parseSampleRate");function fb(t,e){if(!Rn(t))return[!1];let r;typeof t.tracesSampler=="function"?r=t.tracesSampler(e):e.parentSampled!==void 0?r=e.parentSampled:typeof t.tracesSampleRate<"u"?r=t.tracesSampleRate:r=1;const n=Oi(r);return n===void 0?(Ke&&Ie.warn("[Tracing] Discarding transaction because of invalid sample rate."),[!1]):n?Math.random()<n?[!0,n]:(Ke&&Ie.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(r)})`),[!1,n]):(Ke&&Ie.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,n])}i(fb,"sampleSpan");function db(t,e){return e&&(t.sdk=t.sdk||{},t.sdk.name=t.sdk.name||e.name,t.sdk.version=t.sdk.version||e.version,t.sdk.integrations=[...t.sdk.integrations||[],...e.integrations||[]],t.sdk.packages=[...t.sdk.packages||[],...e.packages||[]]),t}i(db,"enhanceEventWithSdkInfo");function pb(t,e,r,n){const s=Za(r),o={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!n&&e&&{dsn:Ts(e)}},a="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return hr(o,[a])}i(pb,"createSessionEnvelope");function hb(t,e,r,n){const s=Za(r),o=t.type&&t.type!=="replay_event"?t.type:"event";db(t,r&&r.sdk);const a=od(t,s,n,e);return delete t.sdkProcessingMetadata,hr(a,[[{type:o},t]])}i(hb,"createEventEnvelope");function _b(t,e){function r(b){return!!b.trace_id&&!!b.public_key}i(r,"dscHasRequiredProps");const n=Yn(t[0]),s=e&&e.getDsn(),o=e&&e.getOptions().tunnel,a={sent_at:new Date().toISOString(),...r(n)&&{trace:n},...!!o&&s&&{dsn:Ts(s)}},l=e&&e.getOptions().beforeSendSpan,f=l?b=>l(ot(b)):b=>ot(b),_=[];for(const b of t){const m=f(b);m&&_.push(Ry(m))}return hr(a,_)}i(_b,"createSpanEnvelope");function mb(t,e,r,n=kt()){const s=n&&xt(n);s&&s.addEvent(t,{[io]:e,[so]:r})}i(mb,"setMeasurement");function Ml(t){if(!t||t.length===0)return;const e={};return t.forEach(r=>{const n=r.attributes||{},s=n[so],o=n[io];typeof s=="string"&&typeof o=="number"&&(e[r.name]={value:o,unit:s})}),e}i(Ml,"timedEventsToMeasurements");const Bl=1e3;class ic{static{i(this,"SentrySpan")}constructor(e={}){this._traceId=e.traceId||gt(),this._spanId=e.spanId||gt().substring(16),this._startTime=e.startTimestamp||Pt(),this._attributes={},this.setAttributes({[Tt]:"manual",[fr]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this}addLinks(e){return this}recordException(e,r){}spanContext(){const{_spanId:e,_traceId:r,_sampled:n}=this;return{spanId:e,traceId:r,traceFlags:n?pd:dd}}setAttribute(e,r){return r===void 0?delete this._attributes[e]:this._attributes[e]=r,this}setAttributes(e){return Object.keys(e).forEach(r=>this.setAttribute(r,e[r])),this}updateStartTime(e){this._startTime=cr(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this}end(e){this._endTime||(this._endTime=cr(e),ub(this),this._onSpanEnded())}getSpanJSON(){return At({data:this._attributes,description:this._name,op:this._attributes[fr],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:_d(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Tt],_metrics_summary:la(this),profile_id:this._attributes[Zy],exclusive_time:this._attributes[rc],measurements:Ml(this._events),is_segment:this._isStandaloneSpan&&xt(this)===this||void 0,segment_id:this._isStandaloneSpan?xt(this).spanContext().spanId:void 0})}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,r,n){Ke&&Ie.log("[Tracing] Adding an event to span:",e);const s=Ul(r)?r:n||Pt(),o=Ul(r)?{}:r||{},a={name:e,time:cr(s),attributes:o};return this._events.push(a),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=et();if(e&&e.emit("spanEnd",this),!(this._isStandaloneSpan||this===xt(this)))return;if(this._isStandaloneSpan){this._sampled?yb(_b([this],e)):(Ke&&Ie.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span"));return}const n=this._convertSpanToTransaction();n&&(Pl(this).scope||dt()).captureEvent(n)}_convertSpanToTransaction(){if(!jl(ot(this)))return;this._name||(Ke&&Ie.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:r}=Pl(this),s=(e||dt()).getClient()||et();if(this._sampled!==!0){Ke&&Ie.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),s&&s.recordDroppedEvent("sample_rate","transaction");return}const a=fi(this).filter(m=>m!==this&&!gb(m)).map(m=>ot(m)).filter(jl),l=this._attributes[An],f={contexts:{trace:nb(this)},spans:a.length>Bl?a.sort((m,w)=>m.start_timestamp-w.start_timestamp).slice(0,Bl):a,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:r,...At({dynamicSamplingContext:Yn(this)})},_metrics_summary:la(this),...l&&{transaction_info:{source:l}}},_=Ml(this._events);return _&&Object.keys(_).length&&(Ke&&Ie.log("[Measurements] Adding measurements to transaction event",JSON.stringify(_,void 0,2)),f.measurements=_),f}}function Ul(t){return t&&typeof t=="number"||t instanceof Date||Array.isArray(t)}i(Ul,"isSpanTimeInput");function jl(t){return!!t.start_timestamp&&!!t.timestamp&&!!t.span_id&&!!t.trace_id}i(jl,"isFullFinishedSpan");function gb(t){return t instanceof ic&&t.isStandaloneSpan()}i(gb,"isStandaloneSpan");function yb(t){const e=et();if(!e)return;const r=t[1];if(!r||r.length===0){e.recordDroppedEvent("before_send","span");return}e.sendEnvelope(t)}i(yb,"sendSpanEnvelope");const Ed="__SENTRY_SUPPRESS_TRACING__";function Zn(t){const e=wd();if(e.startInactiveSpan)return e.startInactiveSpan(t);const r=Eb(t),{forceTransaction:n,parentSpan:s}=t;return(t.scope?a=>nc(t.scope,a):s!==void 0?a=>Sd(s,a):a=>a())(()=>{const a=dt(),l=wb(a);return t.onlyIfParent&&!l?new Jr:bb({parentSpan:l,spanArguments:r,forceTransaction:n,scope:a})})}i(Zn,"startInactiveSpan");function Sd(t,e){const r=wd();return r.withActiveSpan?r.withActiveSpan(t,e):nc(n=>(_s(n,t||void 0),e(n)))}i(Sd,"withActiveSpan");function bb({parentSpan:t,spanArguments:e,forceTransaction:r,scope:n}){if(!Rn())return new Jr;const s=Qt();let o;if(t&&!r)o=Sb(t,n,e),md(t,o);else if(t){const a=Yn(t),{traceId:l,spanId:f}=t.spanContext(),_=_r(t);o=Hl({traceId:l,parentSpanId:f,...e},n,_),Dl(o,a)}else{const{traceId:a,dsc:l,parentSpanId:f,sampled:_}={...s.getPropagationContext(),...n.getPropagationContext()};o=Hl({traceId:a,parentSpanId:f,...e},n,_),l&&Dl(o,l)}return lb(o),cb(o,n,s),o}i(bb,"createChildOrRootSpan");function Eb(t){const r={isStandalone:(t.experimental||{}).standalone,...t};if(t.startTime){const n={...r};return n.startTimestamp=cr(t.startTime),delete n.startTime,n}return r}i(Eb,"parseSentrySpanArguments");function wd(){const t=Vr();return xs(t)}i(wd,"getAcs");function Hl(t,e,r){const n=et(),s=n&&n.getOptions()||{},{name:o="",attributes:a}=t,[l,f]=e.getScopeData().sdkProcessingMetadata[Ed]?[!1]:fb(s,{name:o,parentSampled:r,attributes:a,transactionContext:{name:o,parentSampled:r}}),_=new ic({...t,attributes:{[An]:"custom",...t.attributes},sampled:l});return f!==void 0&&_.setAttribute(ld,f),n&&n.emit("spanStart",_),_}i(Hl,"_startRootSpan");function Sb(t,e,r){const{spanId:n,traceId:s}=t.spanContext(),o=e.getScopeData().sdkProcessingMetadata[Ed]?!1:_r(t),a=o?new ic({...r,parentSpanId:n,traceId:s,sampled:o}):new Jr({traceId:s});md(t,a);const l=et();return l&&(l.emit("spanStart",a),r.endTimestamp&&l.emit("spanEnd",a)),a}i(Sb,"_startChildSpan");function wb(t){const e=Ci(t);if(!e)return;const r=et();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?xt(e):e}i(wb,"getParentSpan");const di={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},vb="heartbeatFailed",Ab="idleTimeout",Ib="finalTimeout",Tb="externalFinish";function vd(t,e={}){const r=new Map;let n=!1,s,o=Tb,a=!e.disableAutoFinish;const l=[],{idleTimeout:f=di.idleTimeout,finalTimeout:_=di.finalTimeout,childSpanTimeout:b=di.childSpanTimeout,beforeSpanEnd:m}=e,w=et();if(!w||!Rn())return new Jr;const x=dt(),q=kt(),R=qb(t);R.end=new Proxy(R.end,{apply(te,ne,M){m&&m(R);const[J,...P]=M,X=J||Pt(),ce=cr(X),Ae=fi(R).filter(Xe=>Xe!==R);if(!Ae.length)return Se(ce),Reflect.apply(te,ne,[ce,...P]);const we=Ae.map(Xe=>ot(Xe).timestamp).filter(Xe=>!!Xe),ct=we.length?Math.max(...we):void 0,be=ot(R).start_timestamp,Qe=Math.min(be?be+_/1e3:1/0,Math.max(be||-1/0,Math.min(ce,ct||1/0)));return Se(Qe),Reflect.apply(te,ne,[Qe,...P])}});function U(){s&&(clearTimeout(s),s=void 0)}i(U,"_cancelIdleTimeout");function j(te){U(),s=setTimeout(()=>{!n&&r.size===0&&a&&(o=Ab,R.end(te))},f)}i(j,"_restartIdleTimeout");function ae(te){s=setTimeout(()=>{!n&&a&&(o=vb,R.end(te))},b)}i(ae,"_restartChildSpanTimeout");function fe(te){U(),r.set(te,!0);const ne=Pt();ae(ne+b/1e3)}i(fe,"_pushActivity");function ge(te){if(r.has(te)&&r.delete(te),r.size===0){const ne=Pt();j(ne+f/1e3)}}i(ge,"_popActivity");function Se(te){n=!0,r.clear(),l.forEach(ce=>ce()),_s(x,q);const ne=ot(R),{start_timestamp:M}=ne;if(!M)return;(ne.data||{})[ua]||R.setAttribute(ua,o),Ie.log(`[Tracing] Idle span "${ne.op}" finished`);const P=fi(R).filter(ce=>ce!==R);let X=0;P.forEach(ce=>{ce.isRecording()&&(ce.setStatus({code:It,message:"cancelled"}),ce.end(te),Ke&&Ie.log("[Tracing] Cancelling span since span ended early",JSON.stringify(ce,void 0,2)));const Ae=ot(ce),{timestamp:we=0,start_timestamp:ct=0}=Ae,be=ct<=te,Qe=(_+f)/1e3,Xe=we-ct<=Qe;if(Ke){const wt=JSON.stringify(ce,void 0,2);be?Xe||Ie.log("[Tracing] Discarding span since it finished after idle span final timeout",wt):Ie.log("[Tracing] Discarding span since it happened after idle span was finished",wt)}(!Xe||!be)&&(ob(R,ce),X++)}),X>0&&R.setAttribute("sentry.idle_span_discarded_spans",X)}return i(Se,"onIdleSpanEnded"),l.push(w.on("spanStart",te=>{if(n||te===R||ot(te).timestamp)return;fi(R).includes(te)&&fe(te.spanContext().spanId)})),l.push(w.on("spanEnd",te=>{n||ge(te.spanContext().spanId)})),l.push(w.on("idleSpanEnableAutoFinish",te=>{te===R&&(a=!0,j(),r.size&&ae())})),e.disableAutoFinish||j(),setTimeout(()=>{n||(R.setStatus({code:It,message:"deadline_exceeded"}),o=Ib,R.end())},_),R}i(vd,"startIdleSpan");function qb(t){const e=Zn(t);return _s(dt(),e),Ke&&Ie.log("[Tracing] Started span is an idle span"),e}i(qb,"_startIdleSpan");function pa(t,e,r,n=0){return new Vt((s,o)=>{const a=t[n];if(e===null||typeof a!="function")s(e);else{const l=a({...e},r);Ke&&a.id&&l===null&&Ie.log(`Event processor "${a.id}" dropped event`),no(l)?l.then(f=>pa(t,f,r,n+1).then(s)).then(null,o):pa(t,l,r,n+1).then(s).then(null,o)}})}i(pa,"notifyEventProcessors");function xb(t,e){const{fingerprint:r,span:n,breadcrumbs:s,sdkProcessingMetadata:o}=e;kb(t,e),n&&Rb(t,n),Lb(t,r),Cb(t,s),Ob(t,o)}i(xb,"applyScopeDataToEvent");function zl(t,e){const{extra:r,tags:n,user:s,contexts:o,level:a,sdkProcessingMetadata:l,breadcrumbs:f,fingerprint:_,eventProcessors:b,attachments:m,propagationContext:w,transactionName:x,span:q}=e;is(t,"extra",r),is(t,"tags",n),is(t,"user",s),is(t,"contexts",o),is(t,"sdkProcessingMetadata",l),a&&(t.level=a),x&&(t.transactionName=x),q&&(t.span=q),f.length&&(t.breadcrumbs=[...t.breadcrumbs,...f]),_.length&&(t.fingerprint=[...t.fingerprint,..._]),b.length&&(t.eventProcessors=[...t.eventProcessors,...b]),m.length&&(t.attachments=[...t.attachments,...m]),t.propagationContext={...t.propagationContext,...w}}i(zl,"mergeScopeData");function is(t,e,r){if(r&&Object.keys(r).length){t[e]={...t[e]};for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[e][n]=r[n])}}i(is,"mergeAndOverwriteScopeData");function kb(t,e){const{extra:r,tags:n,user:s,contexts:o,level:a,transactionName:l}=e,f=At(r);f&&Object.keys(f).length&&(t.extra={...f,...t.extra});const _=At(n);_&&Object.keys(_).length&&(t.tags={..._,...t.tags});const b=At(s);b&&Object.keys(b).length&&(t.user={...b,...t.user});const m=At(o);m&&Object.keys(m).length&&(t.contexts={...m,...t.contexts}),a&&(t.level=a),l&&t.type!=="transaction"&&(t.transaction=l)}i(kb,"applyDataToEvent");function Cb(t,e){const r=[...t.breadcrumbs||[],...e];t.breadcrumbs=r.length?r:void 0}i(Cb,"applyBreadcrumbsToEvent");function Ob(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}i(Ob,"applySdkMetadataToEvent");function Rb(t,e){t.contexts={trace:rb(e),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:Yn(e),...t.sdkProcessingMetadata};const r=xt(e),n=ot(r).description;n&&!t.transaction&&t.type==="transaction"&&(t.transaction=n)}i(Rb,"applySpanToEvent");function Lb(t,e){t.fingerprint=t.fingerprint?td(t.fingerprint):[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint&&!t.fingerprint.length&&delete t.fingerprint}i(Lb,"applyFingerprintToEvent");function Ad(t,e,r,n,s,o){const{normalizeDepth:a=3,normalizeMaxBreadth:l=1e3}=t,f={...e,event_id:e.event_id||r.event_id||gt(),timestamp:e.timestamp||qs()},_=r.integrations||t.integrations.map(U=>U.name);Fb(f,t),Db(f,_),s&&s.emit("applyFrameMetadata",e),e.type===void 0&&Nb(f,t.stackParser);const b=Bb(n,r.captureContext);r.mechanism&&hs(f,r.mechanism);const m=s?s.getEventProcessors():[],w=Xy().getScopeData();if(o){const U=o.getScopeData();zl(w,U)}if(b){const U=b.getScopeData();zl(w,U)}const x=[...r.attachments||[],...w.attachments];x.length&&(r.attachments=x),xb(f,w);const q=[...m,...w.eventProcessors];return pa(q,f,r).then(U=>(U&&Pb(U),typeof a=="number"&&a>0?Mb(U,a,l):U))}i(Ad,"prepareEvent");function Fb(t,e){const{environment:r,release:n,dist:s,maxValueLength:o=250}=e;"environment"in t||(t.environment="environment"in e?r:sc),t.release===void 0&&n!==void 0&&(t.release=n),t.dist===void 0&&s!==void 0&&(t.dist=s),t.message&&(t.message=Or(t.message,o));const a=t.exception&&t.exception.values&&t.exception.values[0];a&&a.value&&(a.value=Or(a.value,o));const l=t.request;l&&l.url&&(l.url=Or(l.url,o))}i(Fb,"applyClientOptions");const Wl=new WeakMap;function Nb(t,e){const r=rt._sentryDebugIds;if(!r)return;let n;const s=Wl.get(e);s?n=s:(n=new Map,Wl.set(e,n));const o=Object.entries(r).reduce((a,[l,f])=>{let _;const b=n.get(l);b?_=b:(_=e(l),n.set(l,_));for(let m=_.length-1;m>=0;m--){const w=_[m];if(w.filename){a[w.filename]=f;break}}return a},{});try{t.exception.values.forEach(a=>{a.stacktrace.frames.forEach(l=>{l.filename&&(l.debug_id=o[l.filename])})})}catch{}}i(Nb,"applyDebugIds");function Pb(t){const e={};try{t.exception.values.forEach(n=>{n.stacktrace.frames.forEach(s=>{s.debug_id&&(s.abs_path?e[s.abs_path]=s.debug_id:s.filename&&(e[s.filename]=s.debug_id),delete s.debug_id)})})}catch{}if(Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const r=t.debug_meta.images;Object.entries(e).forEach(([n,s])=>{r.push({type:"sourcemap",code_file:n,debug_id:s})})}i(Pb,"applyDebugMeta");function Db(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}i(Db,"applyIntegrationsMetadata");function Mb(t,e,r){if(!t)return null;const n={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(s=>({...s,...s.data&&{data:dn(s.data,e,r)}}))},...t.user&&{user:dn(t.user,e,r)},...t.contexts&&{contexts:dn(t.contexts,e,r)},...t.extra&&{extra:dn(t.extra,e,r)}};return t.contexts&&t.contexts.trace&&n.contexts&&(n.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(n.contexts.trace.data=dn(t.contexts.trace.data,e,r))),t.spans&&(n.spans=t.spans.map(s=>({...s,...s.data&&{data:dn(s.data,e,r)}}))),n}i(Mb,"normalizeEvent");function Bb(t,e){if(!e)return t;const r=t?t.clone():new Vn;return r.update(e),r}i(Bb,"getFinalScope");function Ub(t){if(t)return jb(t)?{captureContext:t}:zb(t)?{captureContext:t}:t}i(Ub,"parseEventHintOrCaptureContext");function jb(t){return t instanceof Vn||typeof t=="function"}i(jb,"hintIsScopeOrFunction");const Hb=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function zb(t){return Object.keys(t).some(e=>Hb.includes(e))}i(zb,"hintIsScopeContext");function Dr(t,e){return dt().captureException(t,Ub(e))}i(Dr,"captureException");function Id(t,e){return dt().captureEvent(t,e)}i(Id,"captureEvent");function oc(t,e){Qt().setContext(t,e)}i(oc,"setContext");function Wb(t){Qt().setUser(t)}i(Wb,"setUser");function $b(t){Qt().addEventProcessor(t)}i($b,"addEventProcessor");function $l(t){const e=et(),r=Qt(),n=dt(),{release:s,environment:o=sc}=e&&e.getOptions()||{},{userAgent:a}=rt.navigator||{},l=jy({release:s,environment:o,user:n.getUser()||r.getUser(),...a&&{userAgent:a},...t}),f=r.getSession();return f&&f.status==="ok"&&Nr(f,{status:"exited"}),Td(),r.setSession(l),n.setSession(l),l}i($l,"startSession");function Td(){const t=Qt(),e=dt(),r=e.getSession()||t.getSession();r&&Hy(r),qd(),t.setSession(),e.setSession()}i(Td,"endSession");function qd(){const t=Qt(),e=dt(),r=et(),n=e.getSession()||t.getSession();n&&r&&r.captureSession(n)}i(qd,"_sendSessionUpdate");function Ql(t=!1){if(t){Td();return}qd()}i(Ql,"captureSession");const Qb="7";function Gb(t){const e=t.protocol?`${t.protocol}:`:"",r=t.port?`:${t.port}`:"";return`${e}//${t.host}${r}${t.path?`/${t.path}`:""}/api/`}i(Gb,"getBaseApiEndpoint");function Vb(t){return`${Gb(t)}${t.projectId}/envelope/`}i(Vb,"_getIngestEndpoint");function Jb(t,e){return Kg({sentry_key:t.publicKey,sentry_version:Qb,...e&&{sentry_client:`${e.name}/${e.version}`}})}i(Jb,"_encodedAuth");function Kb(t,e,r){return e||`${Vb(t)}?${Jb(t,r)}`}i(Kb,"getEnvelopeEndpointWithUrlEncodedAuth");const Gl=[];function Xb(t){const e={};return t.forEach(r=>{const{name:n}=r,s=e[n];s&&!s.isDefaultInstance&&r.isDefaultInstance||(e[n]=r)}),Object.values(e)}i(Xb,"filterDuplicates");function Yb(t){const e=t.defaultIntegrations||[],r=t.integrations;e.forEach(a=>{a.isDefaultInstance=!0});let n;Array.isArray(r)?n=[...e,...r]:typeof r=="function"?n=td(r(e)):n=e;const s=Xb(n),o=s.findIndex(a=>a.name==="Debug");if(o>-1){const[a]=s.splice(o,1);s.push(a)}return s}i(Yb,"getIntegrationsToSetup");function Zb(t,e){const r={};return e.forEach(n=>{n&&xd(t,n,r)}),r}i(Zb,"setupIntegrations");function Vl(t,e){for(const r of e)r&&r.afterAllSetup&&r.afterAllSetup(t)}i(Vl,"afterSetupIntegrations");function xd(t,e,r){if(r[e.name]){Ke&&Ie.log(`Integration skipped because it was already installed: ${e.name}`);return}if(r[e.name]=e,Gl.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),Gl.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const n=e.preprocessEvent.bind(e);t.on("preprocessEvent",(s,o)=>n(s,o,t))}if(typeof e.processEvent=="function"){const n=e.processEvent.bind(e),s=Object.assign((o,a)=>n(o,a,t),{id:e.name});t.addEventProcessor(s)}Ke&&Ie.log(`Integration installed: ${e.name}`)}i(xd,"setupIntegration");const Jl="Not capturing exception because it's already been captured.";class eE{static{i(this,"BaseClient")}constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Jg(e.dsn):Ke&&Ie.warn("No DSN provided, client will not send events."),this._dsn){const r=Kb(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:r})}}captureException(e,r,n){const s=gt();if(kl(e))return Ke&&Ie.log(Jl),s;const o={event_id:s,...r};return this._process(this.eventFromException(e,o).then(a=>this._captureEvent(a,o,n))),o.event_id}captureMessage(e,r,n,s){const o={event_id:gt(),...n},a=Va(e)?e:String(e),l=Ja(e)?this.eventFromMessage(a,r,o):this.eventFromException(e,o);return this._process(l.then(f=>this._captureEvent(f,o,s))),o.event_id}captureEvent(e,r,n){const s=gt();if(r&&r.originalException&&kl(r.originalException))return Ke&&Ie.log(Jl),s;const o={event_id:s,...r},l=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,o,l||n)),o.event_id}captureSession(e){typeof e.release!="string"?Ke&&Ie.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),Nr(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const r=this._transport;return r?(this.emit("flush"),this._isClientDoneProcessing(e).then(n=>r.flush(e).then(s=>n&&s))):On(!0)}close(e){return this.flush(e).then(r=>(this.getOptions().enabled=!1,this.emit("close"),r))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const r=this._integrations[e.name];xd(this,e,this._integrations),r||Vl(this,[e])}sendEvent(e,r={}){this.emit("beforeSendEvent",e,r);let n=hb(e,this._dsn,this._options._metadata,this._options.tunnel);for(const o of r.attachments||[])n=ky(n,Ly(o));const s=this.sendEnvelope(n);s&&s.then(o=>this.emit("afterSendEvent",e,o),null)}sendSession(e){const r=pb(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(r)}recordDroppedEvent(e,r,n){if(this._options.sendClientReports){const s=typeof n=="number"?n:1,o=`${e}:${r}`;Ke&&Ie.log(`Recording outcome: "${o}"${s>1?` (${s} times)`:""}`),this._outcomes[o]=(this._outcomes[o]||0)+s}}on(e,r){const n=this._hooks[e]=this._hooks[e]||[];return n.push(r),()=>{const s=n.indexOf(r);s>-1&&n.splice(s,1)}}emit(e,...r){const n=this._hooks[e];n&&n.forEach(s=>s(...r))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,r=>(Ke&&Ie.error("Error while sending envelope:",r),r)):(Ke&&Ie.error("Transport disabled"),On({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=Zb(this,e),Vl(this,e)}_updateSessionFromEvent(e,r){let n=!1,s=!1;const o=r.exception&&r.exception.values;if(o){s=!0;for(const f of o){const _=f.mechanism;if(_&&_.handled===!1){n=!0;break}}}const a=e.status==="ok";(a&&e.errors===0||a&&n)&&(Nr(e,{...n&&{status:"crashed"},errors:e.errors||Number(s||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Vt(r=>{let n=0;const s=1,o=setInterval(()=>{this._numProcessing==0?(clearInterval(o),r(!0)):(n+=s,e&&n>=e&&(clearInterval(o),r(!1)))},s)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,r,n,s=Qt()){const o=this.getOptions(),a=Object.keys(this._integrations);return!r.integrations&&a.length>0&&(r.integrations=a),this.emit("preprocessEvent",e,r),e.type||s.setLastEventId(e.event_id||r.event_id),Ad(o,e,r,n,this,s).then(l=>{if(l===null)return l;const f={...s.getPropagationContext(),...n?n.getPropagationContext():void 0};if(!(l.contexts&&l.contexts.trace)&&f){const{traceId:b,spanId:m,parentSpanId:w,dsc:x}=f;l.contexts={trace:At({trace_id:b,span_id:m,parent_span_id:w}),...l.contexts};const q=x||oo(b,this);l.sdkProcessingMetadata={dynamicSamplingContext:q,...l.sdkProcessingMetadata}}return l})}_captureEvent(e,r={},n){return this._processEvent(e,r,n).then(s=>s.event_id,s=>{if(Ke){const o=s;o.logLevel==="log"?Ie.log(o.message):Ie.warn(o)}})}_processEvent(e,r,n){const s=this.getOptions(),{sampleRate:o}=s,a=Cd(e),l=kd(e),f=e.type||"error",_=`before send for type \`${f}\``,b=typeof o>"u"?void 0:Oi(o);if(l&&typeof b=="number"&&Math.random()>b)return this.recordDroppedEvent("sample_rate","error",e),xi(new pn(`Discarding event because it's not included in the random sample (sampling rate = ${o})`,"log"));const m=f==="replay_event"?"replay":f,x=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,r,n,x).then(q=>{if(q===null)throw this.recordDroppedEvent("event_processor",m,e),new pn("An event processor returned `null`, will not send event.","log");if(r.data&&r.data.__sentry__===!0)return q;const U=nE(this,s,q,r);return tE(U,_)}).then(q=>{if(q===null){if(this.recordDroppedEvent("before_send",m,e),a){const ae=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",ae)}throw new pn(`${_} returned \`null\`, will not send event.`,"log")}const R=n&&n.getSession();if(!a&&R&&this._updateSessionFromEvent(R,q),a){const j=q.sdkProcessingMetadata&&q.sdkProcessingMetadata.spanCountBeforeProcessing||0,ae=q.spans?q.spans.length:0,fe=j-ae;fe>0&&this.recordDroppedEvent("before_send","span",fe)}const U=q.transaction_info;if(a&&U&&q.transaction!==e.transaction){const j="custom";q.transaction_info={...U,source:j}}return this.sendEvent(q,r),q}).then(null,q=>{throw q instanceof pn?q:(this.captureException(q,{data:{__sentry__:!0},originalException:q}),new pn(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${q}`))})}_process(e){this._numProcessing++,e.then(r=>(this._numProcessing--,r),r=>(this._numProcessing--,r))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([r,n])=>{const[s,o]=r.split(":");return{reason:s,category:o,quantity:n}})}_flushOutcomes(){Ke&&Ie.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0){Ke&&Ie.log("No outcomes to send");return}if(!this._dsn){Ke&&Ie.log("No dsn provided, will not send outcomes");return}Ke&&Ie.log("Sending outcomes:",e);const r=Ny(e,this._options.tunnel&&Ts(this._dsn));this.sendEnvelope(r)}}function tE(t,e){const r=`${e} must return \`null\` or a valid event.`;if(no(t))return t.then(n=>{if(!Fr(n)&&n!==null)throw new pn(r);return n},n=>{throw new pn(`${e} rejected with ${n}`)});if(!Fr(t)&&t!==null)throw new pn(r);return t}i(tE,"_validateBeforeSendResult");function nE(t,e,r,n){const{beforeSend:s,beforeSendTransaction:o,beforeSendSpan:a}=e;if(kd(r)&&s)return s(r,n);if(Cd(r)){if(r.spans&&a){const l=[];for(const f of r.spans){const _=a(f);_?l.push(_):t.recordDroppedEvent("before_send","span")}r.spans=l}if(o){if(r.spans){const l=r.spans.length;r.sdkProcessingMetadata={...r.sdkProcessingMetadata,spanCountBeforeProcessing:l}}return o(r,n)}}return r}i(nE,"processBeforeSend");function kd(t){return t.type===void 0}i(kd,"isErrorEvent$1");function Cd(t){return t.type==="transaction"}i(Cd,"isTransactionEvent$1");function rE(t,e){e.debug===!0&&(Ke?Ie.enable():Gr(()=>{})),dt().update(e.initialScope);const n=new t(e);return sE(n),n.init(),n}i(rE,"initAndBind");function sE(t){dt().setClient(t)}i(sE,"setCurrentClient");const iE=64;function oE(t,e,r=Ey(t.bufferSize||iE)){let n={};const s=i(a=>r.drain(a),"flush");function o(a){const l=[];if(Ol(a,(m,w)=>{const x=Rl(w);if(ad(n,x)){const q=Kl(m,w);t.recordDroppedEvent("ratelimit_backoff",x,q)}else l.push(m)}),l.length===0)return On({});const f=hr(a[0],l),_=i(m=>{Ol(f,(w,x)=>{const q=Kl(w,x);t.recordDroppedEvent(m,Rl(x),q)})},"recordEnvelopeLoss"),b=i(()=>e({body:Cy(f)}).then(m=>(m.statusCode!==void 0&&(m.statusCode<200||m.statusCode>=300)&&Ke&&Ie.warn(`Sentry responded with status code ${m.statusCode} to sent event.`),n=cd(n,m),m),m=>{throw _("network_error"),m}),"requestTask");return r.add(b).then(m=>m,m=>{if(m instanceof pn)return Ke&&Ie.error("Skipped sending event because buffer is full."),_("queue_overflow"),On({});throw m})}return i(o,"send"),{send:o,flush:s}}i(oE,"createTransport");function Kl(t,e){if(!(e!=="event"&&e!=="transaction"))return Array.isArray(t)?t[1]:void 0}i(Kl,"getEventForEnvelopeItem");function aE(t,e){const r=e&&e.getDsn(),n=e&&e.getOptions().tunnel;return lE(t,r)||cE(t,n)}i(aE,"isSentryRequestUrl");function cE(t,e){return e?Xl(t)===Xl(e):!1}i(cE,"checkTunnel");function lE(t,e){return e?t.includes(e.host):!1}i(lE,"checkDsn");function Xl(t){return t[t.length-1]==="/"?t.slice(0,-1):t}i(Xl,"removeTrailingSlash");function Od(t,e,r=[e],n="npm"){const s=t._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${e}`,packages:r.map(o=>({name:`${n}:@sentry/${o}`,version:or})),version:or}),t._metadata=s}i(Od,"applySdkMetadata");const uE=100;function Jn(t,e){const r=et(),n=Qt();if(!r)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:o=uE}=r.getOptions();if(o<=0)return;const l={timestamp:qs(),...t},f=s?Gr(()=>s(l,e)):l;f!==null&&(r.emit&&r.emit("beforeAddBreadcrumb",f,e),n.addBreadcrumb(f,o))}i(Jn,"addBreadcrumb");let Yl;const fE="FunctionToString",Zl=new WeakMap,dE=i(()=>({name:fE,setupOnce(){Yl=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=Ka(this),r=Zl.has(et())&&e!==void 0?e:this;return Yl.apply(r,t)}}catch{}},setup(t){Zl.set(t,!0)}}),"_functionToStringIntegration"),pE=dE,hE=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,"undefined is not an object (evaluating 'a.L')",`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler"],_E="InboundFilters",mE=i((t={})=>({name:_E,processEvent(e,r,n){const s=n.getOptions(),o=yE(t,s);return bE(e,o)?null:e}}),"_inboundFiltersIntegration"),gE=mE;function yE(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:hE],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]],ignoreInternal:t.ignoreInternal!==void 0?t.ignoreInternal:!0}}i(yE,"_mergeOptions");function bE(t,e){return e.ignoreInternal&&IE(t)?(Ke&&Ie.warn(`Event dropped due to being internal Sentry Error.
Event: ${Bn(t)}`),!0):EE(t,e.ignoreErrors)?(Ke&&Ie.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Bn(t)}`),!0):qE(t)?(Ke&&Ie.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Bn(t)}`),!0):SE(t,e.ignoreTransactions)?(Ke&&Ie.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Bn(t)}`),!0):wE(t,e.denyUrls)?(Ke&&Ie.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Bn(t)}.
Url: ${Ri(t)}`),!0):vE(t,e.allowUrls)?!1:(Ke&&Ie.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Bn(t)}.
Url: ${Ri(t)}`),!0)}i(bE,"_shouldDropEvent$1");function EE(t,e){return t.type||!e||!e.length?!1:AE(t).some(r=>$n(r,e))}i(EE,"_isIgnoredError");function SE(t,e){if(t.type!=="transaction"||!e||!e.length)return!1;const r=t.transaction;return r?$n(r,e):!1}i(SE,"_isIgnoredTransaction");function wE(t,e){if(!e||!e.length)return!1;const r=Ri(t);return r?$n(r,e):!1}i(wE,"_isDeniedUrl");function vE(t,e){if(!e||!e.length)return!0;const r=Ri(t);return r?$n(r,e):!0}i(vE,"_isAllowedUrl");function AE(t){const e=[];t.message&&e.push(t.message);let r;try{r=t.exception.values[t.exception.values.length-1]}catch{}return r&&r.value&&(e.push(r.value),r.type&&e.push(`${r.type}: ${r.value}`)),e}i(AE,"_getPossibleEventMessages");function IE(t){try{return t.exception.values[0].type==="SentryError"}catch{}return!1}i(IE,"_isSentryError");function TE(t=[]){for(let e=t.length-1;e>=0;e--){const r=t[e];if(r&&r.filename!=="<anonymous>"&&r.filename!=="[native code]")return r.filename||null}return null}i(TE,"_getLastValidUrl");function Ri(t){try{let e;try{e=t.exception.values[0].stacktrace.frames}catch{}return e?TE(e):null}catch{return Ke&&Ie.error(`Cannot extract url for event ${Bn(t)}`),null}}i(Ri,"_getEventFilterUrl");function qE(t){return t.type||!t.exception||!t.exception.values||t.exception.values.length===0?!1:!t.message&&!t.exception.values.some(e=>e.stacktrace||e.type&&e.type!=="Error"||e.value)}i(qE,"_isUselessError");const xE="Dedupe",kE=i(()=>{let t;return{name:xE,processEvent(e){if(e.type)return e;try{if(OE(e,t))return Ke&&Ie.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}},"_dedupeIntegration"),CE=kE;function OE(t,e){return e?!!(RE(t,e)||LE(t,e)):!1}i(OE,"_shouldDropEvent");function RE(t,e){const r=t.message,n=e.message;return!(!r&&!n||r&&!n||!r&&n||r!==n||!Ld(t,e)||!Rd(t,e))}i(RE,"_isSameMessageEvent");function LE(t,e){const r=eu(e),n=eu(t);return!(!r||!n||r.type!==n.type||r.value!==n.value||!Ld(t,e)||!Rd(t,e))}i(LE,"_isSameExceptionEvent");function Rd(t,e){let r=Il(t),n=Il(e);if(!r&&!n)return!0;if(r&&!n||!r&&n||(r=r,n=n,n.length!==r.length))return!1;for(let s=0;s<n.length;s++){const o=n[s],a=r[s];if(o.filename!==a.filename||o.lineno!==a.lineno||o.colno!==a.colno||o.function!==a.function)return!1}return!0}i(Rd,"_isSameStacktrace");function Ld(t,e){let r=t.fingerprint,n=e.fingerprint;if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;r=r,n=n;try{return r.join("")===n.join("")}catch{return!1}}i(Ld,"_isSameFingerprint");function eu(t){return t.exception&&t.exception.values&&t.exception.values[0]}i(eu,"_getExceptionFromEvent");function FE(t,e,r,n,s="auto.http.browser"){if(!t.fetchData)return;const o=Rn()&&e(t.fetchData.url);if(t.endTimestamp&&o){const q=t.fetchData.__span;if(!q)return;const R=n[q];R&&(DE(R,t),delete n[q]);return}const a=dt(),l=et(),{method:f,url:_}=t.fetchData,b=PE(_),m=b?ar(b).host:void 0,w=!!kt(),x=o&&w?Zn({name:`${f} ${_}`,attributes:{url:_,type:"fetch","http.method":f,"http.url":b,"server.address":m,[Tt]:s,[fr]:"http.client"}}):new Jr;if(t.fetchData.__span=x.spanContext().spanId,n[x.spanContext().spanId]=x,r(t.fetchData.url)&&l){const q=t.args[0];t.args[1]=t.args[1]||{};const R=t.args[1];R.headers=NE(q,l,a,R,Rn()&&w?x:void 0)}return x}i(FE,"instrumentFetchRequest");function NE(t,e,r,n,s){const o=Qt(),{traceId:a,spanId:l,sampled:f,dsc:_}={...o.getPropagationContext(),...r.getPropagationContext()},b=s?hd(s):Ya(a,l,f),m=id(_||(s?Yn(s):oo(a,e))),w=n.headers||(typeof Request<"u"&&xn(t,Request)?t.headers:void 0);if(w)if(typeof Headers<"u"&&xn(w,Headers)){const x=new Headers(w);if(x.set("sentry-trace",b),m){const q=x.get(vr);if(q){const R=Vs(q);x.set(vr,R?`${R},${m}`:m)}else x.set(vr,m)}return x}else if(Array.isArray(w)){const x=[...w.filter(q=>!(Array.isArray(q)&&q[0]==="sentry-trace")).map(q=>{if(Array.isArray(q)&&q[0]===vr&&typeof q[1]=="string"){const[R,U,...j]=q;return[R,Vs(U),...j]}else return q}),["sentry-trace",b]];return m&&x.push([vr,m]),x}else{const x="baggage"in w?w.baggage:void 0;let q=[];return Array.isArray(x)?q=x.map(R=>typeof R=="string"?Vs(R):R).filter(R=>R===""):x&&q.push(Vs(x)),m&&q.push(m),{...w,"sentry-trace":b,baggage:q.length>0?q.join(","):void 0}}else return{"sentry-trace":b,baggage:m}}i(NE,"addTracingHeadersToFetchRequest");function PE(t){try{return new URL(t).href}catch{return}}i(PE,"getFullURL$1");function DE(t,e){if(e.response){fd(t,e.response.status);const r=e.response&&e.response.headers&&e.response.headers.get("content-length");if(r){const n=parseInt(r);n>0&&t.setAttribute("http.response_content_length",n)}}else e.error&&t.setStatus({code:It,message:"internal_error"});t.end()}i(DE,"endSpan");function Vs(t){return t.split(",").filter(e=>!e.split("=")[0].startsWith(Xa)).join(",")}i(Vs,"stripBaggageHeaderOfSentryBaggageValues");const Ge=rt;let ha=0;function Fd(){return ha>0}i(Fd,"shouldIgnoreOnError");function ME(){ha++,setTimeout(()=>{ha--})}i(ME,"ignoreNextOnError");function Mr(t,e={},r){if(typeof t!="function")return t;try{const s=t.__sentry_wrapped__;if(s)return typeof s=="function"?s:t;if(Ka(t))return t}catch{return t}const n=i(function(){const s=Array.prototype.slice.call(arguments);try{const o=s.map(a=>Mr(a,e));return t.apply(this,o)}catch(o){throw ME(),nc(a=>{a.addEventProcessor(l=>(e.mechanism&&(ia(l,void 0,void 0),hs(l,e.mechanism)),l.extra={...l.extra,arguments:s},l)),Dr(o)}),o}},"sentryWrapped");try{for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}catch{}Wf(n,t),Xt(t,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get(){return t.name}})}catch{}return n}i(Mr,"wrap");const sn=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__;function ac(t,e){const r=cc(t,e),n={type:zE(e),value:WE(e)};return r.length&&(n.stacktrace={frames:r}),n.type===void 0&&n.value===""&&(n.value="Unrecoverable error caught"),n}i(ac,"exceptionFromError");function BE(t,e,r,n){const s=et(),o=s&&s.getOptions().normalizeDepth,a=JE(e),l={__serialized__:nd(e,o)};if(a)return{exception:{values:[ac(t,a)]},extra:l};const f={exception:{values:[{type:to(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:GE(e,{isUnhandledRejection:n})}]},extra:l};if(r){const _=cc(t,r);_.length&&(f.exception.values[0].stacktrace={frames:_})}return f}i(BE,"eventFromPlainObject");function ko(t,e){return{exception:{values:[ac(t,e)]}}}i(ko,"eventFromError");function cc(t,e){const r=e.stacktrace||e.stack||"",n=jE(e),s=HE(e);try{return t(r,n,s)}catch{}return[]}i(cc,"parseStackFrames");const UE=/Minified React error #\d+;/i;function jE(t){return t&&UE.test(t.message)?1:0}i(jE,"getSkipFirstStackStringLines");function HE(t){return typeof t.framesToPop=="number"?t.framesToPop:0}i(HE,"getPopFirstTopFrames");function Nd(t){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?t instanceof WebAssembly.Exception:!1}i(Nd,"isWebAssemblyException");function zE(t){const e=t&&t.name;return!e&&Nd(t)?t.message&&Array.isArray(t.message)&&t.message.length==2?t.message[0]:"WebAssembly.Exception":e}i(zE,"extractType");function WE(t){const e=t&&t.message;return e?e.error&&typeof e.error.message=="string"?e.error.message:Nd(t)&&Array.isArray(t.message)&&t.message.length==2?t.message[1]:e:"No error message"}i(WE,"extractMessage");function $E(t,e,r,n){const s=r&&r.syntheticException||void 0,o=lc(t,e,s,n);return hs(o),o.level="error",r&&r.event_id&&(o.event_id=r.event_id),On(o)}i($E,"eventFromException");function QE(t,e,r="info",n,s){const o=n&&n.syntheticException||void 0,a=_a(t,e,o,s);return a.level=r,n&&n.event_id&&(a.event_id=n.event_id),On(a)}i(QE,"eventFromMessage");function lc(t,e,r,n,s){let o;if(Mf(e)&&e.error)return ko(t,e.error);if(gl(e)||Lg(e)){const a=e;if("stack"in e)o=ko(t,e);else{const l=a.name||(gl(a)?"DOMError":"DOMException"),f=a.message?`${l}: ${a.message}`:l;o=_a(t,f,r,n),ia(o,f)}return"code"in a&&(o.tags={...o.tags,"DOMException.code":`${a.code}`}),o}return Ga(e)?ko(t,e):Fr(e)||to(e)?(o=BE(t,e,r,s),hs(o,{synthetic:!0}),o):(o=_a(t,e,r,n),ia(o,`${e}`,void 0),hs(o,{synthetic:!0}),o)}i(lc,"eventFromUnknownInput");function _a(t,e,r,n){const s={};if(n&&r){const o=cc(t,r);o.length&&(s.exception={values:[{value:e,stacktrace:{frames:o}}]})}if(Va(e)){const{__sentry_template_string__:o,__sentry_template_values__:a}=e;return s.logentry={message:o,params:a},s}return s.message=e,s}i(_a,"eventFromString");function GE(t,{isUnhandledRejection:e}){const r=Xg(t),n=e?"promise rejection":"exception";return Mf(t)?`Event \`ErrorEvent\` captured as ${n} with message \`${t.message}\``:to(t)?`Event \`${VE(t)}\` (type=${t.type}) captured as ${n}`:`Object captured as ${n} with keys: ${r}`}i(GE,"getNonErrorObjectExceptionValue");function VE(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}i(VE,"getObjectClassName");function JE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const r=t[e];if(r instanceof Error)return r}}i(JE,"getErrorPropertyFromObject");function KE(t,{metadata:e,tunnel:r,dsn:n}){const s={event_id:t.event_id,sent_at:new Date().toISOString(),...e&&e.sdk&&{sdk:{name:e.sdk.name,version:e.sdk.version}},...!!r&&!!n&&{dsn:Ts(n)}},o=XE(t);return hr(s,[o])}i(KE,"createUserFeedbackEnvelope");function XE(t){return[{type:"user_report"},t]}i(XE,"createUserFeedbackEnvelopeItem");class YE extends eE{static{i(this,"BrowserClient")}constructor(e){const r={parentSpanIsAlwaysRootSpan:!0,...e},n=Ge.SENTRY_SDK_SOURCE||dy();Od(r,"browser",["browser"],n),super(r),r.sendClientReports&&Ge.document&&Ge.document.addEventListener("visibilitychange",()=>{Ge.document.visibilityState==="hidden"&&this._flushOutcomes()})}eventFromException(e,r){return $E(this._options.stackParser,e,r,this._options.attachStacktrace)}eventFromMessage(e,r="info",n){return QE(this._options.stackParser,e,r,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled()){sn&&Ie.warn("SDK not enabled, will not capture user feedback.");return}const r=KE(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this.sendEnvelope(r)}_prepareEvent(e,r,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,r,n)}}const $t=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ZE=i((t,e)=>t>e[1]?"poor":t>e[0]?"needs-improvement":"good","getRating"),Kr=i((t,e,r,n)=>{let s,o;return a=>{e.value>=0&&(a||n)&&(o=e.value-(s||0),(o||s===void 0)&&(s=e.value,e.delta=o,e.rating=ZE(e.value,r),t(e)))}},"bindReporter"),We=rt,eS=i(()=>`v3-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,"generateUniqueID"),ks=i(()=>We.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],"getNavigationEntry"),Cs=i(()=>{const t=ks();return t&&t.activationStart||0},"getActivationStart"),Xr=i((t,e)=>{const r=ks();let n="navigate";return r&&(We.document&&We.document.prerendering||Cs()>0?n="prerender":We.document&&We.document.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:t,value:typeof e>"u"?-1:e,rating:"good",delta:0,entries:[],id:eS(),navigationType:n}},"initMetric"),mr=i((t,e,r)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const n=new PerformanceObserver(s=>{Promise.resolve().then(()=>{e(s.getEntries())})});return n.observe(Object.assign({type:t,buffered:!0},r||{})),n}}catch{}},"observe"),Os=i(t=>{const e=i(r=>{(r.type==="pagehide"||We.document&&We.document.visibilityState==="hidden")&&t(r)},"onHiddenOrPageHide");We.document&&(addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0))},"onHidden"),uc=i(t=>{let e=!1;return r=>{e||(t(r),e=!0)}},"runOnce");let ms=-1;const tS=i(()=>{ms=We.document.visibilityState==="hidden"&&!We.document.prerendering?0:1/0},"initHiddenTime"),Li=i(t=>{We.document.visibilityState==="hidden"&&ms>-1&&(ms=t.type==="visibilitychange"?t.timeStamp:0,removeEventListener("visibilitychange",Li,!0),removeEventListener("prerenderingchange",Li,!0))},"onVisibilityUpdate"),nS=i(()=>{addEventListener("visibilitychange",Li,!0),addEventListener("prerenderingchange",Li,!0)},"addChangeListeners"),ao=i(()=>(We.document&&ms<0&&(tS(),nS()),{get firstHiddenTime(){return ms}}),"getVisibilityWatcher"),Rs=i(t=>{We.document&&We.document.prerendering?addEventListener("prerenderingchange",()=>t(),!0):t()},"whenActivated"),rS=[1800,3e3],sS=i((t,e={})=>{Rs(()=>{const r=ao(),n=Xr("FCP");let s;const a=mr("paint",i(l=>{l.forEach(f=>{f.name==="first-contentful-paint"&&(a.disconnect(),f.startTime<r.firstHiddenTime&&(n.value=Math.max(f.startTime-Cs(),0),n.entries.push(f),s(!0)))})},"handleEntries"));a&&(s=Kr(t,n,rS,e.reportAllChanges))})},"onFCP"),iS=[.1,.25],oS=i((t,e={})=>{sS(uc(()=>{const r=Xr("CLS",0);let n,s=0,o=[];const a=i(f=>{f.forEach(_=>{if(!_.hadRecentInput){const b=o[0],m=o[o.length-1];s&&b&&m&&_.startTime-m.startTime<1e3&&_.startTime-b.startTime<5e3?(s+=_.value,o.push(_)):(s=_.value,o=[_])}}),s>r.value&&(r.value=s,r.entries=o,n())},"handleEntries"),l=mr("layout-shift",a);l&&(n=Kr(t,r,iS,e.reportAllChanges),Os(()=>{a(l.takeRecords()),n(!0)}),setTimeout(n,0))}))},"onCLS"),aS=[100,300],cS=i((t,e={})=>{Rs(()=>{const r=ao(),n=Xr("FID");let s;const o=i(f=>{f.startTime<r.firstHiddenTime&&(n.value=f.processingStart-f.startTime,n.entries.push(f),s(!0))},"handleEntry"),a=i(f=>{f.forEach(o)},"handleEntries"),l=mr("first-input",a);s=Kr(t,n,aS,e.reportAllChanges),l&&Os(uc(()=>{a(l.takeRecords()),l.disconnect()}))})},"onFID");let Pd=0,Co=1/0,Js=0;const lS=i(t=>{t.forEach(e=>{e.interactionId&&(Co=Math.min(Co,e.interactionId),Js=Math.max(Js,e.interactionId),Pd=Js?(Js-Co)/7+1:0)})},"updateEstimate");let ma;const uS=i(()=>ma?Pd:performance.interactionCount||0,"getInteractionCount"),fS=i(()=>{"interactionCount"in performance||ma||(ma=mr("event",lS,{type:"event",buffered:!0,durationThreshold:0}))},"initInteractionCountPolyfill"),dS=[200,500],pS=0,Dd=i(()=>uS()-pS,"getInteractionCountForNavigation"),tu=10,vn=[],Oo={},nu=i(t=>{const e=vn[vn.length-1],r=Oo[t.interactionId];if(r||vn.length<tu||e&&t.duration>e.latency){if(r)r.entries.push(t),r.latency=Math.max(r.latency,t.duration);else{const n={id:t.interactionId,latency:t.duration,entries:[t]};Oo[n.id]=n,vn.push(n)}vn.sort((n,s)=>s.latency-n.latency),vn.splice(tu).forEach(n=>{delete Oo[n.id]})}},"processEntry"),hS=i(()=>{const t=Math.min(vn.length-1,Math.floor(Dd()/50));return vn[t]},"estimateP98LongestInteraction"),_S=i((t,e={})=>{Rs(()=>{fS();const r=Xr("INP");let n;const s=i(a=>{a.forEach(f=>{f.interactionId&&nu(f),f.entryType==="first-input"&&!vn.some(b=>b.entries.some(m=>f.duration===m.duration&&f.startTime===m.startTime))&&nu(f)});const l=hS();l&&l.latency!==r.value&&(r.value=l.latency,r.entries=l.entries,n())},"handleEntries"),o=mr("event",s,{durationThreshold:e.durationThreshold!=null?e.durationThreshold:40});n=Kr(t,r,dS,e.reportAllChanges),o&&("PerformanceEventTiming"in We&&"interactionId"in PerformanceEventTiming.prototype&&o.observe({type:"first-input",buffered:!0}),Os(()=>{s(o.takeRecords()),r.value<0&&Dd()>0&&(r.value=0,r.entries=[]),n(!0)}))})},"onINP"),mS=[2500,4e3],ru={},gS=i((t,e={})=>{Rs(()=>{const r=ao(),n=Xr("LCP");let s;const o=i(l=>{const f=l[l.length-1];f&&f.startTime<r.firstHiddenTime&&(n.value=Math.max(f.startTime-Cs(),0),n.entries=[f],s())},"handleEntries"),a=mr("largest-contentful-paint",o);if(a){s=Kr(t,n,mS,e.reportAllChanges);const l=uc(()=>{ru[n.id]||(o(a.takeRecords()),a.disconnect(),ru[n.id]=!0,s(!0))});["keydown","click"].forEach(f=>{We.document&&addEventListener(f,()=>setTimeout(l,0),!0)}),Os(l)}})},"onLCP"),yS=[800,1800],ga=i(t=>{We.document&&We.document.prerendering?Rs(()=>ga(t)):We.document&&We.document.readyState!=="complete"?addEventListener("load",()=>ga(t),!0):setTimeout(t,0)},"whenReady"),bS=i((t,e={})=>{const r=Xr("TTFB"),n=Kr(t,r,yS,e.reportAllChanges);ga(()=>{const s=ks();if(s){const o=s.responseStart;if(o<=0||o>performance.now())return;r.value=Math.max(o-Cs(),0),r.entries=[s],n(!0)}})},"onTTFB"),cs={},Fi={};let Md,Bd,Ud,jd,Hd;function fc(t,e=!1){return Ls("cls",t,SS,Md,e)}i(fc,"addClsInstrumentationHandler");function zd(t,e=!1){return Ls("lcp",t,vS,Ud,e)}i(zd,"addLcpInstrumentationHandler");function Wd(t){return Ls("fid",t,wS,Bd)}i(Wd,"addFidInstrumentationHandler");function ES(t){return Ls("ttfb",t,AS,jd)}i(ES,"addTtfbInstrumentationHandler");function $d(t){return Ls("inp",t,IS,Hd)}i($d,"addInpInstrumentationHandler");function Br(t,e){return Qd(t,e),Fi[t]||(TS(t),Fi[t]=!0),Gd(t,e)}i(Br,"addPerformanceInstrumentationHandler");function Yr(t,e){const r=cs[t];if(!(!r||!r.length))for(const n of r)try{n(e)}catch(s){$t&&Ie.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${Cn(n)}
Error:`,s)}}i(Yr,"triggerHandlers");function SS(){return oS(t=>{Yr("cls",{metric:t}),Md=t},{reportAllChanges:!0})}i(SS,"instrumentCls");function wS(){return cS(t=>{Yr("fid",{metric:t}),Bd=t})}i(wS,"instrumentFid");function vS(){return gS(t=>{Yr("lcp",{metric:t}),Ud=t},{reportAllChanges:!0})}i(vS,"instrumentLcp");function AS(){return bS(t=>{Yr("ttfb",{metric:t}),jd=t})}i(AS,"instrumentTtfb");function IS(){return _S(t=>{Yr("inp",{metric:t}),Hd=t})}i(IS,"instrumentInp");function Ls(t,e,r,n,s=!1){Qd(t,e);let o;return Fi[t]||(o=r(),Fi[t]=!0),n&&e({metric:n}),Gd(t,e,s?o:void 0)}i(Ls,"addMetricObserver");function TS(t){const e={};t==="event"&&(e.durationThreshold=0),mr(t,r=>{Yr(t,{entries:r})},e)}i(TS,"instrumentPerformanceObserver");function Qd(t,e){cs[t]=cs[t]||[],cs[t].push(e)}i(Qd,"addHandler");function Gd(t,e,r){return()=>{r&&r();const n=cs[t];if(!n)return;const s=n.indexOf(e);s!==-1&&n.splice(s,1)}}i(Gd,"getCleanupCallback");function qS(t){return"duration"in t}i(qS,"isPerformanceEventTiming");function Ro(t){return typeof t=="number"&&isFinite(t)}i(Ro,"isMeasurementValue");function dr(t,e,r,{...n}){const s=ot(t).start_timestamp;return s&&s>e&&typeof t.updateStartTime=="function"&&t.updateStartTime(e),Sd(t,()=>{const o=Zn({startTime:e,...n});return o&&o.end(r),o})}i(dr,"startAndEndSpan");function Vd(t){const e=et();if(!e)return;const{name:r,transaction:n,attributes:s,startTime:o}=t,{release:a,environment:l}=e.getOptions(),f=e.getIntegrationByName("Replay"),_=f&&f.getReplayId(),b=dt(),m=b.getUser(),w=m!==void 0?m.email||m.id||m.ip_address:void 0;let x;try{x=b.getScopeData().contexts.profile.profile_id}catch{}const q={release:a,environment:l,user:w||void 0,profile_id:x||void 0,replay_id:_||void 0,transaction:n,"user_agent.original":We.navigator&&We.navigator.userAgent,...s};return Zn({name:r,attributes:q,startTime:o,experimental:{standalone:!0}})}i(Vd,"startStandaloneWebVitalSpan");function dc(){return We&&We.addEventListener&&We.performance}i(dc,"getBrowserPerformanceAPI");function bt(t){return t/1e3}i(bt,"msToSec");function xS(){let t=0,e,r;if(!CS())return;let n=!1;function s(){n||(n=!0,r&&kS(t,e,r),o())}i(s,"_collectClsOnce");const o=fc(({metric:a})=>{const l=a.entries[a.entries.length-1];l&&(t=a.value,e=l)},!0);Os(()=>{s()}),setTimeout(()=>{const a=et(),l=Wt([a,"optionalAccess",m=>m.on,"call",m=>m("startNavigationSpan",()=>{s(),l&&l()})]),f=kt(),_=f&&xt(f),b=_&&ot(_);b&&b.op==="pageload"&&(r=_.spanContext().spanId)},0)}i(xS,"trackClsAsStandaloneSpan");function kS(t,e,r){$t&&Ie.log(`Sending CLS span (${t})`);const n=bt((Dt||0)+(Wt([e,"optionalAccess",f=>f.startTime])||0)),s=dt().getScopeData().transactionName,o=e?kn(Wt([e,"access",f=>f.sources,"access",f=>f[0],"optionalAccess",f=>f.node])):"Layout shift",a=At({[Tt]:"auto.http.browser.cls",[fr]:"ui.webvital.cls",[rc]:Wt([e,"optionalAccess",f=>f.duration])||0,"sentry.pageload.span_id":r}),l=Vd({name:o,transaction:s,attributes:a,startTime:n});Wt([l,"optionalAccess",f=>f.addEvent,"call",f=>f("cls",{[so]:"",[io]:t})]),Wt([l,"optionalAccess",f=>f.end,"call",f=>f(n)])}i(kS,"sendStandaloneClsSpan");function CS(){try{return Wt([PerformanceObserver,"access",t=>t.supportedEntryTypes,"optionalAccess",t=>t.includes,"call",t=>t("layout-shift")])}catch{return!1}}i(CS,"supportsLayoutShift");const OS=2147483647;let su=0,qt={},fn,ls;function RS({recordClsStandaloneSpans:t}){const e=dc();if(e&&Dt){e.mark&&We.performance.mark("sentry-tracing-init");const r=MS(),n=DS(),s=BS(),o=t?xS():PS();return()=>{r(),n(),s(),o&&o()}}return()=>{}}i(RS,"startTrackingWebVitals");function LS(){Br("longtask",({entries:t})=>{const e=kt();if(!e)return;const{op:r,start_timestamp:n}=ot(e);for(const s of t){const o=bt(Dt+s.startTime),a=bt(s.duration);r==="navigation"&&n&&o<n||dr(e,o,o+a,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[Tt]:"auto.ui.browser.metrics"}})}})}i(LS,"startTrackingLongTasks");function FS(){new PerformanceObserver(e=>{if(kt())for(const r of e.getEntries()){if(!r.scripts[0])continue;const n=bt(Dt+r.startTime),s=bt(r.duration),o={[Tt]:"auto.ui.browser.metrics"},a=r.scripts[0],{invoker:l,invokerType:f,sourceURL:_,sourceFunctionName:b,sourceCharPosition:m}=a;o["browser.script.invoker"]=l,o["browser.script.invoker_type"]=f,_&&(o["code.filepath"]=_),b&&(o["code.function"]=b),m!==-1&&(o["browser.script.source_char_position"]=m);const w=Zn({name:"Main UI thread blocked",op:"ui.long-animation-frame",startTime:n,attributes:o});w&&w.end(n+s)}}).observe({type:"long-animation-frame",buffered:!0})}i(FS,"startTrackingLongAnimationFrames");function NS(){Br("event",({entries:t})=>{if(kt()){for(const e of t)if(e.name==="click"){const r=bt(Dt+e.startTime),n=bt(e.duration),s={name:kn(e.target),op:`ui.interaction.${e.name}`,startTime:r,attributes:{[Tt]:"auto.ui.browser.metrics"}},o=Hf(e.target);o&&(s.attributes["ui.component_name"]=o);const a=Zn(s);a&&a.end(r+n)}}})}i(NS,"startTrackingInteractions");function PS(){return fc(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&($t&&Ie.log(`[Measurements] Adding CLS ${t.value}`),qt.cls={value:t.value,unit:""},ls=e)},!0)}i(PS,"_trackCLS");function DS(){return zd(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&($t&&Ie.log("[Measurements] Adding LCP"),qt.lcp={value:t.value,unit:"millisecond"},fn=e)},!0)}i(DS,"_trackLCP");function MS(){return Wd(({metric:t})=>{const e=t.entries[t.entries.length-1];if(!e)return;const r=bt(Dt),n=bt(e.startTime);$t&&Ie.log("[Measurements] Adding FID"),qt.fid={value:t.value,unit:"millisecond"},qt["mark.fid"]={value:r+n,unit:"second"}})}i(MS,"_trackFID");function BS(){return ES(({metric:t})=>{t.entries[t.entries.length-1]&&($t&&Ie.log("[Measurements] Adding TTFB"),qt.ttfb={value:t.value,unit:"millisecond"})})}i(BS,"_trackTtfb");function US(t,e){const r=dc();if(!r||!We.performance.getEntries||!Dt)return;$t&&Ie.log("[Tracing] Adding & adjusting spans using Performance API");const n=bt(Dt),s=r.getEntries(),{op:o,start_timestamp:a}=ot(t);if(s.slice(su).forEach(l=>{const f=bt(l.startTime),_=bt(Math.max(0,l.duration));if(!(o==="navigation"&&a&&n+f<a))switch(l.entryType){case"navigation":{HS(t,l,n);break}case"mark":case"paint":case"measure":{jS(t,l,f,_,n);const b=ao(),m=l.startTime<b.firstHiddenTime;l.name==="first-paint"&&m&&($t&&Ie.log("[Measurements] Adding FP"),qt.fp={value:l.startTime,unit:"millisecond"}),l.name==="first-contentful-paint"&&m&&($t&&Ie.log("[Measurements] Adding FCP"),qt.fcp={value:l.startTime,unit:"millisecond"});break}case"resource":{WS(t,l,l.name,f,_,n);break}}}),su=Math.max(s.length-1,0),$S(t),o==="pageload"){GS(qt);const l=qt["mark.fid"];l&&qt.fid&&(dr(t,l.value,l.value+bt(qt.fid.value),{name:"first input delay",op:"ui.action",attributes:{[Tt]:"auto.ui.browser.metrics"}}),delete qt["mark.fid"]),(!("fcp"in qt)||!e.recordClsOnPageloadSpan)&&delete qt.cls,Object.entries(qt).forEach(([f,_])=>{mb(f,_.value,_.unit)}),t.setAttribute("performance.timeOrigin",n),t.setAttribute("performance.activationStart",Cs()),QS(t)}fn=void 0,ls=void 0,qt={}}i(US,"addPerformanceEntries");function jS(t,e,r,n,s){const o=ks(),a=bt(o?o.requestStart:0),l=s+Math.max(r,a),f=s+r,_=f+n,b={[Tt]:"auto.resource.browser.metrics"};return l!==f&&(b["sentry.browser.measure_happened_before_request"]=!0,b["sentry.browser.measure_start_time"]=l),dr(t,l,_,{name:e.name,op:e.entryType,attributes:b}),l}i(jS,"_addMeasureSpans");function HS(t,e,r){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(n=>{Ks(t,e,n,r)}),Ks(t,e,"secureConnection",r,"TLS/SSL","connectEnd"),Ks(t,e,"fetch",r,"cache","domainLookupStart"),Ks(t,e,"domainLookup",r,"DNS"),zS(t,e,r)}i(HS,"_addNavigationSpans");function Ks(t,e,r,n,s,o){const a=o?e[o]:e[`${r}End`],l=e[`${r}Start`];!l||!a||dr(t,n+bt(l),n+bt(a),{op:`browser.${s||r}`,name:e.name,attributes:{[Tt]:"auto.ui.browser.metrics"}})}i(Ks,"_addPerformanceNavigationTiming");function zS(t,e,r){const n=r+bt(e.requestStart),s=r+bt(e.responseEnd),o=r+bt(e.responseStart);e.responseEnd&&(dr(t,n,s,{op:"browser.request",name:e.name,attributes:{[Tt]:"auto.ui.browser.metrics"}}),dr(t,o,s,{op:"browser.response",name:e.name,attributes:{[Tt]:"auto.ui.browser.metrics"}}))}i(zS,"_addRequest");function WS(t,e,r,n,s,o){if(e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch")return;const a=ar(r),l={[Tt]:"auto.resource.browser.metrics"};Lo(l,e,"transferSize","http.response_transfer_size"),Lo(l,e,"encodedBodySize","http.response_content_length"),Lo(l,e,"decodedBodySize","http.decoded_response_content_length"),e.deliveryType!=null&&(l["http.response_delivery_type"]=e.deliveryType),"renderBlockingStatus"in e&&(l["resource.render_blocking_status"]=e.renderBlockingStatus),a.protocol&&(l["url.scheme"]=a.protocol.split(":").pop()),a.host&&(l["server.address"]=a.host),l["url.same_origin"]=r.includes(We.location.origin);const f=o+n,_=f+s;dr(t,f,_,{name:r.replace(We.location.origin,""),op:e.initiatorType?`resource.${e.initiatorType}`:"resource.other",attributes:l})}i(WS,"_addResourceSpans");function $S(t){const e=We.navigator;if(!e)return;const r=e.connection;r&&(r.effectiveType&&t.setAttribute("effectiveConnectionType",r.effectiveType),r.type&&t.setAttribute("connectionType",r.type),Ro(r.rtt)&&(qt["connection.rtt"]={value:r.rtt,unit:"millisecond"})),Ro(e.deviceMemory)&&t.setAttribute("deviceMemory",`${e.deviceMemory} GB`),Ro(e.hardwareConcurrency)&&t.setAttribute("hardwareConcurrency",String(e.hardwareConcurrency))}i($S,"_trackNavigator");function QS(t){fn&&($t&&Ie.log("[Measurements] Adding LCP Data"),fn.element&&t.setAttribute("lcp.element",kn(fn.element)),fn.id&&t.setAttribute("lcp.id",fn.id),fn.url&&t.setAttribute("lcp.url",fn.url.trim().slice(0,200)),t.setAttribute("lcp.size",fn.size)),ls&&ls.sources&&($t&&Ie.log("[Measurements] Adding CLS Data"),ls.sources.forEach((e,r)=>t.setAttribute(`cls.source.${r+1}`,kn(e.node))))}i(QS,"_setWebVitalAttributes");function Lo(t,e,r,n){const s=e[r];s!=null&&s<OS&&(t[n]=s)}i(Lo,"setResourceEntrySizeData");function GS(t){const e=ks();if(!e)return;const{responseStart:r,requestStart:n}=e;n<=r&&($t&&Ie.log("[Measurements] Adding TTFB Request Time"),t["ttfb.requestTime"]={value:r-n,unit:"millisecond"})}i(GS,"_addTtfbRequestTimeToMeasurements");const VS=1e3;let iu,ya,ba;function Jd(t){const e="dom";Kn(e,t),Xn(e,JS)}i(Jd,"addClickKeypressInstrumentationHandler");function JS(){if(!We.document)return;const t=Kt.bind(null,"dom"),e=ou(t,!0);We.document.addEventListener("click",e,!1),We.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(r=>{const n=We[r]&&We[r].prototype;!n||!n.hasOwnProperty||!n.hasOwnProperty("addEventListener")||(Ht(n,"addEventListener",function(s){return function(o,a,l){if(o==="click"||o=="keypress")try{const f=this,_=f.__sentry_instrumentation_handlers__=f.__sentry_instrumentation_handlers__||{},b=_[o]=_[o]||{refCount:0};if(!b.handler){const m=ou(t);b.handler=m,s.call(this,o,m,l)}b.refCount++}catch{}return s.call(this,o,a,l)}}),Ht(n,"removeEventListener",function(s){return function(o,a,l){if(o==="click"||o=="keypress")try{const f=this,_=f.__sentry_instrumentation_handlers__||{},b=_[o];b&&(b.refCount--,b.refCount<=0&&(s.call(this,o,b.handler,l),b.handler=void 0,delete _[o]),Object.keys(_).length===0&&delete f.__sentry_instrumentation_handlers__)}catch{}return s.call(this,o,a,l)}}))})}i(JS,"instrumentDOM");function KS(t){if(t.type!==ya)return!1;try{if(!t.target||t.target._sentryId!==ba)return!1}catch{}return!0}i(KS,"isSimilarToLastCapturedEvent");function XS(t,e){return t!=="keypress"?!1:!e||!e.tagName?!0:!(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable)}i(XS,"shouldSkipDOMEvent");function ou(t,e=!1){return r=>{if(!r||r._sentryCaptured)return;const n=YS(r);if(XS(r.type,n))return;Xt(r,"_sentryCaptured",!0),n&&!n._sentryId&&Xt(n,"_sentryId",gt());const s=r.type==="keypress"?"input":r.type;KS(r)||(t({event:r,name:s,global:e}),ya=r.type,ba=n?n._sentryId:void 0),clearTimeout(iu),iu=We.setTimeout(()=>{ba=void 0,ya=void 0},VS)}}i(ou,"makeDOMEventHandler");function YS(t){try{return t.target}catch{return null}}i(YS,"getEventTarget$1");let Xs;function co(t){const e="history";Kn(e,t),Xn(e,ZS)}i(co,"addHistoryInstrumentationHandler");function ZS(){if(!Uy())return;const t=We.onpopstate;We.onpopstate=function(...r){const n=We.location.href,s=Xs;if(Xs=n,Kt("history",{from:s,to:n}),t)try{return t.apply(this,r)}catch{}};function e(r){return function(...n){const s=n.length>2?n[2]:void 0;if(s){const o=Xs,a=String(s);Xs=a,Kt("history",{from:o,to:a})}return r.apply(this,n)}}i(e,"historyReplacementFunction"),Ht(We.history,"pushState",e),Ht(We.history,"replaceState",e)}i(ZS,"instrumentHistory");const pi={};function Kd(t){const e=pi[t];if(e)return e;let r=We[t];if(ra(r))return pi[t]=r.bind(We);const n=We.document;if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const o=s.contentWindow;o&&o[t]&&(r=o[t]),n.head.removeChild(s)}catch(s){$t&&Ie.warn(`Could not create sandbox iframe for ${t} check, bailing to window.${t}: `,s)}return r&&(pi[t]=r.bind(We))}i(Kd,"getNativeImplementation");function au(t){pi[t]=void 0}i(au,"clearCachedImplementation");function Ur(...t){return Kd("setTimeout")(...t)}i(Ur,"setTimeout$3");const sr="__sentry_xhr_v3__";function Xd(t){const e="xhr";Kn(e,t),Xn(e,ew)}i(Xd,"addXhrInstrumentationHandler");function ew(){if(!We.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,r,n){const s=Pt()*1e3,o=Tn(n[0])?n[0].toUpperCase():void 0,a=tw(n[1]);if(!o||!a)return e.apply(r,n);r[sr]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(r.__sentry_own_request__=!0);const l=i(()=>{const f=r[sr];if(f&&r.readyState===4){try{f.status_code=r.status}catch{}const _={endTimestamp:Pt()*1e3,startTimestamp:s,xhr:r};Kt("xhr",_)}},"onreadystatechangeHandler");return"onreadystatechange"in r&&typeof r.onreadystatechange=="function"?r.onreadystatechange=new Proxy(r.onreadystatechange,{apply(f,_,b){return l(),f.apply(_,b)}}):r.addEventListener("readystatechange",l),r.setRequestHeader=new Proxy(r.setRequestHeader,{apply(f,_,b){const[m,w]=b,x=_[sr];return x&&Tn(m)&&Tn(w)&&(x.request_headers[m.toLowerCase()]=w),f.apply(_,b)}}),e.apply(r,n)}}),t.send=new Proxy(t.send,{apply(e,r,n){const s=r[sr];if(!s)return e.apply(r,n);n[0]!==void 0&&(s.body=n[0]);const o={startTimestamp:Pt()*1e3,xhr:r};return Kt("xhr",o),e.apply(r,n)}})}i(ew,"instrumentXHR");function tw(t){if(Tn(t))return t;try{return t.toString()}catch{}}i(tw,"parseUrl");const Fo=[],hi=new Map;function nw(){if(dc()&&Dt){const e=rw();return()=>{e()}}return()=>{}}i(nw,"startTrackingINP");const cu={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function rw(){return $d(({metric:t})=>{if(t.value==null)return;const e=t.entries.find(q=>q.duration===t.value&&cu[q.name]);if(!e)return;const{interactionId:r}=e,n=cu[e.name],s=bt(Dt+e.startTime),o=bt(t.value),a=kt(),l=a?xt(a):void 0,_=(r!=null?hi.get(r):void 0)||l,b=_?ot(_).description:dt().getScopeData().transactionName,m=kn(e.target),w=At({[Tt]:"auto.http.browser.inp",[fr]:`ui.interaction.${n}`,[rc]:e.duration}),x=Vd({name:m,transaction:b,attributes:w,startTime:s});Wt([x,"optionalAccess",q=>q.addEvent,"call",q=>q("inp",{[so]:"millisecond",[io]:t.value})]),Wt([x,"optionalAccess",q=>q.end,"call",q=>q(s+o)])})}i(rw,"_trackINP");function sw(t){const e=i(({entries:r})=>{const n=kt(),s=n&&xt(n);r.forEach(o=>{if(!qS(o)||!s)return;const a=o.interactionId;if(a!=null&&!hi.has(a)){if(Fo.length>10){const l=Fo.shift();hi.delete(l)}Fo.push(a),hi.set(a,s)}})},"handleEntries");Br("event",e),Br("first-input",e)}i(sw,"registerInpInteractionListener");function iw(t,e=Kd("fetch")){let r=0,n=0;function s(o){const a=o.body.length;r+=a,n++;const l={body:o.body,method:"POST",referrerPolicy:"origin",headers:t.headers,keepalive:r<=6e4&&n<15,...t.fetchOptions};if(!e)return au("fetch"),xi("No fetch implementation available");try{return e(t.url,l).then(f=>(r-=a,n--,{statusCode:f.status,headers:{"x-sentry-rate-limits":f.headers.get("X-Sentry-Rate-Limits"),"retry-after":f.headers.get("Retry-After")}}))}catch(f){return au("fetch"),r-=a,n--,xi(f)}}return i(s,"makeRequest"),oE(t,s)}i(iw,"makeFetchTransport");const ow=30,aw=50;function Ea(t,e,r,n){const s={filename:t,function:e==="<anonymous>"?ur:e,in_app:!0};return r!==void 0&&(s.lineno=r),n!==void 0&&(s.colno=n),s}i(Ea,"createFrame");const cw=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,lw=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,uw=/\((\S*)(?::(\d+))(?::(\d+))\)/,fw=i(t=>{const e=cw.exec(t);if(e){const[,n,s,o]=e;return Ea(n,ur,+s,+o)}const r=lw.exec(t);if(r){if(r[2]&&r[2].indexOf("eval")===0){const a=uw.exec(r[2]);a&&(r[2]=a[1],r[3]=a[2],r[4]=a[3])}const[s,o]=Yd(r[1]||ur,r[2]);return Ea(o,s,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},"chromeStackParserFn"),dw=[ow,fw],pw=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,hw=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,_w=i(t=>{const e=pw.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const o=hw.exec(e[3]);o&&(e[1]=e[1]||"eval",e[3]=o[1],e[4]=o[2],e[5]="")}let n=e[3],s=e[1]||ur;return[s,n]=Yd(s,n),Ea(n,s,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},"gecko"),mw=[aw,_w],gw=[dw,mw],yw=Gf(...gw),Yd=i((t,e)=>{const r=t.indexOf("safari-extension")!==-1,n=t.indexOf("safari-web-extension")!==-1;return r||n?[t.indexOf("@")!==-1?t.split("@")[0]:ur,r?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},"extractSafariExtensionDetails"),Ys=1024,bw="Breadcrumbs",Ew=i((t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:bw,setup(r){e.console&&ty(Aw(r)),e.dom&&Jd(vw(r,e.dom)),e.xhr&&Xd(Iw(r)),e.fetch&&Kf(Tw(r)),e.history&&co(qw(r)),e.sentry&&r.on("beforeSendEvent",ww(r))}}},"_breadcrumbsIntegration"),Sw=Ew;function ww(t){return i(function(r){et()===t&&Jn({category:`sentry.${r.type==="transaction"?"transaction":"event"}`,event_id:r.event_id,level:r.level,message:Bn(r)},{event:r})},"addSentryBreadcrumb")}i(ww,"_getSentryBreadcrumbHandler");function vw(t,e){return i(function(n){if(et()!==t)return;let s,o,a=typeof e=="object"?e.serializeAttribute:void 0,l=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;l&&l>Ys&&(sn&&Ie.warn(`\`dom.maxStringLength\` cannot exceed ${Ys}, but a value of ${l} was configured. Sentry will use ${Ys} instead.`),l=Ys),typeof a=="string"&&(a=[a]);try{const _=n.event,b=xw(_)?_.target:_;s=kn(b,{keyAttrs:a,maxStringLength:l}),o=Hf(b)}catch{s="<unknown>"}if(s.length===0)return;const f={category:`ui.${n.name}`,message:s};o&&(f.data={"ui.component_name":o}),Jn(f,{event:n.event,name:n.name,global:n.global})},"_innerDomBreadcrumb")}i(vw,"_getDomBreadcrumbHandler");function Aw(t){return i(function(r){if(et()!==t)return;const n={category:"console",data:{arguments:r.args,logger:"console"},level:rd(r.level),message:yl(r.args," ")};if(r.level==="assert")if(r.args[0]===!1)n.message=`Assertion failed: ${yl(r.args.slice(1)," ")||"console.assert"}`,n.data.arguments=r.args.slice(1);else return;Jn(n,{input:r.args,level:r.level})},"_consoleBreadcrumb")}i(Aw,"_getConsoleBreadcrumbHandler");function Iw(t){return i(function(r){if(et()!==t)return;const{startTimestamp:n,endTimestamp:s}=r,o=r.xhr[sr];if(!n||!s||!o)return;const{method:a,url:l,status_code:f,body:_}=o,b={method:a,url:l,status_code:f},m={xhr:r.xhr,input:_,startTimestamp:n,endTimestamp:s},w=Uf(f);Jn({category:"xhr",data:b,type:"http",level:w},m)},"_xhrBreadcrumb")}i(Iw,"_getXhrBreadcrumbHandler");function Tw(t){return i(function(r){if(et()!==t)return;const{startTimestamp:n,endTimestamp:s}=r;if(s&&!(r.fetchData.url.match(/sentry_key/)&&r.fetchData.method==="POST"))if(r.error){const o=r.fetchData,a={data:r.error,input:r.args,startTimestamp:n,endTimestamp:s};Jn({category:"fetch",data:o,level:"error",type:"http"},a)}else{const o=r.response,a={...r.fetchData,status_code:o&&o.status},l={input:r.args,response:o,startTimestamp:n,endTimestamp:s},f=Uf(a.status_code);Jn({category:"fetch",data:a,type:"http",level:f},l)}},"_fetchBreadcrumb")}i(Tw,"_getFetchBreadcrumbHandler");function qw(t){return i(function(r){if(et()!==t)return;let n=r.from,s=r.to;const o=ar(Ge.location.href);let a=n?ar(n):void 0;const l=ar(s);(!a||!a.path)&&(a=o),o.protocol===l.protocol&&o.host===l.host&&(s=l.relative),o.protocol===a.protocol&&o.host===a.host&&(n=a.relative),Jn({category:"navigation",data:{from:n,to:s}})},"_historyBreadcrumb")}i(qw,"_getHistoryBreadcrumbHandler");function xw(t){return!!t&&!!t.target}i(xw,"_isEvent");const kw=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Cw="BrowserApiErrors",Ow=i((t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...t};return{name:Cw,setupOnce(){e.setTimeout&&Ht(Ge,"setTimeout",lu),e.setInterval&&Ht(Ge,"setInterval",lu),e.requestAnimationFrame&&Ht(Ge,"requestAnimationFrame",Lw),e.XMLHttpRequest&&"XMLHttpRequest"in Ge&&Ht(XMLHttpRequest.prototype,"send",Fw);const r=e.eventTarget;r&&(Array.isArray(r)?r:kw).forEach(Nw)}}},"_browserApiErrorsIntegration"),Rw=Ow;function lu(t){return function(...e){const r=e[0];return e[0]=Mr(r,{mechanism:{data:{function:Cn(t)},handled:!1,type:"instrument"}}),t.apply(this,e)}}i(lu,"_wrapTimeFunction");function Lw(t){return function(e){return t.apply(this,[Mr(e,{mechanism:{data:{function:"requestAnimationFrame",handler:Cn(t)},handled:!1,type:"instrument"}})])}}i(Lw,"_wrapRAF");function Fw(t){return function(...e){const r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in r&&typeof r[s]=="function"&&Ht(r,s,function(o){const a={mechanism:{data:{function:s,handler:Cn(o)},handled:!1,type:"instrument"}},l=Ka(o);return l&&(a.mechanism.data.handler=Cn(l)),Mr(o,a)})}),t.apply(this,e)}}i(Fw,"_wrapXHR");function Nw(t){const e=Ge,r=e[t]&&e[t].prototype;!r||!r.hasOwnProperty||!r.hasOwnProperty("addEventListener")||(Ht(r,"addEventListener",function(n){return function(s,o,a){try{typeof o.handleEvent=="function"&&(o.handleEvent=Mr(o.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Cn(o),target:t},handled:!1,type:"instrument"}}))}catch{}return n.apply(this,[s,Mr(o,{mechanism:{data:{function:"addEventListener",handler:Cn(o),target:t},handled:!1,type:"instrument"}}),a])}}),Ht(r,"removeEventListener",function(n){return function(s,o,a){const l=o;try{const f=l&&l.__sentry_wrapped__;f&&n.call(this,s,f,a)}catch{}return n.call(this,s,l,a)}}))}i(Nw,"_wrapEventTarget");const Pw="GlobalHandlers",Dw=i((t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:Pw,setupOnce(){Error.stackTraceLimit=50},setup(r){e.onerror&&(Bw(r),uu("onerror")),e.onunhandledrejection&&(Uw(r),uu("onunhandledrejection"))}}},"_globalHandlersIntegration"),Mw=Dw;function Bw(t){Yf(e=>{const{stackParser:r,attachStacktrace:n}=Zd();if(et()!==t||Fd())return;const{msg:s,url:o,line:a,column:l,error:f}=e,_=zw(lc(r,f||s,void 0,n,!1),o,a,l);_.level="error",Id(_,{originalException:f,mechanism:{handled:!1,type:"onerror"}})})}i(Bw,"_installGlobalOnErrorHandler");function Uw(t){Zf(e=>{const{stackParser:r,attachStacktrace:n}=Zd();if(et()!==t||Fd())return;const s=jw(e),o=Ja(s)?Hw(s):lc(r,s,void 0,n,!0);o.level="error",Id(o,{originalException:s,mechanism:{handled:!1,type:"onunhandledrejection"}})})}i(Uw,"_installGlobalOnUnhandledRejectionHandler");function jw(t){if(Ja(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}i(jw,"_getUnhandledRejectionError");function Hw(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}i(Hw,"_eventFromRejectionWithPrimitive");function zw(t,e,r,n){const s=t.exception=t.exception||{},o=s.values=s.values||[],a=o[0]=o[0]||{},l=a.stacktrace=a.stacktrace||{},f=l.frames=l.frames||[],_=isNaN(parseInt(n,10))?void 0:n,b=isNaN(parseInt(r,10))?void 0:r,m=Tn(e)&&e.length>0?e:jf();return f.length===0&&f.push({colno:_,filename:m,function:ur,in_app:!0,lineno:b}),t}i(zw,"_enhanceEventWithInitialFrame");function uu(t){sn&&Ie.log(`Global Handler attached: ${t}`)}i(uu,"globalHandlerLog");function Zd(){const t=et();return t&&t.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}i(Zd,"getOptions");const Ww=()=>({name:"HttpContext",preprocessEvent(t){if(!Ge.navigator&&!Ge.location&&!Ge.document)return;const e=t.request&&t.request.url||Ge.location&&Ge.location.href,{referrer:r}=Ge.document||{},{userAgent:n}=Ge.navigator||{},s={...t.request&&t.request.headers,...r&&{Referer:r},...n&&{"User-Agent":n}},o={...t.request,...e&&{url:e},headers:s};t.request=o}}),$w="cause",Qw=5,Gw="LinkedErrors",Vw=i((t={})=>{const e=t.limit||Qw,r=t.key||$w;return{name:Gw,preprocessEvent(n,s,o){const a=o.getOptions();Mg(ac,a.stackParser,a.maxValueLength,r,e,n,s)}}},"_linkedErrorsIntegration"),ep=Vw;function Jw(t){return[gE(),pE(),Rw(),Sw(),Mw(),ep(),CE(),Ww()]}i(Jw,"getDefaultIntegrations");function Kw(t={}){const e={defaultIntegrations:Jw(),release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:Ge.SENTRY_RELEASE&&Ge.SENTRY_RELEASE.id?Ge.SENTRY_RELEASE.id:void 0,autoSessionTracking:!0,sendClientReports:!0};return t.defaultIntegrations==null&&delete t.defaultIntegrations,{...e,...t}}i(Kw,"applyDefaultOptions");function Xw(){const t=typeof Ge.window<"u"&&Ge;if(!t)return!1;const e=t.chrome?"chrome":"browser",r=t[e],n=r&&r.runtime&&r.runtime.id,s=Ge.location&&Ge.location.href||"",o=["chrome-extension:","moz-extension:","ms-browser-extension:","safari-web-extension:"],a=!!n&&Ge===Ge.top&&o.some(f=>s.startsWith(`${f}//`)),l=typeof t.nw<"u";return!!n&&!a&&!l}i(Xw,"shouldShowBrowserExtensionError");function Yw(t={}){const e=Kw(t);if(!e.skipBrowserExtensionCheck&&Xw()){Gr(()=>{console.error("[Sentry] You cannot run Sentry this way in a browser extension, check: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")});return}sn&&(Vf()||Ie.warn("No Fetch API detected. The Sentry SDK requires a Fetch API compatible environment to send events. Please add a Fetch API polyfill."));const r={...e,stackParser:Zg(e.stackParser||yw),integrations:Yb(e),transport:e.transport||iw},n=rE(YE,r);return e.autoSessionTracking&&Zw(),n}i(Yw,"init$2");function Zw(){if(typeof Ge.document>"u"){sn&&Ie.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");return}$l({ignoreDuration:!0}),Ql(),co(({from:t,to:e})=>{t!==void 0&&t!==e&&($l({ignoreDuration:!0}),Ql())})}i(Zw,"startSessionTracking");const _t=rt,pc="sentryReplaySession",ev="replay_event",hc="Unable to send Replay",tv=3e5,nv=9e5,rv=5e3,sv=5500,iv=6e4,ov=5e3,av=3,fu=15e4,Zs=5e3,cv=3e3,lv=300,_c=2e7,uv=4999,fv=15e3,du=36e5;function Sa(t,e){return t??e()}i(Sa,"_nullishCoalesce$1");function gs(t){let e,r=t[0],n=1;for(;n<t.length;){const s=t[n],o=t[n+1];if(n+=2,(s==="optionalAccess"||s==="optionalCall")&&r==null)return;s==="access"||s==="optionalAccess"?(e=r,r=o(r)):(s==="call"||s==="optionalCall")&&(r=o((...a)=>r.call(e,...a)),e=void 0)}return r}i(gs,"_optionalChain$5");var vt;(function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"})(vt||(vt={}));function dv(t){return t.nodeType===t.ELEMENT_NODE}i(dv,"isElement$1");function us(t){const e=gs([t,"optionalAccess",r=>r.host]);return gs([e,"optionalAccess",r=>r.shadowRoot])===t}i(us,"isShadowRoot");function fs(t){return Object.prototype.toString.call(t)==="[object ShadowRoot]"}i(fs,"isNativeShadowDom");function pv(t){return t.includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),t}i(pv,"fixBrowserCompatibilityIssuesInCSS");function hv(t){const{cssText:e}=t;if(e.split('"').length<3)return e;const r=["@import",`url(${JSON.stringify(t.href)})`];return t.layerName===""?r.push("layer"):t.layerName&&r.push(`layer(${t.layerName})`),t.supportsText&&r.push(`supports(${t.supportsText})`),t.media.length&&r.push(t.media.mediaText),r.join(" ")+";"}i(hv,"escapeImportStatement");function Ni(t){try{const e=t.rules||t.cssRules;return e?pv(Array.from(e,tp).join("")):null}catch{return null}}i(Ni,"stringifyStylesheet");function tp(t){let e;if(mv(t))try{e=Ni(t.styleSheet)||hv(t)}catch{}else if(gv(t)&&t.selectorText.includes(":"))return _v(t.cssText);return e||t.cssText}i(tp,"stringifyRule");function _v(t){const e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return t.replace(e,"$1\\$2")}i(_v,"fixSafariColons");function mv(t){return"styleSheet"in t}i(mv,"isCSSImportRule");function gv(t){return"selectorText"in t}i(gv,"isCSSStyleRule");class np{static{i(this,"Mirror")}constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;const r=gs([this,"access",n=>n.getMeta,"call",n=>n(e),"optionalAccess",n=>n.id]);return Sa(r,()=>-1)}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const r=this.getId(e);this.idNodeMap.delete(r),e.childNodes&&e.childNodes.forEach(n=>this.removeNodeFromMap(n))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,r){const n=r.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,r)}replace(e,r){const n=this.getNode(e);if(n){const s=this.nodeMetaMap.get(n);s&&this.nodeMetaMap.set(r,s)}this.idNodeMap.set(e,r)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function yv(){return new np}i(yv,"createMirror");function lo({maskInputOptions:t,tagName:e,type:r}){return e==="OPTION"&&(e="SELECT"),!!(t[e.toLowerCase()]||r&&t[r]||r==="password"||e==="INPUT"&&!r&&t.text)}i(lo,"shouldMaskInput");function ys({isMasked:t,element:e,value:r,maskInputFn:n}){let s=r||"";return t?(n&&(s=n(s,e)),"*".repeat(s.length)):s}i(ys,"maskInputValue");function jr(t){return t.toLowerCase()}i(jr,"toLowerCase");function wa(t){return t.toUpperCase()}i(wa,"toUpperCase");const pu="__rrweb_original__";function bv(t){const e=t.getContext("2d");if(!e)return!0;const r=50;for(let n=0;n<t.width;n+=r)for(let s=0;s<t.height;s+=r){const o=e.getImageData,a=pu in o?o[pu]:o;if(new Uint32Array(a.call(e,n,s,Math.min(r,t.width-n),Math.min(r,t.height-s)).data.buffer).some(f=>f!==0))return!1}return!0}i(bv,"is2DCanvasBlank");function mc(t){const e=t.type;return t.hasAttribute("data-rr-is-password")?"password":e?jr(e):null}i(mc,"getInputType");function Pi(t,e,r){return e==="INPUT"&&(r==="radio"||r==="checkbox")?t.getAttribute("value")||"":t.value}i(Pi,"getInputValue");function rp(t,e){let r;try{r=new URL(t,Sa(e,()=>window.location.href))}catch{return null}const n=/\.([0-9a-z]+)(?:$)/i,s=r.pathname.match(n);return Sa(gs([s,"optionalAccess",o=>o[1]]),()=>null)}i(rp,"extractFileExtension");const hu={};function sp(t){const e=hu[t];if(e)return e;const r=window.document;let n=window[t];if(r&&typeof r.createElement=="function")try{const s=r.createElement("iframe");s.hidden=!0,r.head.appendChild(s);const o=s.contentWindow;o&&o[t]&&(n=o[t]),r.head.removeChild(s)}catch{}return hu[t]=n.bind(window)}i(sp,"getImplementation$1");function va(...t){return sp("setTimeout")(...t)}i(va,"setTimeout$2");function ip(...t){return sp("clearTimeout")(...t)}i(ip,"clearTimeout$2");let Ev=1;const Sv=new RegExp("[^a-z0-9-_:]"),bs=-2;function gc(){return Ev++}i(gc,"genId");function wv(t){if(t instanceof HTMLFormElement)return"form";const e=jr(t.tagName);return Sv.test(e)?"div":e}i(wv,"getValidTagName");function vv(t){let e="";return t.indexOf("//")>-1?e=t.split("/").slice(0,3).join("/"):e=t.split("/")[0],e=e.split("?")[0],e}i(vv,"extractOrigin");let Er,_u;const Av=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,Iv=/^(?:[a-z+]+:)?\/\//i,Tv=/^www\..*/i,qv=/^(data:)([^,]*),(.*)/i;function Di(t,e){return(t||"").replace(Av,(r,n,s,o,a,l)=>{const f=s||a||l,_=n||o||"";if(!f)return r;if(Iv.test(f)||Tv.test(f))return`url(${_}${f}${_})`;if(qv.test(f))return`url(${_}${f}${_})`;if(f[0]==="/")return`url(${_}${vv(e)+f}${_})`;const b=e.split("/"),m=f.split("/");b.pop();for(const w of m)w!=="."&&(w===".."?b.pop():b.push(w));return`url(${_}${b.join("/")}${_})`})}i(Di,"absoluteToStylesheet");const xv=/^[^ \t\n\r\u000c]+/,kv=/^[, \t\n\r\u000c]+/;function Cv(t,e){if(e.trim()==="")return e;let r=0;function n(o){let a;const l=o.exec(e.substring(r));return l?(a=l[0],r+=a.length,a):""}i(n,"collectCharacters");const s=[];for(;n(kv),!(r>=e.length);){let o=n(xv);if(o.slice(-1)===",")o=Ir(t,o.substring(0,o.length-1)),s.push(o);else{let a="";o=Ir(t,o);let l=!1;for(;;){const f=e.charAt(r);if(f===""){s.push((o+a).trim());break}else if(l)f===")"&&(l=!1);else if(f===","){r+=1,s.push((o+a).trim());break}else f==="("&&(l=!0);a+=f,r+=1}}}return s.join(", ")}i(Cv,"getAbsoluteSrcsetString");const mu=new WeakMap;function Ir(t,e){return!e||e.trim()===""?e:uo(t,e)}i(Ir,"absoluteToDoc");function Ov(t){return!!(t.tagName==="svg"||t.ownerSVGElement)}i(Ov,"isSVGElement");function uo(t,e){let r=mu.get(t);if(r||(r=t.createElement("a"),mu.set(t,r)),!e)e="";else if(e.startsWith("blob:")||e.startsWith("data:"))return e;return r.setAttribute("href",e),r.href}i(uo,"getHref");function op(t,e,r,n,s,o){return n&&(r==="src"||r==="href"&&!(e==="use"&&n[0]==="#")||r==="xlink:href"&&n[0]!=="#"||r==="background"&&(e==="table"||e==="td"||e==="th")?Ir(t,n):r==="srcset"?Cv(t,n):r==="style"?Di(n,uo(t)):e==="object"&&r==="data"?Ir(t,n):typeof o=="function"?o(r,n,s):n)}i(op,"transformAttribute");function ap(t,e,r){return(t==="video"||t==="audio")&&e==="autoplay"}i(ap,"ignoreAttribute");function Rv(t,e,r,n){try{if(n&&t.matches(n))return!1;if(typeof e=="string"){if(t.classList.contains(e))return!0}else for(let s=t.classList.length;s--;){const o=t.classList[s];if(e.test(o))return!0}if(r)return t.matches(r)}catch{}return!1}i(Rv,"_isBlockedElement");function Lv(t,e){for(let r=t.classList.length;r--;){const n=t.classList[r];if(e.test(n))return!0}return!1}i(Lv,"elementClassMatchesRegex");function ir(t,e,r=1/0,n=0){return!t||t.nodeType!==t.ELEMENT_NODE||n>r?-1:e(t)?n:ir(t.parentNode,e,r,n+1)}i(ir,"distanceToMatch");function Tr(t,e){return r=>{const n=r;if(n===null)return!1;try{if(t){if(typeof t=="string"){if(n.matches(`.${t}`))return!0}else if(Lv(n,t))return!0}return!!(e&&n.matches(e))}catch{return!1}}}i(Tr,"createMatchPredicate");function Hr(t,e,r,n,s,o){try{const a=t.nodeType===t.ELEMENT_NODE?t:t.parentElement;if(a===null)return!1;if(a.tagName==="INPUT"){const _=a.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(_))return!0}let l=-1,f=-1;if(o){if(f=ir(a,Tr(n,s)),f<0)return!0;l=ir(a,Tr(e,r),f>=0?f:1/0)}else{if(l=ir(a,Tr(e,r)),l<0)return!1;f=ir(a,Tr(n,s),l>=0?l:1/0)}return l>=0?f>=0?l<=f:!0:f>=0?!1:!!o}catch{}return!!o}i(Hr,"needMaskingText");function Fv(t,e,r){const n=t.contentWindow;if(!n)return;let s=!1,o;try{o=n.document.readyState}catch{return}if(o!=="complete"){const l=va(()=>{s||(e(),s=!0)},r);t.addEventListener("load",()=>{ip(l),s=!0,e()});return}const a="about:blank";if(n.location.href!==a||t.src===a||t.src==="")return va(e,0),t.addEventListener("load",e);t.addEventListener("load",e)}i(Fv,"onceIframeLoaded");function Nv(t,e,r){let n=!1,s;try{s=t.sheet}catch{return}if(s)return;const o=va(()=>{n||(e(),n=!0)},r);t.addEventListener("load",()=>{ip(o),n=!0,e()})}i(Nv,"onceStylesheetLoaded");function Pv(t,e){const{doc:r,mirror:n,blockClass:s,blockSelector:o,unblockSelector:a,maskAllText:l,maskAttributeFn:f,maskTextClass:_,unmaskTextClass:b,maskTextSelector:m,unmaskTextSelector:w,inlineStylesheet:x,maskInputOptions:q={},maskTextFn:R,maskInputFn:U,dataURLOptions:j={},inlineImages:ae,recordCanvas:fe,keepIframeSrcFn:ge,newlyAddedElement:Se=!1}=e,te=Dv(r,n);switch(t.nodeType){case t.DOCUMENT_NODE:return t.compatMode!=="CSS1Compat"?{type:vt.Document,childNodes:[],compatMode:t.compatMode}:{type:vt.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:vt.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId,rootId:te};case t.ELEMENT_NODE:return Bv(t,{doc:r,blockClass:s,blockSelector:o,unblockSelector:a,inlineStylesheet:x,maskAttributeFn:f,maskInputOptions:q,maskInputFn:U,dataURLOptions:j,inlineImages:ae,recordCanvas:fe,keepIframeSrcFn:ge,newlyAddedElement:Se,rootId:te,maskAllText:l,maskTextClass:_,unmaskTextClass:b,maskTextSelector:m,unmaskTextSelector:w});case t.TEXT_NODE:return Mv(t,{doc:r,maskAllText:l,maskTextClass:_,unmaskTextClass:b,maskTextSelector:m,unmaskTextSelector:w,maskTextFn:R,maskInputOptions:q,maskInputFn:U,rootId:te});case t.CDATA_SECTION_NODE:return{type:vt.CDATA,textContent:"",rootId:te};case t.COMMENT_NODE:return{type:vt.Comment,textContent:t.textContent||"",rootId:te};default:return!1}}i(Pv,"serializeNode");function Dv(t,e){if(!e.hasNode(t))return;const r=e.getId(t);return r===1?void 0:r}i(Dv,"getRootId");function Mv(t,e){const{maskAllText:r,maskTextClass:n,unmaskTextClass:s,maskTextSelector:o,unmaskTextSelector:a,maskTextFn:l,maskInputOptions:f,maskInputFn:_,rootId:b}=e,m=t.parentNode&&t.parentNode.tagName;let w=t.textContent;const x=m==="STYLE"?!0:void 0,q=m==="SCRIPT"?!0:void 0,R=m==="TEXTAREA"?!0:void 0;if(x&&w){try{t.nextSibling||t.previousSibling||gs([t,"access",j=>j.parentNode,"access",j=>j.sheet,"optionalAccess",j=>j.cssRules])&&(w=Ni(t.parentNode.sheet))}catch(j){`${j}`}w=Di(w,uo(e.doc))}q&&(w="SCRIPT_PLACEHOLDER");const U=Hr(t,n,o,s,a,r);if(!x&&!q&&!R&&w&&U&&(w=l?l(w,t.parentElement):w.replace(/[\S]/g,"*")),R&&w&&(f.textarea||U)&&(w=_?_(w,t.parentNode):w.replace(/[\S]/g,"*")),m==="OPTION"&&w){const j=lo({type:null,tagName:m,maskInputOptions:f});w=ys({isMasked:Hr(t,n,o,s,a,j),element:t,value:w,maskInputFn:_})}return{type:vt.Text,textContent:w||"",isStyle:x,rootId:b}}i(Mv,"serializeTextNode");function Bv(t,e){const{doc:r,blockClass:n,blockSelector:s,unblockSelector:o,inlineStylesheet:a,maskInputOptions:l={},maskAttributeFn:f,maskInputFn:_,dataURLOptions:b={},inlineImages:m,recordCanvas:w,keepIframeSrcFn:x,newlyAddedElement:q=!1,rootId:R,maskAllText:U,maskTextClass:j,unmaskTextClass:ae,maskTextSelector:fe,unmaskTextSelector:ge}=e,Se=Rv(t,n,s,o),te=wv(t);let ne={};const M=t.attributes.length;for(let P=0;P<M;P++){const X=t.attributes[P];X.name&&!ap(te,X.name,X.value)&&(ne[X.name]=op(r,te,jr(X.name),X.value,t,f))}if(te==="link"&&a){const P=Array.from(r.styleSheets).find(ce=>ce.href===t.href);let X=null;P&&(X=Ni(P)),X&&(delete ne.rel,delete ne.href,ne._cssText=Di(X,P.href))}if(te==="style"&&t.sheet&&!(t.innerText||t.textContent||"").trim().length){const P=Ni(t.sheet);P&&(ne._cssText=Di(P,uo(r)))}if(te==="input"||te==="textarea"||te==="select"||te==="option"){const P=t,X=mc(P),ce=Pi(P,wa(te),X),Ae=P.checked;if(X!=="submit"&&X!=="button"&&ce){const we=Hr(P,j,fe,ae,ge,lo({type:X,tagName:wa(te),maskInputOptions:l}));ne.value=ys({isMasked:we,element:P,value:ce,maskInputFn:_})}Ae&&(ne.checked=Ae)}if(te==="option"&&(t.selected&&!l.select?ne.selected=!0:delete ne.selected),te==="canvas"&&w){if(t.__context==="2d")bv(t)||(ne.rr_dataURL=t.toDataURL(b.type,b.quality));else if(!("__context"in t)){const P=t.toDataURL(b.type,b.quality),X=r.createElement("canvas");X.width=t.width,X.height=t.height;const ce=X.toDataURL(b.type,b.quality);P!==ce&&(ne.rr_dataURL=P)}}if(te==="img"&&m){Er||(Er=r.createElement("canvas"),_u=Er.getContext("2d"));const P=t,X=P.currentSrc||P.getAttribute("src")||"<unknown-src>",ce=P.crossOrigin,Ae=i(()=>{P.removeEventListener("load",Ae);try{Er.width=P.naturalWidth,Er.height=P.naturalHeight,_u.drawImage(P,0,0),ne.rr_dataURL=Er.toDataURL(b.type,b.quality)}catch(we){if(P.crossOrigin!=="anonymous"){P.crossOrigin="anonymous",P.complete&&P.naturalWidth!==0?Ae():P.addEventListener("load",Ae);return}else`${X}${we}`}P.crossOrigin==="anonymous"&&(ce?ne.crossOrigin=ce:P.removeAttribute("crossorigin"))},"recordInlineImage");P.complete&&P.naturalWidth!==0?Ae():P.addEventListener("load",Ae)}if((te==="audio"||te==="video")&&(ne.rr_mediaState=t.paused?"paused":"played",ne.rr_mediaCurrentTime=t.currentTime),q||(t.scrollLeft&&(ne.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(ne.rr_scrollTop=t.scrollTop)),Se){const{width:P,height:X}=t.getBoundingClientRect();ne={class:ne.class,rr_width:`${P}px`,rr_height:`${X}px`}}te==="iframe"&&!x(ne.src)&&(!Se&&!t.contentDocument&&(ne.rr_src=ne.src),delete ne.src);let J;try{customElements.get(te)&&(J=!0)}catch{}return{type:vt.Element,tagName:te,attributes:ne,childNodes:[],isSVG:Ov(t)||void 0,needBlock:Se,rootId:R,isCustom:J}}i(Bv,"serializeElementNode");function ht(t){return t==null?"":t.toLowerCase()}i(ht,"lowerIfExists");function Uv(t,e){if(e.comment&&t.type===vt.Comment)return!0;if(t.type===vt.Element){if(e.script&&(t.tagName==="script"||t.tagName==="link"&&(t.attributes.rel==="preload"||t.attributes.rel==="modulepreload")&&t.attributes.as==="script"||t.tagName==="link"&&t.attributes.rel==="prefetch"&&typeof t.attributes.href=="string"&&rp(t.attributes.href)==="js"))return!0;if(e.headFavicon&&(t.tagName==="link"&&t.attributes.rel==="shortcut icon"||t.tagName==="meta"&&(ht(t.attributes.name).match(/^msapplication-tile(image|color)$/)||ht(t.attributes.name)==="application-name"||ht(t.attributes.rel)==="icon"||ht(t.attributes.rel)==="apple-touch-icon"||ht(t.attributes.rel)==="shortcut icon")))return!0;if(t.tagName==="meta"){if(e.headMetaDescKeywords&&ht(t.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(ht(t.attributes.property).match(/^(og|twitter|fb):/)||ht(t.attributes.name).match(/^(og|twitter):/)||ht(t.attributes.name)==="pinterest"))return!0;if(e.headMetaRobots&&(ht(t.attributes.name)==="robots"||ht(t.attributes.name)==="googlebot"||ht(t.attributes.name)==="bingbot"))return!0;if(e.headMetaHttpEquiv&&t.attributes["http-equiv"]!==void 0)return!0;if(e.headMetaAuthorship&&(ht(t.attributes.name)==="author"||ht(t.attributes.name)==="generator"||ht(t.attributes.name)==="framework"||ht(t.attributes.name)==="publisher"||ht(t.attributes.name)==="progid"||ht(t.attributes.property).match(/^article:/)||ht(t.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&(ht(t.attributes.name)==="google-site-verification"||ht(t.attributes.name)==="yandex-verification"||ht(t.attributes.name)==="csrf-token"||ht(t.attributes.name)==="p:domain_verify"||ht(t.attributes.name)==="verify-v1"||ht(t.attributes.name)==="verification"||ht(t.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}i(Uv,"slimDOMExcluded");function qr(t,e){const{doc:r,mirror:n,blockClass:s,blockSelector:o,unblockSelector:a,maskAllText:l,maskTextClass:f,unmaskTextClass:_,maskTextSelector:b,unmaskTextSelector:m,skipChild:w=!1,inlineStylesheet:x=!0,maskInputOptions:q={},maskAttributeFn:R,maskTextFn:U,maskInputFn:j,slimDOMOptions:ae,dataURLOptions:fe={},inlineImages:ge=!1,recordCanvas:Se=!1,onSerialize:te,onIframeLoad:ne,iframeLoadTimeout:M=5e3,onStylesheetLoad:J,stylesheetLoadTimeout:P=5e3,keepIframeSrcFn:X=i(()=>!1,"keepIframeSrcFn"),newlyAddedElement:ce=!1}=e;let{preserveWhiteSpace:Ae=!0}=e;const we=Pv(t,{doc:r,mirror:n,blockClass:s,blockSelector:o,maskAllText:l,unblockSelector:a,maskTextClass:f,unmaskTextClass:_,maskTextSelector:b,unmaskTextSelector:m,inlineStylesheet:x,maskInputOptions:q,maskAttributeFn:R,maskTextFn:U,maskInputFn:j,dataURLOptions:fe,inlineImages:ge,recordCanvas:Se,keepIframeSrcFn:X,newlyAddedElement:ce});if(!we)return null;let ct;n.hasNode(t)?ct=n.getId(t):Uv(we,ae)||!Ae&&we.type===vt.Text&&!we.isStyle&&!we.textContent.replace(/^\s+|\s+$/gm,"").length?ct=bs:ct=gc();const be=Object.assign(we,{id:ct});if(n.add(t,be),ct===bs)return null;te&&te(t);let Qe=!w;if(be.type===vt.Element){Qe=Qe&&!be.needBlock,delete be.needBlock;const Xe=t.shadowRoot;Xe&&fs(Xe)&&(be.isShadowHost=!0)}if((be.type===vt.Document||be.type===vt.Element)&&Qe){ae.headWhitespace&&be.type===vt.Element&&be.tagName==="head"&&(Ae=!1);const Xe={doc:r,mirror:n,blockClass:s,blockSelector:o,maskAllText:l,unblockSelector:a,maskTextClass:f,unmaskTextClass:_,maskTextSelector:b,unmaskTextSelector:m,skipChild:w,inlineStylesheet:x,maskInputOptions:q,maskAttributeFn:R,maskTextFn:U,maskInputFn:j,slimDOMOptions:ae,dataURLOptions:fe,inlineImages:ge,recordCanvas:Se,preserveWhiteSpace:Ae,onSerialize:te,onIframeLoad:ne,iframeLoadTimeout:M,onStylesheetLoad:J,stylesheetLoadTimeout:P,keepIframeSrcFn:X};for(const wt of Array.from(t.childNodes)){const nt=qr(wt,Xe);nt&&be.childNodes.push(nt)}if(dv(t)&&t.shadowRoot)for(const wt of Array.from(t.shadowRoot.childNodes)){const nt=qr(wt,Xe);nt&&(fs(t.shadowRoot)&&(nt.isShadow=!0),be.childNodes.push(nt))}}return t.parentNode&&us(t.parentNode)&&fs(t.parentNode)&&(be.isShadow=!0),be.type===vt.Element&&be.tagName==="iframe"&&Fv(t,()=>{const Xe=t.contentDocument;if(Xe&&ne){const wt=qr(Xe,{doc:Xe,mirror:n,blockClass:s,blockSelector:o,unblockSelector:a,maskAllText:l,maskTextClass:f,unmaskTextClass:_,maskTextSelector:b,unmaskTextSelector:m,skipChild:!1,inlineStylesheet:x,maskInputOptions:q,maskAttributeFn:R,maskTextFn:U,maskInputFn:j,slimDOMOptions:ae,dataURLOptions:fe,inlineImages:ge,recordCanvas:Se,preserveWhiteSpace:Ae,onSerialize:te,onIframeLoad:ne,iframeLoadTimeout:M,onStylesheetLoad:J,stylesheetLoadTimeout:P,keepIframeSrcFn:X});wt&&ne(t,wt)}},M),be.type===vt.Element&&be.tagName==="link"&&typeof be.attributes.rel=="string"&&(be.attributes.rel==="stylesheet"||be.attributes.rel==="preload"&&typeof be.attributes.href=="string"&&rp(be.attributes.href)==="css")&&Nv(t,()=>{if(J){const Xe=qr(t,{doc:r,mirror:n,blockClass:s,blockSelector:o,unblockSelector:a,maskAllText:l,maskTextClass:f,unmaskTextClass:_,maskTextSelector:b,unmaskTextSelector:m,skipChild:!1,inlineStylesheet:x,maskInputOptions:q,maskAttributeFn:R,maskTextFn:U,maskInputFn:j,slimDOMOptions:ae,dataURLOptions:fe,inlineImages:ge,recordCanvas:Se,preserveWhiteSpace:Ae,onSerialize:te,onIframeLoad:ne,iframeLoadTimeout:M,onStylesheetLoad:J,stylesheetLoadTimeout:P,keepIframeSrcFn:X});Xe&&J(t,Xe)}},P),be}i(qr,"serializeNodeWithId");function jv(t,e){const{mirror:r=new np,blockClass:n="rr-block",blockSelector:s=null,unblockSelector:o=null,maskAllText:a=!1,maskTextClass:l="rr-mask",unmaskTextClass:f=null,maskTextSelector:_=null,unmaskTextSelector:b=null,inlineStylesheet:m=!0,inlineImages:w=!1,recordCanvas:x=!1,maskAllInputs:q=!1,maskAttributeFn:R,maskTextFn:U,maskInputFn:j,slimDOM:ae=!1,dataURLOptions:fe,preserveWhiteSpace:ge,onSerialize:Se,onIframeLoad:te,iframeLoadTimeout:ne,onStylesheetLoad:M,stylesheetLoadTimeout:J,keepIframeSrcFn:P=i(()=>!1,"keepIframeSrcFn")}=e||{};return qr(t,{doc:t,mirror:r,blockClass:n,blockSelector:s,unblockSelector:o,maskAllText:a,maskTextClass:l,unmaskTextClass:f,maskTextSelector:_,unmaskTextSelector:b,skipChild:!1,inlineStylesheet:m,maskInputOptions:q===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:q===!1?{}:q,maskAttributeFn:R,maskTextFn:U,maskInputFn:j,slimDOMOptions:ae===!0||ae==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:ae==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:ae===!1?{}:ae,dataURLOptions:fe,inlineImages:w,recordCanvas:x,preserveWhiteSpace:ge,onSerialize:Se,onIframeLoad:te,iframeLoadTimeout:ne,onStylesheetLoad:M,stylesheetLoadTimeout:J,keepIframeSrcFn:P,newlyAddedElement:!1})}i(jv,"snapshot");function Un(t){let e,r=t[0],n=1;for(;n<t.length;){const s=t[n],o=t[n+1];if(n+=2,(s==="optionalAccess"||s==="optionalCall")&&r==null)return;s==="access"||s==="optionalAccess"?(e=r,r=o(r)):(s==="call"||s==="optionalCall")&&(r=o((...a)=>r.call(e,...a)),e=void 0)}return r}i(Un,"_optionalChain$4");function Nt(t,e,r=document){const n={capture:!0,passive:!0};return r.addEventListener(t,e,n),()=>r.removeEventListener(t,e,n)}i(Nt,"on");const Ar=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let gu={map:{},getId(){return console.error(Ar),-1},getNode(){return console.error(Ar),null},removeNodeFromMap(){console.error(Ar)},has(){return console.error(Ar),!1},reset(){console.error(Ar)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(gu=new Proxy(gu,{get(t,e,r){return e==="map"&&console.error(Ar),Reflect.get(t,e,r)}}));function Es(t,e,r={}){let n=null,s=0;return function(...o){const a=Date.now();!s&&r.leading===!1&&(s=a);const l=e-(a-s),f=this;l<=0||l>e?(n&&(Vv(n),n=null),s=a,t.apply(f,o)):!n&&r.trailing!==!1&&(n=fo(()=>{s=r.leading===!1?0:Date.now(),n=null,t.apply(f,o)},l))}}i(Es,"throttle$1");function cp(t,e,r,n,s=window){const o=s.Object.getOwnPropertyDescriptor(t,e);return s.Object.defineProperty(t,e,n?r:{set(a){fo(()=>{r.set.call(this,a)},0),o&&o.set&&o.set.call(this,a)}}),()=>cp(t,e,o||{},!0)}i(cp,"hookSetter");function yc(t,e,r){try{if(!(e in t))return()=>{};const n=t[e],s=r(n);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:n}})),t[e]=s,()=>{t[e]=n}}catch{return()=>{}}}i(yc,"patch");let Mi=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Mi=i(()=>new Date().getTime(),"nowTimestamp"));function lp(t){const e=t.document;return{left:e.scrollingElement?e.scrollingElement.scrollLeft:t.pageXOffset!==void 0?t.pageXOffset:Un([e,"optionalAccess",r=>r.documentElement,"access",r=>r.scrollLeft])||Un([e,"optionalAccess",r=>r.body,"optionalAccess",r=>r.parentElement,"optionalAccess",r=>r.scrollLeft])||Un([e,"optionalAccess",r=>r.body,"optionalAccess",r=>r.scrollLeft])||0,top:e.scrollingElement?e.scrollingElement.scrollTop:t.pageYOffset!==void 0?t.pageYOffset:Un([e,"optionalAccess",r=>r.documentElement,"access",r=>r.scrollTop])||Un([e,"optionalAccess",r=>r.body,"optionalAccess",r=>r.parentElement,"optionalAccess",r=>r.scrollTop])||Un([e,"optionalAccess",r=>r.body,"optionalAccess",r=>r.scrollTop])||0}}i(lp,"getWindowScroll");function up(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}i(up,"getWindowHeight");function fp(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}i(fp,"getWindowWidth");function dp(t){return t?t.nodeType===t.ELEMENT_NODE?t:t.parentElement:null}i(dp,"closestElementOfNode");function zt(t,e,r,n,s){if(!t)return!1;const o=dp(t);if(!o)return!1;const a=Tr(e,r);if(!s){const _=n&&o.matches(n);return a(o)&&!_}const l=ir(o,a);let f=-1;return l<0?!1:(n&&(f=ir(o,Tr(null,n))),l>-1&&f<0?!0:l<f)}i(zt,"isBlocked");function Hv(t,e){return e.getId(t)!==-1}i(Hv,"isSerialized");function No(t,e){return e.getId(t)===bs}i(No,"isIgnored");function pp(t,e){if(us(t))return!1;const r=e.getId(t);return e.has(r)?t.parentNode&&t.parentNode.nodeType===t.DOCUMENT_NODE?!1:t.parentNode?pp(t.parentNode,e):!0:!0}i(pp,"isAncestorRemoved");function Aa(t){return!!t.changedTouches}i(Aa,"legacy_isTouchEvent");function zv(t=window){"NodeList"in t&&!t.NodeList.prototype.forEach&&(t.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in t&&!t.DOMTokenList.prototype.forEach&&(t.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let r=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do if(this===r)return!0;while(r=r&&r.parentNode);return!1})}i(zv,"polyfill");function hp(t,e){return!!(t.nodeName==="IFRAME"&&e.getMeta(t))}i(hp,"isSerializedIframe");function _p(t,e){return!!(t.nodeName==="LINK"&&t.nodeType===t.ELEMENT_NODE&&t.getAttribute&&t.getAttribute("rel")==="stylesheet"&&e.getMeta(t))}i(_p,"isSerializedStylesheet");function Ia(t){return!!Un([t,"optionalAccess",e=>e.shadowRoot])}i(Ia,"hasShadowRoot");class Wv{static{i(this,"StyleSheetMirror")}constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return By(this.styleIDMap.get(e),()=>-1)}has(e){return this.styleIDMap.has(e)}add(e,r){if(this.has(e))return this.getId(e);let n;return r===void 0?n=this.id++:n=r,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function mp(t){let e=null;return Un([t,"access",r=>r.getRootNode,"optionalCall",r=>r(),"optionalAccess",r=>r.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&t.getRootNode().host&&(e=t.getRootNode().host),e}i(mp,"getShadowHost");function $v(t){let e=t,r;for(;r=mp(e);)e=r;return e}i($v,"getRootShadowHost");function Qv(t){const e=t.ownerDocument;if(!e)return!1;const r=$v(t);return e.contains(r)}i(Qv,"shadowHostInDom");function gp(t){const e=t.ownerDocument;return e?e.contains(t)||Qv(t):!1}i(gp,"inDom");const yu={};function bc(t){const e=yu[t];if(e)return e;const r=window.document;let n=window[t];if(r&&typeof r.createElement=="function")try{const s=r.createElement("iframe");s.hidden=!0,r.head.appendChild(s);const o=s.contentWindow;o&&o[t]&&(n=o[t]),r.head.removeChild(s)}catch{}return yu[t]=n.bind(window)}i(bc,"getImplementation");function Gv(...t){return bc("requestAnimationFrame")(...t)}i(Gv,"onRequestAnimationFrame");function fo(...t){return bc("setTimeout")(...t)}i(fo,"setTimeout$1");function Vv(...t){return bc("clearTimeout")(...t)}i(Vv,"clearTimeout$1");var Ye=(t=>(t[t.DomContentLoaded=0]="DomContentLoaded",t[t.Load=1]="Load",t[t.FullSnapshot=2]="FullSnapshot",t[t.IncrementalSnapshot=3]="IncrementalSnapshot",t[t.Meta=4]="Meta",t[t.Custom=5]="Custom",t[t.Plugin=6]="Plugin",t))(Ye||{}),$e=(t=>(t[t.Mutation=0]="Mutation",t[t.MouseMove=1]="MouseMove",t[t.MouseInteraction=2]="MouseInteraction",t[t.Scroll=3]="Scroll",t[t.ViewportResize=4]="ViewportResize",t[t.Input=5]="Input",t[t.TouchMove=6]="TouchMove",t[t.MediaInteraction=7]="MediaInteraction",t[t.StyleSheetRule=8]="StyleSheetRule",t[t.CanvasMutation=9]="CanvasMutation",t[t.Font=10]="Font",t[t.Log=11]="Log",t[t.Drag=12]="Drag",t[t.StyleDeclaration=13]="StyleDeclaration",t[t.Selection=14]="Selection",t[t.AdoptedStyleSheet=15]="AdoptedStyleSheet",t[t.CustomElement=16]="CustomElement",t))($e||{}),Lt=(t=>(t[t.MouseUp=0]="MouseUp",t[t.MouseDown=1]="MouseDown",t[t.Click=2]="Click",t[t.ContextMenu=3]="ContextMenu",t[t.DblClick=4]="DblClick",t[t.Focus=5]="Focus",t[t.Blur=6]="Blur",t[t.TouchStart=7]="TouchStart",t[t.TouchMove_Departed=8]="TouchMove_Departed",t[t.TouchEnd=9]="TouchEnd",t[t.TouchCancel=10]="TouchCancel",t))(Lt||{}),En=(t=>(t[t.Mouse=0]="Mouse",t[t.Pen=1]="Pen",t[t.Touch=2]="Touch",t))(En||{});function Jv(t){let e,r=t[0],n=1;for(;n<t.length;){const s=t[n],o=t[n+1];if(n+=2,(s==="optionalAccess"||s==="optionalCall")&&r==null)return;s==="access"||s==="optionalAccess"?(e=r,r=o(r)):(s==="call"||s==="optionalCall")&&(r=o((...a)=>r.call(e,...a)),e=void 0)}return r}i(Jv,"_optionalChain$3");function bu(t){return"__ln"in t}i(bu,"isNodeInLinkedList");class Kv{static{i(this,"DoubleLinkedList")}constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let r=this.head;for(let n=0;n<e;n++)r=Jv([r,"optionalAccess",s=>s.next])||null;return r}addNode(e){const r={value:e,previous:null,next:null};if(e.__ln=r,e.previousSibling&&bu(e.previousSibling)){const n=e.previousSibling.__ln.next;r.next=n,r.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=r,n&&(n.previous=r)}else if(e.nextSibling&&bu(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;r.previous=n,r.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=r,n&&(n.next=r)}else this.head&&(this.head.previous=r),r.next=this.head,this.head=r;r.next===null&&(this.tail=r),this.length++}removeNode(e){const r=e.__ln;this.head&&(r.previous?(r.previous.next=r.next,r.next?r.next.previous=r.previous:this.tail=r.previous):(this.head=r.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const Eu=i((t,e)=>`${t}@${e}`,"moveKey");class Xv{static{i(this,"MutationBuffer")}constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],r=new Set,n=new Kv,s=i(f=>{let _=f,b=bs;for(;b===bs;)_=_&&_.nextSibling,b=_&&this.mirror.getId(_);return b},"getNextId"),o=i(f=>{if(!f.parentNode||!gp(f))return;const _=us(f.parentNode)?this.mirror.getId(mp(f)):this.mirror.getId(f.parentNode),b=s(f);if(_===-1||b===-1)return n.addNode(f);const m=qr(f,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:w=>{hp(w,this.mirror)&&!zt(w,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(w),_p(w,this.mirror)&&this.stylesheetManager.trackLinkElement(w),Ia(f)&&this.shadowDomManager.addShadowRoot(f.shadowRoot,this.doc)},onIframeLoad:(w,x)=>{zt(w,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(w,x),w.contentWindow&&this.canvasManager.addWindow(w.contentWindow),this.shadowDomManager.observeAttachShadow(w))},onStylesheetLoad:(w,x)=>{this.stylesheetManager.attachLinkElement(w,x)}});m&&(e.push({parentId:_,nextId:b,node:m}),r.add(m.id))},"pushAdd");for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const f of this.movedSet)Su(this.removes,f,this.mirror)&&!this.movedSet.has(f.parentNode)||o(f);for(const f of this.addedSet)!wu(this.droppedSet,f)&&!Su(this.removes,f,this.mirror)||wu(this.movedSet,f)?o(f):this.droppedSet.add(f);let a=null;for(;n.length;){let f=null;if(a){const _=this.mirror.getId(a.value.parentNode),b=s(a.value);_!==-1&&b!==-1&&(f=a)}if(!f){let _=n.tail;for(;_;){const b=_;if(_=_.previous,b){const m=this.mirror.getId(b.value.parentNode);if(s(b.value)===-1)continue;if(m!==-1){f=b;break}else{const x=b.value;if(x.parentNode&&x.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const q=x.parentNode.host;if(this.mirror.getId(q)!==-1){f=b;break}}}}}}if(!f){for(;n.head;)n.removeNode(n.head.value);break}a=f.previous,n.removeNode(f.value),o(f.value)}const l={texts:this.texts.map(f=>({id:this.mirror.getId(f.node),value:f.value})).filter(f=>!r.has(f.id)).filter(f=>this.mirror.has(f.id)),attributes:this.attributes.map(f=>{const{attributes:_}=f;if(typeof _.style=="string"){const b=JSON.stringify(f.styleDiff),m=JSON.stringify(f._unchangedStyles);b.length<_.style.length&&(b+m).split("var(").length===_.style.split("var(").length&&(_.style=f.styleDiff)}return{id:this.mirror.getId(f.node),attributes:_}}).filter(f=>!r.has(f.id)).filter(f=>this.mirror.has(f.id)),removes:this.removes,adds:e};!l.texts.length&&!l.attributes.length&&!l.removes.length&&!l.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(l))},this.processMutation=e=>{if(!No(e.target,this.mirror))switch(e.type){case"characterData":{const r=e.target.textContent;!zt(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&r!==e.oldValue&&this.texts.push({value:Hr(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&r?this.maskTextFn?this.maskTextFn(r,dp(e.target)):r.replace(/[\S]/g,"*"):r,node:e.target});break}case"attributes":{const r=e.target;let n=e.attributeName,s=e.target.getAttribute(n);if(n==="value"){const a=mc(r),l=r.tagName;s=Pi(r,l,a);const f=lo({maskInputOptions:this.maskInputOptions,tagName:l,type:a}),_=Hr(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,f);s=ys({isMasked:_,element:r,value:s,maskInputFn:this.maskInputFn})}if(zt(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||s===e.oldValue)return;let o=this.attributeMap.get(e.target);if(r.tagName==="IFRAME"&&n==="src"&&!this.keepIframeSrcFn(s))if(!r.contentDocument)n="rr_src";else return;if(o||(o={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(e.target,o)),n==="type"&&r.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&r.setAttribute("data-rr-is-password","true"),!ap(r.tagName,n)&&(o.attributes[n]=op(this.doc,jr(r.tagName),jr(n),s,r,this.maskAttributeFn),n==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const a=this.unattachedDoc.createElement("span");e.oldValue&&a.setAttribute("style",e.oldValue);for(const l of Array.from(r.style)){const f=r.style.getPropertyValue(l),_=r.style.getPropertyPriority(l);f!==a.style.getPropertyValue(l)||_!==a.style.getPropertyPriority(l)?_===""?o.styleDiff[l]=f:o.styleDiff[l]=[f,_]:o._unchangedStyles[l]=[f,_]}for(const l of Array.from(a.style))r.style.getPropertyValue(l)===""&&(o.styleDiff[l]=!1)}break}case"childList":{if(zt(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach(r=>this.genAdds(r,e.target)),e.removedNodes.forEach(r=>{const n=this.mirror.getId(r),s=us(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);zt(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||No(r,this.mirror)||!Hv(r,this.mirror)||(this.addedSet.has(r)?(Ta(this.addedSet,r),this.droppedSet.add(r)):this.addedSet.has(e.target)&&n===-1||pp(e.target,this.mirror)||(this.movedSet.has(r)&&this.movedMap[Eu(n,s)]?Ta(this.movedSet,r):this.removes.push({parentId:s,id:n,isShadow:us(e.target)&&fs(e.target)?!0:void 0})),this.mapRemoves.push(r))});break}}},this.genAdds=(e,r)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!(this.addedSet.has(e)||this.movedSet.has(e))){if(this.mirror.hasNode(e)){if(No(e,this.mirror))return;this.movedSet.add(e);let n=null;r&&this.mirror.hasNode(r)&&(n=this.mirror.getId(r)),n&&n!==-1&&(this.movedMap[Eu(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);zt(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach(n=>this.genAdds(n)),Ia(e)&&e.shadowRoot.childNodes.forEach(n=>{this.processedNodeManager.add(n,this),this.genAdds(n,e)}))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(r=>{this[r]=e[r]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Ta(t,e){t.delete(e),e.childNodes.forEach(r=>Ta(t,r))}i(Ta,"deepDelete");function Su(t,e,r){return t.length===0?!1:Yv(t,e,r)}i(Su,"isParentRemoved");function Yv(t,e,r){let n=e.parentNode;for(;n;){const s=r.getId(n);if(t.some(o=>o.id===s))return!0;n=n.parentNode}return!1}i(Yv,"_isParentRemoved");function wu(t,e){return t.size===0?!1:yp(t,e)}i(wu,"isAncestorInSet");function yp(t,e){const{parentNode:r}=e;return r?t.has(r)?!0:yp(t,r):!1}i(yp,"_isAncestorInSet");let ds;function Zv(t){ds=t}i(Zv,"registerErrorHandler");function eA(){ds=void 0}i(eA,"unregisterErrorHandler");const it=i(t=>ds?i((...r)=>{try{return t(...r)}catch(n){if(ds&&ds(n)===!0)return()=>{};throw n}},"rrwebWrapped"):t,"callbackWrapper");function rn(t){let e,r=t[0],n=1;for(;n<t.length;){const s=t[n],o=t[n+1];if(n+=2,(s==="optionalAccess"||s==="optionalCall")&&r==null)return;s==="access"||s==="optionalAccess"?(e=r,r=o(r)):(s==="call"||s==="optionalCall")&&(r=o((...a)=>r.call(e,...a)),e=void 0)}return r}i(rn,"_optionalChain$2");const xr=[];function Fs(t){try{if("composedPath"in t){const e=t.composedPath();if(e.length)return e[0]}else if("path"in t&&t.path.length)return t.path[0]}catch{}return t&&t.target}i(Fs,"getEventTarget");function bp(t,e){const r=new Xv;xr.push(r),r.init(t);let n=window.MutationObserver||window.__rrMutationObserver;const s=rn([window,"optionalAccess",a=>a.Zone,"optionalAccess",a=>a.__symbol__,"optionalCall",a=>a("MutationObserver")]);s&&window[s]&&(n=window[s]);const o=new n(it(a=>{t.onMutation&&t.onMutation(a)===!1||r.processMutations.bind(r)(a)}));return o.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),o}i(bp,"initMutationObserver");function tA({mousemoveCb:t,sampling:e,doc:r,mirror:n}){if(e.mousemove===!1)return()=>{};const s=typeof e.mousemove=="number"?e.mousemove:50,o=typeof e.mousemoveCallback=="number"?e.mousemoveCallback:500;let a=[],l;const f=Es(it(m=>{const w=Date.now()-l;t(a.map(x=>(x.timeOffset-=w,x)),m),a=[],l=null}),o),_=it(Es(it(m=>{const w=Fs(m),{clientX:x,clientY:q}=Aa(m)?m.changedTouches[0]:m;l||(l=Mi()),a.push({x,y:q,id:n.getId(w),timeOffset:Mi()-l}),f(typeof DragEvent<"u"&&m instanceof DragEvent?$e.Drag:m instanceof MouseEvent?$e.MouseMove:$e.TouchMove)}),s,{trailing:!1})),b=[Nt("mousemove",_,r),Nt("touchmove",_,r),Nt("drag",_,r)];return it(()=>{b.forEach(m=>m())})}i(tA,"initMoveObserver");function nA({mouseInteractionCb:t,doc:e,mirror:r,blockClass:n,blockSelector:s,unblockSelector:o,sampling:a}){if(a.mouseInteraction===!1)return()=>{};const l=a.mouseInteraction===!0||a.mouseInteraction===void 0?{}:a.mouseInteraction,f=[];let _=null;const b=i(m=>w=>{const x=Fs(w);if(zt(x,n,s,o,!0))return;let q=null,R=m;if("pointerType"in w){switch(w.pointerType){case"mouse":q=En.Mouse;break;case"touch":q=En.Touch;break;case"pen":q=En.Pen;break}q===En.Touch?Lt[m]===Lt.MouseDown?R="TouchStart":Lt[m]===Lt.MouseUp&&(R="TouchEnd"):En.Pen}else Aa(w)&&(q=En.Touch);q!==null?(_=q,(R.startsWith("Touch")&&q===En.Touch||R.startsWith("Mouse")&&q===En.Mouse)&&(q=null)):Lt[m]===Lt.Click&&(q=_,_=null);const U=Aa(w)?w.changedTouches[0]:w;if(!U)return;const j=r.getId(x),{clientX:ae,clientY:fe}=U;it(t)({type:Lt[R],id:j,x:ae,y:fe,...q!==null&&{pointerType:q}})},"getHandler");return Object.keys(Lt).filter(m=>Number.isNaN(Number(m))&&!m.endsWith("_Departed")&&l[m]!==!1).forEach(m=>{let w=jr(m);const x=b(m);if(window.PointerEvent)switch(Lt[m]){case Lt.MouseDown:case Lt.MouseUp:w=w.replace("mouse","pointer");break;case Lt.TouchStart:case Lt.TouchEnd:return}f.push(Nt(w,x,e))}),it(()=>{f.forEach(m=>m())})}i(nA,"initMouseInteractionObserver");function Ep({scrollCb:t,doc:e,mirror:r,blockClass:n,blockSelector:s,unblockSelector:o,sampling:a}){const l=it(Es(it(f=>{const _=Fs(f);if(!_||zt(_,n,s,o,!0))return;const b=r.getId(_);if(_===e&&e.defaultView){const m=lp(e.defaultView);t({id:b,x:m.left,y:m.top})}else t({id:b,x:_.scrollLeft,y:_.scrollTop})}),a.scroll||100));return Nt("scroll",l,e)}i(Ep,"initScrollObserver");function rA({viewportResizeCb:t},{win:e}){let r=-1,n=-1;const s=it(Es(it(()=>{const o=up(),a=fp();(r!==o||n!==a)&&(t({width:Number(a),height:Number(o)}),r=o,n=a)}),200));return Nt("resize",s,e)}i(rA,"initViewportResizeObserver");const sA=["INPUT","TEXTAREA","SELECT"],vu=new WeakMap;function iA({inputCb:t,doc:e,mirror:r,blockClass:n,blockSelector:s,unblockSelector:o,ignoreClass:a,ignoreSelector:l,maskInputOptions:f,maskInputFn:_,sampling:b,userTriggeredOnInput:m,maskTextClass:w,unmaskTextClass:x,maskTextSelector:q,unmaskTextSelector:R}){function U(ne){let M=Fs(ne);const J=ne.isTrusted,P=M&&wa(M.tagName);if(P==="OPTION"&&(M=M.parentElement),!M||!P||sA.indexOf(P)<0||zt(M,n,s,o,!0))return;const X=M;if(X.classList.contains(a)||l&&X.matches(l))return;const ce=mc(M);let Ae=Pi(X,P,ce),we=!1;const ct=lo({maskInputOptions:f,tagName:P,type:ce}),be=Hr(M,w,q,x,R,ct);(ce==="radio"||ce==="checkbox")&&(we=M.checked),Ae=ys({isMasked:be,element:M,value:Ae,maskInputFn:_}),j(M,m?{text:Ae,isChecked:we,userTriggered:J}:{text:Ae,isChecked:we});const Qe=M.name;ce==="radio"&&Qe&&we&&e.querySelectorAll(`input[type="radio"][name="${Qe}"]`).forEach(Xe=>{if(Xe!==M){const wt=ys({isMasked:be,element:Xe,value:Pi(Xe,P,ce),maskInputFn:_});j(Xe,m?{text:wt,isChecked:!we,userTriggered:!1}:{text:wt,isChecked:!we})}})}i(U,"eventHandler");function j(ne,M){const J=vu.get(ne);if(!J||J.text!==M.text||J.isChecked!==M.isChecked){vu.set(ne,M);const P=r.getId(ne);it(t)({...M,id:P})}}i(j,"cbWithDedup");const fe=(b.input==="last"?["change"]:["input","change"]).map(ne=>Nt(ne,it(U),e)),ge=e.defaultView;if(!ge)return()=>{fe.forEach(ne=>ne())};const Se=ge.Object.getOwnPropertyDescriptor(ge.HTMLInputElement.prototype,"value"),te=[[ge.HTMLInputElement.prototype,"value"],[ge.HTMLInputElement.prototype,"checked"],[ge.HTMLSelectElement.prototype,"value"],[ge.HTMLTextAreaElement.prototype,"value"],[ge.HTMLSelectElement.prototype,"selectedIndex"],[ge.HTMLOptionElement.prototype,"selected"]];return Se&&Se.set&&fe.push(...te.map(ne=>cp(ne[0],ne[1],{set(){it(U)({target:this,isTrusted:!1})}},!1,ge))),it(()=>{fe.forEach(ne=>ne())})}i(iA,"initInputObserver");function Bi(t){const e=[];function r(n,s){if(ei("CSSGroupingRule")&&n.parentRule instanceof CSSGroupingRule||ei("CSSMediaRule")&&n.parentRule instanceof CSSMediaRule||ei("CSSSupportsRule")&&n.parentRule instanceof CSSSupportsRule||ei("CSSConditionRule")&&n.parentRule instanceof CSSConditionRule){const a=Array.from(n.parentRule.cssRules).indexOf(n);s.unshift(a)}else if(n.parentStyleSheet){const a=Array.from(n.parentStyleSheet.cssRules).indexOf(n);s.unshift(a)}return s}return i(r,"recurse"),r(t,e)}i(Bi,"getNestedCSSRulePositions");function jn(t,e,r){let n,s;return t?(t.ownerNode?n=e.getId(t.ownerNode):s=r.getId(t),{styleId:s,id:n}):{}}i(jn,"getIdAndStyleId");function oA({styleSheetRuleCb:t,mirror:e,stylesheetManager:r},{win:n}){if(!n.CSSStyleSheet||!n.CSSStyleSheet.prototype)return()=>{};const s=n.CSSStyleSheet.prototype.insertRule;n.CSSStyleSheet.prototype.insertRule=new Proxy(s,{apply:it((b,m,w)=>{const[x,q]=w,{id:R,styleId:U}=jn(m,e,r.styleMirror);return(R&&R!==-1||U&&U!==-1)&&t({id:R,styleId:U,adds:[{rule:x,index:q}]}),b.apply(m,w)})});const o=n.CSSStyleSheet.prototype.deleteRule;n.CSSStyleSheet.prototype.deleteRule=new Proxy(o,{apply:it((b,m,w)=>{const[x]=w,{id:q,styleId:R}=jn(m,e,r.styleMirror);return(q&&q!==-1||R&&R!==-1)&&t({id:q,styleId:R,removes:[{index:x}]}),b.apply(m,w)})});let a;n.CSSStyleSheet.prototype.replace&&(a=n.CSSStyleSheet.prototype.replace,n.CSSStyleSheet.prototype.replace=new Proxy(a,{apply:it((b,m,w)=>{const[x]=w,{id:q,styleId:R}=jn(m,e,r.styleMirror);return(q&&q!==-1||R&&R!==-1)&&t({id:q,styleId:R,replace:x}),b.apply(m,w)})}));let l;n.CSSStyleSheet.prototype.replaceSync&&(l=n.CSSStyleSheet.prototype.replaceSync,n.CSSStyleSheet.prototype.replaceSync=new Proxy(l,{apply:it((b,m,w)=>{const[x]=w,{id:q,styleId:R}=jn(m,e,r.styleMirror);return(q&&q!==-1||R&&R!==-1)&&t({id:q,styleId:R,replaceSync:x}),b.apply(m,w)})}));const f={};ti("CSSGroupingRule")?f.CSSGroupingRule=n.CSSGroupingRule:(ti("CSSMediaRule")&&(f.CSSMediaRule=n.CSSMediaRule),ti("CSSConditionRule")&&(f.CSSConditionRule=n.CSSConditionRule),ti("CSSSupportsRule")&&(f.CSSSupportsRule=n.CSSSupportsRule));const _={};return Object.entries(f).forEach(([b,m])=>{_[b]={insertRule:m.prototype.insertRule,deleteRule:m.prototype.deleteRule},m.prototype.insertRule=new Proxy(_[b].insertRule,{apply:it((w,x,q)=>{const[R,U]=q,{id:j,styleId:ae}=jn(x.parentStyleSheet,e,r.styleMirror);return(j&&j!==-1||ae&&ae!==-1)&&t({id:j,styleId:ae,adds:[{rule:R,index:[...Bi(x),U||0]}]}),w.apply(x,q)})}),m.prototype.deleteRule=new Proxy(_[b].deleteRule,{apply:it((w,x,q)=>{const[R]=q,{id:U,styleId:j}=jn(x.parentStyleSheet,e,r.styleMirror);return(U&&U!==-1||j&&j!==-1)&&t({id:U,styleId:j,removes:[{index:[...Bi(x),R]}]}),w.apply(x,q)})})}),it(()=>{n.CSSStyleSheet.prototype.insertRule=s,n.CSSStyleSheet.prototype.deleteRule=o,a&&(n.CSSStyleSheet.prototype.replace=a),l&&(n.CSSStyleSheet.prototype.replaceSync=l),Object.entries(f).forEach(([b,m])=>{m.prototype.insertRule=_[b].insertRule,m.prototype.deleteRule=_[b].deleteRule})})}i(oA,"initStyleSheetObserver");function Sp({mirror:t,stylesheetManager:e},r){let n=null;r.nodeName==="#document"?n=t.getId(r):n=t.getId(r.host);const s=r.nodeName==="#document"?rn([r,"access",a=>a.defaultView,"optionalAccess",a=>a.Document]):rn([r,"access",a=>a.ownerDocument,"optionalAccess",a=>a.defaultView,"optionalAccess",a=>a.ShadowRoot]),o=rn([s,"optionalAccess",a=>a.prototype])?Object.getOwnPropertyDescriptor(rn([s,"optionalAccess",a=>a.prototype]),"adoptedStyleSheets"):void 0;return n===null||n===-1||!s||!o?()=>{}:(Object.defineProperty(r,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get(){return rn([o,"access",a=>a.get,"optionalAccess",a=>a.call,"call",a=>a(this)])},set(a){const l=rn([o,"access",f=>f.set,"optionalAccess",f=>f.call,"call",f=>f(this,a)]);if(n!==null&&n!==-1)try{e.adoptStyleSheets(a,n)}catch{}return l}}),it(()=>{Object.defineProperty(r,"adoptedStyleSheets",{configurable:o.configurable,enumerable:o.enumerable,get:o.get,set:o.set})}))}i(Sp,"initAdoptedStyleSheetObserver");function aA({styleDeclarationCb:t,mirror:e,ignoreCSSAttributes:r,stylesheetManager:n},{win:s}){const o=s.CSSStyleDeclaration.prototype.setProperty;s.CSSStyleDeclaration.prototype.setProperty=new Proxy(o,{apply:it((l,f,_)=>{const[b,m,w]=_;if(r.has(b))return o.apply(f,[b,m,w]);const{id:x,styleId:q}=jn(rn([f,"access",R=>R.parentRule,"optionalAccess",R=>R.parentStyleSheet]),e,n.styleMirror);return(x&&x!==-1||q&&q!==-1)&&t({id:x,styleId:q,set:{property:b,value:m,priority:w},index:Bi(f.parentRule)}),l.apply(f,_)})});const a=s.CSSStyleDeclaration.prototype.removeProperty;return s.CSSStyleDeclaration.prototype.removeProperty=new Proxy(a,{apply:it((l,f,_)=>{const[b]=_;if(r.has(b))return a.apply(f,[b]);const{id:m,styleId:w}=jn(rn([f,"access",x=>x.parentRule,"optionalAccess",x=>x.parentStyleSheet]),e,n.styleMirror);return(m&&m!==-1||w&&w!==-1)&&t({id:m,styleId:w,remove:{property:b},index:Bi(f.parentRule)}),l.apply(f,_)})}),it(()=>{s.CSSStyleDeclaration.prototype.setProperty=o,s.CSSStyleDeclaration.prototype.removeProperty=a})}i(aA,"initStyleDeclarationObserver");function cA({mediaInteractionCb:t,blockClass:e,blockSelector:r,unblockSelector:n,mirror:s,sampling:o,doc:a}){const l=it(_=>Es(it(b=>{const m=Fs(b);if(!m||zt(m,e,r,n,!0))return;const{currentTime:w,volume:x,muted:q,playbackRate:R}=m;t({type:_,id:s.getId(m),currentTime:w,volume:x,muted:q,playbackRate:R})}),o.media||500)),f=[Nt("play",l(0),a),Nt("pause",l(1),a),Nt("seeked",l(2),a),Nt("volumechange",l(3),a),Nt("ratechange",l(4),a)];return it(()=>{f.forEach(_=>_())})}i(cA,"initMediaInteractionObserver");function lA({fontCb:t,doc:e}){const r=e.defaultView;if(!r)return()=>{};const n=[],s=new WeakMap,o=r.FontFace;r.FontFace=i(function(f,_,b){const m=new o(f,_,b);return s.set(m,{family:f,buffer:typeof _!="string",descriptors:b,fontSource:typeof _=="string"?_:JSON.stringify(Array.from(new Uint8Array(_)))}),m},"FontFace");const a=yc(e.fonts,"add",function(l){return function(f){return fo(it(()=>{const _=s.get(f);_&&(t(_),s.delete(f))}),0),l.apply(this,[f])}});return n.push(()=>{r.FontFace=o}),n.push(a),it(()=>{n.forEach(l=>l())})}i(lA,"initFontObserver");function uA(t){const{doc:e,mirror:r,blockClass:n,blockSelector:s,unblockSelector:o,selectionCb:a}=t;let l=!0;const f=it(()=>{const _=e.getSelection();if(!_||l&&rn([_,"optionalAccess",w=>w.isCollapsed]))return;l=_.isCollapsed||!1;const b=[],m=_.rangeCount||0;for(let w=0;w<m;w++){const x=_.getRangeAt(w),{startContainer:q,startOffset:R,endContainer:U,endOffset:j}=x;zt(q,n,s,o,!0)||zt(U,n,s,o,!0)||b.push({start:r.getId(q),startOffset:R,end:r.getId(U),endOffset:j})}a({ranges:b})});return f(),Nt("selectionchange",f)}i(uA,"initSelectionObserver");function fA({doc:t,customElementCb:e}){const r=t.defaultView;return!r||!r.customElements?()=>{}:yc(r.customElements,"define",function(s){return function(o,a,l){try{e({define:{name:o}})}catch{}return s.apply(this,[o,a,l])}})}i(fA,"initCustomElementObserver");function dA(t,e={}){const r=t.doc.defaultView;if(!r)return()=>{};let n;t.recordDOM&&(n=bp(t,t.doc));const s=tA(t),o=nA(t),a=Ep(t),l=rA(t,{win:r}),f=iA(t),_=cA(t);let b=i(()=>{},"styleSheetObserver"),m=i(()=>{},"adoptedStyleSheetObserver"),w=i(()=>{},"styleDeclarationObserver"),x=i(()=>{},"fontObserver");t.recordDOM&&(b=oA(t,{win:r}),m=Sp(t,t.doc),w=aA(t,{win:r}),t.collectFonts&&(x=lA(t)));const q=uA(t),R=fA(t),U=[];for(const j of t.plugins)U.push(j.observer(j.callback,r,j.options));return it(()=>{xr.forEach(j=>j.reset()),rn([n,"optionalAccess",j=>j.disconnect,"call",j=>j()]),s(),o(),a(),l(),f(),_(),b(),m(),w(),x(),q(),R(),U.forEach(j=>j())})}i(dA,"initObservers");function ei(t){return typeof window[t]<"u"}i(ei,"hasNestedCSSRule");function ti(t){return!!(typeof window[t]<"u"&&window[t].prototype&&"insertRule"in window[t].prototype&&"deleteRule"in window[t].prototype)}i(ti,"canMonkeyPatchNestedCSSRule");class qa{static{i(this,"CrossOriginIframeMirror")}constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,r,n,s){const o=n||this.getIdToRemoteIdMap(e),a=s||this.getRemoteIdToIdMap(e);let l=o.get(r);return l||(l=this.generateIdFn(),o.set(r,l),a.set(l,r)),l}getIds(e,r){const n=this.getIdToRemoteIdMap(e),s=this.getRemoteIdToIdMap(e);return r.map(o=>this.getId(e,o,n,s))}getRemoteId(e,r,n){const s=n||this.getRemoteIdToIdMap(e);if(typeof r!="number")return r;const o=s.get(r);return o||-1}getRemoteIds(e,r){const n=this.getRemoteIdToIdMap(e);return r.map(s=>this.getRemoteId(e,s,n))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let r=this.iframeIdToRemoteIdMap.get(e);return r||(r=new Map,this.iframeIdToRemoteIdMap.set(e,r)),r}getRemoteIdToIdMap(e){let r=this.iframeRemoteIdToIdMap.get(e);return r||(r=new Map,this.iframeRemoteIdToIdMap.set(e,r)),r}}function Au(t){let e,r=t[0],n=1;for(;n<t.length;){const s=t[n],o=t[n+1];if(n+=2,(s==="optionalAccess"||s==="optionalCall")&&r==null)return;s==="access"||s==="optionalAccess"?(e=r,r=o(r)):(s==="call"||s==="optionalCall")&&(r=o((...a)=>r.call(e,...a)),e=void 0)}return r}i(Au,"_optionalChain$1");class pA{static{i(this,"IframeManagerNoop")}constructor(){this.crossOriginIframeMirror=new qa(gc),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class hA{static{i(this,"IframeManager")}constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new qa(gc),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new qa(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,r){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:r}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),Au([this,"access",n=>n.loadListener,"optionalCall",n=>n(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const r=e;if(r.data.type!=="rrweb"||r.origin!==r.data.origin||!e.source)return;const s=this.crossOriginIframeMap.get(e.source);if(!s)return;const o=this.transformCrossOriginEvent(s,r.data.event);o&&this.wrappedEmit(o,r.data.isCheckout)}transformCrossOriginEvent(e,r){switch(r.type){case Ye.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(r.data.node,e);const n=r.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(r.data.node,n),{timestamp:r.timestamp,type:Ye.IncrementalSnapshot,data:{source:$e.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:r.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Ye.Meta:case Ye.Load:case Ye.DomContentLoaded:return!1;case Ye.Plugin:return r;case Ye.Custom:return this.replaceIds(r.data.payload,e,["id","parentId","previousId","nextId"]),r;case Ye.IncrementalSnapshot:switch(r.data.source){case $e.Mutation:return r.data.adds.forEach(n=>{this.replaceIds(n,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(n.node,e);const s=this.crossOriginIframeRootIdMap.get(e);s&&this.patchRootIdOnNode(n.node,s)}),r.data.removes.forEach(n=>{this.replaceIds(n,e,["parentId","id"])}),r.data.attributes.forEach(n=>{this.replaceIds(n,e,["id"])}),r.data.texts.forEach(n=>{this.replaceIds(n,e,["id"])}),r;case $e.Drag:case $e.TouchMove:case $e.MouseMove:return r.data.positions.forEach(n=>{this.replaceIds(n,e,["id"])}),r;case $e.ViewportResize:return!1;case $e.MediaInteraction:case $e.MouseInteraction:case $e.Scroll:case $e.CanvasMutation:case $e.Input:return this.replaceIds(r.data,e,["id"]),r;case $e.StyleSheetRule:case $e.StyleDeclaration:return this.replaceIds(r.data,e,["id"]),this.replaceStyleIds(r.data,e,["styleId"]),r;case $e.Font:return r;case $e.Selection:return r.data.ranges.forEach(n=>{this.replaceIds(n,e,["start","end"])}),r;case $e.AdoptedStyleSheet:return this.replaceIds(r.data,e,["id"]),this.replaceStyleIds(r.data,e,["styleIds"]),Au([r,"access",n=>n.data,"access",n=>n.styles,"optionalAccess",n=>n.forEach,"call",n=>n(s=>{this.replaceStyleIds(s,e,["styleId"])})]),r}}return!1}replace(e,r,n,s){for(const o of s)!Array.isArray(r[o])&&typeof r[o]!="number"||(Array.isArray(r[o])?r[o]=e.getIds(n,r[o]):r[o]=e.getId(n,r[o]));return r}replaceIds(e,r,n){return this.replace(this.crossOriginIframeMirror,e,r,n)}replaceStyleIds(e,r,n){return this.replace(this.crossOriginIframeStyleMirror,e,r,n)}replaceIdOnNode(e,r){this.replaceIds(e,r,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(n=>{this.replaceIdOnNode(n,r)})}patchRootIdOnNode(e,r){e.type!==vt.Document&&!e.rootId&&(e.rootId=r),"childNodes"in e&&e.childNodes.forEach(n=>{this.patchRootIdOnNode(n,r)})}}class _A{static{i(this,"ShadowDomManagerNoop")}init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class mA{static{i(this,"ShadowDomManager")}constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,r){if(!fs(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e),this.bypassOptions.canvasManager.addShadowRoot(e);const n=bp({...this.bypassOptions,doc:r,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push(()=>n.disconnect()),this.restoreHandlers.push(Ep({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),fo(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(Sp({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){!e.contentWindow||!e.contentDocument||this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,r){const n=this;this.restoreHandlers.push(yc(e.prototype,"attachShadow",function(s){return function(o){const a=s.call(this,o);return this.shadowRoot&&gp(this)&&n.addShadowRoot(this.shadowRoot,r),a}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}class Iu{static{i(this,"CanvasManagerNoop")}reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class gA{static{i(this,"StylesheetManager")}constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new Wv,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,r){"_cssText"in r.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:r.id,attributes:r.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,r){if(e.length===0)return;const n={id:r,styleIds:[]},s=[];for(const o of e){let a;this.styleMirror.has(o)?a=this.styleMirror.getId(o):(a=this.styleMirror.add(o),s.push({styleId:a,rules:Array.from(o.rules||CSSRule,(l,f)=>({rule:tp(l),index:f}))})),n.styleIds.push(a)}s.length>0&&(n.styles=s),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class yA{static{i(this,"ProcessedNodeManager")}constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(e,r){const n=this.nodeMap.get(e);return n&&Array.from(n).some(s=>s!==r)}add(e,r){this.active||(this.active=!0,Gv(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(r))}destroy(){}}let yt,Ui;try{if(Array.from([1],t=>t*2)[0]!==2){const t=document.createElement("iframe");document.body.appendChild(t),Array.from=Wt([t,"access",e=>e.contentWindow,"optionalAccess",e=>e.Array,"access",e=>e.from])||Array.from,document.body.removeChild(t)}}catch(t){}const en=yv();function qn(t={}){const{emit:e,checkoutEveryNms:r,checkoutEveryNth:n,blockClass:s="rr-block",blockSelector:o=null,unblockSelector:a=null,ignoreClass:l="rr-ignore",ignoreSelector:f=null,maskAllText:_=!1,maskTextClass:b="rr-mask",unmaskTextClass:m=null,maskTextSelector:w=null,unmaskTextSelector:x=null,inlineStylesheet:q=!0,maskAllInputs:R,maskInputOptions:U,slimDOMOptions:j,maskAttributeFn:ae,maskInputFn:fe,maskTextFn:ge,maxCanvasSize:Se=null,packFn:te,sampling:ne={},dataURLOptions:M={},mousemoveWait:J,recordDOM:P=!0,recordCanvas:X=!1,recordCrossOriginIframes:ce=!1,recordAfter:Ae=t.recordAfter==="DOMContentLoaded"?t.recordAfter:"load",userTriggeredOnInput:we=!1,collectFonts:ct=!1,inlineImages:be=!1,plugins:Qe,keepIframeSrcFn:Xe=i(()=>!1,"keepIframeSrcFn"),ignoreCSSAttributes:wt=new Set([]),errorHandler:nt,onMutation:Yt,getCanvasManager:Ct}=t;Zv(nt);const Gt=ce?window.parent===window:!0;let on=!1;if(!Gt)try{window.parent.document&&(on=!1)}catch{on=!0}if(Gt&&!e)throw new Error("emit function is required");if(!Gt&&!on)return()=>{};J!==void 0&&ne.mousemove===void 0&&(ne.mousemove=J),en.reset();const Ln=R===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:U!==void 0?U:{},Fn=j===!0||j==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:j==="all",headMetaDescKeywords:j==="all"}:j||{};zv();let an,gn=0;const Bt=i(at=>{for(const je of Qe||[])je.eventProcessor&&(at=je.eventProcessor(at));return te&&!on&&(at=te(at)),at},"eventProcessor");yt=i((at,je)=>{const De=at;if(De.timestamp=Mi(),Wt([xr,"access",ut=>ut[0],"optionalAccess",ut=>ut.isFrozen,"call",ut=>ut()])&&De.type!==Ye.FullSnapshot&&!(De.type===Ye.IncrementalSnapshot&&De.data.source===$e.Mutation)&&xr.forEach(ut=>ut.unfreeze()),Gt)Wt([e,"optionalCall",ut=>ut(Bt(De),je)]);else if(on){const ut={type:"rrweb",event:Bt(De),origin:window.location.origin,isCheckout:je};window.parent.postMessage(ut,"*")}if(De.type===Ye.FullSnapshot)an=De,gn=0;else if(De.type===Ye.IncrementalSnapshot){if(De.data.source===$e.Mutation&&De.data.isAttachIframe)return;gn++;const ut=n&&gn>=n,Le=r&&an&&De.timestamp-an.timestamp>r;(ut||Le)&&ns(!0)}},"wrappedEmit");const cn=i(at=>{yt({type:Ye.IncrementalSnapshot,data:{source:$e.Mutation,...at}})},"wrappedMutationEmit"),go=i(at=>yt({type:Ye.IncrementalSnapshot,data:{source:$e.Scroll,...at}}),"wrappedScrollEmit"),ts=i(at=>yt({type:Ye.IncrementalSnapshot,data:{source:$e.CanvasMutation,...at}}),"wrappedCanvasMutationEmit"),gr=i(at=>yt({type:Ye.IncrementalSnapshot,data:{source:$e.AdoptedStyleSheet,...at}}),"wrappedAdoptedStyleSheetEmit"),Ut=new gA({mutationCb:cn,adoptedStyleSheetCb:gr}),yn=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new pA:new hA({mirror:en,mutationCb:cn,stylesheetManager:Ut,recordCrossOriginIframes:ce,wrappedEmit:yt});for(const at of Qe||[])at.getMirror&&at.getMirror({nodeMirror:en,crossOriginIframeMirror:yn.crossOriginIframeMirror,crossOriginIframeStyleMirror:yn.crossOriginIframeStyleMirror});const yr=new yA,Ot=EA(Ct,{mirror:en,win:window,mutationCb:at=>yt({type:Ye.IncrementalSnapshot,data:{source:$e.CanvasMutation,...at}}),recordCanvas:X,blockClass:s,blockSelector:o,unblockSelector:a,maxCanvasSize:Se,sampling:ne.canvas,dataURLOptions:M,errorHandler:nt}),er=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new _A:new mA({mutationCb:cn,scrollCb:go,bypassOptions:{onMutation:Yt,blockClass:s,blockSelector:o,unblockSelector:a,maskAllText:_,maskTextClass:b,unmaskTextClass:m,maskTextSelector:w,unmaskTextSelector:x,inlineStylesheet:q,maskInputOptions:Ln,dataURLOptions:M,maskAttributeFn:ae,maskTextFn:ge,maskInputFn:fe,recordCanvas:X,inlineImages:be,sampling:ne,slimDOMOptions:Fn,iframeManager:yn,stylesheetManager:Ut,canvasManager:Ot,keepIframeSrcFn:Xe,processedNodeManager:yr},mirror:en}),ns=i((at=!1)=>{if(!P)return;yt({type:Ye.Meta,data:{href:window.location.href,width:fp(),height:up()}},at),Ut.reset(),er.init(),xr.forEach(De=>De.lock());const je=jv(document,{mirror:en,blockClass:s,blockSelector:o,unblockSelector:a,maskAllText:_,maskTextClass:b,unmaskTextClass:m,maskTextSelector:w,unmaskTextSelector:x,inlineStylesheet:q,maskAllInputs:Ln,maskAttributeFn:ae,maskInputFn:fe,maskTextFn:ge,slimDOM:Fn,dataURLOptions:M,recordCanvas:X,inlineImages:be,onSerialize:De=>{hp(De,en)&&yn.addIframe(De),_p(De,en)&&Ut.trackLinkElement(De),Ia(De)&&er.addShadowRoot(De.shadowRoot,document)},onIframeLoad:(De,ut)=>{yn.attachIframe(De,ut),De.contentWindow&&Ot.addWindow(De.contentWindow),er.observeAttachShadow(De)},onStylesheetLoad:(De,ut)=>{Ut.attachLinkElement(De,ut)},keepIframeSrcFn:Xe});if(!je)return console.warn("Failed to snapshot the document");yt({type:Ye.FullSnapshot,data:{node:je,initialOffset:lp(window)}}),xr.forEach(De=>De.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&Ut.adoptStyleSheets(document.adoptedStyleSheets,en.getId(document))},"takeFullSnapshot");Ui=ns;try{const at=[],je=i(ut=>it(dA)({onMutation:Yt,mutationCb:cn,mousemoveCb:(Le,bn)=>yt({type:Ye.IncrementalSnapshot,data:{source:bn,positions:Le}}),mouseInteractionCb:Le=>yt({type:Ye.IncrementalSnapshot,data:{source:$e.MouseInteraction,...Le}}),scrollCb:go,viewportResizeCb:Le=>yt({type:Ye.IncrementalSnapshot,data:{source:$e.ViewportResize,...Le}}),inputCb:Le=>yt({type:Ye.IncrementalSnapshot,data:{source:$e.Input,...Le}}),mediaInteractionCb:Le=>yt({type:Ye.IncrementalSnapshot,data:{source:$e.MediaInteraction,...Le}}),styleSheetRuleCb:Le=>yt({type:Ye.IncrementalSnapshot,data:{source:$e.StyleSheetRule,...Le}}),styleDeclarationCb:Le=>yt({type:Ye.IncrementalSnapshot,data:{source:$e.StyleDeclaration,...Le}}),canvasMutationCb:ts,fontCb:Le=>yt({type:Ye.IncrementalSnapshot,data:{source:$e.Font,...Le}}),selectionCb:Le=>{yt({type:Ye.IncrementalSnapshot,data:{source:$e.Selection,...Le}})},customElementCb:Le=>{yt({type:Ye.IncrementalSnapshot,data:{source:$e.CustomElement,...Le}})},blockClass:s,ignoreClass:l,ignoreSelector:f,maskAllText:_,maskTextClass:b,unmaskTextClass:m,maskTextSelector:w,unmaskTextSelector:x,maskInputOptions:Ln,inlineStylesheet:q,sampling:ne,recordDOM:P,recordCanvas:X,inlineImages:be,userTriggeredOnInput:we,collectFonts:ct,doc:ut,maskAttributeFn:ae,maskInputFn:fe,maskTextFn:ge,keepIframeSrcFn:Xe,blockSelector:o,unblockSelector:a,slimDOMOptions:Fn,dataURLOptions:M,mirror:en,iframeManager:yn,stylesheetManager:Ut,shadowDomManager:er,processedNodeManager:yr,canvasManager:Ot,ignoreCSSAttributes:wt,plugins:Wt([Qe,"optionalAccess",Le=>Le.filter,"call",Le=>Le(bn=>bn.observer),"optionalAccess",Le=>Le.map,"call",Le=>Le(bn=>({observer:bn.observer,options:bn.options,callback:Zt=>yt({type:Ye.Plugin,data:{plugin:bn.name,payload:Zt}})}))])||[]},{}),"observe");yn.addLoadListener(ut=>{try{at.push(je(ut.contentDocument))}catch(Le){}});const De=i(()=>{ns(),at.push(je(document))},"init");return document.readyState==="interactive"||document.readyState==="complete"?De():(at.push(Nt("DOMContentLoaded",()=>{yt({type:Ye.DomContentLoaded,data:{}}),Ae==="DOMContentLoaded"&&De()})),at.push(Nt("load",()=>{yt({type:Ye.Load,data:{}}),Ae==="load"&&De()},window))),()=>{at.forEach(ut=>ut()),yr.destroy(),Ui=void 0,eA()}}catch(at){}}i(qn,"record");function bA(t){if(!Ui)throw new Error("please take full snapshot after start recording");Ui(t)}i(bA,"takeFullSnapshot");qn.mirror=en;qn.takeFullSnapshot=bA;function EA(t,e){try{return t?t(e):new Iu}catch{return new Iu}}i(EA,"_getCanvasManager");const Ue=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Tu=["info","warn","error","log"],_i="[Replay] ";function Po(t,e="info"){Jn({category:"console",data:{logger:"replay"},level:e,message:`${_i}${t}`},{level:e})}i(Po,"_addBreadcrumb");function SA(){let t=!1,e=!1;const r={exception:()=>{},infoTick:()=>{},setConfig:n=>{t=n.captureExceptions,e=n.traceInternals}};return Ue?(Tu.forEach(n=>{r[n]=(...s)=>{Ie[n](_i,...s),e&&Po(s.join(""),rd(n))}}),r.exception=(n,...s)=>{s.length&&r.error&&r.error(...s),Ie.error(_i,n),t?Dr(n):e&&Po(n,"error")},r.infoTick=(...n)=>{Ie.info(_i,...n),e&&setTimeout(()=>Po(n[0]),0)}):Tu.forEach(n=>{r[n]=()=>{}}),r}i(SA,"makeReplayLogger");const He=SA(),wA=3,vA=5;function Ec(t){return t>9999999999?t:t*1e3}i(Ec,"timestampToMs");function Do(t){return t>9999999999?t/1e3:t}i(Do,"timestampToS");function Ns(t,e){e.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(e.category)?t.triggerUserActivity():t.checkAndHandleExpiredSession(),t.addUpdate(()=>(t.throttledAddEvent({type:Ye.Custom,timestamp:(e.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:dn(e,10,1e3)}}),e.category==="console")))}i(Ns,"addBreadcrumbEvent");const AA="button,a";function wp(t){return t.closest(AA)||t}i(wp,"getClosestInteractive");function vp(t){const e=Ap(t);return!e||!(e instanceof Element)?e:wp(e)}i(vp,"getClickTargetNode");function Ap(t){return IA(t)?t.target:t}i(Ap,"getTargetNode");function IA(t){return typeof t=="object"&&!!t&&"target"in t}i(IA,"isEventWithTarget");let Hn;function TA(t){return Hn||(Hn=[],qA()),Hn.push(t),()=>{const e=Hn?Hn.indexOf(t):-1;e>-1&&Hn.splice(e,1)}}i(TA,"onWindowOpen");function qA(){Ht(_t,"open",function(t){return function(...e){if(Hn)try{Hn.forEach(r=>r())}catch{}return t.apply(_t,e)}})}i(qA,"monkeyPatchWindowOpen");const xA=new Set([$e.Mutation,$e.StyleSheetRule,$e.StyleDeclaration,$e.AdoptedStyleSheet,$e.CanvasMutation,$e.Selection,$e.MediaInteraction]);function kA(t,e,r){t.handleClick(e,r)}i(kA,"handleClick");class CA{static{i(this,"ClickDetector")}constructor(e,r,n=Ns){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=r.timeout/1e3,this._threshold=r.threshold/1e3,this._scrollTimeout=r.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=r.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=TA(()=>{this._lastMutation=qu()});this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,r){if(RA(r,this._ignoreSelector)||!LA(e))return;const n={timestamp:Do(e.timestamp),clickBreadcrumb:e,clickCount:0,node:r};this._clicks.some(s=>s.node===n.node&&Math.abs(s.timestamp-n.timestamp)<1)||(this._clicks.push(n),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=Do(e)}registerScroll(e=Date.now()){this._lastScroll=Do(e)}registerClick(e){const r=wp(e);this._handleMultiClick(r)}_handleMultiClick(e){this._getClicks(e).forEach(r=>{r.clickCount++})}_getClicks(e){return this._clicks.filter(r=>r.node===e)}_checkClicks(){const e=[],r=qu();this._clicks.forEach(n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=r&&e.push(n)});for(const n of e){const s=this._clicks.indexOf(n);s>-1&&(this._generateBreadcrumbs(n),this._clicks.splice(s,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const r=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scrollTimeout,s=e.mutationAfter&&e.mutationAfter<=this._threshold,o=!n&&!s,{clickCount:a,clickBreadcrumb:l}=e;if(o){const f=Math.min(e.mutationAfter||this._timeout,this._timeout)*1e3,_=f<this._timeout*1e3?"mutation":"timeout",b={type:"default",message:l.message,timestamp:l.timestamp,category:"ui.slowClickDetected",data:{...l.data,url:_t.location.href,route:r.getCurrentRoute(),timeAfterClickMs:f,endReason:_,clickCount:a||1}};this._addBreadcrumbEvent(r,b);return}if(a>1){const f={type:"default",message:l.message,timestamp:l.timestamp,category:"ui.multiClick",data:{...l.data,url:_t.location.href,route:r.getCurrentRoute(),clickCount:a,metric:!0}};this._addBreadcrumbEvent(r,f)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=Ur(()=>this._checkClicks(),1e3)}}const OA=["A","BUTTON","INPUT"];function RA(t,e){return!!(!OA.includes(t.tagName)||t.tagName==="INPUT"&&!["submit","button"].includes(t.getAttribute("type")||"")||t.tagName==="A"&&(t.hasAttribute("download")||t.hasAttribute("target")&&t.getAttribute("target")!=="_self")||e&&t.matches(e))}i(RA,"ignoreElement");function LA(t){return!!(t.data&&typeof t.data.nodeId=="number"&&t.timestamp)}i(LA,"isClickBreadcrumb");function qu(){return Date.now()/1e3}i(qu,"nowInSeconds");function FA(t,e){try{if(!NA(e))return;const{source:r}=e.data;if(xA.has(r)&&t.registerMutation(e.timestamp),r===$e.Scroll&&t.registerScroll(e.timestamp),PA(e)){const{type:n,id:s}=e.data,o=qn.mirror.getNode(s);o instanceof HTMLElement&&n===Lt.Click&&t.registerClick(o)}}catch{}}i(FA,"updateClickDetectorForRecordingEvent");function NA(t){return t.type===wA}i(NA,"isIncrementalEvent");function PA(t){return t.data.source===$e.MouseInteraction}i(PA,"isIncrementalMouseInteraction");function _n(t){return{timestamp:Date.now()/1e3,type:"default",...t}}i(_n,"createBreadcrumb");var ji;(function(t){t[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment"})(ji||(ji={}));const DA=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function MA(t){const e={};!t["data-sentry-component"]&&t["data-sentry-element"]&&(t["data-sentry-component"]=t["data-sentry-element"]);for(const r in t)if(DA.has(r)){let n=r;(r==="data-testid"||r==="data-test-id")&&(n="testId"),e[n]=t[r]}return e}i(MA,"getAttributesToRecord");const BA=i(t=>e=>{if(!t.isEnabled())return;const r=UA(e);if(!r)return;const n=e.name==="click",s=n?e.event:void 0;n&&t.clickDetector&&s&&s.target&&!s.altKey&&!s.metaKey&&!s.ctrlKey&&!s.shiftKey&&kA(t.clickDetector,r,vp(e.event)),Ns(t,r)},"handleDomListener");function Ip(t,e){const r=qn.mirror.getId(t),n=r&&qn.mirror.getNode(r),s=n&&qn.mirror.getMeta(n),o=s&&HA(s)?s:null;return{message:e,data:o?{nodeId:r,node:{id:r,tagName:o.tagName,textContent:Array.from(o.childNodes).map(a=>a.type===ji.Text&&a.textContent).filter(Boolean).map(a=>a.trim()).join(""),attributes:MA(o.attributes)}}:{}}}i(Ip,"getBaseDomBreadcrumb");function UA(t){const{target:e,message:r}=jA(t);return _n({category:`ui.${t.name}`,...Ip(e,r)})}i(UA,"handleDom");function jA(t){const e=t.name==="click";let r,n=null;try{n=e?vp(t.event):Ap(t.event),r=kn(n,{maxStringLength:200})||"<unknown>"}catch{r="<unknown>"}return{target:n,message:r}}i(jA,"getDomTarget");function HA(t){return t.type===ji.Element}i(HA,"isElement");function zA(t,e){if(!t.isEnabled())return;t.updateUserActivity();const r=WA(e);r&&Ns(t,r)}i(zA,"handleKeyboardEvent");function WA(t){const{metaKey:e,shiftKey:r,ctrlKey:n,altKey:s,key:o,target:a}=t;if(!a||$A(a)||!o)return null;const l=e||n||s,f=o.length===1;if(!l&&f)return null;const _=kn(a,{maxStringLength:200})||"<unknown>",b=Ip(a,_);return _n({category:"ui.keyDown",message:_,data:{...b.data,metaKey:e,shiftKey:r,ctrlKey:n,altKey:s,key:o}})}i(WA,"getKeyboardBreadcrumb");function $A(t){return t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable}i($A,"isInputElement");const QA={resource:XA,paint:JA,navigation:KA};function ni(t,e){return({metric:r})=>void e.replayPerformanceEntries.push(t(r))}i(ni,"webVitalHandler");function GA(t){return t.map(VA).filter(Boolean)}i(GA,"createPerformanceEntries");function VA(t){const e=QA[t.entryType];return e?e(t):null}i(VA,"createPerformanceEntry");function zr(t){return((Dt||_t.performance.timeOrigin)+t)/1e3}i(zr,"getAbsoluteTime$1");function JA(t){const{duration:e,entryType:r,name:n,startTime:s}=t,o=zr(s);return{type:r,name:n,start:o,end:o+e,data:void 0}}i(JA,"createPaintEntry");function KA(t){const{entryType:e,name:r,decodedBodySize:n,duration:s,domComplete:o,encodedBodySize:a,domContentLoadedEventStart:l,domContentLoadedEventEnd:f,domInteractive:_,loadEventStart:b,loadEventEnd:m,redirectCount:w,startTime:x,transferSize:q,type:R}=t;return s===0?null:{type:`${e}.${R}`,start:zr(x),end:zr(o),name:r,data:{size:q,decodedBodySize:n,encodedBodySize:a,duration:s,domInteractive:_,domContentLoadedEventStart:l,domContentLoadedEventEnd:f,loadEventStart:b,loadEventEnd:m,domComplete:o,redirectCount:w}}}i(KA,"createNavigationEntry");function XA(t){const{entryType:e,initiatorType:r,name:n,responseEnd:s,startTime:o,decodedBodySize:a,encodedBodySize:l,responseStatus:f,transferSize:_}=t;return["fetch","xmlhttprequest"].includes(r)?null:{type:`${e}.${r}`,start:zr(o),end:zr(s),name:n,data:{size:_,statusCode:f,decodedBodySize:a,encodedBodySize:l}}}i(XA,"createResourceEntry");function YA(t){const e=t.entries[t.entries.length-1],r=e&&e.element?[e.element]:void 0;return po(t,"largest-contentful-paint",r)}i(YA,"getLargestContentfulPaint");function ZA(t){return t.sources!==void 0}i(ZA,"isLayoutShift");function e0(t){const e=[],r=[];for(const n of t.entries)if(ZA(n)){const s=[];for(const o of n.sources)if(o.node){r.push(o.node);const a=qn.mirror.getId(o.node);a&&s.push(a)}e.push({value:n.value,nodeIds:s.length?s:void 0})}return po(t,"cumulative-layout-shift",r,e)}i(e0,"getCumulativeLayoutShift");function t0(t){const e=t.entries[t.entries.length-1],r=e&&e.target?[e.target]:void 0;return po(t,"first-input-delay",r)}i(t0,"getFirstInputDelay");function n0(t){const e=t.entries[t.entries.length-1],r=e&&e.target?[e.target]:void 0;return po(t,"interaction-to-next-paint",r)}i(n0,"getInteractionToNextPaint");function po(t,e,r,n){const s=t.value,o=t.rating,a=zr(s);return{type:"web-vital",name:e,start:a,end:a,data:{value:s,size:s,rating:o,nodeIds:r?r.map(l=>qn.mirror.getId(l)):void 0,attributions:n}}}i(po,"getWebVital");function r0(t){function e(s){t.performanceEntries.includes(s)||t.performanceEntries.push(s)}i(e,"addPerformanceEntry");function r({entries:s}){s.forEach(e)}i(r,"onEntries");const n=[];return["navigation","paint","resource"].forEach(s=>{n.push(Br(s,r))}),n.push(zd(ni(YA,t)),fc(ni(e0,t)),Wd(ni(t0,t)),$d(ni(n0,t))),()=>{n.forEach(s=>s())}}i(r0,"setupPerformanceObserver");const s0='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=A(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},U=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=x(f,15),M=b.t,E=b.l,A=x(h,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}},L=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},O=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=C[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(a[t]^a[t+1]<<A^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=U(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=U(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},j=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},q=function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&j(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}},B=function(t){return 10+(t.filename?t.filename.length+1:0)},G=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(O(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();var H=function(){function t(t,n){this.c=L(),this.v=1,G.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),G.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=O(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=L();i.p(n.dictionary),j(t,2,i.d())}}(r,this.o),this.v=0),n&&j(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),J="undefined"!=typeof TextEncoder&&new TextEncoder,K="undefined"!=typeof TextDecoder&&new TextDecoder;try{K.decode(F,{stream:!0})}catch(t){}var N=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(P(t),this.d=n||!1)},t}();function P(n,r){if(J)return J.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),a=0,s=function(t){i[a++]=t},o=0;o<e;++o){if(a+5>i.length){var f=new t(a+8+(e-o<<1));f.set(i),i=f}var h=n.charCodeAt(o);h<128||r?s(h):h<2048?(s(192|h>>6),s(128|63&h)):h>55295&&h<57344?(s(240|(h=65536+(1047552&h)|1023&n.charCodeAt(++o))>>18),s(128|h>>12&63),s(128|h>>6&63),s(128|63&h)):(s(224|h>>12),s(128|h>>6&63),s(128|63&h))}return b(i,0,a)}function Q(t){return function(t,n){n||(n={});var r=S(),e=t.length;r.p(t);var i=O(t,n,B(n),8),a=i.length;return q(i,n),j(i,a-8,r.d()),j(i,a-4,e),i}(P(t))}const R=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new H,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new N(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},V={clear:()=>{R.clear()},addEvent:t=>R.addEvent(t),finish:()=>R.finish(),compress:t=>Q(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in V&&"function"==typeof V[n])try{const t=V[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function i0(){const t=new Blob([s0]);return URL.createObjectURL(t)}i(i0,"e");class Sc extends Error{static{i(this,"EventBufferSizeExceededError")}constructor(){super(`Event buffer exceeded maximum size of ${_c}.`)}}class Tp{static{i(this,"EventBufferArray")}constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const r=JSON.stringify(e).length;if(this._totalSize+=r,this._totalSize>_c)throw new Sc;this.events.push(e)}finish(){return new Promise(e=>{const r=this.events;this.clear(),e(JSON.stringify(r))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map(r=>r.timestamp).sort()[0];return e?Ec(e):null}}class o0{static{i(this,"WorkerHandler")}constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((e,r)=>{this._worker.addEventListener("message",({data:n})=>{n.success?e():r()},{once:!0}),this._worker.addEventListener("error",n=>{r(n)},{once:!0})}),this._ensureReadyPromise)}destroy(){Ue&&He.info("Destroying compression worker"),this._worker.terminate()}postMessage(e,r){const n=this._getAndIncrementId();return new Promise((s,o)=>{const a=i(({data:l})=>{const f=l;if(f.method===e&&f.id===n){if(this._worker.removeEventListener("message",a),!f.success){Ue&&He.error("Error in compression worker: ",f.response),o(new Error("Error in compression worker"));return}s(f.response)}},"listener");this._worker.addEventListener("message",a),this._worker.postMessage({id:n,method:e,arg:r})})}_getAndIncrementId(){return this._id++}}class a0{static{i(this,"EventBufferCompressionWorker")}constructor(e){this._worker=new o0(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const r=Ec(e.timestamp);(!this._earliestTimestamp||r<this._earliestTimestamp)&&(this._earliestTimestamp=r);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>_c?Promise.reject(new Sc):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,e=>{Ue&&He.exception(e,'Sending "clear" message to worker failed',e)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class c0{static{i(this,"EventBufferProxy")}constructor(e){this._fallback=new Tp,this._compression=new a0(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){Ue&&He.exception(e,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:r}=this._fallback,n=[];for(const s of e)n.push(this._compression.addEvent(s));this._compression.hasCheckout=r,this._used=this._compression;try{await Promise.all(n),this._fallback.clear()}catch(s){Ue&&He.exception(s,"Failed to add events when switching buffers.")}}}function l0({useCompression:t,workerUrl:e}){if(t&&window.Worker){const r=u0(e);if(r)return r}return Ue&&He.info("Using simple buffer"),new Tp}i(l0,"createEventBuffer");function u0(t){try{const e=t||f0();if(!e)return;Ue&&He.info(`Using compression worker${t?` from ${t}`:""}`);const r=new Worker(e);return new c0(r)}catch(e){Ue&&He.exception(e,"Failed to create compression worker")}}i(u0,"_loadWorker");function f0(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?i0():""}i(f0,"_getWorkerUrl");function wc(){try{return"sessionStorage"in _t&&!!_t.sessionStorage}catch{return!1}}i(wc,"hasSessionStorage");function d0(t){p0(),t.session=void 0}i(d0,"clearSession");function p0(){if(wc())try{_t.sessionStorage.removeItem(pc)}catch{}}i(p0,"deleteSession");function qp(t){return t===void 0?!1:Math.random()<t}i(qp,"isSampled");function xp(t){const e=Date.now(),r=t.id||gt(),n=t.started||e,s=t.lastActivity||e,o=t.segmentId||0,a=t.sampled,l=t.previousSessionId;return{id:r,started:n,lastActivity:s,segmentId:o,sampled:a,previousSessionId:l}}i(xp,"makeSession");function vc(t){if(wc())try{_t.sessionStorage.setItem(pc,JSON.stringify(t))}catch{}}i(vc,"saveSession");function h0(t,e){return qp(t)?"session":e?"buffer":!1}i(h0,"getSessionSampleType");function xu({sessionSampleRate:t,allowBuffering:e,stickySession:r=!1},{previousSessionId:n}={}){const s=h0(t,e),o=xp({sampled:s,previousSessionId:n});return r&&vc(o),o}i(xu,"createSession");function _0(){if(!wc())return null;try{const t=_t.sessionStorage.getItem(pc);if(!t)return null;const e=JSON.parse(t);return Ue&&He.infoTick("Loading existing session"),xp(e)}catch{return null}}i(_0,"fetchSession");function xa(t,e,r=+new Date){return t===null||e===void 0||e<0?!0:e===0?!1:t+e<=r}i(xa,"isExpired");function kp(t,{maxReplayDuration:e,sessionIdleExpire:r,targetTime:n=Date.now()}){return xa(t.started,e,n)||xa(t.lastActivity,r,n)}i(kp,"isSessionExpired");function Cp(t,{sessionIdleExpire:e,maxReplayDuration:r}){return!(!kp(t,{sessionIdleExpire:e,maxReplayDuration:r})||t.sampled==="buffer"&&t.segmentId===0)}i(Cp,"shouldRefreshSession");function Mo({sessionIdleExpire:t,maxReplayDuration:e,previousSessionId:r},n){const s=n.stickySession&&_0();return s?Cp(s,{sessionIdleExpire:t,maxReplayDuration:e})?(Ue&&He.infoTick("Session in sessionStorage is expired, creating new one..."),xu(n,{previousSessionId:s.id})):s:(Ue&&He.infoTick("Creating new session"),xu(n,{previousSessionId:r}))}i(Mo,"loadOrCreateSession");function m0(t){return t.type===Ye.Custom}i(m0,"isCustomEvent");function Ac(t,e,r){return Rp(t,e)?(Op(t,e,r),!0):!1}i(Ac,"addEventSync");function g0(t,e,r){return Rp(t,e)?Op(t,e,r):Promise.resolve(null)}i(g0,"addEvent");async function Op(t,e,r){if(!t.eventBuffer)return null;try{r&&t.recordingMode==="buffer"&&t.eventBuffer.clear(),r&&(t.eventBuffer.hasCheckout=!0);const n=t.getOptions(),s=y0(e,n.beforeAddRecordingEvent);return s?await t.eventBuffer.addEvent(s):void 0}catch(n){const s=n&&n instanceof Sc?"addEventSizeExceeded":"addEvent";t.handleException(n),await t.stop({reason:s});const o=et();o&&o.recordDroppedEvent("internal_sdk_error","replay")}}i(Op,"_addEvent");function Rp(t,e){if(!t.eventBuffer||t.isPaused()||!t.isEnabled())return!1;const r=Ec(e.timestamp);return r+t.timeouts.sessionIdlePause<Date.now()?!1:r>t.getContext().initialTimestamp+t.getOptions().maxReplayDuration?(Ue&&He.infoTick(`Skipping event with timestamp ${r} because it is after maxReplayDuration`),!1):!0}i(Rp,"shouldAddEvent");function y0(t,e){try{if(typeof e=="function"&&m0(t))return e(t)}catch(r){return Ue&&He.exception(r,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return t}i(y0,"maybeApplyCallback");function Ic(t){return!t.type}i(Ic,"isErrorEvent");function ka(t){return t.type==="transaction"}i(ka,"isTransactionEvent");function b0(t){return t.type==="replay_event"}i(b0,"isReplayEvent");function ku(t){return t.type==="feedback"}i(ku,"isFeedbackEvent");function E0(t){return(e,r)=>{if(!t.isEnabled()||!Ic(e)&&!ka(e))return;const n=r&&r.statusCode;if(!(!n||n<200||n>=300)){if(ka(e)){S0(t,e);return}w0(t,e)}}}i(E0,"handleAfterSendEvent");function S0(t,e){const r=t.getContext();e.contexts&&e.contexts.trace&&e.contexts.trace.trace_id&&r.traceIds.size<100&&r.traceIds.add(e.contexts.trace.trace_id)}i(S0,"handleTransactionEvent");function w0(t,e){const r=t.getContext();if(e.event_id&&r.errorIds.size<100&&r.errorIds.add(e.event_id),t.recordingMode!=="buffer"||!e.tags||!e.tags.replayId)return;const{beforeErrorSampling:n}=t.getOptions();typeof n=="function"&&!n(e)||Ur(async()=>{try{await t.sendBufferedReplayOrFlush()}catch(s){t.handleException(s)}})}i(w0,"handleErrorEvent");function v0(t){return e=>{!t.isEnabled()||!Ic(e)||A0(t,e)}}i(v0,"handleBeforeSendEvent");function A0(t,e){const r=e.exception&&e.exception.values&&e.exception.values[0]&&e.exception.values[0].value;if(typeof r=="string"&&(r.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||r.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const n=_n({category:"replay.hydrate-error",data:{url:jf()}});Ns(t,n)}}i(A0,"handleHydrationError");function I0(t){const e=et();e&&e.on("beforeAddBreadcrumb",r=>T0(t,r))}i(I0,"handleBreadcrumbs");function T0(t,e){if(!t.isEnabled()||!Lp(e))return;const r=q0(e);r&&Ns(t,r)}i(T0,"beforeAddBreadcrumb");function q0(t){return!Lp(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui.")?null:t.category==="console"?x0(t):_n(t)}i(q0,"normalizeBreadcrumb");function x0(t){const e=t.data&&t.data.arguments;if(!Array.isArray(e)||e.length===0)return _n(t);let r=!1;const n=e.map(s=>{if(!s)return s;if(typeof s=="string")return s.length>Zs?(r=!0,`${s.slice(0,Zs)}…`):s;if(typeof s=="object")try{const o=dn(s,7);return JSON.stringify(o).length>Zs?(r=!0,`${JSON.stringify(o,null,2).slice(0,Zs)}…`):o}catch{}return s});return _n({...t,data:{...t.data,arguments:n,...r?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}i(x0,"normalizeConsoleBreadcrumb");function Lp(t){return!!t.category}i(Lp,"isBreadcrumbWithCategory");function k0(t,e){return t.type||!t.exception||!t.exception.values||!t.exception.values.length?!1:!!(e.originalException&&e.originalException.__rrweb__)}i(k0,"isRrwebError");function C0(t,e){t.triggerUserActivity(),t.addUpdate(()=>e.timestamp?(t.throttledAddEvent({type:Ye.Custom,timestamp:e.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:e.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:e.event_id}}}}),!1):!0)}i(C0,"addFeedbackBreadcrumb");function O0(t,e){return t.recordingMode!=="buffer"||e.message===hc||!e.exception||e.type?!1:qp(t.getOptions().errorSampleRate)}i(O0,"shouldSampleForBufferEvent");function R0(t){return Object.assign((e,r)=>!t.isEnabled()||t.isPaused()?e:b0(e)?(delete e.breadcrumbs,e):!Ic(e)&&!ka(e)&&!ku(e)||!t.checkAndHandleExpiredSession()?e:ku(e)?(t.flush(),e.contexts.feedback.replay_id=t.getSessionId(),C0(t,e),e):k0(e,r)&&!t.getOptions()._experiments.captureExceptions?(Ue&&He.log("Ignoring error from rrweb internals",e),null):((O0(t,e)||t.recordingMode==="session")&&(e.tags={...e.tags,replayId:t.getSessionId()}),e),{id:"Replay"})}i(R0,"handleGlobalEventListener");function ho(t,e){return e.map(({type:r,start:n,end:s,name:o,data:a})=>{const l=t.throttledAddEvent({type:Ye.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:r,description:o,startTimestamp:n,endTimestamp:s,data:a}}});return typeof l=="string"?Promise.resolve(null):l})}i(ho,"createPerformanceSpans");function L0(t){const{from:e,to:r}=t,n=Date.now()/1e3;return{type:"navigation.push",start:n,end:n,name:r,data:{previous:e}}}i(L0,"handleHistory");function F0(t){return e=>{if(!t.isEnabled())return;const r=L0(e);r!==null&&(t.getContext().urls.push(r.name),t.triggerUserActivity(),t.addUpdate(()=>(ho(t,[r]),!1)))}}i(F0,"handleHistorySpanListener");function N0(t,e){return Ue&&t.getOptions()._experiments.traceInternals?!1:aE(e,et())}i(N0,"shouldFilterRequest");function Fp(t,e){t.isEnabled()&&e!==null&&(N0(t,e.name)||t.addUpdate(()=>(ho(t,[e]),!0)))}i(Fp,"addNetworkBreadcrumb");function _o(t){if(!t)return;const e=new TextEncoder;try{if(typeof t=="string")return e.encode(t).length;if(t instanceof URLSearchParams)return e.encode(t.toString()).length;if(t instanceof FormData){const r=Mp(t);return e.encode(r).length}if(t instanceof Blob)return t.size;if(t instanceof ArrayBuffer)return t.byteLength}catch{}}i(_o,"getBodySize");function Np(t){if(!t)return;const e=parseInt(t,10);return isNaN(e)?void 0:e}i(Np,"parseContentLengthHeader");function Pp(t){try{if(typeof t=="string")return[t];if(t instanceof URLSearchParams)return[t.toString()];if(t instanceof FormData)return[Mp(t)];if(!t)return[void 0]}catch(e){return Ue&&He.exception(e,"Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return Ue&&He.info("Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}i(Pp,"getBodyString");function Hi(t,e){if(!t)return{headers:{},size:void 0,_meta:{warnings:[e]}};const r={...t._meta},n=r.warnings||[];return r.warnings=[...n,e],t._meta=r,t}i(Hi,"mergeWarning");function Dp(t,e){if(!e)return null;const{startTimestamp:r,endTimestamp:n,url:s,method:o,statusCode:a,request:l,response:f}=e;return{type:t,start:r/1e3,end:n/1e3,name:s,data:At({method:o,statusCode:a,request:l,response:f})}}i(Dp,"makeNetworkReplayBreadcrumb");function Ss(t){return{headers:{},size:t,_meta:{warnings:["URL_SKIPPED"]}}}i(Ss,"buildSkippedNetworkRequestOrResponse");function Qn(t,e,r){if(!e&&Object.keys(t).length===0)return;if(!e)return{headers:t};if(!r)return{headers:t,size:e};const n={headers:t,size:e},{body:s,warnings:o}=P0(r);return n.body=s,o&&o.length>0&&(n._meta={warnings:o}),n}i(Qn,"buildNetworkRequestOrResponse");function Ca(t,e){return Object.entries(t).reduce((r,[n,s])=>{const o=n.toLowerCase();return e.includes(o)&&t[n]&&(r[o]=s),r},{})}i(Ca,"getAllowedHeaders");function Mp(t){return new URLSearchParams(t).toString()}i(Mp,"_serializeFormData");function P0(t){if(!t||typeof t!="string")return{body:t};const e=t.length>fu,r=D0(t);if(e){const n=t.slice(0,fu);return r?{body:n,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${n}…`,warnings:["TEXT_TRUNCATED"]}}if(r)try{return{body:JSON.parse(t)}}catch{}return{body:t}}i(P0,"normalizeNetworkBody");function D0(t){const e=t[0],r=t[t.length-1];return e==="["&&r==="]"||e==="{"&&r==="}"}i(D0,"_strIsProbablyJson");function zi(t,e){const r=M0(t);return $n(r,e)}i(zi,"urlMatches");function M0(t,e=_t.document.baseURI){if(t.startsWith("http://")||t.startsWith("https://")||t.startsWith(_t.location.origin))return t;const r=new URL(t,e);if(r.origin!==new URL(e).origin)return t;const n=r.href;return!t.endsWith("/")&&n.endsWith("/")?n.slice(0,-1):n}i(M0,"getFullUrl");async function B0(t,e,r){try{const n=await j0(t,e,r),s=Dp("resource.fetch",n);Fp(r.replay,s)}catch(n){Ue&&He.exception(n,"Failed to capture fetch breadcrumb")}}i(B0,"captureFetchBreadcrumbToReplay");function U0(t,e){const{input:r,response:n}=e,s=r?Bp(r):void 0,o=_o(s),a=n?Np(n.headers.get("content-length")):void 0;o!==void 0&&(t.data.request_body_size=o),a!==void 0&&(t.data.response_body_size=a)}i(U0,"enrichFetchBreadcrumb");async function j0(t,e,r){const n=Date.now(),{startTimestamp:s=n,endTimestamp:o=n}=e,{url:a,method:l,status_code:f=0,request_body_size:_,response_body_size:b}=t.data,m=zi(a,r.networkDetailAllowUrls)&&!zi(a,r.networkDetailDenyUrls),w=m?H0(r,e.input,_):Ss(_),x=await z0(m,r,e.response,b);return{startTimestamp:s,endTimestamp:o,url:a,method:l,statusCode:f,request:w,response:x}}i(j0,"_prepareFetchData");function H0({networkCaptureBodies:t,networkRequestHeaders:e},r,n){const s=r?Q0(r,e):{};if(!t)return Qn(s,n,void 0);const o=Bp(r),[a,l]=Pp(o),f=Qn(s,n,a);return l?Hi(f,l):f}i(H0,"_getRequestInfo");async function z0(t,{networkCaptureBodies:e,networkResponseHeaders:r},n,s){if(!t&&s!==void 0)return Ss(s);const o=n?Up(n.headers,r):{};if(!n||!e&&s!==void 0)return Qn(o,s,void 0);const[a,l]=await $0(n),f=W0(a,{networkCaptureBodies:e,responseBodySize:s,captureDetails:t,headers:o});return l?Hi(f,l):f}i(z0,"_getResponseInfo");function W0(t,{networkCaptureBodies:e,responseBodySize:r,captureDetails:n,headers:s}){try{const o=t&&t.length&&r===void 0?_o(t):r;return n?e?Qn(s,o,t):Qn(s,o,void 0):Ss(o)}catch(o){return Ue&&He.exception(o,"Failed to serialize response body"),Qn(s,r,void 0)}}i(W0,"getResponseData");async function $0(t){const e=G0(t);if(!e)return[void 0,"BODY_PARSE_ERROR"];try{return[await V0(e)]}catch(r){return r instanceof Error&&r.message.indexOf("Timeout")>-1?(Ue&&He.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(Ue&&He.exception(r,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}i($0,"_parseFetchResponseBody");function Bp(t=[]){if(!(t.length!==2||typeof t[1]!="object"))return t[1].body}i(Bp,"_getFetchRequestArgBody");function Up(t,e){const r={};return e.forEach(n=>{t.get(n)&&(r[n]=t.get(n))}),r}i(Up,"getAllHeaders");function Q0(t,e){return t.length===1&&typeof t[0]!="string"?Cu(t[0],e):t.length===2?Cu(t[1],e):{}}i(Q0,"getRequestHeaders");function Cu(t,e){if(!t)return{};const r=t.headers;return r?r instanceof Headers?Up(r,e):Array.isArray(r)?{}:Ca(r,e):{}}i(Cu,"getHeadersFromOptions");function G0(t){try{return t.clone()}catch(e){Ue&&He.exception(e,"Failed to clone response body")}}i(G0,"_tryCloneResponse");function V0(t){return new Promise((e,r)=>{const n=Ur(()=>r(new Error("Timeout while trying to read response body")),500);J0(t).then(s=>e(s),s=>r(s)).finally(()=>clearTimeout(n))})}i(V0,"_tryGetResponseText");async function J0(t){return await t.text()}i(J0,"_getResponseText");async function K0(t,e,r){try{const n=Y0(t,e,r),s=Dp("resource.xhr",n);Fp(r.replay,s)}catch(n){Ue&&He.exception(n,"Failed to capture xhr breadcrumb")}}i(K0,"captureXhrBreadcrumbToReplay");function X0(t,e){const{xhr:r,input:n}=e;if(!r)return;const s=_o(n),o=r.getResponseHeader("content-length")?Np(r.getResponseHeader("content-length")):nI(r.response,r.responseType);s!==void 0&&(t.data.request_body_size=s),o!==void 0&&(t.data.response_body_size=o)}i(X0,"enrichXhrBreadcrumb");function Y0(t,e,r){const n=Date.now(),{startTimestamp:s=n,endTimestamp:o=n,input:a,xhr:l}=e,{url:f,method:_,status_code:b=0,request_body_size:m,response_body_size:w}=t.data;if(!f)return null;if(!l||!zi(f,r.networkDetailAllowUrls)||zi(f,r.networkDetailDenyUrls)){const te=Ss(m),ne=Ss(w);return{startTimestamp:s,endTimestamp:o,url:f,method:_,statusCode:b,request:te,response:ne}}const x=l[sr],q=x?Ca(x.request_headers,r.networkRequestHeaders):{},R=Ca(Z0(l),r.networkResponseHeaders),[U,j]=r.networkCaptureBodies?Pp(a):[void 0],[ae,fe]=r.networkCaptureBodies?eI(l):[void 0],ge=Qn(q,m,U),Se=Qn(R,w,ae);return{startTimestamp:s,endTimestamp:o,url:f,method:_,statusCode:b,request:j?Hi(ge,j):ge,response:fe?Hi(Se,fe):Se}}i(Y0,"_prepareXhrData");function Z0(t){const e=t.getAllResponseHeaders();return e?e.split(`\r
`).reduce((r,n)=>{const[s,o]=n.split(": ");return o&&(r[s.toLowerCase()]=o),r},{}):{}}i(Z0,"getResponseHeaders");function eI(t){const e=[];try{return[t.responseText]}catch(r){e.push(r)}try{return tI(t.response,t.responseType)}catch(r){e.push(r)}return Ue&&He.warn("Failed to get xhr response body",...e),[void 0]}i(eI,"_getXhrResponseBody");function tI(t,e){try{if(typeof t=="string")return[t];if(t instanceof Document)return[t.body.outerHTML];if(e==="json"&&t&&typeof t=="object")return[JSON.stringify(t)];if(!t)return[void 0]}catch(r){return Ue&&He.exception(r,"Failed to serialize body",t),[void 0,"BODY_PARSE_ERROR"]}return Ue&&He.info("Skipping network body because of body type",t),[void 0,"UNPARSEABLE_BODY_TYPE"]}i(tI,"_parseXhrResponse");function nI(t,e){try{const r=e==="json"&&t&&typeof t=="object"?JSON.stringify(t):t;return _o(r)}catch{return}}i(nI,"_getBodySize");function rI(t){const e=et();try{const{networkDetailAllowUrls:r,networkDetailDenyUrls:n,networkCaptureBodies:s,networkRequestHeaders:o,networkResponseHeaders:a}=t.getOptions(),l={replay:t,networkDetailAllowUrls:r,networkDetailDenyUrls:n,networkCaptureBodies:s,networkRequestHeaders:o,networkResponseHeaders:a};e&&e.on("beforeAddBreadcrumb",(f,_)=>sI(l,f,_))}catch{}}i(rI,"handleNetworkBreadcrumbs");function sI(t,e,r){if(e.data)try{iI(e)&&aI(r)&&(X0(e,r),K0(e,r,t)),oI(e)&&cI(r)&&(U0(e,r),B0(e,r,t))}catch(n){Ue&&He.exception(n,"Error when enriching network breadcrumb")}}i(sI,"beforeAddNetworkBreadcrumb");function iI(t){return t.category==="xhr"}i(iI,"_isXhrBreadcrumb");function oI(t){return t.category==="fetch"}i(oI,"_isFetchBreadcrumb");function aI(t){return t&&t.xhr}i(aI,"_isXhrHint");function cI(t){return t&&t.response}i(cI,"_isFetchHint");function lI(t){const e=et();Jd(BA(t)),co(F0(t)),I0(t),rI(t);const r=R0(t);$b(r),e&&(e.on("beforeSendEvent",v0(t)),e.on("afterSendEvent",E0(t)),e.on("createDsc",n=>{const s=t.getSessionId();s&&t.isEnabled()&&t.recordingMode==="session"&&t.checkAndHandleExpiredSession()&&(n.replay_id=s)}),e.on("spanStart",n=>{t.lastActiveSpan=n}),e.on("spanEnd",n=>{t.lastActiveSpan=n}),e.on("beforeSendFeedback",(n,s)=>{const o=t.getSessionId();s&&s.includeReplay&&t.isEnabled()&&o&&n.contexts&&n.contexts.feedback&&(n.contexts.feedback.replay_id=o)}))}i(lI,"addGlobalListeners");async function uI(t){try{return Promise.all(ho(t,[fI(_t.performance.memory)]))}catch{return[]}}i(uI,"addMemoryEntry");function fI(t){const{jsHeapSizeLimit:e,totalJSHeapSize:r,usedJSHeapSize:n}=t,s=Date.now()/1e3;return{type:"memory",name:"memory",start:s,end:s,data:{memory:{jsHeapSizeLimit:e,totalJSHeapSize:r,usedJSHeapSize:n}}}}i(fI,"createMemoryEntry");function dI(t,e,r){let n,s,o;const a=r&&r.maxWait?Math.max(r.maxWait,e):0;function l(){return f(),n=t(),n}i(l,"invokeFunc");function f(){s!==void 0&&clearTimeout(s),o!==void 0&&clearTimeout(o),s=o=void 0}i(f,"cancelTimers");function _(){return s!==void 0||o!==void 0?l():n}i(_,"flush");function b(){return s&&clearTimeout(s),s=Ur(l,e),a&&o===void 0&&(o=Ur(l,a)),n}return i(b,"debounced"),b.cancel=f,b.flush=_,b}i(dI,"debounce");function pI(t){let e=!1;return(r,n)=>{if(!t.checkAndHandleExpiredSession()){Ue&&He.warn("Received replay event after session expired.");return}const s=n||!e;e=!0,t.clickDetector&&FA(t.clickDetector,r),t.addUpdate(()=>{if(t.recordingMode==="buffer"&&s&&t.setInitialState(),!Ac(t,r,s))return!0;if(!s)return!1;const o=t.session;if(_I(t,s),t.recordingMode==="buffer"&&o&&t.eventBuffer){const a=t.eventBuffer.getEarliestTimestamp();a&&(Ue&&He.info(`Updating session start time to earliest event in buffer to ${new Date(a)}`),o.started=a,t.getOptions().stickySession&&vc(o))}return o&&o.previousSessionId||t.recordingMode==="session"&&t.flush(),!0})}}i(pI,"getHandleRecordingEmit");function hI(t){const e=t.getOptions();return{type:Ye.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:t.isRecordingCanvas(),sessionSampleRate:e.sessionSampleRate,errorSampleRate:e.errorSampleRate,useCompressionOption:e.useCompression,blockAllMedia:e.blockAllMedia,maskAllText:e.maskAllText,maskAllInputs:e.maskAllInputs,useCompression:t.eventBuffer?t.eventBuffer.type==="worker":!1,networkDetailHasUrls:e.networkDetailAllowUrls.length>0,networkCaptureBodies:e.networkCaptureBodies,networkRequestHasHeaders:e.networkRequestHeaders.length>0,networkResponseHasHeaders:e.networkResponseHeaders.length>0}}}}i(hI,"createOptionsEvent");function _I(t,e){!e||!t.session||t.session.segmentId!==0||Ac(t,hI(t),!1)}i(_I,"addSettingsEvent");function mI(){const t=dt().getPropagationContext().dsc;t&&delete t.replay_id;const e=kt();if(e){const r=Yn(e);delete r.replay_id}}i(mI,"resetReplayIdOnDynamicSamplingContext");function gI(t,e,r,n){return hr(od(t,Za(t),n,r),[[{type:"replay_event"},t],[{type:"replay_recording",length:typeof e=="string"?new TextEncoder().encode(e).length:e.length},e]])}i(gI,"createReplayEnvelope");function yI({recordingData:t,headers:e}){let r;const n=`${JSON.stringify(e)}
`;if(typeof t=="string")r=`${n}${t}`;else{const o=new TextEncoder().encode(n);r=new Uint8Array(o.length+t.length),r.set(o),r.set(t,o.length)}return r}i(yI,"prepareRecordingData");async function bI({client:t,scope:e,replayId:r,event:n}){const s=typeof t._integrations=="object"&&t._integrations!==null&&!Array.isArray(t._integrations)?Object.keys(t._integrations):void 0,o={event_id:r,integrations:s};t.emit("preprocessEvent",n,o);const a=await Ad(t.getOptions(),n,o,e,t,Qt());if(!a)return null;a.platform=a.platform||"javascript";const l=t.getSdkMetadata(),{name:f,version:_}=l&&l.sdk||{};return a.sdk={...a.sdk,name:f||"sentry.javascript.unknown",version:_||"0.0.0"},a}i(bI,"prepareReplayEvent");async function EI({recordingData:t,replayId:e,segmentId:r,eventContext:n,timestamp:s,session:o}){const a=yI({recordingData:t,headers:{segment_id:r}}),{urls:l,errorIds:f,traceIds:_,initialTimestamp:b}=n,m=et(),w=dt(),x=m&&m.getTransport(),q=m&&m.getDsn();if(!m||!x||!q||!o.sampled)return On({});const R={type:ev,replay_start_timestamp:b/1e3,timestamp:s/1e3,error_ids:f,trace_ids:_,urls:l,replay_id:e,segment_id:r,replay_type:o.sampled},U=await bI({scope:w,client:m,replayId:e,event:R});if(!U)return m.recordDroppedEvent("event_processor","replay",R),Ue&&He.info("An event processor returned `null`, will not send event."),On({});delete U.sdkProcessingMetadata;const j=gI(U,a,q,m.getOptions().tunnel);let ae;try{ae=await x.send(j)}catch(ge){const Se=new Error(hc);try{Se.cause=ge}catch{}throw Se}if(typeof ae.statusCode=="number"&&(ae.statusCode<200||ae.statusCode>=300))throw new jp(ae.statusCode);const fe=cd({},ae);if(ad(fe,"replay"))throw new Tc(fe);return ae}i(EI,"sendReplayRequest");class jp extends Error{static{i(this,"TransportStatusCodeError")}constructor(e){super(`Transport returned status code ${e}`)}}class Tc extends Error{static{i(this,"RateLimitError")}constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function Hp(t,e={count:0,interval:ov}){const{recordingData:r,onError:n}=t;if(r.length)try{return await EI(t),!0}catch(s){if(s instanceof jp||s instanceof Tc)throw s;if(oc("Replays",{_retryCount:e.count}),n&&n(s),e.count>=av){const o=new Error(`${hc} - max retries exceeded`);try{o.cause=s}catch{}throw o}return e.interval*=++e.count,new Promise((o,a)=>{Ur(async()=>{try{await Hp(t,e),o(!0)}catch(l){a(l)}},e.interval)})}}i(Hp,"sendReplay");const zp="__THROTTLED",SI="__SKIPPED";function wI(t,e,r){const n=new Map,s=i(l=>{const f=l-r;n.forEach((_,b)=>{b<f&&n.delete(b)})},"_cleanup"),o=i(()=>[...n.values()].reduce((l,f)=>l+f,0),"_getTotalCount");let a=!1;return(...l)=>{const f=Math.floor(Date.now()/1e3);if(s(f),o()>=e){const b=a;return a=!0,b?SI:zp}a=!1;const _=n.get(f)||0;return n.set(f,_+1),t(...l)}}i(wI,"throttle$2");class zn{static{i(this,"ReplayContainer")}constructor({options:e,recordingOptions:r}){zn.prototype.__init.call(this),zn.prototype.__init2.call(this),zn.prototype.__init3.call(this),zn.prototype.__init4.call(this),zn.prototype.__init5.call(this),zn.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:tv,sessionIdleExpire:nv},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=r,this._options=e,this._debouncedFlush=dI(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=wI((a,l)=>g0(this,a,l),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:s}=this.getOptions(),o=n?{threshold:Math.min(cv,n),timeout:n,scrollTimeout:lv,ignoreSelector:s?s.join(","):""}:void 0;if(o&&(this.clickDetector=new CA(this,o)),Ue){const a=e._experiments;He.setConfig({captureExceptions:!!a.captureExceptions,traceInternals:!!a.traceInternals})}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(e){Ue&&He.exception(e),this._options.onError&&this._options.onError(e)}initializeSampling(e){const{errorSampleRate:r,sessionSampleRate:n}=this._options,s=r<=0&&n<=0;if(this._requiresManualStart=s,!s){if(this._initializeSessionForSampling(e),!this.session){Ue&&He.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",Ue&&He.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){Ue&&He.info("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){Ue&&He.info("Buffering is in progress, call `flush()` to save the replay");return}Ue&&He.infoTick("Starting replay in session mode"),this._updateUserActivity();const e=Mo({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled){Ue&&He.info("Buffering is in progress, call `flush()` to save the replay");return}Ue&&He.infoTick("Starting replay in buffer mode");const e=Mo({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=qn({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:iv}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:pI(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this.handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this.handleException(e),!1}}async stop({forceFlush:e=!1,reason:r}={}){if(this._isEnabled){this._isEnabled=!1;try{Ue&&He.info(`Stopping Replay${r?` triggered by ${r}`:""}`),mI(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,d0(this)}catch(n){this.handleException(n)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),Ue&&He.info("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),Ue&&He.info("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const r=Date.now();Ue&&He.info("Converting buffer to session"),await this.flushImmediate();const n=this.stopRecording();!e||!n||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(r),this._updateSessionActivity(r),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const r=e();this.recordingMode!=="buffer"&&r!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&xa(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const e=`${_t.location.pathname}${_t.location.hash}${_t.location.search}`,r=`${_t.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=r,this._context.initialTimestamp=Date.now(),this._context.urls.push(r)}throttledAddEvent(e,r){const n=this._throttledAddEvent(e,r);if(n===zp){const s=_n({category:"replay.throttled"});this.addUpdate(()=>!Ac(this,{type:vA,timestamp:s.timestamp||0,data:{tag:"breadcrumb",payload:s,metric:!0}}))}return n}getCurrentRoute(){const e=this.lastActiveSpan||kt(),r=e&&xt(e),s=(r&&ot(r).data||{})[An];if(!(!r||!s||!["route","custom"].includes(s)))return ot(r).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=l0({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(e){const r=this._options.errorSampleRate>0,n=Mo({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:r});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return Cp(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(e),!1):!0}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{_t.document.addEventListener("visibilitychange",this._handleVisibilityChange),_t.addEventListener("blur",this._handleWindowBlur),_t.addEventListener("focus",this._handleWindowFocus),_t.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(lI(this),this._hasInitializedCoreListeners=!0)}catch(e){this.handleException(e)}this._performanceCleanupCallback=r0(this)}_removeListeners(){try{_t.document.removeEventListener("visibilitychange",this._handleVisibilityChange),_t.removeEventListener("blur",this._handleWindowBlur),_t.removeEventListener("focus",this._handleWindowFocus),_t.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this.handleException(e)}}__init(){this._handleVisibilityChange=()=>{_t.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=_n({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=_n({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{zA(this,e)}}_doChangeToBackgroundTasks(e){!this.session||kp(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){Ue&&He.info("Document has become active, but session has expired");return}e&&this._createCustomBreadcrumb(e)}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate(()=>{this.throttledAddEvent({type:Ye.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})})}_addPerformanceEntries(){let e=GA(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const r=this._context.initialTimestamp/1e3;e=e.filter(n=>n.start>=r)}return Promise.all(ho(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:r}=this;if(!e||!r||this._requiresManualStart||e.segmentId)return;const n=r.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(!this.session||!this.eventBuffer||!e){Ue&&He.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!(!this.eventBuffer||!this.eventBuffer.hasEvents)&&(await uI(this),!!this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const r=Date.now();if(r-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),s=this.session.segmentId++;this._maybeSaveSession();const o=await this.eventBuffer.finish();await Hp({replayId:e,recordingData:o,segmentId:s,eventContext:n,session:this.session,timestamp:r,onError:a=>this.handleException(a)})}catch(r){this.handleException(r),this.stop({reason:"sendReplay"});const n=et();if(n){const s=r instanceof Tc?"ratelimit_backoff":"send_error";n.recordDroppedEvent(s,"replay")}}}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession()){Ue&&He.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const r=this.session.started,s=Date.now()-r;this._debouncedFlush.cancel();const o=s<this._options.minReplayDuration,a=s>this._options.maxReplayDuration+5e3;if(o||a){Ue&&He.info(`Session duration (${Math.floor(s/1e3)}s) is too ${o?"short":"long"}, not sending replay.`),o&&this._debouncedFlush();return}const l=this.eventBuffer;l&&this.session.segmentId===0&&!l.hasCheckout&&Ue&&He.info("Flushing initial segment without checkout.");const f=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(_){this.handleException(_)}finally{this._flushLock=void 0,f&&this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&vc(this.session)}__init6(){this._onMutationHandler=e=>{const r=e.length,n=this._options.mutationLimit,s=this._options.mutationBreadcrumbLimit,o=n&&r>n;if(r>s||o){const a=_n({category:"replay.mutations",data:{count:r,limit:o}});this._createCustomBreadcrumb(a)}return o?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}}function os(t,e){return[...t,...e].join(",")}i(os,"getOption");function vI({mask:t,unmask:e,block:r,unblock:n,ignore:s}){const o=['base[href="/"]'],a=os(t,[".sentry-mask","[data-sentry-mask]"]),l=os(e,[]);return{maskTextSelector:a,unmaskTextSelector:l,blockSelector:os(r,[".sentry-block","[data-sentry-block]",...o]),unblockSelector:os(n,[]),ignoreSelector:os(s,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}i(vI,"getPrivacyOptions");function AI({el:t,key:e,maskAttributes:r,maskAllText:n,privacyOptions:s,value:o}){return!n||s.unmaskTextSelector&&t.matches(s.unmaskTextSelector)?o:r.includes(e)||e==="value"&&t.tagName==="INPUT"&&["submit","button"].includes(t.getAttribute("type")||"")?o.replace(/[\S]/g,"*"):o}i(AI,"maskAttribute");const Ou='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',II=["content-length","content-type","accept"];let Ru=!1;const TI=i(t=>new mo(t),"replayIntegration");class mo{static{i(this,"Replay")}static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=rv,flushMaxDelay:r=sv,minReplayDuration:n=uv,maxReplayDuration:s=du,stickySession:o=!0,useCompression:a=!0,workerUrl:l,_experiments:f={},maskAllText:_=!0,maskAllInputs:b=!0,blockAllMedia:m=!0,mutationBreadcrumbLimit:w=750,mutationLimit:x=1e4,slowClickTimeout:q=7e3,slowClickIgnoreSelectors:R=[],networkDetailAllowUrls:U=[],networkDetailDenyUrls:j=[],networkCaptureBodies:ae=!0,networkRequestHeaders:fe=[],networkResponseHeaders:ge=[],mask:Se=[],maskAttributes:te=["title","placeholder"],unmask:ne=[],block:M=[],unblock:J=[],ignore:P=[],maskFn:X,beforeAddRecordingEvent:ce,beforeErrorSampling:Ae,onError:we}={}){this.name=mo.id;const ct=vI({mask:Se,unmask:ne,block:M,unblock:J,ignore:P});if(this._recordingOptions={maskAllInputs:b,maskAllText:_,maskInputOptions:{password:!0},maskTextFn:X,maskInputFn:X,maskAttributeFn:(be,Qe,Xe)=>AI({maskAttributes:te,maskAllText:_,privacyOptions:ct,key:be,value:Qe,el:Xe}),...ct,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:be=>{try{be.__rrweb__=!0}catch{}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:r,minReplayDuration:Math.min(n,fv),maxReplayDuration:Math.min(s,du),stickySession:o,useCompression:a,workerUrl:l,blockAllMedia:m,maskAllInputs:b,maskAllText:_,mutationBreadcrumbLimit:w,mutationLimit:x,slowClickTimeout:q,slowClickIgnoreSelectors:R,networkDetailAllowUrls:U,networkDetailDenyUrls:j,networkCaptureBodies:ae,networkRequestHeaders:Lu(fe),networkResponseHeaders:Lu(ge),beforeAddRecordingEvent:ce,beforeErrorSampling:Ae,onError:we,_experiments:f},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Ou}`:Ou),this._isInitialized&&xl())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return Ru}set _isInitialized(e){Ru=e}afterAllSetup(e){!xl()||this._replay||(this._setup(e),this._initialize(e))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(e){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.getSessionId()}getRecordingMode(){if(!(!this._replay||!this._replay.isEnabled()))return this._replay.recordingMode}_initialize(e){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(e),this._replay.initializeSampling())}_setup(e){const r=qI(this._initialOptions,e);this._replay=new zn({options:r,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(e){try{const r=e.getIntegrationByName("ReplayCanvas");if(!r)return;this._replay._canvas=r.getOptions()}catch{}}}mo.__initStatic();function qI(t,e){const r=e.getOptions(),n={sessionSampleRate:0,errorSampleRate:0,...At(t)},s=Oi(r.replaysSessionSampleRate),o=Oi(r.replaysOnErrorSampleRate);return s==null&&o==null&&Gr(()=>{}),s!=null&&(n.sessionSampleRate=s),o!=null&&(n.errorSampleRate=o),n}i(qI,"loadReplayOptionsFromClient");function Lu(t){return[...II,...t.map(e=>e.toLowerCase())]}i(Lu,"_getMergedNetworkHeaders");const Fu=new WeakMap,Bo=new Map,mi={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function xI(t,e){const{traceFetch:r,traceXHR:n,trackFetchStreamPerformance:s,shouldCreateSpanForRequest:o,enableHTTPTimings:a,tracePropagationTargets:l}={traceFetch:mi.traceFetch,traceXHR:mi.traceXHR,trackFetchStreamPerformance:mi.trackFetchStreamPerformance,...e},f=typeof o=="function"?o:m=>!0,_=i(m=>RI(m,l),"shouldAttachHeadersWithTargets"),b={};r&&(t.addEventProcessor(m=>(m.type==="transaction"&&m.spans&&m.spans.forEach(w=>{if(w.op==="http.client"){const x=Bo.get(w.span_id);x&&(w.timestamp=x/1e3,Bo.delete(w.span_id))}}),m)),s&&iy(m=>{if(m.response){const w=Fu.get(m.response);w&&m.endTimestamp&&Bo.set(w,m.endTimestamp)}}),Kf(m=>{const w=FE(m,f,_,b);if(m.response&&m.fetchData.__span&&Fu.set(m.response,m.fetchData.__span),w){const x=Wp(m.fetchData.url),q=x?ar(x).host:void 0;w.setAttributes({"http.url":x,"server.address":q})}a&&w&&Nu(w)})),n&&Xd(m=>{const w=LI(m,f,_,b);a&&w&&Nu(w)})}i(xI,"instrumentOutgoingRequests");function kI(t){return t.entryType==="resource"&&"initiatorType"in t&&typeof t.nextHopProtocol=="string"&&(t.initiatorType==="fetch"||t.initiatorType==="xmlhttprequest")}i(kI,"isPerformanceResourceTiming");function Nu(t){const{url:e}=ot(t).data||{};if(!e||typeof e!="string")return;const r=Br("resource",({entries:n})=>{n.forEach(s=>{kI(s)&&s.name.endsWith(e)&&(OI(s).forEach(a=>t.setAttribute(...a)),setTimeout(r))})})}i(Nu,"addHTTPTimings");function CI(t){let e="unknown",r="unknown",n="";for(const s of t){if(s==="/"){[e,r]=t.split("/");break}if(!isNaN(Number(s))){e=n==="h"?"http":n,r=t.split(n)[1];break}n+=s}return n===t&&(e=n),{name:e,version:r}}i(CI,"extractNetworkProtocol");function un(t=0){return((Dt||performance.timeOrigin)+t)/1e3}i(un,"getAbsoluteTime");function OI(t){const{name:e,version:r}=CI(t.nextHopProtocol),n=[];return n.push(["network.protocol.version",r],["network.protocol.name",e]),Dt?[...n,["http.request.redirect_start",un(t.redirectStart)],["http.request.fetch_start",un(t.fetchStart)],["http.request.domain_lookup_start",un(t.domainLookupStart)],["http.request.domain_lookup_end",un(t.domainLookupEnd)],["http.request.connect_start",un(t.connectStart)],["http.request.secure_connection_start",un(t.secureConnectionStart)],["http.request.connection_end",un(t.connectEnd)],["http.request.request_start",un(t.requestStart)],["http.request.response_start",un(t.responseStart)],["http.request.response_end",un(t.responseEnd)]]:n}i(OI,"resourceTimingEntryToSpanData");function RI(t,e){const r=Ge.location&&Ge.location.href;if(r){let n,s;try{n=new URL(t,r),s=new URL(r).origin}catch{return!1}const o=n.origin===s;return e?$n(n.toString(),e)||o&&$n(n.pathname,e):o}else{const n=!!t.match(/^\/(?!\/)/);return e?$n(t,e):n}}i(RI,"shouldAttachHeaders");function LI(t,e,r,n){const s=t.xhr,o=s&&s[sr];if(!s||s.__sentry_own_request__||!o)return;const a=Rn()&&e(o.url);if(t.endTimestamp&&a){const w=s.__sentry_xhr_span_id__;if(!w)return;const x=n[w];x&&o.status_code!==void 0&&(fd(x,o.status_code),x.end(),delete n[w]);return}const l=Wp(o.url),f=l?ar(l).host:void 0,_=!!kt(),b=a&&_?Zn({name:`${o.method} ${o.url}`,attributes:{type:"xhr","http.method":o.method,"http.url":l,url:o.url,"server.address":f,[Tt]:"auto.http.browser",[fr]:"http.client"}}):new Jr;s.__sentry_xhr_span_id__=b.spanContext().spanId,n[s.__sentry_xhr_span_id__]=b;const m=et();return s.setRequestHeader&&r(o.url)&&m&&FI(s,m,Rn()&&_?b:void 0),b}i(LI,"xhrCallback");function FI(t,e,r){const n=dt(),s=Qt(),{traceId:o,spanId:a,sampled:l,dsc:f}={...s.getPropagationContext(),...n.getPropagationContext()},_=r&&Rn()?hd(r):Ya(o,a,l),b=id(f||(r?Yn(r):oo(o,e)));NI(t,_,b)}i(FI,"addTracingHeadersToXhrRequest");function NI(t,e,r){try{t.setRequestHeader("sentry-trace",e),r&&t.setRequestHeader(vr,r)}catch{}}i(NI,"setHeaderOnXhr");function Wp(t){try{return new URL(t,Ge.location.origin).href}catch{return}}i(Wp,"getFullURL");function PI(){Ge&&Ge.document?Ge.document.addEventListener("visibilitychange",()=>{const t=kt();if(!t)return;const e=xt(t);if(Ge.document.hidden&&e){const r="cancelled",{op:n,status:s}=ot(e);sn&&Ie.log(`[Tracing] Transaction: ${r} -> since tab moved to the background, op: ${n}`),s||e.setStatus({code:It,message:r}),e.setAttribute("sentry.cancellation_reason","document.hidden"),e.end()}}):sn&&Ie.warn("[Tracing] Could not set up background tab detection due to lack of global document")}i(PI,"registerBackgroundTabDetection");const DI="BrowserTracing",MI={...di,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,_experiments:{},...mi},BI=i((t={})=>{ab();const{enableInp:e,enableLongTask:r,enableLongAnimationFrame:n,_experiments:{enableInteractions:s,enableStandaloneClsSpans:o},beforeStartSpan:a,idleTimeout:l,finalTimeout:f,childSpanTimeout:_,markBackgroundSpan:b,traceFetch:m,traceXHR:w,trackFetchStreamPerformance:x,shouldCreateSpanForRequest:q,enableHTTPTimings:R,instrumentPageLoad:U,instrumentNavigation:j}={...MI,...t},ae=RS({recordClsStandaloneSpans:o||!1});e&&nw(),n&&rt.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?FS():r&&LS(),s&&NS();const fe={name:void 0,source:void 0};function ge(Se,te){const ne=te.op==="pageload",M=a?a(te):te,J=M.attributes||{};te.name!==M.name&&(J[An]="custom",M.attributes=J),fe.name=M.name,fe.source=J[An];const P=vd(M,{idleTimeout:l,finalTimeout:f,childSpanTimeout:_,disableAutoFinish:ne,beforeSpanEnd:ce=>{ae(),US(ce,{recordClsOnPageloadSpan:!o})}});function X(){["interactive","complete"].includes(Ge.document.readyState)&&Se.emit("idleSpanEnableAutoFinish",P)}return i(X,"emitFinish"),ne&&Ge.document&&(Ge.document.addEventListener("readystatechange",()=>{X()}),X()),P}return i(ge,"_createRouteSpan"),{name:DI,afterAllSetup(Se){let te,ne=Ge.location&&Ge.location.href;Se.on("startNavigationSpan",M=>{et()===Se&&(te&&!ot(te).timestamp&&(sn&&Ie.log(`[Tracing] Finishing current root span with op: ${ot(te).op}`),te.end()),te=ge(Se,{op:"navigation",...M}))}),Se.on("startPageLoadSpan",(M,J={})=>{if(et()!==Se)return;te&&!ot(te).timestamp&&(sn&&Ie.log(`[Tracing] Finishing current root span with op: ${ot(te).op}`),te.end());const P=J.sentryTrace||Pu("sentry-trace"),X=J.baggage||Pu("baggage"),ce=xy(P,X);dt().setPropagationContext(ce),te=ge(Se,{op:"pageload",...M})}),Se.on("spanEnd",M=>{const J=ot(M).op;if(M!==xt(M)||J!=="navigation"&&J!=="pageload")return;const P=dt(),X=P.getPropagationContext();P.setPropagationContext({...X,sampled:X.sampled!==void 0?X.sampled:_r(M),dsc:X.dsc||Yn(M)})}),Ge.location&&(U&&UI(Se,{name:Ge.location.pathname,startTime:Dt?Dt/1e3:void 0,attributes:{[An]:"url",[Tt]:"auto.pageload.browser"}}),j&&co(({to:M,from:J})=>{if(J===void 0&&ne&&ne.indexOf(M)!==-1){ne=void 0;return}J!==M&&(ne=void 0,jI(Se,{name:Ge.location.pathname,attributes:{[An]:"url",[Tt]:"auto.navigation.browser"}}))})),b&&PI(),s&&HI(l,f,_,fe),e&&sw(),xI(Se,{traceFetch:m,traceXHR:w,trackFetchStreamPerformance:x,tracePropagationTargets:Se.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:q,enableHTTPTimings:R})}}},"browserTracingIntegration");function UI(t,e,r){t.emit("startPageLoadSpan",e,r),dt().setTransactionName(e.name);const n=kt();return(n&&ot(n).op)==="pageload"?n:void 0}i(UI,"startBrowserTracingPageLoadSpan");function jI(t,e){Qt().setPropagationContext(ki()),dt().setPropagationContext(ki()),t.emit("startNavigationSpan",e),dt().setTransactionName(e.name);const r=kt();return(r&&ot(r).op)==="navigation"?r:void 0}i(jI,"startBrowserTracingNavigationSpan");function Pu(t){const e=Hg(`meta[name=${t}]`);return e?e.getAttribute("content"):void 0}i(Pu,"getMetaContent");function HI(t,e,r,n){let s;const o=i(()=>{const a="ui.action.click",l=kt(),f=l&&xt(l);if(f){const _=ot(f).op;if(["navigation","pageload"].includes(_)){sn&&Ie.warn(`[Tracing] Did not create ${a} span because a pageload or navigation span is in progress.`);return}}if(s&&(s.setAttribute(ua,"interactionInterrupted"),s.end(),s=void 0),!n.name){sn&&Ie.warn(`[Tracing] Did not create ${a} transaction because _latestRouteName is missing.`);return}s=vd({name:n.name,op:a,attributes:{[An]:n.source||"url"}},{idleTimeout:t,finalTimeout:e,childSpanTimeout:r})},"registerInteractionTransaction");Ge.document&&addEventListener("click",o,{once:!1,capture:!0})}i(HI,"registerInteractionListener");var $p={exports:{}},tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ps=Symbol.for("react.element"),zI=Symbol.for("react.portal"),WI=Symbol.for("react.fragment"),$I=Symbol.for("react.strict_mode"),QI=Symbol.for("react.profiler"),GI=Symbol.for("react.provider"),VI=Symbol.for("react.context"),JI=Symbol.for("react.forward_ref"),KI=Symbol.for("react.suspense"),XI=Symbol.for("react.memo"),YI=Symbol.for("react.lazy"),Du=Symbol.iterator;function ZI(t){return t===null||typeof t!="object"?null:(t=Du&&t[Du]||t["@@iterator"],typeof t=="function"?t:null)}i(ZI,"A");var Qp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gp=Object.assign,Vp={};function Zr(t,e,r){this.props=t,this.context=e,this.refs=Vp,this.updater=r||Qp}i(Zr,"E");Zr.prototype.isReactComponent={};Zr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jp(){}i(Jp,"F");Jp.prototype=Zr.prototype;function qc(t,e,r){this.props=t,this.context=e,this.refs=Vp,this.updater=r||Qp}i(qc,"G");var xc=qc.prototype=new Jp;xc.constructor=qc;Gp(xc,Zr.prototype);xc.isPureReactComponent=!0;var Mu=Array.isArray,Kp=Object.prototype.hasOwnProperty,kc={current:null},Xp={key:!0,ref:!0,__self:!0,__source:!0};function Yp(t,e,r){var n,s={},o=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)Kp.call(e,n)&&!Xp.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var f=Array(l),_=0;_<l;_++)f[_]=arguments[_+2];s.children=f}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Ps,type:t,key:o,ref:a,props:s,_owner:kc.current}}i(Yp,"M");function eT(t,e){return{$$typeof:Ps,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}i(eT,"N");function Cc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ps}i(Cc,"O");function tT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}i(tT,"escape");var Bu=/\/+/g;function Uo(t,e){return typeof t=="object"&&t!==null&&t.key!=null?tT(""+t.key):e.toString(36)}i(Uo,"Q");function gi(t,e,r,n,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Ps:case zI:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+Uo(a,0):n,Mu(s)?(r="",t!=null&&(r=t.replace(Bu,"$&/")+"/"),gi(s,e,r,"",function(_){return _})):s!=null&&(Cc(s)&&(s=eT(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Bu,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",Mu(t))for(var l=0;l<t.length;l++){o=t[l];var f=n+Uo(o,l);a+=gi(o,e,r,f,s)}else if(f=ZI(t),typeof f=="function")for(t=f.call(t),l=0;!(o=t.next()).done;)o=o.value,f=n+Uo(o,l++),a+=gi(o,e,r,f,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}i(gi,"R");function ri(t,e,r){if(t==null)return t;var n=[],s=0;return gi(t,n,"","",function(o){return e.call(r,o,s++)}),n}i(ri,"S");function nT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}i(nT,"T");var Mt={current:null},yi={transition:null},rT={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:yi,ReactCurrentOwner:kc};tt.Children={map:ri,forEach:function(t,e,r){ri(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return ri(t,function(){e++}),e},toArray:function(t){return ri(t,function(e){return e})||[]},only:function(t){if(!Cc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};tt.Component=Zr;tt.Fragment=WI;tt.Profiler=QI;tt.PureComponent=qc;tt.StrictMode=$I;tt.Suspense=KI;tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=rT;tt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Gp({},t.props),s=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=kc.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(f in e)Kp.call(e,f)&&!Xp.hasOwnProperty(f)&&(n[f]=e[f]===void 0&&l!==void 0?l[f]:e[f])}var f=arguments.length-2;if(f===1)n.children=r;else if(1<f){l=Array(f);for(var _=0;_<f;_++)l[_]=arguments[_+2];n.children=l}return{$$typeof:Ps,type:t.type,key:s,ref:o,props:n,_owner:a}};tt.createContext=function(t){return t={$$typeof:VI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:GI,_context:t},t.Consumer=t};tt.createElement=Yp;tt.createFactory=function(t){var e=Yp.bind(null,t);return e.type=t,e};tt.createRef=function(){return{current:null}};tt.forwardRef=function(t){return{$$typeof:JI,render:t}};tt.isValidElement=Cc;tt.lazy=function(t){return{$$typeof:YI,_payload:{_status:-1,_result:t},_init:nT}};tt.memo=function(t,e){return{$$typeof:XI,type:t,compare:e===void 0?null:e}};tt.startTransition=function(t){var e=yi.transition;yi.transition={};try{t()}finally{yi.transition=e}};tt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};tt.useCallback=function(t,e){return Mt.current.useCallback(t,e)};tt.useContext=function(t){return Mt.current.useContext(t)};tt.useDebugValue=function(){};tt.useDeferredValue=function(t){return Mt.current.useDeferredValue(t)};tt.useEffect=function(t,e){return Mt.current.useEffect(t,e)};tt.useId=function(){return Mt.current.useId()};tt.useImperativeHandle=function(t,e,r){return Mt.current.useImperativeHandle(t,e,r)};tt.useInsertionEffect=function(t,e){return Mt.current.useInsertionEffect(t,e)};tt.useLayoutEffect=function(t,e){return Mt.current.useLayoutEffect(t,e)};tt.useMemo=function(t,e){return Mt.current.useMemo(t,e)};tt.useReducer=function(t,e,r){return Mt.current.useReducer(t,e,r)};tt.useRef=function(t){return Mt.current.useRef(t)};tt.useState=function(t){return Mt.current.useState(t)};tt.useSyncExternalStore=function(t,e,r){return Mt.current.useSyncExternalStore(t,e,r)};tt.useTransition=function(){return Mt.current.useTransition()};tt.version="18.2.0";$p.exports=tt;var sT=$p.exports;function iT(t){const e={...t};return Od(e,"react"),oc("react",{version:sT.version}),Yw(e)}i(iT,"init$1");var Zp=(t=>(t[t.UnsupportedFormat=0]="UnsupportedFormat",t[t.Corrupted=1]="Corrupted",t[t.Unknown=2]="Unknown",t))(Zp||{});const oT={0:["CameraMetadataException"],1:["RawDecoderException","TiffParserException","RawParserException"],2:[]};function aT(t){if(!(t instanceof WebAssembly.RuntimeError))return 2;const e=t.message.toLowerCase(),r=Number(Object.entries(oT).find(([n,s])=>s.some(o=>e.includes(o.toLowerCase())))?.[0]);return Number.isInteger(r)?r:2}i(aT,"classifyRawError");var cT={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}i(n,"Events"),Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(f,_,b){this.fn=f,this.context=_,this.once=b||!1}i(s,"EE");function o(f,_,b,m,w){if(typeof b!="function")throw new TypeError("The listener must be a function");var x=new s(b,m||f,w),q=r?r+_:_;return f._events[q]?f._events[q].fn?f._events[q]=[f._events[q],x]:f._events[q].push(x):(f._events[q]=x,f._eventsCount++),f}i(o,"addListener");function a(f,_){--f._eventsCount===0?f._events=new n:delete f._events[_]}i(a,"clearEvent");function l(){this._events=new n,this._eventsCount=0}i(l,"EventEmitter"),l.prototype.eventNames=i(function(){var _=[],b,m;if(this._eventsCount===0)return _;for(m in b=this._events)e.call(b,m)&&_.push(r?m.slice(1):m);return Object.getOwnPropertySymbols?_.concat(Object.getOwnPropertySymbols(b)):_},"eventNames"),l.prototype.listeners=i(function(_){var b=r?r+_:_,m=this._events[b];if(!m)return[];if(m.fn)return[m.fn];for(var w=0,x=m.length,q=new Array(x);w<x;w++)q[w]=m[w].fn;return q},"listeners"),l.prototype.listenerCount=i(function(_){var b=r?r+_:_,m=this._events[b];return m?m.fn?1:m.length:0},"listenerCount"),l.prototype.emit=i(function(_,b,m,w,x,q){var R=r?r+_:_;if(!this._events[R])return!1;var U=this._events[R],j=arguments.length,ae,fe;if(U.fn){switch(U.once&&this.removeListener(_,U.fn,void 0,!0),j){case 1:return U.fn.call(U.context),!0;case 2:return U.fn.call(U.context,b),!0;case 3:return U.fn.call(U.context,b,m),!0;case 4:return U.fn.call(U.context,b,m,w),!0;case 5:return U.fn.call(U.context,b,m,w,x),!0;case 6:return U.fn.call(U.context,b,m,w,x,q),!0}for(fe=1,ae=new Array(j-1);fe<j;fe++)ae[fe-1]=arguments[fe];U.fn.apply(U.context,ae)}else{var ge=U.length,Se;for(fe=0;fe<ge;fe++)switch(U[fe].once&&this.removeListener(_,U[fe].fn,void 0,!0),j){case 1:U[fe].fn.call(U[fe].context);break;case 2:U[fe].fn.call(U[fe].context,b);break;case 3:U[fe].fn.call(U[fe].context,b,m);break;case 4:U[fe].fn.call(U[fe].context,b,m,w);break;default:if(!ae)for(Se=1,ae=new Array(j-1);Se<j;Se++)ae[Se-1]=arguments[Se];U[fe].fn.apply(U[fe].context,ae)}}return!0},"emit"),l.prototype.on=i(function(_,b,m){return o(this,_,b,m,!1)},"on"),l.prototype.once=i(function(_,b,m){return o(this,_,b,m,!0)},"once"),l.prototype.removeListener=i(function(_,b,m,w){var x=r?r+_:_;if(!this._events[x])return this;if(!b)return a(this,x),this;var q=this._events[x];if(q.fn)q.fn===b&&(!w||q.once)&&(!m||q.context===m)&&a(this,x);else{for(var R=0,U=[],j=q.length;R<j;R++)(q[R].fn!==b||w&&!q[R].once||m&&q[R].context!==m)&&U.push(q[R]);U.length?this._events[x]=U.length===1?U[0]:U:a(this,x)}return this},"removeListener"),l.prototype.removeAllListeners=i(function(_){var b;return _?(b=r?r+_:_,this._events[b]&&a(this,b)):(this._events=new n,this._eventsCount=0),this},"removeAllListeners"),l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,t.exports=l})(cT);const lT=i(t=>t instanceof Error&&t.name==="NotFoundError","isNotFoundError"),uT=i(t=>t instanceof SyntaxError&&t.message.includes("JSON"),"isJsonParseError"),fT=i(t=>aT(t)===Zp.Corrupted,"isCorruptedFileError"),Uu=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope;iT({enabled:!0,environment:"production",release:"2.2.10+c54b50e",dsn:"https://4890aafc8e8dce271cb8169b5dfde882@o239071.ingest.us.sentry.io/4508455574568960",ignoreErrors:[/Failed to register a ServiceWorker/i,/Operation has been aborted/i,/Unable to preload CSS/i,/Failed to fetch dynamically imported module/i],beforeSend(t){return t.exception?.values?.some(e=>fT(e.value))?null:t},integrations:[ep(),BI({instrumentPageLoad:!Uu,instrumentNavigation:!Uu}),TI({blockAllMedia:!1,maskAllInputs:!1,maskAllText:!1,networkDetailAllowUrls:[ml.basePaths.projects,ml.basePaths.presets]})],sampleRate:.5,tracesSampleRate:.01,tracePropagationTargets:["localhost",/^https:\/\/polarrnext\.com/,/^https:\/\/polarr-next(.*)\.vercel\.app/],replaysSessionSampleRate:0,replaysOnErrorSampleRate:1});class dT{static{i(this,"Peer")}dependencies={};constructor(){this.constructor.name}setSentryContext(e){e.type==="user"?Wb(e.data):oc(e.type,e.data),this.constructor.name,e.type}disableSentry(){dt().getClient()?.close(),this.constructor.name}static broadcast(){Fa(new this);let e="INIT";const r=self._sentryDebugIds;r&&typeof r=="object"&&(e+=`|SENTRY-DEBUG-ID-MAP->${JSON.stringify(r)}`),postMessage(e)}onConnected(){}updateDebugIdMap(e){const r=JSON.parse(e);typeof r=="object"&&N_(r)}getDependencyPort(e){const r=this.dependencies[e]?.port;if(!r)throw`[Peer] Missing dependency port ${e}.`;return r}getDependency(e){const r=this.dependencies[e]?.remote;if(!r)throw`[Peer] Missing dependency ${e}.`;return r}registerDependencies(e){for(const[r,n]of Object.entries(e))this.dependencies[r]={remote:ef(n),port:n}}}var Oc=(()=>{var t=import.meta.url;return function(e){var r=e||{},n=typeof r<"u"?r:{},s,o;n.ready=new Promise(function(u,c){s=u,o=c});const a=globalThis.sqlite3InitModuleState||Object.assign(Object.create(null),{debugModule:()=>{}});delete globalThis.sqlite3InitModuleState,a.debugModule("globalThis.location =",globalThis.location);const l="emscripten-bug-17951";n[l]=i(function u(c,p){c.env.foo=function(){};const d=n.locateFile(u.uri,typeof w>"u"?"":w);a.debugModule("instantiateWasm() uri =",d);const h=i(()=>fetch(d,{credentials:"same-origin"}),"wfetch");return(WebAssembly.instantiateStreaming?async()=>WebAssembly.instantiateStreaming(h(),c).then(C=>p(C.instance,C.module)):async()=>h().then(C=>C.arrayBuffer()).then(C=>WebAssembly.instantiate(C,c)).then(C=>p(C.instance,C.module)))(),{}},"callee"),n[l].uri="sqlite3.wasm";var f=Object.assign({},n),_="./this.program",b=typeof window=="object",m=typeof importScripts=="function";typeof process=="object"&&typeof process.versions=="object"&&process.versions.node;var w="";function x(u){return n.locateFile?n.locateFile(u,w):w+u}i(x,"locateFile");var q,R,U;(b||m)&&(m?w=self.location.href:typeof document<"u"&&document.currentScript&&(w=document.currentScript.src),t&&(w=t),w.indexOf("blob:")!==0?w=w.substr(0,w.replace(/[?#].*/,"").lastIndexOf("/")+1):w="",q=i(u=>{var c=new XMLHttpRequest;return c.open("GET",u,!1),c.send(null),c.responseText},"read_"),m&&(U=i(u=>{var c=new XMLHttpRequest;return c.open("GET",u,!1),c.responseType="arraybuffer",c.send(null),new Uint8Array(c.response)},"readBinary")),R=i((u,c,p)=>{var d=new XMLHttpRequest;d.open("GET",u,!0),d.responseType="arraybuffer",d.onload=()=>{if(d.status==200||d.status==0&&d.response){c(d.response);return}p()},d.onerror=p,d.send(null)},"readAsync"));var j=n.print||console.log.bind(console),ae=n.printErr||console.warn.bind(console);Object.assign(n,f),f=null,n.arguments&&n.arguments,n.thisProgram&&(_=n.thisProgram),n.quit&&n.quit;var fe;n.wasmBinary&&(fe=n.wasmBinary),n.noExitRuntime,typeof WebAssembly!="object"&&Ut("no native wasm support detected");var ge,Se=!1;function te(u,c){u||Ut(c)}i(te,"assert");var ne=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function M(u,c,p){for(var d=c+p,h=c;u[h]&&!(h>=d);)++h;if(h-c>16&&u.buffer&&ne)return ne.decode(u.subarray(c,h));for(var y="";c<h;){var C=u[c++];if(!(C&128)){y+=String.fromCharCode(C);continue}var L=u[c++]&63;if((C&224)==192){y+=String.fromCharCode((C&31)<<6|L);continue}var Y=u[c++]&63;if((C&240)==224?C=(C&15)<<12|L<<6|Y:C=(C&7)<<18|L<<12|Y<<6|u[c++]&63,C<65536)y+=String.fromCharCode(C);else{var ee=C-65536;y+=String.fromCharCode(55296|ee>>10,56320|ee&1023)}}return y}i(M,"UTF8ArrayToString");function J(u,c){return u?M(we,u,c):""}i(J,"UTF8ToString");function P(u,c,p,d){if(!(d>0))return 0;for(var h=p,y=p+d-1,C=0;C<u.length;++C){var L=u.charCodeAt(C);if(L>=55296&&L<=57343){var Y=u.charCodeAt(++C);L=65536+((L&1023)<<10)|Y&1023}if(L<=127){if(p>=y)break;c[p++]=L}else if(L<=2047){if(p+1>=y)break;c[p++]=192|L>>6,c[p++]=128|L&63}else if(L<=65535){if(p+2>=y)break;c[p++]=224|L>>12,c[p++]=128|L>>6&63,c[p++]=128|L&63}else{if(p+3>=y)break;c[p++]=240|L>>18,c[p++]=128|L>>12&63,c[p++]=128|L>>6&63,c[p++]=128|L&63}}return c[p]=0,p-h}i(P,"stringToUTF8Array");function X(u,c,p){return P(u,we,c,p)}i(X,"stringToUTF8");function ce(u){for(var c=0,p=0;p<u.length;++p){var d=u.charCodeAt(p);d<=127?c++:d<=2047?c+=2:d>=55296&&d<=57343?(c+=4,++p):c+=3}return c}i(ce,"lengthBytesUTF8");var Ae,we,ct,be,Qe;function Xe(){var u=ge.buffer;n.HEAP8=Ae=new Int8Array(u),n.HEAP16=ct=new Int16Array(u),n.HEAP32=be=new Int32Array(u),n.HEAPU8=we=new Uint8Array(u),n.HEAPU16=new Uint16Array(u),n.HEAPU32=Qe=new Uint32Array(u),n.HEAPF32=new Float32Array(u),n.HEAPF64=new Float64Array(u),n.HEAP64=new BigInt64Array(u),n.HEAPU64=new BigUint64Array(u)}i(Xe,"updateMemoryViews");var wt=n.INITIAL_MEMORY||16777216;n.wasmMemory?ge=n.wasmMemory:ge=new WebAssembly.Memory({initial:wt/65536,maximum:2147483648/65536}),Xe(),wt=ge.buffer.byteLength;var nt=[],Yt=[],Ct=[];function Gt(){if(n.preRun)for(typeof n.preRun=="function"&&(n.preRun=[n.preRun]);n.preRun.length;)Fn(n.preRun.shift());ut(nt)}i(Gt,"preRun");function on(){!n.noFSInit&&!g.init.initialized&&g.init(),g.ignorePermissions=!1,ut(Yt)}i(on,"initRuntime");function Ln(){if(n.postRun)for(typeof n.postRun=="function"&&(n.postRun=[n.postRun]);n.postRun.length;)gn(n.postRun.shift());ut(Ct)}i(Ln,"postRun");function Fn(u){nt.unshift(u)}i(Fn,"addOnPreRun");function an(u){Yt.unshift(u)}i(an,"addOnInit");function gn(u){Ct.unshift(u)}i(gn,"addOnPostRun");var Bt=0,cn=null;function go(u){return u}i(go,"getUniqueRunDependency");function ts(u){Bt++,n.monitorRunDependencies&&n.monitorRunDependencies(Bt)}i(ts,"addRunDependency");function gr(u){if(Bt--,n.monitorRunDependencies&&n.monitorRunDependencies(Bt),Bt==0&&cn){var c=cn;cn=null,c()}}i(gr,"removeRunDependency");function Ut(u){n.onAbort&&n.onAbort(u),u="Aborted("+u+")",ae(u),Se=!0,u+=". Build with -sASSERTIONS for more info.";var c=new WebAssembly.RuntimeError(u);throw o(c),c}i(Ut,"abort");var yn="data:application/octet-stream;base64,";function yr(u){return u.startsWith(yn)}i(yr,"isDataURI");var Ot;n.locateFile?(Ot="sqlite3.wasm",yr(Ot)||(Ot=x(Ot))):Ot=new URL("/assets/sqlite3-BVdqaZCJ.wasm",import.meta.url).href;function er(u){try{if(u==Ot&&fe)return new Uint8Array(fe);if(U)return U(u);throw"both async and sync fetching of the wasm failed"}catch(c){Ut(c)}}i(er,"getBinary");function ns(){return!fe&&(b||m)&&typeof fetch=="function"?fetch(Ot,{credentials:"same-origin"}).then(function(u){if(!u.ok)throw"failed to load wasm binary file at '"+Ot+"'";return u.arrayBuffer()}).catch(function(){return er(Ot)}):Promise.resolve().then(function(){return er(Ot)})}i(ns,"getBinaryPromise");function at(){var u={env:Wc,wasi_snapshot_preview1:Wc};function c(C,L){var Y=C.exports;n.asm=Y,n.asm.__indirect_function_table,an(n.asm.__wasm_call_ctors),gr()}i(c,"receiveInstance"),ts();function p(C){c(C.instance)}i(p,"receiveInstantiationResult");function d(C){return ns().then(function(L){return WebAssembly.instantiate(L,u)}).then(function(L){return L}).then(C,function(L){ae("failed to asynchronously prepare wasm: "+L),Ut(L)})}i(d,"instantiateArrayBuffer");function h(){return!fe&&typeof WebAssembly.instantiateStreaming=="function"&&!yr(Ot)&&typeof fetch=="function"?fetch(Ot,{credentials:"same-origin"}).then(function(C){var L=WebAssembly.instantiateStreaming(C,u);return L.then(p,function(Y){return ae("wasm streaming compile failed: "+Y),ae("falling back to ArrayBuffer instantiation"),d(p)})}):d(p)}if(i(h,"instantiateAsync"),n.instantiateWasm)try{var y=n.instantiateWasm(u,c);return y}catch(C){ae("Module.instantiateWasm callback failed with error: "+C),o(C)}return h().catch(o),{}}i(at,"createWasm");var je,De;function ut(u){for(;u.length>0;)u.shift()(n)}i(ut,"callRuntimeCallbacks");var Le={isAbs:u=>u.charAt(0)==="/",splitPath:u=>{var c=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;return c.exec(u).slice(1)},normalizeArray:(u,c)=>{for(var p=0,d=u.length-1;d>=0;d--){var h=u[d];h==="."?u.splice(d,1):h===".."?(u.splice(d,1),p++):p&&(u.splice(d,1),p--)}if(c)for(;p;p--)u.unshift("..");return u},normalize:u=>{var c=Le.isAbs(u),p=u.substr(-1)==="/";return u=Le.normalizeArray(u.split("/").filter(d=>!!d),!c).join("/"),!u&&!c&&(u="."),u&&p&&(u+="/"),(c?"/":"")+u},dirname:u=>{var c=Le.splitPath(u),p=c[0],d=c[1];return!p&&!d?".":(d&&(d=d.substr(0,d.length-1)),p+d)},basename:u=>{if(u==="/")return"/";u=Le.normalize(u),u=u.replace(/\/$/,"");var c=u.lastIndexOf("/");return c===-1?u:u.substr(c+1)},join:function(){var u=Array.prototype.slice.call(arguments);return Le.normalize(u.join("/"))},join2:(u,c)=>Le.normalize(u+"/"+c)};function bn(){if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function"){var u=new Uint8Array(1);return()=>(crypto.getRandomValues(u),u[0])}else return()=>Ut("randomDevice")}i(bn,"getRandomDevice");var Zt={resolve:function(){for(var u="",c=!1,p=arguments.length-1;p>=-1&&!c;p--){var d=p>=0?arguments[p]:g.cwd();if(typeof d!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!d)return"";u=d+"/"+u,c=Le.isAbs(d)}return u=Le.normalizeArray(u.split("/").filter(h=>!!h),!c).join("/"),(c?"/":"")+u||"."},relative:(u,c)=>{u=Zt.resolve(u).substr(1),c=Zt.resolve(c).substr(1);function p(ee){for(var de=0;de<ee.length&&ee[de]==="";de++);for(var ye=ee.length-1;ye>=0&&ee[ye]==="";ye--);return de>ye?[]:ee.slice(de,ye-de+1)}i(p,"trim");for(var d=p(u.split("/")),h=p(c.split("/")),y=Math.min(d.length,h.length),C=y,L=0;L<y;L++)if(d[L]!==h[L]){C=L;break}for(var Y=[],L=C;L<d.length;L++)Y.push("..");return Y=Y.concat(h.slice(C)),Y.join("/")}};function yo(u,c,p){var d=p>0?p:ce(u)+1,h=new Array(d),y=P(u,h,0,h.length);return c&&(h.length=y),h}i(yo,"intArrayFromString");var tr={ttys:[],init:function(){},shutdown:function(){},register:function(u,c){tr.ttys[u]={input:[],output:[],ops:c},g.registerDevice(u,tr.stream_ops)},stream_ops:{open:function(u){var c=tr.ttys[u.node.rdev];if(!c)throw new g.ErrnoError(43);u.tty=c,u.seekable=!1},close:function(u){u.tty.ops.fsync(u.tty)},fsync:function(u){u.tty.ops.fsync(u.tty)},read:function(u,c,p,d,h){if(!u.tty||!u.tty.ops.get_char)throw new g.ErrnoError(60);for(var y=0,C=0;C<d;C++){var L;try{L=u.tty.ops.get_char(u.tty)}catch{throw new g.ErrnoError(29)}if(L===void 0&&y===0)throw new g.ErrnoError(6);if(L==null)break;y++,c[p+C]=L}return y&&(u.node.timestamp=Date.now()),y},write:function(u,c,p,d,h){if(!u.tty||!u.tty.ops.put_char)throw new g.ErrnoError(60);try{for(var y=0;y<d;y++)u.tty.ops.put_char(u.tty,c[p+y])}catch{throw new g.ErrnoError(29)}return d&&(u.node.timestamp=Date.now()),y}},default_tty_ops:{get_char:function(u){if(!u.input.length){var c=null;if(typeof window<"u"&&typeof window.prompt=="function"?(c=window.prompt("Input: "),c!==null&&(c+=`
`)):typeof readline=="function"&&(c=readline(),c!==null&&(c+=`
`)),!c)return null;u.input=yo(c,!0)}return u.input.shift()},put_char:function(u,c){c===null||c===10?(j(M(u.output,0)),u.output=[]):c!=0&&u.output.push(c)},fsync:function(u){u.output&&u.output.length>0&&(j(M(u.output,0)),u.output=[])}},default_tty1_ops:{put_char:function(u,c){c===null||c===10?(ae(M(u.output,0)),u.output=[]):c!=0&&u.output.push(c)},fsync:function(u){u.output&&u.output.length>0&&(ae(M(u.output,0)),u.output=[])}}};function wh(u,c){return we.fill(0,u,u+c),u}i(wh,"zeroMemory");function vh(u,c){return Math.ceil(u/c)*c}i(vh,"alignMemory");function Bc(u){u=vh(u,65536);var c=Gc(65536,u);return c?wh(c,u):0}i(Bc,"mmapAlloc");var Ve={ops_table:null,mount:function(u){return Ve.createNode(null,"/",16895,0)},createNode:function(u,c,p,d){if(g.isBlkdev(p)||g.isFIFO(p))throw new g.ErrnoError(63);Ve.ops_table||(Ve.ops_table={dir:{node:{getattr:Ve.node_ops.getattr,setattr:Ve.node_ops.setattr,lookup:Ve.node_ops.lookup,mknod:Ve.node_ops.mknod,rename:Ve.node_ops.rename,unlink:Ve.node_ops.unlink,rmdir:Ve.node_ops.rmdir,readdir:Ve.node_ops.readdir,symlink:Ve.node_ops.symlink},stream:{llseek:Ve.stream_ops.llseek}},file:{node:{getattr:Ve.node_ops.getattr,setattr:Ve.node_ops.setattr},stream:{llseek:Ve.stream_ops.llseek,read:Ve.stream_ops.read,write:Ve.stream_ops.write,allocate:Ve.stream_ops.allocate,mmap:Ve.stream_ops.mmap,msync:Ve.stream_ops.msync}},link:{node:{getattr:Ve.node_ops.getattr,setattr:Ve.node_ops.setattr,readlink:Ve.node_ops.readlink},stream:{}},chrdev:{node:{getattr:Ve.node_ops.getattr,setattr:Ve.node_ops.setattr},stream:g.chrdev_stream_ops}});var h=g.createNode(u,c,p,d);return g.isDir(h.mode)?(h.node_ops=Ve.ops_table.dir.node,h.stream_ops=Ve.ops_table.dir.stream,h.contents={}):g.isFile(h.mode)?(h.node_ops=Ve.ops_table.file.node,h.stream_ops=Ve.ops_table.file.stream,h.usedBytes=0,h.contents=null):g.isLink(h.mode)?(h.node_ops=Ve.ops_table.link.node,h.stream_ops=Ve.ops_table.link.stream):g.isChrdev(h.mode)&&(h.node_ops=Ve.ops_table.chrdev.node,h.stream_ops=Ve.ops_table.chrdev.stream),h.timestamp=Date.now(),u&&(u.contents[c]=h,u.timestamp=h.timestamp),h},getFileDataAsTypedArray:function(u){return u.contents?u.contents.subarray?u.contents.subarray(0,u.usedBytes):new Uint8Array(u.contents):new Uint8Array(0)},expandFileStorage:function(u,c){var p=u.contents?u.contents.length:0;if(!(p>=c)){var d=1024*1024;c=Math.max(c,p*(p<d?2:1.125)>>>0),p!=0&&(c=Math.max(c,256));var h=u.contents;u.contents=new Uint8Array(c),u.usedBytes>0&&u.contents.set(h.subarray(0,u.usedBytes),0)}},resizeFileStorage:function(u,c){if(u.usedBytes!=c)if(c==0)u.contents=null,u.usedBytes=0;else{var p=u.contents;u.contents=new Uint8Array(c),p&&u.contents.set(p.subarray(0,Math.min(c,u.usedBytes))),u.usedBytes=c}},node_ops:{getattr:function(u){var c={};return c.dev=g.isChrdev(u.mode)?u.id:1,c.ino=u.id,c.mode=u.mode,c.nlink=1,c.uid=0,c.gid=0,c.rdev=u.rdev,g.isDir(u.mode)?c.size=4096:g.isFile(u.mode)?c.size=u.usedBytes:g.isLink(u.mode)?c.size=u.link.length:c.size=0,c.atime=new Date(u.timestamp),c.mtime=new Date(u.timestamp),c.ctime=new Date(u.timestamp),c.blksize=4096,c.blocks=Math.ceil(c.size/c.blksize),c},setattr:function(u,c){c.mode!==void 0&&(u.mode=c.mode),c.timestamp!==void 0&&(u.timestamp=c.timestamp),c.size!==void 0&&Ve.resizeFileStorage(u,c.size)},lookup:function(u,c){throw g.genericErrors[44]},mknod:function(u,c,p,d){return Ve.createNode(u,c,p,d)},rename:function(u,c,p){if(g.isDir(u.mode)){var d;try{d=g.lookupNode(c,p)}catch{}if(d)for(var h in d.contents)throw new g.ErrnoError(55)}delete u.parent.contents[u.name],u.parent.timestamp=Date.now(),u.name=p,c.contents[p]=u,c.timestamp=u.parent.timestamp,u.parent=c},unlink:function(u,c){delete u.contents[c],u.timestamp=Date.now()},rmdir:function(u,c){var p=g.lookupNode(u,c);for(var d in p.contents)throw new g.ErrnoError(55);delete u.contents[c],u.timestamp=Date.now()},readdir:function(u){var c=[".",".."];for(var p in u.contents)u.contents.hasOwnProperty(p)&&c.push(p);return c},symlink:function(u,c,p){var d=Ve.createNode(u,c,41471,0);return d.link=p,d},readlink:function(u){if(!g.isLink(u.mode))throw new g.ErrnoError(28);return u.link}},stream_ops:{read:function(u,c,p,d,h){var y=u.node.contents;if(h>=u.node.usedBytes)return 0;var C=Math.min(u.node.usedBytes-h,d);if(C>8&&y.subarray)c.set(y.subarray(h,h+C),p);else for(var L=0;L<C;L++)c[p+L]=y[h+L];return C},write:function(u,c,p,d,h,y){if(c.buffer===Ae.buffer&&(y=!1),!d)return 0;var C=u.node;if(C.timestamp=Date.now(),c.subarray&&(!C.contents||C.contents.subarray)){if(y)return C.contents=c.subarray(p,p+d),C.usedBytes=d,d;if(C.usedBytes===0&&h===0)return C.contents=c.slice(p,p+d),C.usedBytes=d,d;if(h+d<=C.usedBytes)return C.contents.set(c.subarray(p,p+d),h),d}if(Ve.expandFileStorage(C,h+d),C.contents.subarray&&c.subarray)C.contents.set(c.subarray(p,p+d),h);else for(var L=0;L<d;L++)C.contents[h+L]=c[p+L];return C.usedBytes=Math.max(C.usedBytes,h+d),d},llseek:function(u,c,p){var d=c;if(p===1?d+=u.position:p===2&&g.isFile(u.node.mode)&&(d+=u.node.usedBytes),d<0)throw new g.ErrnoError(28);return d},allocate:function(u,c,p){Ve.expandFileStorage(u.node,c+p),u.node.usedBytes=Math.max(u.node.usedBytes,c+p)},mmap:function(u,c,p,d,h){if(!g.isFile(u.node.mode))throw new g.ErrnoError(43);var y,C,L=u.node.contents;if(!(h&2)&&L.buffer===Ae.buffer)C=!1,y=L.byteOffset;else{if((p>0||p+c<L.length)&&(L.subarray?L=L.subarray(p,p+c):L=Array.prototype.slice.call(L,p,p+c)),C=!0,y=Bc(c),!y)throw new g.ErrnoError(48);Ae.set(L,y)}return{ptr:y,allocated:C}},msync:function(u,c,p,d,h){return Ve.stream_ops.write(u,c,0,d,p,!1),0}}};function Ah(u,c,p,d){var h=d?"":"al "+u;R(u,y=>{te(y,'Loading data file "'+u+'" failed (no arrayBuffer).'),c(new Uint8Array(y)),h&&gr()},y=>{if(p)p();else throw'Loading data file "'+u+'" failed.'}),h&&ts()}i(Ah,"asyncLoad");var g={root:null,mounts:[],devices:{},streams:[],nextInode:1,nameTable:null,currentPath:"/",initialized:!1,ignorePermissions:!0,ErrnoError:null,genericErrors:{},filesystems:null,syncFSRequests:0,lookupPath:(u,c={})=>{if(u=Zt.resolve(u),!u)return{path:"",node:null};var p={follow_mount:!0,recurse_count:0};if(c=Object.assign(p,c),c.recurse_count>8)throw new g.ErrnoError(32);for(var d=u.split("/").filter(ye=>!!ye),h=g.root,y="/",C=0;C<d.length;C++){var L=C===d.length-1;if(L&&c.parent)break;if(h=g.lookupNode(h,d[C]),y=Le.join2(y,d[C]),g.isMountpoint(h)&&(!L||L&&c.follow_mount)&&(h=h.mounted.root),!L||c.follow)for(var Y=0;g.isLink(h.mode);){var ee=g.readlink(y);y=Zt.resolve(Le.dirname(y),ee);var de=g.lookupPath(y,{recurse_count:c.recurse_count+1});if(h=de.node,Y++>40)throw new g.ErrnoError(32)}}return{path:y,node:h}},getPath:u=>{for(var c;;){if(g.isRoot(u)){var p=u.mount.mountpoint;return c?p[p.length-1]!=="/"?p+"/"+c:p+c:p}c=c?u.name+"/"+c:u.name,u=u.parent}},hashName:(u,c)=>{for(var p=0,d=0;d<c.length;d++)p=(p<<5)-p+c.charCodeAt(d)|0;return(u+p>>>0)%g.nameTable.length},hashAddNode:u=>{var c=g.hashName(u.parent.id,u.name);u.name_next=g.nameTable[c],g.nameTable[c]=u},hashRemoveNode:u=>{var c=g.hashName(u.parent.id,u.name);if(g.nameTable[c]===u)g.nameTable[c]=u.name_next;else for(var p=g.nameTable[c];p;){if(p.name_next===u){p.name_next=u.name_next;break}p=p.name_next}},lookupNode:(u,c)=>{var p=g.mayLookup(u);if(p)throw new g.ErrnoError(p,u);for(var d=g.hashName(u.id,c),h=g.nameTable[d];h;h=h.name_next){var y=h.name;if(h.parent.id===u.id&&y===c)return h}return g.lookup(u,c)},createNode:(u,c,p,d)=>{var h=new g.FSNode(u,c,p,d);return g.hashAddNode(h),h},destroyNode:u=>{g.hashRemoveNode(u)},isRoot:u=>u===u.parent,isMountpoint:u=>!!u.mounted,isFile:u=>(u&61440)===32768,isDir:u=>(u&61440)===16384,isLink:u=>(u&61440)===40960,isChrdev:u=>(u&61440)===8192,isBlkdev:u=>(u&61440)===24576,isFIFO:u=>(u&61440)===4096,isSocket:u=>(u&49152)===49152,flagModes:{r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090},modeStringToFlags:u=>{var c=g.flagModes[u];if(typeof c>"u")throw new Error("Unknown file open mode: "+u);return c},flagsToPermissionString:u=>{var c=["r","w","rw"][u&3];return u&512&&(c+="w"),c},nodePermissions:(u,c)=>g.ignorePermissions?0:c.includes("r")&&!(u.mode&292)||c.includes("w")&&!(u.mode&146)||c.includes("x")&&!(u.mode&73)?2:0,mayLookup:u=>{var c=g.nodePermissions(u,"x");return c||(u.node_ops.lookup?0:2)},mayCreate:(u,c)=>{try{var p=g.lookupNode(u,c);return 20}catch{}return g.nodePermissions(u,"wx")},mayDelete:(u,c,p)=>{var d;try{d=g.lookupNode(u,c)}catch(y){return y.errno}var h=g.nodePermissions(u,"wx");if(h)return h;if(p){if(!g.isDir(d.mode))return 54;if(g.isRoot(d)||g.getPath(d)===g.cwd())return 10}else if(g.isDir(d.mode))return 31;return 0},mayOpen:(u,c)=>u?g.isLink(u.mode)?32:g.isDir(u.mode)&&(g.flagsToPermissionString(c)!=="r"||c&512)?31:g.nodePermissions(u,g.flagsToPermissionString(c)):44,MAX_OPEN_FDS:4096,nextfd:(u=0,c=g.MAX_OPEN_FDS)=>{for(var p=u;p<=c;p++)if(!g.streams[p])return p;throw new g.ErrnoError(33)},getStream:u=>g.streams[u],createStream:(u,c,p)=>{g.FSStream||(g.FSStream=function(){this.shared={}},g.FSStream.prototype={},Object.defineProperties(g.FSStream.prototype,{object:{get:function(){return this.node},set:function(h){this.node=h}},isRead:{get:function(){return(this.flags&2097155)!==1}},isWrite:{get:function(){return(this.flags&2097155)!==0}},isAppend:{get:function(){return this.flags&1024}},flags:{get:function(){return this.shared.flags},set:function(h){this.shared.flags=h}},position:{get:function(){return this.shared.position},set:function(h){this.shared.position=h}}})),u=Object.assign(new g.FSStream,u);var d=g.nextfd(c,p);return u.fd=d,g.streams[d]=u,u},closeStream:u=>{g.streams[u]=null},chrdev_stream_ops:{open:u=>{var c=g.getDevice(u.node.rdev);u.stream_ops=c.stream_ops,u.stream_ops.open&&u.stream_ops.open(u)},llseek:()=>{throw new g.ErrnoError(70)}},major:u=>u>>8,minor:u=>u&255,makedev:(u,c)=>u<<8|c,registerDevice:(u,c)=>{g.devices[u]={stream_ops:c}},getDevice:u=>g.devices[u],getMounts:u=>{for(var c=[],p=[u];p.length;){var d=p.pop();c.push(d),p.push.apply(p,d.mounts)}return c},syncfs:(u,c)=>{typeof u=="function"&&(c=u,u=!1),g.syncFSRequests++,g.syncFSRequests>1&&ae("warning: "+g.syncFSRequests+" FS.syncfs operations in flight at once, probably just doing extra work");var p=g.getMounts(g.root.mount),d=0;function h(C){return g.syncFSRequests--,c(C)}i(h,"doCallback");function y(C){if(C)return y.errored?void 0:(y.errored=!0,h(C));++d>=p.length&&h(null)}i(y,"done"),p.forEach(C=>{if(!C.type.syncfs)return y(null);C.type.syncfs(C,u,y)})},mount:(u,c,p)=>{var d=p==="/",h=!p,y;if(d&&g.root)throw new g.ErrnoError(10);if(!d&&!h){var C=g.lookupPath(p,{follow_mount:!1});if(p=C.path,y=C.node,g.isMountpoint(y))throw new g.ErrnoError(10);if(!g.isDir(y.mode))throw new g.ErrnoError(54)}var L={type:u,opts:c,mountpoint:p,mounts:[]},Y=u.mount(L);return Y.mount=L,L.root=Y,d?g.root=Y:y&&(y.mounted=L,y.mount&&y.mount.mounts.push(L)),Y},unmount:u=>{var c=g.lookupPath(u,{follow_mount:!1});if(!g.isMountpoint(c.node))throw new g.ErrnoError(28);var p=c.node,d=p.mounted,h=g.getMounts(d);Object.keys(g.nameTable).forEach(C=>{for(var L=g.nameTable[C];L;){var Y=L.name_next;h.includes(L.mount)&&g.destroyNode(L),L=Y}}),p.mounted=null;var y=p.mount.mounts.indexOf(d);p.mount.mounts.splice(y,1)},lookup:(u,c)=>u.node_ops.lookup(u,c),mknod:(u,c,p)=>{var d=g.lookupPath(u,{parent:!0}),h=d.node,y=Le.basename(u);if(!y||y==="."||y==="..")throw new g.ErrnoError(28);var C=g.mayCreate(h,y);if(C)throw new g.ErrnoError(C);if(!h.node_ops.mknod)throw new g.ErrnoError(63);return h.node_ops.mknod(h,y,c,p)},create:(u,c)=>(c=c!==void 0?c:438,c&=4095,c|=32768,g.mknod(u,c,0)),mkdir:(u,c)=>(c=c!==void 0?c:511,c&=1023,c|=16384,g.mknod(u,c,0)),mkdirTree:(u,c)=>{for(var p=u.split("/"),d="",h=0;h<p.length;++h)if(p[h]){d+="/"+p[h];try{g.mkdir(d,c)}catch(y){if(y.errno!=20)throw y}}},mkdev:(u,c,p)=>(typeof p>"u"&&(p=c,c=438),c|=8192,g.mknod(u,c,p)),symlink:(u,c)=>{if(!Zt.resolve(u))throw new g.ErrnoError(44);var p=g.lookupPath(c,{parent:!0}),d=p.node;if(!d)throw new g.ErrnoError(44);var h=Le.basename(c),y=g.mayCreate(d,h);if(y)throw new g.ErrnoError(y);if(!d.node_ops.symlink)throw new g.ErrnoError(63);return d.node_ops.symlink(d,h,u)},rename:(u,c)=>{var p=Le.dirname(u),d=Le.dirname(c),h=Le.basename(u),y=Le.basename(c),C,L,Y;if(C=g.lookupPath(u,{parent:!0}),L=C.node,C=g.lookupPath(c,{parent:!0}),Y=C.node,!L||!Y)throw new g.ErrnoError(44);if(L.mount!==Y.mount)throw new g.ErrnoError(75);var ee=g.lookupNode(L,h),de=Zt.relative(u,d);if(de.charAt(0)!==".")throw new g.ErrnoError(28);if(de=Zt.relative(c,p),de.charAt(0)!==".")throw new g.ErrnoError(55);var ye;try{ye=g.lookupNode(Y,y)}catch{}if(ee!==ye){var Q=g.isDir(ee.mode),H=g.mayDelete(L,h,Q);if(H)throw new g.ErrnoError(H);if(H=ye?g.mayDelete(Y,y,Q):g.mayCreate(Y,y),H)throw new g.ErrnoError(H);if(!L.node_ops.rename)throw new g.ErrnoError(63);if(g.isMountpoint(ee)||ye&&g.isMountpoint(ye))throw new g.ErrnoError(10);if(Y!==L&&(H=g.nodePermissions(L,"w"),H))throw new g.ErrnoError(H);g.hashRemoveNode(ee);try{L.node_ops.rename(ee,Y,y)}catch(se){throw se}finally{g.hashAddNode(ee)}}},rmdir:u=>{var c=g.lookupPath(u,{parent:!0}),p=c.node,d=Le.basename(u),h=g.lookupNode(p,d),y=g.mayDelete(p,d,!0);if(y)throw new g.ErrnoError(y);if(!p.node_ops.rmdir)throw new g.ErrnoError(63);if(g.isMountpoint(h))throw new g.ErrnoError(10);p.node_ops.rmdir(p,d),g.destroyNode(h)},readdir:u=>{var c=g.lookupPath(u,{follow:!0}),p=c.node;if(!p.node_ops.readdir)throw new g.ErrnoError(54);return p.node_ops.readdir(p)},unlink:u=>{var c=g.lookupPath(u,{parent:!0}),p=c.node;if(!p)throw new g.ErrnoError(44);var d=Le.basename(u),h=g.lookupNode(p,d),y=g.mayDelete(p,d,!1);if(y)throw new g.ErrnoError(y);if(!p.node_ops.unlink)throw new g.ErrnoError(63);if(g.isMountpoint(h))throw new g.ErrnoError(10);p.node_ops.unlink(p,d),g.destroyNode(h)},readlink:u=>{var c=g.lookupPath(u),p=c.node;if(!p)throw new g.ErrnoError(44);if(!p.node_ops.readlink)throw new g.ErrnoError(28);return Zt.resolve(g.getPath(p.parent),p.node_ops.readlink(p))},stat:(u,c)=>{var p=g.lookupPath(u,{follow:!c}),d=p.node;if(!d)throw new g.ErrnoError(44);if(!d.node_ops.getattr)throw new g.ErrnoError(63);return d.node_ops.getattr(d)},lstat:u=>g.stat(u,!0),chmod:(u,c,p)=>{var d;if(typeof u=="string"){var h=g.lookupPath(u,{follow:!p});d=h.node}else d=u;if(!d.node_ops.setattr)throw new g.ErrnoError(63);d.node_ops.setattr(d,{mode:c&4095|d.mode&-4096,timestamp:Date.now()})},lchmod:(u,c)=>{g.chmod(u,c,!0)},fchmod:(u,c)=>{var p=g.getStream(u);if(!p)throw new g.ErrnoError(8);g.chmod(p.node,c)},chown:(u,c,p,d)=>{var h;if(typeof u=="string"){var y=g.lookupPath(u,{follow:!d});h=y.node}else h=u;if(!h.node_ops.setattr)throw new g.ErrnoError(63);h.node_ops.setattr(h,{timestamp:Date.now()})},lchown:(u,c,p)=>{g.chown(u,c,p,!0)},fchown:(u,c,p)=>{var d=g.getStream(u);if(!d)throw new g.ErrnoError(8);g.chown(d.node,c,p)},truncate:(u,c)=>{if(c<0)throw new g.ErrnoError(28);var p;if(typeof u=="string"){var d=g.lookupPath(u,{follow:!0});p=d.node}else p=u;if(!p.node_ops.setattr)throw new g.ErrnoError(63);if(g.isDir(p.mode))throw new g.ErrnoError(31);if(!g.isFile(p.mode))throw new g.ErrnoError(28);var h=g.nodePermissions(p,"w");if(h)throw new g.ErrnoError(h);p.node_ops.setattr(p,{size:c,timestamp:Date.now()})},ftruncate:(u,c)=>{var p=g.getStream(u);if(!p)throw new g.ErrnoError(8);if(!(p.flags&2097155))throw new g.ErrnoError(28);g.truncate(p.node,c)},utime:(u,c,p)=>{var d=g.lookupPath(u,{follow:!0}),h=d.node;h.node_ops.setattr(h,{timestamp:Math.max(c,p)})},open:(u,c,p)=>{if(u==="")throw new g.ErrnoError(44);c=typeof c=="string"?g.modeStringToFlags(c):c,p=typeof p>"u"?438:p,c&64?p=p&4095|32768:p=0;var d;if(typeof u=="object")d=u;else{u=Le.normalize(u);try{var h=g.lookupPath(u,{follow:!(c&131072)});d=h.node}catch{}}var y=!1;if(c&64)if(d){if(c&128)throw new g.ErrnoError(20)}else d=g.mknod(u,p,0),y=!0;if(!d)throw new g.ErrnoError(44);if(g.isChrdev(d.mode)&&(c&=-513),c&65536&&!g.isDir(d.mode))throw new g.ErrnoError(54);if(!y){var C=g.mayOpen(d,c);if(C)throw new g.ErrnoError(C)}c&512&&!y&&g.truncate(d,0),c&=-131713;var L=g.createStream({node:d,path:g.getPath(d),flags:c,seekable:!0,position:0,stream_ops:d.stream_ops,ungotten:[],error:!1});return L.stream_ops.open&&L.stream_ops.open(L),n.logReadFiles&&!(c&1)&&(g.readFiles||(g.readFiles={}),u in g.readFiles||(g.readFiles[u]=1)),L},close:u=>{if(g.isClosed(u))throw new g.ErrnoError(8);u.getdents&&(u.getdents=null);try{u.stream_ops.close&&u.stream_ops.close(u)}catch(c){throw c}finally{g.closeStream(u.fd)}u.fd=null},isClosed:u=>u.fd===null,llseek:(u,c,p)=>{if(g.isClosed(u))throw new g.ErrnoError(8);if(!u.seekable||!u.stream_ops.llseek)throw new g.ErrnoError(70);if(p!=0&&p!=1&&p!=2)throw new g.ErrnoError(28);return u.position=u.stream_ops.llseek(u,c,p),u.ungotten=[],u.position},read:(u,c,p,d,h)=>{if(d<0||h<0)throw new g.ErrnoError(28);if(g.isClosed(u))throw new g.ErrnoError(8);if((u.flags&2097155)===1)throw new g.ErrnoError(8);if(g.isDir(u.node.mode))throw new g.ErrnoError(31);if(!u.stream_ops.read)throw new g.ErrnoError(28);var y=typeof h<"u";if(!y)h=u.position;else if(!u.seekable)throw new g.ErrnoError(70);var C=u.stream_ops.read(u,c,p,d,h);return y||(u.position+=C),C},write:(u,c,p,d,h,y)=>{if(d<0||h<0)throw new g.ErrnoError(28);if(g.isClosed(u))throw new g.ErrnoError(8);if(!(u.flags&2097155))throw new g.ErrnoError(8);if(g.isDir(u.node.mode))throw new g.ErrnoError(31);if(!u.stream_ops.write)throw new g.ErrnoError(28);u.seekable&&u.flags&1024&&g.llseek(u,0,2);var C=typeof h<"u";if(!C)h=u.position;else if(!u.seekable)throw new g.ErrnoError(70);var L=u.stream_ops.write(u,c,p,d,h,y);return C||(u.position+=L),L},allocate:(u,c,p)=>{if(g.isClosed(u))throw new g.ErrnoError(8);if(c<0||p<=0)throw new g.ErrnoError(28);if(!(u.flags&2097155))throw new g.ErrnoError(8);if(!g.isFile(u.node.mode)&&!g.isDir(u.node.mode))throw new g.ErrnoError(43);if(!u.stream_ops.allocate)throw new g.ErrnoError(138);u.stream_ops.allocate(u,c,p)},mmap:(u,c,p,d,h)=>{if(d&2&&!(h&2)&&(u.flags&2097155)!==2)throw new g.ErrnoError(2);if((u.flags&2097155)===1)throw new g.ErrnoError(2);if(!u.stream_ops.mmap)throw new g.ErrnoError(43);return u.stream_ops.mmap(u,c,p,d,h)},msync:(u,c,p,d,h)=>u.stream_ops.msync?u.stream_ops.msync(u,c,p,d,h):0,munmap:u=>0,ioctl:(u,c,p)=>{if(!u.stream_ops.ioctl)throw new g.ErrnoError(59);return u.stream_ops.ioctl(u,c,p)},readFile:(u,c={})=>{if(c.flags=c.flags||0,c.encoding=c.encoding||"binary",c.encoding!=="utf8"&&c.encoding!=="binary")throw new Error('Invalid encoding type "'+c.encoding+'"');var p,d=g.open(u,c.flags),h=g.stat(u),y=h.size,C=new Uint8Array(y);return g.read(d,C,0,y,0),c.encoding==="utf8"?p=M(C,0):c.encoding==="binary"&&(p=C),g.close(d),p},writeFile:(u,c,p={})=>{p.flags=p.flags||577;var d=g.open(u,p.flags,p.mode);if(typeof c=="string"){var h=new Uint8Array(ce(c)+1),y=P(c,h,0,h.length);g.write(d,h,0,y,void 0,p.canOwn)}else if(ArrayBuffer.isView(c))g.write(d,c,0,c.byteLength,void 0,p.canOwn);else throw new Error("Unsupported data type");g.close(d)},cwd:()=>g.currentPath,chdir:u=>{var c=g.lookupPath(u,{follow:!0});if(c.node===null)throw new g.ErrnoError(44);if(!g.isDir(c.node.mode))throw new g.ErrnoError(54);var p=g.nodePermissions(c.node,"x");if(p)throw new g.ErrnoError(p);g.currentPath=c.path},createDefaultDirectories:()=>{g.mkdir("/tmp"),g.mkdir("/home"),g.mkdir("/home/web_user")},createDefaultDevices:()=>{g.mkdir("/dev"),g.registerDevice(g.makedev(1,3),{read:()=>0,write:(c,p,d,h,y)=>h}),g.mkdev("/dev/null",g.makedev(1,3)),tr.register(g.makedev(5,0),tr.default_tty_ops),tr.register(g.makedev(6,0),tr.default_tty1_ops),g.mkdev("/dev/tty",g.makedev(5,0)),g.mkdev("/dev/tty1",g.makedev(6,0));var u=bn();g.createDevice("/dev","random",u),g.createDevice("/dev","urandom",u),g.mkdir("/dev/shm"),g.mkdir("/dev/shm/tmp")},createSpecialDirectories:()=>{g.mkdir("/proc");var u=g.mkdir("/proc/self");g.mkdir("/proc/self/fd"),g.mount({mount:()=>{var c=g.createNode(u,"fd",16895,73);return c.node_ops={lookup:(p,d)=>{var h=+d,y=g.getStream(h);if(!y)throw new g.ErrnoError(8);var C={parent:null,mount:{mountpoint:"fake"},node_ops:{readlink:()=>y.path}};return C.parent=C,C}},c}},{},"/proc/self/fd")},createStandardStreams:()=>{n.stdin?g.createDevice("/dev","stdin",n.stdin):g.symlink("/dev/tty","/dev/stdin"),n.stdout?g.createDevice("/dev","stdout",null,n.stdout):g.symlink("/dev/tty","/dev/stdout"),n.stderr?g.createDevice("/dev","stderr",null,n.stderr):g.symlink("/dev/tty1","/dev/stderr"),g.open("/dev/stdin",0),g.open("/dev/stdout",1),g.open("/dev/stderr",1)},ensureErrnoError:()=>{g.ErrnoError||(g.ErrnoError=i(function(c,p){this.node=p,this.setErrno=function(d){this.errno=d},this.setErrno(c),this.message="FS error"},"ErrnoError"),g.ErrnoError.prototype=new Error,g.ErrnoError.prototype.constructor=g.ErrnoError,[44].forEach(u=>{g.genericErrors[u]=new g.ErrnoError(u),g.genericErrors[u].stack="<generic error, no stack>"}))},staticInit:()=>{g.ensureErrnoError(),g.nameTable=new Array(4096),g.mount(Ve,{},"/"),g.createDefaultDirectories(),g.createDefaultDevices(),g.createSpecialDirectories(),g.filesystems={MEMFS:Ve}},init:(u,c,p)=>{g.init.initialized=!0,g.ensureErrnoError(),n.stdin=u||n.stdin,n.stdout=c||n.stdout,n.stderr=p||n.stderr,g.createStandardStreams()},quit:()=>{g.init.initialized=!1;for(var u=0;u<g.streams.length;u++){var c=g.streams[u];c&&g.close(c)}},getMode:(u,c)=>{var p=0;return u&&(p|=365),c&&(p|=146),p},findObject:(u,c)=>{var p=g.analyzePath(u,c);return p.exists?p.object:null},analyzePath:(u,c)=>{try{var p=g.lookupPath(u,{follow:!c});u=p.path}catch{}var d={isRoot:!1,exists:!1,error:0,name:null,path:null,object:null,parentExists:!1,parentPath:null,parentObject:null};try{var p=g.lookupPath(u,{parent:!0});d.parentExists=!0,d.parentPath=p.path,d.parentObject=p.node,d.name=Le.basename(u),p=g.lookupPath(u,{follow:!c}),d.exists=!0,d.path=p.path,d.object=p.node,d.name=p.node.name,d.isRoot=p.path==="/"}catch(h){d.error=h.errno}return d},createPath:(u,c,p,d)=>{u=typeof u=="string"?u:g.getPath(u);for(var h=c.split("/").reverse();h.length;){var y=h.pop();if(y){var C=Le.join2(u,y);try{g.mkdir(C)}catch{}u=C}}return C},createFile:(u,c,p,d,h)=>{var y=Le.join2(typeof u=="string"?u:g.getPath(u),c),C=g.getMode(d,h);return g.create(y,C)},createDataFile:(u,c,p,d,h,y)=>{var C=c;u&&(u=typeof u=="string"?u:g.getPath(u),C=c?Le.join2(u,c):u);var L=g.getMode(d,h),Y=g.create(C,L);if(p){if(typeof p=="string"){for(var ee=new Array(p.length),de=0,ye=p.length;de<ye;++de)ee[de]=p.charCodeAt(de);p=ee}g.chmod(Y,L|146);var Q=g.open(Y,577);g.write(Q,p,0,p.length,0,y),g.close(Q),g.chmod(Y,L)}return Y},createDevice:(u,c,p,d)=>{var h=Le.join2(typeof u=="string"?u:g.getPath(u),c),y=g.getMode(!!p,!!d);g.createDevice.major||(g.createDevice.major=64);var C=g.makedev(g.createDevice.major++,0);return g.registerDevice(C,{open:L=>{L.seekable=!1},close:L=>{d&&d.buffer&&d.buffer.length&&d(10)},read:(L,Y,ee,de,ye)=>{for(var Q=0,H=0;H<de;H++){var se;try{se=p()}catch{throw new g.ErrnoError(29)}if(se===void 0&&Q===0)throw new g.ErrnoError(6);if(se==null)break;Q++,Y[ee+H]=se}return Q&&(L.node.timestamp=Date.now()),Q},write:(L,Y,ee,de,ye)=>{for(var Q=0;Q<de;Q++)try{d(Y[ee+Q])}catch{throw new g.ErrnoError(29)}return de&&(L.node.timestamp=Date.now()),Q}}),g.mkdev(h,y,C)},forceLoadFile:u=>{if(u.isDevice||u.isFolder||u.link||u.contents)return!0;if(typeof XMLHttpRequest<"u")throw new Error("Lazy loading should have been performed (contents set) in createLazyFile, but it was not. Lazy loading only works in web workers. Use --embed-file or --preload-file in emcc on the main thread.");if(q)try{u.contents=yo(q(u.url),!0),u.usedBytes=u.contents.length}catch{throw new g.ErrnoError(29)}else throw new Error("Cannot load without read() or XMLHttpRequest.")},createLazyFile:(u,c,p,d,h)=>{function y(){this.lengthKnown=!1,this.chunks=[]}if(i(y,"LazyUint8Array"),y.prototype.get=i(function(H){if(!(H>this.length-1||H<0)){var se=H%this.chunkSize,F=H/this.chunkSize|0;return this.getter(F)[se]}},"LazyUint8Array_get"),y.prototype.setDataGetter=i(function(H){this.getter=H},"LazyUint8Array_setDataGetter"),y.prototype.cacheLength=i(function(){var H=new XMLHttpRequest;if(H.open("HEAD",p,!1),H.send(null),!(H.status>=200&&H.status<300||H.status===304))throw new Error("Couldn't load "+p+". Status: "+H.status);var se=Number(H.getResponseHeader("Content-length")),F,B=(F=H.getResponseHeader("Accept-Ranges"))&&F==="bytes",W=(F=H.getResponseHeader("Content-Encoding"))&&F==="gzip",ie=1024*1024;B||(ie=se);var re=i((Z,xe)=>{if(Z>xe)throw new Error("invalid range ("+Z+", "+xe+") or no bytes requested!");if(xe>se-1)throw new Error("only "+se+" bytes available! programmer error!");var S=new XMLHttpRequest;if(S.open("GET",p,!1),se!==ie&&S.setRequestHeader("Range","bytes="+Z+"-"+xe),S.responseType="arraybuffer",S.overrideMimeType&&S.overrideMimeType("text/plain; charset=x-user-defined"),S.send(null),!(S.status>=200&&S.status<300||S.status===304))throw new Error("Couldn't load "+p+". Status: "+S.status);return S.response!==void 0?new Uint8Array(S.response||[]):yo(S.responseText||"",!0)},"doXHR"),z=this;z.setDataGetter(Z=>{var xe=Z*ie,S=(Z+1)*ie-1;if(S=Math.min(S,se-1),typeof z.chunks[Z]>"u"&&(z.chunks[Z]=re(xe,S)),typeof z.chunks[Z]>"u")throw new Error("doXHR failed!");return z.chunks[Z]}),(W||!se)&&(ie=se=1,se=this.getter(0).length,ie=se,j("LazyFiles on gzip forces download of the whole file when length is accessed")),this._length=se,this._chunkSize=ie,this.lengthKnown=!0},"LazyUint8Array_cacheLength"),typeof XMLHttpRequest<"u"){if(!m)throw"Cannot do synchronous binary XHRs outside webworkers in modern browsers. Use --embed-file or --preload-file in emcc";var C=new y;Object.defineProperties(C,{length:{get:function(){return this.lengthKnown||this.cacheLength(),this._length}},chunkSize:{get:function(){return this.lengthKnown||this.cacheLength(),this._chunkSize}}});var L={isDevice:!1,contents:C}}else var L={isDevice:!1,url:p};var Y=g.createFile(u,c,L,d,h);L.contents?Y.contents=L.contents:L.url&&(Y.contents=null,Y.url=L.url),Object.defineProperties(Y,{usedBytes:{get:function(){return this.contents.length}}});var ee={},de=Object.keys(Y.stream_ops);de.forEach(Q=>{var H=Y.stream_ops[Q];ee[Q]=i(function(){return g.forceLoadFile(Y),H.apply(null,arguments)},"forceLoadLazyFile")});function ye(Q,H,se,F,B){var W=Q.node.contents;if(B>=W.length)return 0;var ie=Math.min(W.length-B,F);if(W.slice)for(var re=0;re<ie;re++)H[se+re]=W[B+re];else for(var re=0;re<ie;re++)H[se+re]=W.get(B+re);return ie}return i(ye,"writeChunks"),ee.read=(Q,H,se,F,B)=>(g.forceLoadFile(Y),ye(Q,H,se,F,B)),ee.mmap=(Q,H,se,F,B)=>{g.forceLoadFile(Y);var W=Bc(H);if(!W)throw new g.ErrnoError(48);return ye(Q,Ae,W,H,se),{ptr:W,allocated:!0}},Y.stream_ops=ee,Y},createPreloadedFile:(u,c,p,d,h,y,C,L,Y,ee)=>{var de=c?Zt.resolve(Le.join2(u,c)):u;function ye(Q){function H(se){ee&&ee(),L||g.createDataFile(u,c,se,d,h,Y),y&&y(),gr()}i(H,"finish"),!Browser.handledByPreloadPlugin(Q,de,H,()=>{C&&C(),gr()})&&H(Q)}i(ye,"processData"),ts(),typeof p=="string"?Ah(p,Q=>ye(Q),C):ye(p)},indexedDB:()=>window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,DB_NAME:()=>"EM_FS_"+window.location.pathname,DB_VERSION:20,DB_STORE_NAME:"FILE_DATA",saveFilesToDB:(u,c,p)=>{c=c||(()=>{}),p=p||(()=>{});var d=g.indexedDB();try{var h=d.open(g.DB_NAME(),g.DB_VERSION)}catch(y){return p(y)}h.onupgradeneeded=()=>{j("creating db");var y=h.result;y.createObjectStore(g.DB_STORE_NAME)},h.onsuccess=()=>{var y=h.result,C=y.transaction([g.DB_STORE_NAME],"readwrite"),L=C.objectStore(g.DB_STORE_NAME),Y=0,ee=0,de=u.length;function ye(){ee==0?c():p()}i(ye,"finish"),u.forEach(Q=>{var H=L.put(g.analyzePath(Q).object.contents,Q);H.onsuccess=()=>{Y++,Y+ee==de&&ye()},H.onerror=()=>{ee++,Y+ee==de&&ye()}}),C.onerror=p},h.onerror=p},loadFilesFromDB:(u,c,p)=>{c=c||(()=>{}),p=p||(()=>{});var d=g.indexedDB();try{var h=d.open(g.DB_NAME(),g.DB_VERSION)}catch(y){return p(y)}h.onupgradeneeded=p,h.onsuccess=()=>{var y=h.result;try{var C=y.transaction([g.DB_STORE_NAME],"readonly")}catch(Q){p(Q);return}var L=C.objectStore(g.DB_STORE_NAME),Y=0,ee=0,de=u.length;function ye(){ee==0?c():p()}i(ye,"finish"),u.forEach(Q=>{var H=L.get(Q);H.onsuccess=()=>{g.analyzePath(Q).exists&&g.unlink(Q),g.createDataFile(Le.dirname(Q),Le.basename(Q),H.result,!0,!0,!0),Y++,Y+ee==de&&ye()},H.onerror=()=>{ee++,Y+ee==de&&ye()}}),C.onerror=p},h.onerror=p}},ze={DEFAULT_POLLMASK:5,calculateAt:function(u,c,p){if(Le.isAbs(c))return c;var d;if(u===-100)d=g.cwd();else{var h=ze.getStreamFromFD(u);d=h.path}if(c.length==0){if(!p)throw new g.ErrnoError(44);return d}return Le.join2(d,c)},doStat:function(u,c,p){try{var d=u(c)}catch(L){if(L&&L.node&&Le.normalize(c)!==Le.normalize(g.getPath(L.node)))return-54;throw L}be[p>>2]=d.dev,be[p+8>>2]=d.ino,be[p+12>>2]=d.mode,Qe[p+16>>2]=d.nlink,be[p+20>>2]=d.uid,be[p+24>>2]=d.gid,be[p+28>>2]=d.rdev,De=[d.size>>>0,(je=d.size,+Math.abs(je)>=1?je>0?(Math.min(+Math.floor(je/4294967296),4294967295)|0)>>>0:~~+Math.ceil((je-+(~~je>>>0))/4294967296)>>>0:0)],be[p+40>>2]=De[0],be[p+44>>2]=De[1],be[p+48>>2]=4096,be[p+52>>2]=d.blocks;var h=d.atime.getTime(),y=d.mtime.getTime(),C=d.ctime.getTime();return De=[Math.floor(h/1e3)>>>0,(je=Math.floor(h/1e3),+Math.abs(je)>=1?je>0?(Math.min(+Math.floor(je/4294967296),4294967295)|0)>>>0:~~+Math.ceil((je-+(~~je>>>0))/4294967296)>>>0:0)],be[p+56>>2]=De[0],be[p+60>>2]=De[1],Qe[p+64>>2]=h%1e3*1e3,De=[Math.floor(y/1e3)>>>0,(je=Math.floor(y/1e3),+Math.abs(je)>=1?je>0?(Math.min(+Math.floor(je/4294967296),4294967295)|0)>>>0:~~+Math.ceil((je-+(~~je>>>0))/4294967296)>>>0:0)],be[p+72>>2]=De[0],be[p+76>>2]=De[1],Qe[p+80>>2]=y%1e3*1e3,De=[Math.floor(C/1e3)>>>0,(je=Math.floor(C/1e3),+Math.abs(je)>=1?je>0?(Math.min(+Math.floor(je/4294967296),4294967295)|0)>>>0:~~+Math.ceil((je-+(~~je>>>0))/4294967296)>>>0:0)],be[p+88>>2]=De[0],be[p+92>>2]=De[1],Qe[p+96>>2]=C%1e3*1e3,De=[d.ino>>>0,(je=d.ino,+Math.abs(je)>=1?je>0?(Math.min(+Math.floor(je/4294967296),4294967295)|0)>>>0:~~+Math.ceil((je-+(~~je>>>0))/4294967296)>>>0:0)],be[p+104>>2]=De[0],be[p+108>>2]=De[1],0},doMsync:function(u,c,p,d,h){if(!g.isFile(c.node.mode))throw new g.ErrnoError(43);if(d&2)return 0;var y=we.slice(u,u+p);g.msync(c,y,h,p,d)},varargs:void 0,get:function(){ze.varargs+=4;var u=be[ze.varargs-4>>2];return u},getStr:function(u){var c=J(u);return c},getStreamFromFD:function(u){var c=g.getStream(u);if(!c)throw new g.ErrnoError(8);return c}};function Ih(u,c){try{return u=ze.getStr(u),g.chmod(u,c),0}catch(p){if(typeof g>"u"||!(p instanceof g.ErrnoError))throw p;return-p.errno}}i(Ih,"___syscall_chmod");function Th(u,c,p,d){try{if(c=ze.getStr(c),c=ze.calculateAt(u,c),p&-8)return-28;var h=g.lookupPath(c,{follow:!0}),y=h.node;if(!y)return-44;var C="";return p&4&&(C+="r"),p&2&&(C+="w"),p&1&&(C+="x"),C&&g.nodePermissions(y,C)?-2:0}catch(L){if(typeof g>"u"||!(L instanceof g.ErrnoError))throw L;return-L.errno}}i(Th,"___syscall_faccessat");function qh(u,c){try{return g.fchmod(u,c),0}catch(p){if(typeof g>"u"||!(p instanceof g.ErrnoError))throw p;return-p.errno}}i(qh,"___syscall_fchmod");function xh(u,c,p){try{return g.fchown(u,c,p),0}catch(d){if(typeof g>"u"||!(d instanceof g.ErrnoError))throw d;return-d.errno}}i(xh,"___syscall_fchown32");function kh(u){return be[$c()>>2]=u,u}i(kh,"setErrNo");function Ch(u,c,p){ze.varargs=p;try{var d=ze.getStreamFromFD(u);switch(c){case 0:{var h=ze.get();if(h<0)return-28;var y;return y=g.createStream(d,h),y.fd}case 1:case 2:return 0;case 3:return d.flags;case 4:{var h=ze.get();return d.flags|=h,0}case 5:{var h=ze.get(),C=0;return ct[h+C>>1]=2,0}case 6:case 7:return 0;case 16:case 8:return-28;case 9:return kh(28),-1;default:return-28}}catch(L){if(typeof g>"u"||!(L instanceof g.ErrnoError))throw L;return-L.errno}}i(Ch,"___syscall_fcntl64");function Oh(u,c){try{var p=ze.getStreamFromFD(u);return ze.doStat(g.stat,p.path,c)}catch(d){if(typeof g>"u"||!(d instanceof g.ErrnoError))throw d;return-d.errno}}i(Oh,"___syscall_fstat64");var Rh=9007199254740992,Lh=-9007199254740992;function Uc(u){return u<Lh||u>Rh?NaN:Number(u)}i(Uc,"bigintToI53Checked");function Fh(u,c){try{return c=Uc(c),isNaN(c)?-61:(g.ftruncate(u,c),0)}catch(p){if(typeof g>"u"||!(p instanceof g.ErrnoError))throw p;return-p.errno}}i(Fh,"___syscall_ftruncate64");function Nh(u,c){try{if(c===0)return-28;var p=g.cwd(),d=ce(p)+1;return c<d?-68:(X(p,u,c),d)}catch(h){if(typeof g>"u"||!(h instanceof g.ErrnoError))throw h;return-h.errno}}i(Nh,"___syscall_getcwd");function Ph(u,c,p){ze.varargs=p;try{var d=ze.getStreamFromFD(u);switch(c){case 21509:case 21505:return d.tty?0:-59;case 21510:case 21511:case 21512:case 21506:case 21507:case 21508:return d.tty?0:-59;case 21519:{if(!d.tty)return-59;var h=ze.get();return be[h>>2]=0,0}case 21520:return d.tty?-28:-59;case 21531:{var h=ze.get();return g.ioctl(d,c,h)}case 21523:return d.tty?0:-59;case 21524:return d.tty?0:-59;default:return-28}}catch(y){if(typeof g>"u"||!(y instanceof g.ErrnoError))throw y;return-y.errno}}i(Ph,"___syscall_ioctl");function Dh(u,c){try{return u=ze.getStr(u),ze.doStat(g.lstat,u,c)}catch(p){if(typeof g>"u"||!(p instanceof g.ErrnoError))throw p;return-p.errno}}i(Dh,"___syscall_lstat64");function Mh(u,c,p){try{return c=ze.getStr(c),c=ze.calculateAt(u,c),c=Le.normalize(c),c[c.length-1]==="/"&&(c=c.substr(0,c.length-1)),g.mkdir(c,p,0),0}catch(d){if(typeof g>"u"||!(d instanceof g.ErrnoError))throw d;return-d.errno}}i(Mh,"___syscall_mkdirat");function Bh(u,c,p,d){try{c=ze.getStr(c);var h=d&256,y=d&4096;return d=d&-6401,c=ze.calculateAt(u,c,y),ze.doStat(h?g.lstat:g.stat,c,p)}catch(C){if(typeof g>"u"||!(C instanceof g.ErrnoError))throw C;return-C.errno}}i(Bh,"___syscall_newfstatat");function Uh(u,c,p,d){ze.varargs=d;try{c=ze.getStr(c),c=ze.calculateAt(u,c);var h=d?ze.get():0;return g.open(c,p,h).fd}catch(y){if(typeof g>"u"||!(y instanceof g.ErrnoError))throw y;return-y.errno}}i(Uh,"___syscall_openat");function jh(u,c,p,d){try{if(c=ze.getStr(c),c=ze.calculateAt(u,c),d<=0)return-28;var h=g.readlink(c),y=Math.min(d,ce(h)),C=Ae[p+y];return X(h,p,d+1),Ae[p+y]=C,y}catch(L){if(typeof g>"u"||!(L instanceof g.ErrnoError))throw L;return-L.errno}}i(jh,"___syscall_readlinkat");function Hh(u){try{return u=ze.getStr(u),g.rmdir(u),0}catch(c){if(typeof g>"u"||!(c instanceof g.ErrnoError))throw c;return-c.errno}}i(Hh,"___syscall_rmdir");function zh(u,c){try{return u=ze.getStr(u),ze.doStat(g.stat,u,c)}catch(p){if(typeof g>"u"||!(p instanceof g.ErrnoError))throw p;return-p.errno}}i(zh,"___syscall_stat64");function Wh(u,c,p){try{return c=ze.getStr(c),c=ze.calculateAt(u,c),p===0?g.unlink(c):p===512?g.rmdir(c):Ut("Invalid flags passed to unlinkat"),0}catch(d){if(typeof g>"u"||!(d instanceof g.ErrnoError))throw d;return-d.errno}}i(Wh,"___syscall_unlinkat");function bo(u){return Qe[u>>2]+be[u+4>>2]*4294967296}i(bo,"readI53FromI64");function $h(u,c,p,d){try{if(c=ze.getStr(c),c=ze.calculateAt(u,c,!0),p){var C=bo(p),L=be[p+8>>2];h=C*1e3+L/(1e3*1e3),p+=16,C=bo(p),L=be[p+8>>2],y=C*1e3+L/(1e3*1e3)}else var h=Date.now(),y=h;return g.utime(c,h,y),0}catch(Y){if(typeof g>"u"||!(Y instanceof g.ErrnoError))throw Y;return-Y.errno}}i($h,"___syscall_utimensat");var Qh=!0;function Gh(){return Qh}i(Gh,"__emscripten_get_now_is_monotonic");function Vh(u){return u%4===0&&(u%100!==0||u%400===0)}i(Vh,"__isLeapYear");var Jh=[0,31,60,91,121,152,182,213,244,274,305,335],Kh=[0,31,59,90,120,151,181,212,243,273,304,334];function Xh(u){var c=Vh(u.getFullYear()),p=c?Jh:Kh,d=p[u.getMonth()]+u.getDate()-1;return d}i(Xh,"__yday_from_date");function Yh(u,c){var p=new Date(bo(u)*1e3);be[c>>2]=p.getSeconds(),be[c+4>>2]=p.getMinutes(),be[c+8>>2]=p.getHours(),be[c+12>>2]=p.getDate(),be[c+16>>2]=p.getMonth(),be[c+20>>2]=p.getFullYear()-1900,be[c+24>>2]=p.getDay();var d=Xh(p)|0;be[c+28>>2]=d,be[c+36>>2]=-(p.getTimezoneOffset()*60);var h=new Date(p.getFullYear(),0,1),y=new Date(p.getFullYear(),6,1).getTimezoneOffset(),C=h.getTimezoneOffset(),L=(y!=C&&p.getTimezoneOffset()==Math.min(C,y))|0;be[c+32>>2]=L}i(Yh,"__localtime_js");function Zh(u,c,p,d,h,y,C){try{var L=ze.getStreamFromFD(d),Y=g.mmap(L,u,h,c,p),ee=Y.ptr;return be[y>>2]=Y.allocated,Qe[C>>2]=ee,0}catch(de){if(typeof g>"u"||!(de instanceof g.ErrnoError))throw de;return-de.errno}}i(Zh,"__mmap_js");function e_(u,c,p,d,h,y){try{var C=ze.getStreamFromFD(h);p&2&&ze.doMsync(u,C,c,d,y),g.munmap(C)}catch(L){if(typeof g>"u"||!(L instanceof g.ErrnoError))throw L;return-L.errno}}i(e_,"__munmap_js");function jc(u){var c=ce(u)+1,p=Qc(c);return p&&P(u,Ae,p,c),p}i(jc,"allocateUTF8");function t_(u,c,p){var d=new Date().getFullYear(),h=new Date(d,0,1),y=new Date(d,6,1),C=h.getTimezoneOffset(),L=y.getTimezoneOffset(),Y=Math.max(C,L);Qe[u>>2]=Y*60,be[c>>2]=+(C!=L);function ee(se){var F=se.toTimeString().match(/\(([A-Za-z ]+)\)$/);return F?F[1]:"GMT"}i(ee,"extractZone");var de=ee(h),ye=ee(y),Q=jc(de),H=jc(ye);L<C?(Qe[p>>2]=Q,Qe[p+4>>2]=H):(Qe[p>>2]=H,Qe[p+4>>2]=Q)}i(t_,"__tzset_js");function n_(){return Date.now()}i(n_,"_emscripten_date_now");var Hc;Hc=i(()=>performance.now(),"_emscripten_get_now");function r_(){return 2147483648}i(r_,"getHeapMax");function s_(u){var c=ge.buffer;try{return ge.grow(u-c.byteLength+65535>>>16),Xe(),1}catch{}}i(s_,"emscripten_realloc_buffer");function i_(u){var c=we.length;u=u>>>0;var p=r_();if(u>p)return!1;let d=i((Y,ee)=>Y+(ee-Y%ee)%ee,"alignUp");for(var h=1;h<=4;h*=2){var y=c*(1+.2/h);y=Math.min(y,u+100663296);var C=Math.min(p,d(Math.max(u,y),65536)),L=s_(C);if(L)return!0}return!1}i(i_,"_emscripten_resize_heap");var Eo={};function o_(){return _||"./this.program"}i(o_,"getExecutableName");function rs(){if(!rs.strings){var u=(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",c={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:u,_:o_()};for(var p in Eo)Eo[p]===void 0?delete c[p]:c[p]=Eo[p];var d=[];for(var p in c)d.push(p+"="+c[p]);rs.strings=d}return rs.strings}i(rs,"getEnvStrings");function a_(u,c,p){for(var d=0;d<u.length;++d)Ae[c++>>0]=u.charCodeAt(d);p||(Ae[c>>0]=0)}i(a_,"writeAsciiToMemory");function c_(u,c){var p=0;return rs().forEach(function(d,h){var y=c+p;Qe[u+h*4>>2]=y,a_(d,y),p+=d.length+1}),0}i(c_,"_environ_get");function l_(u,c){var p=rs();Qe[u>>2]=p.length;var d=0;return p.forEach(function(h){d+=h.length+1}),Qe[c>>2]=d,0}i(l_,"_environ_sizes_get");function u_(u){try{var c=ze.getStreamFromFD(u);return g.close(c),0}catch(p){if(typeof g>"u"||!(p instanceof g.ErrnoError))throw p;return p.errno}}i(u_,"_fd_close");function f_(u,c){try{var p=ze.getStreamFromFD(u),d=p.tty?2:g.isDir(p.mode)?3:g.isLink(p.mode)?7:4;return Ae[c>>0]=d,0}catch(h){if(typeof g>"u"||!(h instanceof g.ErrnoError))throw h;return h.errno}}i(f_,"_fd_fdstat_get");function d_(u,c,p,d){for(var h=0,y=0;y<p;y++){var C=Qe[c>>2],L=Qe[c+4>>2];c+=8;var Y=g.read(u,Ae,C,L,d);if(Y<0)return-1;if(h+=Y,Y<L)break;typeof d<"u"&&(d+=Y)}return h}i(d_,"doReadv");function p_(u,c,p,d){try{var h=ze.getStreamFromFD(u),y=d_(h,c,p);return Qe[d>>2]=y,0}catch(C){if(typeof g>"u"||!(C instanceof g.ErrnoError))throw C;return C.errno}}i(p_,"_fd_read");function h_(u,c,p,d){try{if(c=Uc(c),isNaN(c))return 61;var h=ze.getStreamFromFD(u);return g.llseek(h,c,p),De=[h.position>>>0,(je=h.position,+Math.abs(je)>=1?je>0?(Math.min(+Math.floor(je/4294967296),4294967295)|0)>>>0:~~+Math.ceil((je-+(~~je>>>0))/4294967296)>>>0:0)],be[d>>2]=De[0],be[d+4>>2]=De[1],h.getdents&&c===0&&p===0&&(h.getdents=null),0}catch(y){if(typeof g>"u"||!(y instanceof g.ErrnoError))throw y;return y.errno}}i(h_,"_fd_seek");function __(u){try{var c=ze.getStreamFromFD(u);return c.stream_ops&&c.stream_ops.fsync?c.stream_ops.fsync(c):0}catch(p){if(typeof g>"u"||!(p instanceof g.ErrnoError))throw p;return p.errno}}i(__,"_fd_sync");function m_(u,c,p,d){for(var h=0,y=0;y<p;y++){var C=Qe[c>>2],L=Qe[c+4>>2];c+=8;var Y=g.write(u,Ae,C,L,d);if(Y<0)return-1;h+=Y,typeof d<"u"&&(d+=Y)}return h}i(m_,"doWritev");function g_(u,c,p,d){try{var h=ze.getStreamFromFD(u),y=m_(h,c,p);return Qe[d>>2]=y,0}catch(C){if(typeof g>"u"||!(C instanceof g.ErrnoError))throw C;return C.errno}}i(g_,"_fd_write");var zc=i(function(u,c,p,d){u||(u=this),this.parent=u,this.mount=u.mount,this.mounted=null,this.id=g.nextInode++,this.name=c,this.mode=p,this.node_ops={},this.stream_ops={},this.rdev=d},"FSNode"),Bs=365,Us=146;Object.defineProperties(zc.prototype,{read:{get:function(){return(this.mode&Bs)===Bs},set:function(u){u?this.mode|=Bs:this.mode&=~Bs}},write:{get:function(){return(this.mode&Us)===Us},set:function(u){u?this.mode|=Us:this.mode&=~Us}},isFolder:{get:function(){return g.isDir(this.mode)}},isDevice:{get:function(){return g.isChrdev(this.mode)}}}),g.FSNode=zc,g.staticInit();var Wc={__syscall_chmod:Ih,__syscall_faccessat:Th,__syscall_fchmod:qh,__syscall_fchown32:xh,__syscall_fcntl64:Ch,__syscall_fstat64:Oh,__syscall_ftruncate64:Fh,__syscall_getcwd:Nh,__syscall_ioctl:Ph,__syscall_lstat64:Dh,__syscall_mkdirat:Mh,__syscall_newfstatat:Bh,__syscall_openat:Uh,__syscall_readlinkat:jh,__syscall_rmdir:Hh,__syscall_stat64:zh,__syscall_unlinkat:Wh,__syscall_utimensat:$h,_emscripten_get_now_is_monotonic:Gh,_localtime_js:Yh,_mmap_js:Zh,_munmap_js:e_,_tzset_js:t_,emscripten_date_now:n_,emscripten_get_now:Hc,emscripten_resize_heap:i_,environ_get:c_,environ_sizes_get:l_,fd_close:u_,fd_fdstat_get:f_,fd_read:p_,fd_seek:h_,fd_sync:__,fd_write:g_,memory:ge};at(),n.___wasm_call_ctors=function(){return(n.___wasm_call_ctors=n.asm.__wasm_call_ctors).apply(null,arguments)},n._sqlite3_status64=function(){return(n._sqlite3_status64=n.asm.sqlite3_status64).apply(null,arguments)},n._sqlite3_status=function(){return(n._sqlite3_status=n.asm.sqlite3_status).apply(null,arguments)},n._sqlite3_db_status=function(){return(n._sqlite3_db_status=n.asm.sqlite3_db_status).apply(null,arguments)},n._sqlite3_msize=function(){return(n._sqlite3_msize=n.asm.sqlite3_msize).apply(null,arguments)},n._sqlite3_vfs_find=function(){return(n._sqlite3_vfs_find=n.asm.sqlite3_vfs_find).apply(null,arguments)},n._sqlite3_initialize=function(){return(n._sqlite3_initialize=n.asm.sqlite3_initialize).apply(null,arguments)},n._sqlite3_malloc=function(){return(n._sqlite3_malloc=n.asm.sqlite3_malloc).apply(null,arguments)},n._sqlite3_free=function(){return(n._sqlite3_free=n.asm.sqlite3_free).apply(null,arguments)},n._sqlite3_vfs_register=function(){return(n._sqlite3_vfs_register=n.asm.sqlite3_vfs_register).apply(null,arguments)},n._sqlite3_vfs_unregister=function(){return(n._sqlite3_vfs_unregister=n.asm.sqlite3_vfs_unregister).apply(null,arguments)},n._sqlite3_malloc64=function(){return(n._sqlite3_malloc64=n.asm.sqlite3_malloc64).apply(null,arguments)},n._sqlite3_realloc=function(){return(n._sqlite3_realloc=n.asm.sqlite3_realloc).apply(null,arguments)},n._sqlite3_realloc64=function(){return(n._sqlite3_realloc64=n.asm.sqlite3_realloc64).apply(null,arguments)},n._sqlite3_value_text=function(){return(n._sqlite3_value_text=n.asm.sqlite3_value_text).apply(null,arguments)},n._sqlite3_randomness=function(){return(n._sqlite3_randomness=n.asm.sqlite3_randomness).apply(null,arguments)},n._sqlite3_stricmp=function(){return(n._sqlite3_stricmp=n.asm.sqlite3_stricmp).apply(null,arguments)},n._sqlite3_strnicmp=function(){return(n._sqlite3_strnicmp=n.asm.sqlite3_strnicmp).apply(null,arguments)},n._sqlite3_uri_parameter=function(){return(n._sqlite3_uri_parameter=n.asm.sqlite3_uri_parameter).apply(null,arguments)};var $c=n.___errno_location=function(){return($c=n.___errno_location=n.asm.__errno_location).apply(null,arguments)};n._sqlite3_uri_boolean=function(){return(n._sqlite3_uri_boolean=n.asm.sqlite3_uri_boolean).apply(null,arguments)},n._sqlite3_serialize=function(){return(n._sqlite3_serialize=n.asm.sqlite3_serialize).apply(null,arguments)},n._sqlite3_prepare_v2=function(){return(n._sqlite3_prepare_v2=n.asm.sqlite3_prepare_v2).apply(null,arguments)},n._sqlite3_step=function(){return(n._sqlite3_step=n.asm.sqlite3_step).apply(null,arguments)},n._sqlite3_column_int64=function(){return(n._sqlite3_column_int64=n.asm.sqlite3_column_int64).apply(null,arguments)},n._sqlite3_reset=function(){return(n._sqlite3_reset=n.asm.sqlite3_reset).apply(null,arguments)},n._sqlite3_exec=function(){return(n._sqlite3_exec=n.asm.sqlite3_exec).apply(null,arguments)},n._sqlite3_column_int=function(){return(n._sqlite3_column_int=n.asm.sqlite3_column_int).apply(null,arguments)},n._sqlite3_finalize=function(){return(n._sqlite3_finalize=n.asm.sqlite3_finalize).apply(null,arguments)},n._sqlite3_file_control=function(){return(n._sqlite3_file_control=n.asm.sqlite3_file_control).apply(null,arguments)},n._sqlite3_column_name=function(){return(n._sqlite3_column_name=n.asm.sqlite3_column_name).apply(null,arguments)},n._sqlite3_column_text=function(){return(n._sqlite3_column_text=n.asm.sqlite3_column_text).apply(null,arguments)},n._sqlite3_column_type=function(){return(n._sqlite3_column_type=n.asm.sqlite3_column_type).apply(null,arguments)},n._sqlite3_errmsg=function(){return(n._sqlite3_errmsg=n.asm.sqlite3_errmsg).apply(null,arguments)},n._sqlite3_deserialize=function(){return(n._sqlite3_deserialize=n.asm.sqlite3_deserialize).apply(null,arguments)},n._sqlite3_clear_bindings=function(){return(n._sqlite3_clear_bindings=n.asm.sqlite3_clear_bindings).apply(null,arguments)},n._sqlite3_value_blob=function(){return(n._sqlite3_value_blob=n.asm.sqlite3_value_blob).apply(null,arguments)},n._sqlite3_value_bytes=function(){return(n._sqlite3_value_bytes=n.asm.sqlite3_value_bytes).apply(null,arguments)},n._sqlite3_value_double=function(){return(n._sqlite3_value_double=n.asm.sqlite3_value_double).apply(null,arguments)},n._sqlite3_value_int=function(){return(n._sqlite3_value_int=n.asm.sqlite3_value_int).apply(null,arguments)},n._sqlite3_value_int64=function(){return(n._sqlite3_value_int64=n.asm.sqlite3_value_int64).apply(null,arguments)},n._sqlite3_value_subtype=function(){return(n._sqlite3_value_subtype=n.asm.sqlite3_value_subtype).apply(null,arguments)},n._sqlite3_value_pointer=function(){return(n._sqlite3_value_pointer=n.asm.sqlite3_value_pointer).apply(null,arguments)},n._sqlite3_value_type=function(){return(n._sqlite3_value_type=n.asm.sqlite3_value_type).apply(null,arguments)},n._sqlite3_value_nochange=function(){return(n._sqlite3_value_nochange=n.asm.sqlite3_value_nochange).apply(null,arguments)},n._sqlite3_value_frombind=function(){return(n._sqlite3_value_frombind=n.asm.sqlite3_value_frombind).apply(null,arguments)},n._sqlite3_value_dup=function(){return(n._sqlite3_value_dup=n.asm.sqlite3_value_dup).apply(null,arguments)},n._sqlite3_value_free=function(){return(n._sqlite3_value_free=n.asm.sqlite3_value_free).apply(null,arguments)},n._sqlite3_result_blob=function(){return(n._sqlite3_result_blob=n.asm.sqlite3_result_blob).apply(null,arguments)},n._sqlite3_result_error_toobig=function(){return(n._sqlite3_result_error_toobig=n.asm.sqlite3_result_error_toobig).apply(null,arguments)},n._sqlite3_result_error_nomem=function(){return(n._sqlite3_result_error_nomem=n.asm.sqlite3_result_error_nomem).apply(null,arguments)},n._sqlite3_result_double=function(){return(n._sqlite3_result_double=n.asm.sqlite3_result_double).apply(null,arguments)},n._sqlite3_result_error=function(){return(n._sqlite3_result_error=n.asm.sqlite3_result_error).apply(null,arguments)},n._sqlite3_result_int=function(){return(n._sqlite3_result_int=n.asm.sqlite3_result_int).apply(null,arguments)},n._sqlite3_result_int64=function(){return(n._sqlite3_result_int64=n.asm.sqlite3_result_int64).apply(null,arguments)},n._sqlite3_result_null=function(){return(n._sqlite3_result_null=n.asm.sqlite3_result_null).apply(null,arguments)},n._sqlite3_result_pointer=function(){return(n._sqlite3_result_pointer=n.asm.sqlite3_result_pointer).apply(null,arguments)},n._sqlite3_result_subtype=function(){return(n._sqlite3_result_subtype=n.asm.sqlite3_result_subtype).apply(null,arguments)},n._sqlite3_result_text=function(){return(n._sqlite3_result_text=n.asm.sqlite3_result_text).apply(null,arguments)},n._sqlite3_result_zeroblob=function(){return(n._sqlite3_result_zeroblob=n.asm.sqlite3_result_zeroblob).apply(null,arguments)},n._sqlite3_result_zeroblob64=function(){return(n._sqlite3_result_zeroblob64=n.asm.sqlite3_result_zeroblob64).apply(null,arguments)},n._sqlite3_result_error_code=function(){return(n._sqlite3_result_error_code=n.asm.sqlite3_result_error_code).apply(null,arguments)},n._sqlite3_user_data=function(){return(n._sqlite3_user_data=n.asm.sqlite3_user_data).apply(null,arguments)},n._sqlite3_context_db_handle=function(){return(n._sqlite3_context_db_handle=n.asm.sqlite3_context_db_handle).apply(null,arguments)},n._sqlite3_vtab_nochange=function(){return(n._sqlite3_vtab_nochange=n.asm.sqlite3_vtab_nochange).apply(null,arguments)},n._sqlite3_vtab_in_first=function(){return(n._sqlite3_vtab_in_first=n.asm.sqlite3_vtab_in_first).apply(null,arguments)},n._sqlite3_vtab_in_next=function(){return(n._sqlite3_vtab_in_next=n.asm.sqlite3_vtab_in_next).apply(null,arguments)},n._sqlite3_aggregate_context=function(){return(n._sqlite3_aggregate_context=n.asm.sqlite3_aggregate_context).apply(null,arguments)},n._sqlite3_get_auxdata=function(){return(n._sqlite3_get_auxdata=n.asm.sqlite3_get_auxdata).apply(null,arguments)},n._sqlite3_set_auxdata=function(){return(n._sqlite3_set_auxdata=n.asm.sqlite3_set_auxdata).apply(null,arguments)},n._sqlite3_column_count=function(){return(n._sqlite3_column_count=n.asm.sqlite3_column_count).apply(null,arguments)},n._sqlite3_data_count=function(){return(n._sqlite3_data_count=n.asm.sqlite3_data_count).apply(null,arguments)},n._sqlite3_column_blob=function(){return(n._sqlite3_column_blob=n.asm.sqlite3_column_blob).apply(null,arguments)},n._sqlite3_column_bytes=function(){return(n._sqlite3_column_bytes=n.asm.sqlite3_column_bytes).apply(null,arguments)},n._sqlite3_column_double=function(){return(n._sqlite3_column_double=n.asm.sqlite3_column_double).apply(null,arguments)},n._sqlite3_column_value=function(){return(n._sqlite3_column_value=n.asm.sqlite3_column_value).apply(null,arguments)},n._sqlite3_bind_blob=function(){return(n._sqlite3_bind_blob=n.asm.sqlite3_bind_blob).apply(null,arguments)},n._sqlite3_bind_double=function(){return(n._sqlite3_bind_double=n.asm.sqlite3_bind_double).apply(null,arguments)},n._sqlite3_bind_int=function(){return(n._sqlite3_bind_int=n.asm.sqlite3_bind_int).apply(null,arguments)},n._sqlite3_bind_int64=function(){return(n._sqlite3_bind_int64=n.asm.sqlite3_bind_int64).apply(null,arguments)},n._sqlite3_bind_null=function(){return(n._sqlite3_bind_null=n.asm.sqlite3_bind_null).apply(null,arguments)},n._sqlite3_bind_pointer=function(){return(n._sqlite3_bind_pointer=n.asm.sqlite3_bind_pointer).apply(null,arguments)},n._sqlite3_bind_text=function(){return(n._sqlite3_bind_text=n.asm.sqlite3_bind_text).apply(null,arguments)},n._sqlite3_bind_parameter_count=function(){return(n._sqlite3_bind_parameter_count=n.asm.sqlite3_bind_parameter_count).apply(null,arguments)},n._sqlite3_bind_parameter_index=function(){return(n._sqlite3_bind_parameter_index=n.asm.sqlite3_bind_parameter_index).apply(null,arguments)},n._sqlite3_db_handle=function(){return(n._sqlite3_db_handle=n.asm.sqlite3_db_handle).apply(null,arguments)},n._sqlite3_stmt_readonly=function(){return(n._sqlite3_stmt_readonly=n.asm.sqlite3_stmt_readonly).apply(null,arguments)},n._sqlite3_stmt_isexplain=function(){return(n._sqlite3_stmt_isexplain=n.asm.sqlite3_stmt_isexplain).apply(null,arguments)},n._sqlite3_stmt_status=function(){return(n._sqlite3_stmt_status=n.asm.sqlite3_stmt_status).apply(null,arguments)},n._sqlite3_sql=function(){return(n._sqlite3_sql=n.asm.sqlite3_sql).apply(null,arguments)},n._sqlite3_expanded_sql=function(){return(n._sqlite3_expanded_sql=n.asm.sqlite3_expanded_sql).apply(null,arguments)},n._sqlite3_preupdate_old=function(){return(n._sqlite3_preupdate_old=n.asm.sqlite3_preupdate_old).apply(null,arguments)},n._sqlite3_preupdate_count=function(){return(n._sqlite3_preupdate_count=n.asm.sqlite3_preupdate_count).apply(null,arguments)},n._sqlite3_preupdate_depth=function(){return(n._sqlite3_preupdate_depth=n.asm.sqlite3_preupdate_depth).apply(null,arguments)},n._sqlite3_preupdate_blobwrite=function(){return(n._sqlite3_preupdate_blobwrite=n.asm.sqlite3_preupdate_blobwrite).apply(null,arguments)},n._sqlite3_preupdate_new=function(){return(n._sqlite3_preupdate_new=n.asm.sqlite3_preupdate_new).apply(null,arguments)},n._sqlite3_value_numeric_type=function(){return(n._sqlite3_value_numeric_type=n.asm.sqlite3_value_numeric_type).apply(null,arguments)},n._sqlite3_set_authorizer=function(){return(n._sqlite3_set_authorizer=n.asm.sqlite3_set_authorizer).apply(null,arguments)},n._sqlite3_strglob=function(){return(n._sqlite3_strglob=n.asm.sqlite3_strglob).apply(null,arguments)},n._sqlite3_strlike=function(){return(n._sqlite3_strlike=n.asm.sqlite3_strlike).apply(null,arguments)},n._sqlite3_auto_extension=function(){return(n._sqlite3_auto_extension=n.asm.sqlite3_auto_extension).apply(null,arguments)},n._sqlite3_cancel_auto_extension=function(){return(n._sqlite3_cancel_auto_extension=n.asm.sqlite3_cancel_auto_extension).apply(null,arguments)},n._sqlite3_reset_auto_extension=function(){return(n._sqlite3_reset_auto_extension=n.asm.sqlite3_reset_auto_extension).apply(null,arguments)},n._sqlite3_prepare_v3=function(){return(n._sqlite3_prepare_v3=n.asm.sqlite3_prepare_v3).apply(null,arguments)},n._sqlite3_create_module=function(){return(n._sqlite3_create_module=n.asm.sqlite3_create_module).apply(null,arguments)},n._sqlite3_create_module_v2=function(){return(n._sqlite3_create_module_v2=n.asm.sqlite3_create_module_v2).apply(null,arguments)},n._sqlite3_drop_modules=function(){return(n._sqlite3_drop_modules=n.asm.sqlite3_drop_modules).apply(null,arguments)},n._sqlite3_declare_vtab=function(){return(n._sqlite3_declare_vtab=n.asm.sqlite3_declare_vtab).apply(null,arguments)},n._sqlite3_vtab_on_conflict=function(){return(n._sqlite3_vtab_on_conflict=n.asm.sqlite3_vtab_on_conflict).apply(null,arguments)},n._sqlite3_vtab_collation=function(){return(n._sqlite3_vtab_collation=n.asm.sqlite3_vtab_collation).apply(null,arguments)},n._sqlite3_vtab_in=function(){return(n._sqlite3_vtab_in=n.asm.sqlite3_vtab_in).apply(null,arguments)},n._sqlite3_vtab_rhs_value=function(){return(n._sqlite3_vtab_rhs_value=n.asm.sqlite3_vtab_rhs_value).apply(null,arguments)},n._sqlite3_vtab_distinct=function(){return(n._sqlite3_vtab_distinct=n.asm.sqlite3_vtab_distinct).apply(null,arguments)},n._sqlite3_keyword_name=function(){return(n._sqlite3_keyword_name=n.asm.sqlite3_keyword_name).apply(null,arguments)},n._sqlite3_keyword_count=function(){return(n._sqlite3_keyword_count=n.asm.sqlite3_keyword_count).apply(null,arguments)},n._sqlite3_keyword_check=function(){return(n._sqlite3_keyword_check=n.asm.sqlite3_keyword_check).apply(null,arguments)},n._sqlite3_complete=function(){return(n._sqlite3_complete=n.asm.sqlite3_complete).apply(null,arguments)},n._sqlite3_libversion=function(){return(n._sqlite3_libversion=n.asm.sqlite3_libversion).apply(null,arguments)},n._sqlite3_libversion_number=function(){return(n._sqlite3_libversion_number=n.asm.sqlite3_libversion_number).apply(null,arguments)},n._sqlite3_shutdown=function(){return(n._sqlite3_shutdown=n.asm.sqlite3_shutdown).apply(null,arguments)},n._sqlite3_last_insert_rowid=function(){return(n._sqlite3_last_insert_rowid=n.asm.sqlite3_last_insert_rowid).apply(null,arguments)},n._sqlite3_set_last_insert_rowid=function(){return(n._sqlite3_set_last_insert_rowid=n.asm.sqlite3_set_last_insert_rowid).apply(null,arguments)},n._sqlite3_changes64=function(){return(n._sqlite3_changes64=n.asm.sqlite3_changes64).apply(null,arguments)},n._sqlite3_changes=function(){return(n._sqlite3_changes=n.asm.sqlite3_changes).apply(null,arguments)},n._sqlite3_total_changes64=function(){return(n._sqlite3_total_changes64=n.asm.sqlite3_total_changes64).apply(null,arguments)},n._sqlite3_total_changes=function(){return(n._sqlite3_total_changes=n.asm.sqlite3_total_changes).apply(null,arguments)},n._sqlite3_txn_state=function(){return(n._sqlite3_txn_state=n.asm.sqlite3_txn_state).apply(null,arguments)},n._sqlite3_close_v2=function(){return(n._sqlite3_close_v2=n.asm.sqlite3_close_v2).apply(null,arguments)},n._sqlite3_busy_handler=function(){return(n._sqlite3_busy_handler=n.asm.sqlite3_busy_handler).apply(null,arguments)},n._sqlite3_progress_handler=function(){return(n._sqlite3_progress_handler=n.asm.sqlite3_progress_handler).apply(null,arguments)},n._sqlite3_busy_timeout=function(){return(n._sqlite3_busy_timeout=n.asm.sqlite3_busy_timeout).apply(null,arguments)},n._sqlite3_create_function=function(){return(n._sqlite3_create_function=n.asm.sqlite3_create_function).apply(null,arguments)},n._sqlite3_create_function_v2=function(){return(n._sqlite3_create_function_v2=n.asm.sqlite3_create_function_v2).apply(null,arguments)},n._sqlite3_create_window_function=function(){return(n._sqlite3_create_window_function=n.asm.sqlite3_create_window_function).apply(null,arguments)},n._sqlite3_overload_function=function(){return(n._sqlite3_overload_function=n.asm.sqlite3_overload_function).apply(null,arguments)},n._sqlite3_trace_v2=function(){return(n._sqlite3_trace_v2=n.asm.sqlite3_trace_v2).apply(null,arguments)},n._sqlite3_commit_hook=function(){return(n._sqlite3_commit_hook=n.asm.sqlite3_commit_hook).apply(null,arguments)},n._sqlite3_update_hook=function(){return(n._sqlite3_update_hook=n.asm.sqlite3_update_hook).apply(null,arguments)},n._sqlite3_rollback_hook=function(){return(n._sqlite3_rollback_hook=n.asm.sqlite3_rollback_hook).apply(null,arguments)},n._sqlite3_preupdate_hook=function(){return(n._sqlite3_preupdate_hook=n.asm.sqlite3_preupdate_hook).apply(null,arguments)},n._sqlite3_error_offset=function(){return(n._sqlite3_error_offset=n.asm.sqlite3_error_offset).apply(null,arguments)},n._sqlite3_errcode=function(){return(n._sqlite3_errcode=n.asm.sqlite3_errcode).apply(null,arguments)},n._sqlite3_extended_errcode=function(){return(n._sqlite3_extended_errcode=n.asm.sqlite3_extended_errcode).apply(null,arguments)},n._sqlite3_errstr=function(){return(n._sqlite3_errstr=n.asm.sqlite3_errstr).apply(null,arguments)},n._sqlite3_limit=function(){return(n._sqlite3_limit=n.asm.sqlite3_limit).apply(null,arguments)},n._sqlite3_open=function(){return(n._sqlite3_open=n.asm.sqlite3_open).apply(null,arguments)},n._sqlite3_open_v2=function(){return(n._sqlite3_open_v2=n.asm.sqlite3_open_v2).apply(null,arguments)},n._sqlite3_create_collation=function(){return(n._sqlite3_create_collation=n.asm.sqlite3_create_collation).apply(null,arguments)},n._sqlite3_create_collation_v2=function(){return(n._sqlite3_create_collation_v2=n.asm.sqlite3_create_collation_v2).apply(null,arguments)},n._sqlite3_collation_needed=function(){return(n._sqlite3_collation_needed=n.asm.sqlite3_collation_needed).apply(null,arguments)},n._sqlite3_get_autocommit=function(){return(n._sqlite3_get_autocommit=n.asm.sqlite3_get_autocommit).apply(null,arguments)},n._sqlite3_table_column_metadata=function(){return(n._sqlite3_table_column_metadata=n.asm.sqlite3_table_column_metadata).apply(null,arguments)},n._sqlite3_extended_result_codes=function(){return(n._sqlite3_extended_result_codes=n.asm.sqlite3_extended_result_codes).apply(null,arguments)},n._sqlite3_uri_key=function(){return(n._sqlite3_uri_key=n.asm.sqlite3_uri_key).apply(null,arguments)},n._sqlite3_uri_int64=function(){return(n._sqlite3_uri_int64=n.asm.sqlite3_uri_int64).apply(null,arguments)},n._sqlite3_db_name=function(){return(n._sqlite3_db_name=n.asm.sqlite3_db_name).apply(null,arguments)},n._sqlite3_db_filename=function(){return(n._sqlite3_db_filename=n.asm.sqlite3_db_filename).apply(null,arguments)},n._sqlite3_compileoption_used=function(){return(n._sqlite3_compileoption_used=n.asm.sqlite3_compileoption_used).apply(null,arguments)},n._sqlite3_compileoption_get=function(){return(n._sqlite3_compileoption_get=n.asm.sqlite3_compileoption_get).apply(null,arguments)},n._sqlite3session_diff=function(){return(n._sqlite3session_diff=n.asm.sqlite3session_diff).apply(null,arguments)},n._sqlite3session_attach=function(){return(n._sqlite3session_attach=n.asm.sqlite3session_attach).apply(null,arguments)},n._sqlite3session_create=function(){return(n._sqlite3session_create=n.asm.sqlite3session_create).apply(null,arguments)},n._sqlite3session_delete=function(){return(n._sqlite3session_delete=n.asm.sqlite3session_delete).apply(null,arguments)},n._sqlite3session_table_filter=function(){return(n._sqlite3session_table_filter=n.asm.sqlite3session_table_filter).apply(null,arguments)},n._sqlite3session_changeset=function(){return(n._sqlite3session_changeset=n.asm.sqlite3session_changeset).apply(null,arguments)},n._sqlite3session_changeset_strm=function(){return(n._sqlite3session_changeset_strm=n.asm.sqlite3session_changeset_strm).apply(null,arguments)},n._sqlite3session_patchset_strm=function(){return(n._sqlite3session_patchset_strm=n.asm.sqlite3session_patchset_strm).apply(null,arguments)},n._sqlite3session_patchset=function(){return(n._sqlite3session_patchset=n.asm.sqlite3session_patchset).apply(null,arguments)},n._sqlite3session_enable=function(){return(n._sqlite3session_enable=n.asm.sqlite3session_enable).apply(null,arguments)},n._sqlite3session_indirect=function(){return(n._sqlite3session_indirect=n.asm.sqlite3session_indirect).apply(null,arguments)},n._sqlite3session_isempty=function(){return(n._sqlite3session_isempty=n.asm.sqlite3session_isempty).apply(null,arguments)},n._sqlite3session_memory_used=function(){return(n._sqlite3session_memory_used=n.asm.sqlite3session_memory_used).apply(null,arguments)},n._sqlite3session_object_config=function(){return(n._sqlite3session_object_config=n.asm.sqlite3session_object_config).apply(null,arguments)},n._sqlite3session_changeset_size=function(){return(n._sqlite3session_changeset_size=n.asm.sqlite3session_changeset_size).apply(null,arguments)},n._sqlite3changeset_start=function(){return(n._sqlite3changeset_start=n.asm.sqlite3changeset_start).apply(null,arguments)},n._sqlite3changeset_start_v2=function(){return(n._sqlite3changeset_start_v2=n.asm.sqlite3changeset_start_v2).apply(null,arguments)},n._sqlite3changeset_start_strm=function(){return(n._sqlite3changeset_start_strm=n.asm.sqlite3changeset_start_strm).apply(null,arguments)},n._sqlite3changeset_start_v2_strm=function(){return(n._sqlite3changeset_start_v2_strm=n.asm.sqlite3changeset_start_v2_strm).apply(null,arguments)},n._sqlite3changeset_next=function(){return(n._sqlite3changeset_next=n.asm.sqlite3changeset_next).apply(null,arguments)},n._sqlite3changeset_op=function(){return(n._sqlite3changeset_op=n.asm.sqlite3changeset_op).apply(null,arguments)},n._sqlite3changeset_pk=function(){return(n._sqlite3changeset_pk=n.asm.sqlite3changeset_pk).apply(null,arguments)},n._sqlite3changeset_old=function(){return(n._sqlite3changeset_old=n.asm.sqlite3changeset_old).apply(null,arguments)},n._sqlite3changeset_new=function(){return(n._sqlite3changeset_new=n.asm.sqlite3changeset_new).apply(null,arguments)},n._sqlite3changeset_conflict=function(){return(n._sqlite3changeset_conflict=n.asm.sqlite3changeset_conflict).apply(null,arguments)},n._sqlite3changeset_fk_conflicts=function(){return(n._sqlite3changeset_fk_conflicts=n.asm.sqlite3changeset_fk_conflicts).apply(null,arguments)},n._sqlite3changeset_finalize=function(){return(n._sqlite3changeset_finalize=n.asm.sqlite3changeset_finalize).apply(null,arguments)},n._sqlite3changeset_invert=function(){return(n._sqlite3changeset_invert=n.asm.sqlite3changeset_invert).apply(null,arguments)},n._sqlite3changeset_invert_strm=function(){return(n._sqlite3changeset_invert_strm=n.asm.sqlite3changeset_invert_strm).apply(null,arguments)},n._sqlite3changeset_apply_v2=function(){return(n._sqlite3changeset_apply_v2=n.asm.sqlite3changeset_apply_v2).apply(null,arguments)},n._sqlite3changeset_apply=function(){return(n._sqlite3changeset_apply=n.asm.sqlite3changeset_apply).apply(null,arguments)},n._sqlite3changeset_apply_v2_strm=function(){return(n._sqlite3changeset_apply_v2_strm=n.asm.sqlite3changeset_apply_v2_strm).apply(null,arguments)},n._sqlite3changeset_apply_strm=function(){return(n._sqlite3changeset_apply_strm=n.asm.sqlite3changeset_apply_strm).apply(null,arguments)},n._sqlite3changegroup_new=function(){return(n._sqlite3changegroup_new=n.asm.sqlite3changegroup_new).apply(null,arguments)},n._sqlite3changegroup_add=function(){return(n._sqlite3changegroup_add=n.asm.sqlite3changegroup_add).apply(null,arguments)},n._sqlite3changegroup_output=function(){return(n._sqlite3changegroup_output=n.asm.sqlite3changegroup_output).apply(null,arguments)},n._sqlite3changegroup_add_strm=function(){return(n._sqlite3changegroup_add_strm=n.asm.sqlite3changegroup_add_strm).apply(null,arguments)},n._sqlite3changegroup_output_strm=function(){return(n._sqlite3changegroup_output_strm=n.asm.sqlite3changegroup_output_strm).apply(null,arguments)},n._sqlite3changegroup_delete=function(){return(n._sqlite3changegroup_delete=n.asm.sqlite3changegroup_delete).apply(null,arguments)},n._sqlite3changeset_concat=function(){return(n._sqlite3changeset_concat=n.asm.sqlite3changeset_concat).apply(null,arguments)},n._sqlite3changeset_concat_strm=function(){return(n._sqlite3changeset_concat_strm=n.asm.sqlite3changeset_concat_strm).apply(null,arguments)},n._sqlite3session_config=function(){return(n._sqlite3session_config=n.asm.sqlite3session_config).apply(null,arguments)},n._sqlite3_sourceid=function(){return(n._sqlite3_sourceid=n.asm.sqlite3_sourceid).apply(null,arguments)},n._sqlite3__wasm_pstack_ptr=function(){return(n._sqlite3__wasm_pstack_ptr=n.asm.sqlite3__wasm_pstack_ptr).apply(null,arguments)},n._sqlite3__wasm_pstack_restore=function(){return(n._sqlite3__wasm_pstack_restore=n.asm.sqlite3__wasm_pstack_restore).apply(null,arguments)},n._sqlite3__wasm_pstack_alloc=function(){return(n._sqlite3__wasm_pstack_alloc=n.asm.sqlite3__wasm_pstack_alloc).apply(null,arguments)},n._sqlite3__wasm_pstack_remaining=function(){return(n._sqlite3__wasm_pstack_remaining=n.asm.sqlite3__wasm_pstack_remaining).apply(null,arguments)},n._sqlite3__wasm_pstack_quota=function(){return(n._sqlite3__wasm_pstack_quota=n.asm.sqlite3__wasm_pstack_quota).apply(null,arguments)},n._sqlite3__wasm_db_error=function(){return(n._sqlite3__wasm_db_error=n.asm.sqlite3__wasm_db_error).apply(null,arguments)},n._sqlite3__wasm_test_struct=function(){return(n._sqlite3__wasm_test_struct=n.asm.sqlite3__wasm_test_struct).apply(null,arguments)},n._sqlite3__wasm_enum_json=function(){return(n._sqlite3__wasm_enum_json=n.asm.sqlite3__wasm_enum_json).apply(null,arguments)},n._sqlite3__wasm_vfs_unlink=function(){return(n._sqlite3__wasm_vfs_unlink=n.asm.sqlite3__wasm_vfs_unlink).apply(null,arguments)},n._sqlite3__wasm_db_vfs=function(){return(n._sqlite3__wasm_db_vfs=n.asm.sqlite3__wasm_db_vfs).apply(null,arguments)},n._sqlite3__wasm_db_reset=function(){return(n._sqlite3__wasm_db_reset=n.asm.sqlite3__wasm_db_reset).apply(null,arguments)},n._sqlite3__wasm_db_export_chunked=function(){return(n._sqlite3__wasm_db_export_chunked=n.asm.sqlite3__wasm_db_export_chunked).apply(null,arguments)},n._sqlite3__wasm_db_serialize=function(){return(n._sqlite3__wasm_db_serialize=n.asm.sqlite3__wasm_db_serialize).apply(null,arguments)},n._sqlite3__wasm_vfs_create_file=function(){return(n._sqlite3__wasm_vfs_create_file=n.asm.sqlite3__wasm_vfs_create_file).apply(null,arguments)},n._sqlite3__wasm_posix_create_file=function(){return(n._sqlite3__wasm_posix_create_file=n.asm.sqlite3__wasm_posix_create_file).apply(null,arguments)},n._sqlite3__wasm_kvvfsMakeKeyOnPstack=function(){return(n._sqlite3__wasm_kvvfsMakeKeyOnPstack=n.asm.sqlite3__wasm_kvvfsMakeKeyOnPstack).apply(null,arguments)},n._sqlite3__wasm_kvvfs_methods=function(){return(n._sqlite3__wasm_kvvfs_methods=n.asm.sqlite3__wasm_kvvfs_methods).apply(null,arguments)},n._sqlite3__wasm_vtab_config=function(){return(n._sqlite3__wasm_vtab_config=n.asm.sqlite3__wasm_vtab_config).apply(null,arguments)},n._sqlite3__wasm_db_config_ip=function(){return(n._sqlite3__wasm_db_config_ip=n.asm.sqlite3__wasm_db_config_ip).apply(null,arguments)},n._sqlite3__wasm_db_config_pii=function(){return(n._sqlite3__wasm_db_config_pii=n.asm.sqlite3__wasm_db_config_pii).apply(null,arguments)},n._sqlite3__wasm_db_config_s=function(){return(n._sqlite3__wasm_db_config_s=n.asm.sqlite3__wasm_db_config_s).apply(null,arguments)},n._sqlite3__wasm_config_i=function(){return(n._sqlite3__wasm_config_i=n.asm.sqlite3__wasm_config_i).apply(null,arguments)},n._sqlite3__wasm_config_ii=function(){return(n._sqlite3__wasm_config_ii=n.asm.sqlite3__wasm_config_ii).apply(null,arguments)},n._sqlite3__wasm_config_j=function(){return(n._sqlite3__wasm_config_j=n.asm.sqlite3__wasm_config_j).apply(null,arguments)},n._sqlite3__wasm_qfmt_token=function(){return(n._sqlite3__wasm_qfmt_token=n.asm.sqlite3__wasm_qfmt_token).apply(null,arguments)},n._sqlite3__wasm_init_wasmfs=function(){return(n._sqlite3__wasm_init_wasmfs=n.asm.sqlite3__wasm_init_wasmfs).apply(null,arguments)},n._sqlite3__wasm_test_intptr=function(){return(n._sqlite3__wasm_test_intptr=n.asm.sqlite3__wasm_test_intptr).apply(null,arguments)},n._sqlite3__wasm_test_voidptr=function(){return(n._sqlite3__wasm_test_voidptr=n.asm.sqlite3__wasm_test_voidptr).apply(null,arguments)},n._sqlite3__wasm_test_int64_max=function(){return(n._sqlite3__wasm_test_int64_max=n.asm.sqlite3__wasm_test_int64_max).apply(null,arguments)},n._sqlite3__wasm_test_int64_min=function(){return(n._sqlite3__wasm_test_int64_min=n.asm.sqlite3__wasm_test_int64_min).apply(null,arguments)},n._sqlite3__wasm_test_int64_times2=function(){return(n._sqlite3__wasm_test_int64_times2=n.asm.sqlite3__wasm_test_int64_times2).apply(null,arguments)},n._sqlite3__wasm_test_int64_minmax=function(){return(n._sqlite3__wasm_test_int64_minmax=n.asm.sqlite3__wasm_test_int64_minmax).apply(null,arguments)},n._sqlite3__wasm_test_int64ptr=function(){return(n._sqlite3__wasm_test_int64ptr=n.asm.sqlite3__wasm_test_int64ptr).apply(null,arguments)},n._sqlite3__wasm_test_stack_overflow=function(){return(n._sqlite3__wasm_test_stack_overflow=n.asm.sqlite3__wasm_test_stack_overflow).apply(null,arguments)},n._sqlite3__wasm_test_str_hello=function(){return(n._sqlite3__wasm_test_str_hello=n.asm.sqlite3__wasm_test_str_hello).apply(null,arguments)},n._sqlite3__wasm_SQLTester_strglob=function(){return(n._sqlite3__wasm_SQLTester_strglob=n.asm.sqlite3__wasm_SQLTester_strglob).apply(null,arguments)};var Qc=n._malloc=function(){return(Qc=n._malloc=n.asm.malloc).apply(null,arguments)};n._free=function(){return(n._free=n.asm.free).apply(null,arguments)},n._realloc=function(){return(n._realloc=n.asm.realloc).apply(null,arguments)};var Gc=n._emscripten_builtin_memalign=function(){return(Gc=n._emscripten_builtin_memalign=n.asm.emscripten_builtin_memalign).apply(null,arguments)};n.stackSave=function(){return(n.stackSave=n.asm.stackSave).apply(null,arguments)},n.stackRestore=function(){return(n.stackRestore=n.asm.stackRestore).apply(null,arguments)},n.stackAlloc=function(){return(n.stackAlloc=n.asm.stackAlloc).apply(null,arguments)},n.wasmMemory=ge;var js;cn=i(function u(){js||Vc(),js||(cn=u)},"runCaller");function Vc(u){if(Bt>0||(Gt(),Bt>0))return;function c(){js||(js=!0,n.calledRun=!0,!Se&&(on(),s(n),n.onRuntimeInitialized&&n.onRuntimeInitialized(),Ln()))}i(c,"doRun"),n.setStatus?(n.setStatus("Running..."),setTimeout(function(){setTimeout(function(){n.setStatus("")},1),c()},1)):c()}if(i(Vc,"run"),n.preInit)for(typeof n.preInit=="function"&&(n.preInit=[n.preInit]);n.preInit.length>0;)n.preInit.pop()();return Vc(),n.postRun||(n.postRun=[]),n.postRun.push(function(u){if(globalThis.sqlite3ApiBootstrap=i(function c(p=globalThis.sqlite3ApiConfig||c.defaultConfig){if(c.sqlite3)return(c.sqlite3.config||console).warn("sqlite3ApiBootstrap() called multiple times.","Config and external initializers are ignored on calls after the first."),c.sqlite3;const d=Object.assign(Object.create(null),{exports:void 0,memory:void 0,bigIntEnabled:typeof u<"u"&&u.HEAPU64?!0:!!globalThis.BigInt64Array,debug:console.debug.bind(console),warn:console.warn.bind(console),error:console.error.bind(console),log:console.log.bind(console),wasmfsOpfsDir:"/opfs",useStdAlloc:!1},p||{});Object.assign(d,{allocExportName:d.useStdAlloc?"malloc":"sqlite3_malloc",deallocExportName:d.useStdAlloc?"free":"sqlite3_free",reallocExportName:d.useStdAlloc?"realloc":"sqlite3_realloc"},d),["exports","memory","wasmfsOpfsDir"].forEach(E=>{typeof d[E]=="function"&&(d[E]=d[E]())}),delete globalThis.sqlite3ApiConfig,delete c.defaultConfig;const h=Object.create(null),y=Object.create(null),C=i(E=>h.sqlite3_js_rc_str&&h.sqlite3_js_rc_str(E)||"Unknown result code #"+E,"__rcStr"),L=i(E=>typeof E=="number"&&E===(E|0),"__isInt");class Y extends Error{static{i(this,"SQLite3Error")}constructor(...A){let I;if(A.length)if(L(A[0]))if(I=A[0],A.length===1)super(C(A[0]));else{const G=C(I);typeof A[1]=="object"?super(G,A[1]):(A[0]=G+":",super(A.join(" ")))}else A.length===2&&typeof A[1]=="object"?super(...A):super(A.join(" "));this.resultCode=I||h.SQLITE_ERROR,this.name="SQLite3Error"}}Y.toss=(...E)=>{throw new Y(...E)};const ee=Y.toss;d.wasmfsOpfsDir&&!/^\/[^/]+$/.test(d.wasmfsOpfsDir)&&ee("config.wasmfsOpfsDir must be falsy or in the form '/dir-name'.");const de=i(E=>typeof E!="bigint"&&E===(E|0)&&E<=2147483647&&E>=-2147483648,"isInt32"),ye=i(function E(A){return E._max||(E._max=BigInt("0x7fffffffffffffff"),E._min=~E._max),A>=E._min&&A<=E._max},"f"),Q=i(E=>E>=-0x7fffffffn-1n&&E<=0x7fffffffn,"bigIntFits32"),H=i(function E(A){return E._min||(E._min=Number.MIN_SAFE_INTEGER,E._max=Number.MAX_SAFE_INTEGER),A>=E._min&&A<=E._max},"f"),se=i(E=>E&&E.constructor&&de(E.constructor.BYTES_PER_ELEMENT)?E:!1,"isTypedArray"),F=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,B=i(E=>E.buffer instanceof F,"isSharedTypedArray"),W=i((E,A,I)=>B(E)?E.slice(A,I):E.subarray(A,I),"typedArrayPart"),ie=i(E=>E&&(E instanceof Uint8Array||E instanceof Int8Array||E instanceof ArrayBuffer),"isBindableTypedArray"),re=i(E=>E&&(E instanceof Uint8Array||E instanceof Int8Array||E instanceof ArrayBuffer),"isSQLableTypedArray"),z=i(E=>ie(E)||ee("Value is not of a supported TypedArray type."),"affirmBindableTypedArray"),Z=new TextDecoder("utf-8"),xe=i(function(E,A,I){return Z.decode(W(E,A,I))},"typedArrayToString"),S=i(function(E){return re(E)?xe(E instanceof ArrayBuffer?new Uint8Array(E):E):Array.isArray(E)?E.join(""):(y.isPtr(E)&&(E=y.cstrToJs(E)),E)},"flexibleString");class k extends Error{static{i(this,"WasmAllocError")}constructor(...A){A.length===2&&typeof A[1]=="object"?super(...A):A.length?super(A.join(" ")):super("Allocation failed."),this.resultCode=h.SQLITE_NOMEM,this.name="WasmAllocError"}}k.toss=(...E)=>{throw new k(...E)},Object.assign(h,{sqlite3_bind_blob:void 0,sqlite3_bind_text:void 0,sqlite3_create_function_v2:(E,A,I,G,he,Fe,Pe,Be,_e)=>{},sqlite3_create_function:(E,A,I,G,he,Fe,Pe,Be)=>{},sqlite3_create_window_function:(E,A,I,G,he,Fe,Pe,Be,_e,N)=>{},sqlite3_prepare_v3:(E,A,I,G,he,Fe)=>{},sqlite3_prepare_v2:(E,A,I,G,he)=>{},sqlite3_exec:(E,A,I,G,he)=>{},sqlite3_randomness:(E,A)=>{}});const D={affirmBindableTypedArray:z,flexibleString:S,bigIntFits32:Q,bigIntFits64:ye,bigIntFitsDouble:H,isBindableTypedArray:ie,isInt32:de,isSQLableTypedArray:re,isTypedArray:se,typedArrayToString:xe,isUIThread:()=>globalThis.window===globalThis&&!!globalThis.document,isSharedTypedArray:B,toss:function(...E){throw new Error(E.join(" "))},toss3:ee,typedArrayPart:W,affirmDbHeader:function(E){E instanceof ArrayBuffer&&(E=new Uint8Array(E));const A="SQLite format 3";A.length>E.byteLength&&ee("Input does not contain an SQLite3 database header.");for(let I=0;I<A.length;++I)A.charCodeAt(I)!==E[I]&&ee("Input does not contain an SQLite3 database header.")},affirmIsDb:function(E){E instanceof ArrayBuffer&&(E=new Uint8Array(E));const A=E.byteLength;(A<512||A%512!==0)&&ee("Byte array size",A,"is invalid for an SQLite3 db."),D.affirmDbHeader(E)}};Object.assign(y,{ptrSizeof:d.wasmPtrSizeof||4,ptrIR:d.wasmPtrIR||"i32",bigIntEnabled:!!d.bigIntEnabled,exports:d.exports||ee("Missing API config.exports (WASM module exports)."),memory:d.memory||d.exports.memory||ee("API config object requires a WebAssembly.Memory object","in either config.exports.memory (exported)","or config.memory (imported)."),alloc:void 0,realloc:void 0,dealloc:void 0}),y.allocFromTypedArray=function(E){E instanceof ArrayBuffer&&(E=new Uint8Array(E)),z(E);const A=y.alloc(E.byteLength||1);return y.heapForSize(E.constructor).set(E.byteLength?E:[0],A),A};{const E=d.allocExportName,A=d.deallocExportName,I=d.reallocExportName;for(const G of[E,A,I])y.exports[G]instanceof Function||ee("Missing required exports[",G,"] function.");y.alloc=i(function G(he){return G.impl(he)||k.toss("Failed to allocate",he," bytes.")},"f"),y.alloc.impl=y.exports[E],y.realloc=i(function G(he,Fe){const Pe=G.impl(he,Fe);return Fe?Pe||k.toss("Failed to reallocate",Fe," bytes."):0},"f"),y.realloc.impl=y.exports[I],y.dealloc=y.exports[A]}y.compileOptionUsed=i(function E(A){if(arguments.length){if(Array.isArray(A)){const I={};return A.forEach(G=>{I[G]=h.sqlite3_compileoption_used(G)}),I}else if(typeof A=="object")return Object.keys(A).forEach(I=>{A[I]=h.sqlite3_compileoption_used(I)}),A}else{if(E._result)return E._result;E._opt||(E._rx=/^([^=]+)=(.+)/,E._rxInt=/^-?\d+$/,E._opt=function(Pe,Be){const _e=E._rx.exec(Pe);Be[0]=_e?_e[1]:Pe,Be[1]=_e?E._rxInt.test(_e[2])?+_e[2]:_e[2]:!0});const I={},G=[0,0];let he=0,Fe;for(;Fe=h.sqlite3_compileoption_get(he++);)E._opt(Fe,G),I[G[0]]=G[1];return E._result=I}return typeof A=="string"?!!h.sqlite3_compileoption_used(A):!1},"f"),y.pstack=Object.assign(Object.create(null),{restore:y.exports.sqlite3__wasm_pstack_restore,alloc:function(E){return typeof E=="string"&&!(E=y.sizeofIR(E))&&k.toss("Invalid value for pstack.alloc(",arguments[0],")"),y.exports.sqlite3__wasm_pstack_alloc(E)||k.toss("Could not allocate",E,"bytes from the pstack.")},allocChunks:function(E,A){typeof A=="string"&&!(A=y.sizeofIR(A))&&k.toss("Invalid size value for allocChunks(",arguments[1],")");const I=y.pstack.alloc(E*A),G=[];let he=0,Fe=0;for(;he<E;++he,Fe+=A)G.push(I+Fe);return G},allocPtr:(E=1,A=!0)=>E===1?y.pstack.alloc(A?8:y.ptrSizeof):y.pstack.allocChunks(E,A?8:y.ptrSizeof),call:function(E){const A=y.pstack.pointer;try{return E(O)}finally{y.pstack.restore(A)}}}),Object.defineProperties(y.pstack,{pointer:{configurable:!1,iterable:!0,writeable:!1,get:y.exports.sqlite3__wasm_pstack_ptr},quota:{configurable:!1,iterable:!0,writeable:!1,get:y.exports.sqlite3__wasm_pstack_quota},remaining:{configurable:!1,iterable:!0,writeable:!1,get:y.exports.sqlite3__wasm_pstack_remaining}}),h.sqlite3_randomness=(...E)=>{if(E.length===1&&D.isTypedArray(E[0])&&E[0].BYTES_PER_ELEMENT===1){const A=E[0];if(A.byteLength===0)return y.exports.sqlite3_randomness(0,0),A;const I=y.pstack.pointer;try{let G=A.byteLength,he=0;const Fe=y.exports.sqlite3_randomness,Pe=y.heap8u(),Be=G<512?G:512,_e=y.pstack.alloc(Be);do{const N=G>Be?Be:G;Fe(N,_e),A.set(W(Pe,_e,_e+N),he),G-=N,he+=N}while(G>0)}catch(G){console.error("Highly unexpected (and ignored!) exception in sqlite3_randomness():",G)}finally{y.pstack.restore(I)}return A}y.exports.sqlite3_randomness(...E)};let pe;if(h.sqlite3_wasmfs_opfs_dir=function(){if(pe!==void 0)return pe;const E=d.wasmfsOpfsDir;if(!E||!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle)return pe="";try{return E&&y.xCallWrapped("sqlite3__wasm_init_wasmfs","i32",["string"],E)===0?pe=E:pe=""}catch{return pe=""}},h.sqlite3_wasmfs_filename_is_persistent=function(E){const A=h.sqlite3_wasmfs_opfs_dir();return A&&E?E.startsWith(A+"/"):!1},h.sqlite3_js_db_uses_vfs=function(E,A,I=0){try{const G=h.sqlite3_vfs_find(A);return G?E?G===h.sqlite3_js_db_vfs(E,I)?G:!1:G===h.sqlite3_vfs_find(0)?G:!1:!1}catch{return!1}},h.sqlite3_js_vfs_list=function(){const E=[];let A=h.sqlite3_vfs_find(0);for(;A;){const I=new h.sqlite3_vfs(A);E.push(y.cstrToJs(I.$zName)),A=I.$pNext,I.dispose()}return E},h.sqlite3_js_db_export=function(E,A=0){E=y.xWrap.testConvertArg("sqlite3*",E),E||ee("Invalid sqlite3* argument."),y.bigIntEnabled||ee("BigInt64 support is not enabled.");const I=y.scopedAllocPush();let G;try{const he=y.scopedAlloc(8+y.ptrSizeof),Fe=he+8,Pe=A?y.isPtr(A)?A:y.scopedAllocCString(""+A):0;let Be=y.exports.sqlite3__wasm_db_serialize(E,Pe,Fe,he,0);Be&&ee("Database serialization failed with code",O.capi.sqlite3_js_rc_str(Be)),G=y.peekPtr(Fe);const _e=y.peek(he,"i64");return Be=_e?y.heap8u().slice(G,G+Number(_e)):new Uint8Array,Be}finally{G&&y.exports.sqlite3_free(G),y.scopedAllocPop(I)}},h.sqlite3_js_db_vfs=(E,A=0)=>D.sqlite3__wasm_db_vfs(E,A),h.sqlite3_js_aggregate_context=(E,A)=>h.sqlite3_aggregate_context(E,A)||(A?k.toss("Cannot allocate",A,"bytes for sqlite3_aggregate_context()"):0),h.sqlite3_js_posix_create_file=function(E,A,I){let G;A&&y.isPtr(A)?G=A:A instanceof ArrayBuffer||A instanceof Uint8Array?(G=y.allocFromTypedArray(A),(arguments.length<3||!D.isInt32(I)||I<0)&&(I=A.byteLength)):Y.toss("Invalid 2nd argument for sqlite3_js_posix_create_file().");try{(!D.isInt32(I)||I<0)&&Y.toss("Invalid 3rd argument for sqlite3_js_posix_create_file().");const he=D.sqlite3__wasm_posix_create_file(E,G,I);he&&Y.toss("Creation of file failed with sqlite3 result code",h.sqlite3_js_rc_str(he))}finally{y.dealloc(G)}},h.sqlite3_js_vfs_create_file=function(E,A,I,G){d.warn("sqlite3_js_vfs_create_file() is deprecated and","should be avoided because it can lead to C-level crashes.","See its documentation for alternative options.");let he;I?(y.isPtr(I)?he=I:I instanceof ArrayBuffer&&(I=new Uint8Array(I)),I instanceof Uint8Array?(he=y.allocFromTypedArray(I),(arguments.length<4||!D.isInt32(G)||G<0)&&(G=I.byteLength)):Y.toss("Invalid 3rd argument type for sqlite3_js_vfs_create_file().")):he=0,(!D.isInt32(G)||G<0)&&(y.dealloc(he),Y.toss("Invalid 4th argument for sqlite3_js_vfs_create_file()."));try{const Fe=D.sqlite3__wasm_vfs_create_file(E,A,he,G);Fe&&Y.toss("Creation of file failed with sqlite3 result code",h.sqlite3_js_rc_str(Fe))}finally{y.dealloc(he)}},h.sqlite3_js_sql_to_string=E=>{if(typeof E=="string")return E;const A=S(v);return A===v?void 0:A},D.isUIThread()){const E=i(function(A){const I=Object.create(null);return I.prefix="kvvfs-"+A,I.stores=[],(A==="session"||A==="")&&I.stores.push(globalThis.sessionStorage),(A==="local"||A==="")&&I.stores.push(globalThis.localStorage),I},"__kvvfsInfo");h.sqlite3_js_kvvfs_clear=function(A=""){let I=0;const G=E(A);return G.stores.forEach(he=>{const Fe=[];let Pe;for(Pe=0;Pe<he.length;++Pe){const Be=he.key(Pe);Be.startsWith(G.prefix)&&Fe.push(Be)}Fe.forEach(Be=>he.removeItem(Be)),I+=Fe.length}),I},h.sqlite3_js_kvvfs_size=function(A=""){let I=0;const G=E(A);return G.stores.forEach(he=>{let Fe;for(Fe=0;Fe<he.length;++Fe){const Pe=he.key(Fe);Pe.startsWith(G.prefix)&&(I+=Pe.length,I+=he.getItem(Pe).length)}}),I*2}}h.sqlite3_db_config=function(E,A,...I){switch(this.s||(this.s=y.xWrap("sqlite3__wasm_db_config_s","int",["sqlite3*","int","string:static"]),this.pii=y.xWrap("sqlite3__wasm_db_config_pii","int",["sqlite3*","int","*","int","int"]),this.ip=y.xWrap("sqlite3__wasm_db_config_ip","int",["sqlite3*","int","int","*"])),A){case h.SQLITE_DBCONFIG_ENABLE_FKEY:case h.SQLITE_DBCONFIG_ENABLE_TRIGGER:case h.SQLITE_DBCONFIG_ENABLE_FTS3_TOKENIZER:case h.SQLITE_DBCONFIG_ENABLE_LOAD_EXTENSION:case h.SQLITE_DBCONFIG_NO_CKPT_ON_CLOSE:case h.SQLITE_DBCONFIG_ENABLE_QPSG:case h.SQLITE_DBCONFIG_TRIGGER_EQP:case h.SQLITE_DBCONFIG_RESET_DATABASE:case h.SQLITE_DBCONFIG_DEFENSIVE:case h.SQLITE_DBCONFIG_WRITABLE_SCHEMA:case h.SQLITE_DBCONFIG_LEGACY_ALTER_TABLE:case h.SQLITE_DBCONFIG_DQS_DML:case h.SQLITE_DBCONFIG_DQS_DDL:case h.SQLITE_DBCONFIG_ENABLE_VIEW:case h.SQLITE_DBCONFIG_LEGACY_FILE_FORMAT:case h.SQLITE_DBCONFIG_TRUSTED_SCHEMA:case h.SQLITE_DBCONFIG_STMT_SCANSTATUS:case h.SQLITE_DBCONFIG_REVERSE_SCANORDER:return this.ip(E,A,I[0],I[1]||0);case h.SQLITE_DBCONFIG_LOOKASIDE:return this.pii(E,A,I[0],I[1],I[2]);case h.SQLITE_DBCONFIG_MAINDBNAME:return this.s(E,A,I[0]);default:return h.SQLITE_MISUSE}}.bind(Object.create(null)),h.sqlite3_value_to_js=function(E,A=!0){let I;const G=h.sqlite3_value_type(E);switch(G){case h.SQLITE_INTEGER:y.bigIntEnabled?(I=h.sqlite3_value_int64(E),D.bigIntFitsDouble(I)&&(I=Number(I))):I=h.sqlite3_value_double(E);break;case h.SQLITE_FLOAT:I=h.sqlite3_value_double(E);break;case h.SQLITE_TEXT:I=h.sqlite3_value_text(E);break;case h.SQLITE_BLOB:{const he=h.sqlite3_value_bytes(E),Fe=h.sqlite3_value_blob(E);he&&!Fe&&O.WasmAllocError.toss("Cannot allocate memory for blob argument of",he,"byte(s)"),I=he?y.heap8u().slice(Fe,Fe+Number(he)):null;break}case h.SQLITE_NULL:I=null;break;default:A&&ee(h.SQLITE_MISMATCH,"Unhandled sqlite3_value_type():",G),I=void 0}return I},h.sqlite3_values_to_js=function(E,A,I=!0){let G;const he=[];for(G=0;G<E;++G)he.push(h.sqlite3_value_to_js(y.peekPtr(A+y.ptrSizeof*G),I));return he},h.sqlite3_result_error_js=function(E,A){A instanceof k?h.sqlite3_result_error_nomem(E):h.sqlite3_result_error(E,""+A,-1)},h.sqlite3_result_js=function(E,A){if(A instanceof Error){h.sqlite3_result_error_js(E,A);return}try{switch(typeof A){case"undefined":break;case"boolean":h.sqlite3_result_int(E,A?1:0);break;case"bigint":D.bigIntFits32(A)?h.sqlite3_result_int(E,Number(A)):D.bigIntFitsDouble(A)?h.sqlite3_result_double(E,Number(A)):y.bigIntEnabled?D.bigIntFits64(A)?h.sqlite3_result_int64(E,A):ee("BigInt value",A.toString(),"is too BigInt for int64."):ee("BigInt value",A.toString(),"is too BigInt.");break;case"number":{let I;D.isInt32(A)?I=h.sqlite3_result_int:y.bigIntEnabled&&Number.isInteger(A)&&D.bigIntFits64(BigInt(A))?I=h.sqlite3_result_int64:I=h.sqlite3_result_double,I(E,A);break}case"string":{const[I,G]=y.allocCString(A,!0);h.sqlite3_result_text(E,I,G,h.SQLITE_WASM_DEALLOC);break}case"object":if(A===null){h.sqlite3_result_null(E);break}else if(D.isBindableTypedArray(A)){const I=y.allocFromTypedArray(A);h.sqlite3_result_blob(E,I,A.byteLength,h.SQLITE_WASM_DEALLOC);break}default:ee("Don't not how to handle this UDF result value:",typeof A,A)}}catch(I){h.sqlite3_result_error_js(E,I)}},h.sqlite3_column_js=function(E,A,I=!0){const G=h.sqlite3_column_value(E,A);return G===0?void 0:h.sqlite3_value_to_js(G,I)};const T=function(E,A,I){I=h[I],this.ptr?y.pokePtr(this.ptr,0):this.ptr=y.allocPtr();const G=I(E,A,this.ptr);if(G)return Y.toss(G,arguments[2]+"() failed with code "+G);const he=y.peekPtr(this.ptr);return he?h.sqlite3_value_to_js(he,!0):void 0}.bind(Object.create(null));h.sqlite3_preupdate_new_js=(E,A)=>T(E,A,"sqlite3_preupdate_new"),h.sqlite3_preupdate_old_js=(E,A)=>T(E,A,"sqlite3_preupdate_old"),h.sqlite3changeset_new_js=(E,A)=>T(E,A,"sqlite3changeset_new"),h.sqlite3changeset_old_js=(E,A)=>T(E,A,"sqlite3changeset_old");const O={WasmAllocError:k,SQLite3Error:Y,capi:h,util:D,wasm:y,config:d,version:Object.create(null),client:void 0,asyncPostInit:i(async function E(){if(E.isReady instanceof Promise)return E.isReady;let A=c.initializersAsync;delete c.initializersAsync;const I=i(async()=>(O.__isUnderTest||(delete O.util,delete O.StructBinder),O),"postInit"),G=i(Fe=>{throw d.error("an async sqlite3 initializer failed:",Fe),Fe},"catcher");if(!A||!A.length)return E.isReady=I().catch(G);A=A.map(Fe=>Fe instanceof Function?async Pe=>Fe(O):Fe),A.push(I);let he=Promise.resolve(O);for(;A.length;)he=he.then(A.shift());return E.isReady=he.catch(G)},"ff"),scriptInfo:void 0};try{c.initializers.forEach(E=>{E(O)})}catch(E){throw console.error("sqlite3 bootstrap initializer threw:",E),E}return delete c.initializers,c.sqlite3=O,O},"sqlite3ApiBootstrap"),globalThis.sqlite3ApiBootstrap.initializers=[],globalThis.sqlite3ApiBootstrap.initializersAsync=[],globalThis.sqlite3ApiBootstrap.defaultConfig=Object.create(null),globalThis.sqlite3ApiBootstrap.sqlite3=void 0,globalThis.WhWasmUtilInstaller=function(c){c.bigIntEnabled===void 0&&(c.bigIntEnabled=!!globalThis.BigInt64Array);const p=i((...S)=>{throw new Error(S.join(" "))},"toss");c.exports||Object.defineProperty(c,"exports",{enumerable:!0,configurable:!0,get:()=>c.instance&&c.instance.exports});const d=c.pointerIR||"i32",h=c.ptrSizeof=d==="i32"?4:d==="i64"?8:p("Unhandled ptrSizeof:",d),y=Object.create(null);y.heapSize=0,y.memory=null,y.freeFuncIndexes=[],y.scopedAlloc=[],y.utf8Decoder=new TextDecoder,y.utf8Encoder=new TextEncoder("utf-8"),c.sizeofIR=S=>{switch(S){case"i8":return 1;case"i16":return 2;case"i32":case"f32":case"float":return 4;case"i64":case"f64":case"double":return 8;case"*":return h;default:return(""+S).endsWith("*")?h:void 0}};const C=i(function(){if(!y.memory)y.memory=c.memory instanceof WebAssembly.Memory?c.memory:c.exports.memory;else if(y.heapSize===y.memory.buffer.byteLength)return y;const S=y.memory.buffer;return y.HEAP8=new Int8Array(S),y.HEAP8U=new Uint8Array(S),y.HEAP16=new Int16Array(S),y.HEAP16U=new Uint16Array(S),y.HEAP32=new Int32Array(S),y.HEAP32U=new Uint32Array(S),c.bigIntEnabled&&(y.HEAP64=new BigInt64Array(S),y.HEAP64U=new BigUint64Array(S)),y.HEAP32F=new Float32Array(S),y.HEAP64F=new Float64Array(S),y.heapSize=S.byteLength,y},"heapWrappers");c.heap8=()=>C().HEAP8,c.heap8u=()=>C().HEAP8U,c.heap16=()=>C().HEAP16,c.heap16u=()=>C().HEAP16U,c.heap32=()=>C().HEAP32,c.heap32u=()=>C().HEAP32U,c.heapForSize=function(S,k=!0){const D=y.memory&&y.heapSize===y.memory.buffer.byteLength?y:C();switch(S){case Int8Array:return D.HEAP8;case Uint8Array:return D.HEAP8U;case Int16Array:return D.HEAP16;case Uint16Array:return D.HEAP16U;case Int32Array:return D.HEAP32;case Uint32Array:return D.HEAP32U;case 8:return k?D.HEAP8U:D.HEAP8;case 16:return k?D.HEAP16U:D.HEAP16;case 32:return k?D.HEAP32U:D.HEAP32;case 64:if(D.HEAP64)return k?D.HEAP64U:D.HEAP64;break;default:if(c.bigIntEnabled){if(S===globalThis.BigUint64Array)return D.HEAP64U;if(S===globalThis.BigInt64Array)return D.HEAP64;break}}p("Invalid heapForSize() size: expecting 8, 16, 32,","or (if BigInt is enabled) 64.")},c.functionTable=function(){return c.exports.__indirect_function_table},c.functionEntry=function(S){const k=c.functionTable();return S<k.length?k.get(S):void 0},c.jsFuncToWasm=i(function S(k,D){if(S._||(S._={sigTypes:Object.assign(Object.create(null),{i:"i32",p:"i32",P:"i32",s:"i32",j:"i64",f:"f32",d:"f64"}),typeCodes:Object.assign(Object.create(null),{f64:124,f32:125,i64:126,i32:127}),uleb128Encode:function(O,E,A){A<128?O[E](A):O[E](A%128|128,A>>7)},rxJSig:/^(\w)\((\w*)\)$/,sigParams:function(O){const E=S._.rxJSig.exec(O);return E?E[2]:O.substr(1)},letterType:O=>S._.sigTypes[O]||p("Invalid signature letter:",O),pushSigType:(O,E)=>O.push(S._.typeCodes[S._.letterType(E)])}),typeof k=="string"){const O=D;D=k,k=O}const pe=S._.sigParams(D),T=[1,96];S._.uleb128Encode(T,"push",pe.length);for(const O of pe)S._.pushSigType(T,O);return D[0]==="v"?T.push(0):(T.push(1),S._.pushSigType(T,D[0])),S._.uleb128Encode(T,"unshift",T.length),T.unshift(0,97,115,109,1,0,0,0,1),T.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array(T)),{e:{f:k}}).exports.f},"f");const L=i(function(k,D,pe){if(pe&&!y.scopedAlloc.length&&p("No scopedAllocPush() scope is active."),typeof k=="string"){const A=D;D=k,k=A}(typeof D!="string"||!(k instanceof Function))&&p("Invalid arguments: expecting (function,signature) or (signature,function).");const T=c.functionTable(),O=T.length;let E;for(;y.freeFuncIndexes.length&&(E=y.freeFuncIndexes.pop(),T.get(E));){E=null;continue}E||(E=O,T.grow(1));try{return T.set(E,k),pe&&y.scopedAlloc[y.scopedAlloc.length-1].push(E),E}catch(A){if(!(A instanceof TypeError))throw E===O&&y.freeFuncIndexes.push(O),A}try{const A=c.jsFuncToWasm(k,D);T.set(E,A),pe&&y.scopedAlloc[y.scopedAlloc.length-1].push(E)}catch(A){throw E===O&&y.freeFuncIndexes.push(O),A}return E},"f");c.installFunction=(S,k)=>L(S,k,!1),c.scopedInstallFunction=(S,k)=>L(S,k,!0),c.uninstallFunction=function(S){if(!S&&S!==0)return;const k=y.freeFuncIndexes,D=c.functionTable();k.push(S);const pe=D.get(S);return D.set(S,null),pe},c.peek=i(function(k,D="i8"){D.endsWith("*")&&(D=d);const pe=y.memory&&y.heapSize===y.memory.buffer.byteLength?y:C(),T=Array.isArray(k)?[]:void 0;let O;do{switch(T&&(k=arguments[0].shift()),D){case"i1":case"i8":O=pe.HEAP8[k>>0];break;case"i16":O=pe.HEAP16[k>>1];break;case"i32":O=pe.HEAP32[k>>2];break;case"float":case"f32":O=pe.HEAP32F[k>>2];break;case"double":case"f64":O=Number(pe.HEAP64F[k>>3]);break;case"i64":if(c.bigIntEnabled){O=BigInt(pe.HEAP64[k>>3]);break}default:p("Invalid type for peek():",D)}T&&T.push(O)}while(T&&arguments[0].length);return T||O},"f"),c.poke=function(S,k,D="i8"){D.endsWith("*")&&(D=d);const pe=y.memory&&y.heapSize===y.memory.buffer.byteLength?y:C();for(const T of Array.isArray(S)?S:[S])switch(D){case"i1":case"i8":pe.HEAP8[T>>0]=k;continue;case"i16":pe.HEAP16[T>>1]=k;continue;case"i32":pe.HEAP32[T>>2]=k;continue;case"float":case"f32":pe.HEAP32F[T>>2]=k;continue;case"double":case"f64":pe.HEAP64F[T>>3]=k;continue;case"i64":if(pe.HEAP64){pe.HEAP64[T>>3]=BigInt(k);continue}default:p("Invalid type for poke(): "+D)}return this},c.peekPtr=(...S)=>c.peek(S.length===1?S[0]:S,d),c.pokePtr=(S,k=0)=>c.poke(S,k,d),c.peek8=(...S)=>c.peek(S.length===1?S[0]:S,"i8"),c.poke8=(S,k)=>c.poke(S,k,"i8"),c.peek16=(...S)=>c.peek(S.length===1?S[0]:S,"i16"),c.poke16=(S,k)=>c.poke(S,k,"i16"),c.peek32=(...S)=>c.peek(S.length===1?S[0]:S,"i32"),c.poke32=(S,k)=>c.poke(S,k,"i32"),c.peek64=(...S)=>c.peek(S.length===1?S[0]:S,"i64"),c.poke64=(S,k)=>c.poke(S,k,"i64"),c.peek32f=(...S)=>c.peek(S.length===1?S[0]:S,"f32"),c.poke32f=(S,k)=>c.poke(S,k,"f32"),c.peek64f=(...S)=>c.peek(S.length===1?S[0]:S,"f64"),c.poke64f=(S,k)=>c.poke(S,k,"f64"),c.getMemValue=c.peek,c.getPtrValue=c.peekPtr,c.setMemValue=c.poke,c.setPtrValue=c.pokePtr,c.isPtr32=S=>typeof S=="number"&&S===(S|0)&&S>=0,c.isPtr=c.isPtr32,c.cstrlen=function(S){if(!S||!c.isPtr(S))return null;const k=C().HEAP8U;let D=S;for(;k[D]!==0;++D);return D-S};const Y=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,ee=i(function(S,k,D){return y.utf8Decoder.decode(S.buffer instanceof Y?S.slice(k,D):S.subarray(k,D))},"__utf8Decode");c.cstrToJs=function(S){const k=c.cstrlen(S);return k?ee(C().HEAP8U,S,S+k):k===null?k:""},c.jstrlen=function(S){if(typeof S!="string")return null;const k=S.length;let D=0;for(let pe=0;pe<k;++pe){let T=S.charCodeAt(pe);T>=55296&&T<=57343&&(T=65536+((T&1023)<<10)|S.charCodeAt(++pe)&1023),T<=127?++D:T<=2047?D+=2:T<=65535?D+=3:D+=4}return D},c.jstrcpy=function(S,k,D=0,pe=-1,T=!0){if((!k||!(k instanceof Int8Array)&&!(k instanceof Uint8Array))&&p("jstrcpy() target must be an Int8Array or Uint8Array."),pe<0&&(pe=k.length-D),!(pe>0)||!(D>=0))return 0;let O=0,E=S.length;const A=D,I=D+pe-(T?1:0);for(;O<E&&D<I;++O){let G=S.charCodeAt(O);if(G>=55296&&G<=57343&&(G=65536+((G&1023)<<10)|S.charCodeAt(++O)&1023),G<=127){if(D>=I)break;k[D++]=G}else if(G<=2047){if(D+1>=I)break;k[D++]=192|G>>6,k[D++]=128|G&63}else if(G<=65535){if(D+2>=I)break;k[D++]=224|G>>12,k[D++]=128|G>>6&63,k[D++]=128|G&63}else{if(D+3>=I)break;k[D++]=240|G>>18,k[D++]=128|G>>12&63,k[D++]=128|G>>6&63,k[D++]=128|G&63}}return T&&(k[D++]=0),D-A},c.cstrncpy=function(S,k,D){if((!S||!k)&&p("cstrncpy() does not accept NULL strings."),D<0)D=c.cstrlen(strPtr)+1;else if(!(D>0))return 0;const pe=c.heap8u();let T=0,O;for(;T<D&&(O=pe[k+T]);++T)pe[S+T]=O;return T<D&&(pe[S+T++]=0),T},c.jstrToUintArray=(S,k=!1)=>y.utf8Encoder.encode(k?S+"\0":S);const de=i((S,k)=>{(!(S.alloc instanceof Function)||!(S.dealloc instanceof Function))&&p("Object is missing alloc() and/or dealloc() function(s)","required by",k+"().")},"__affirmAlloc"),ye=i(function(S,k,D,pe){if(de(c,pe),typeof S!="string")return null;{const T=y.utf8Encoder.encode(S),O=D(T.length+1),E=C().HEAP8U;return E.set(T,O),E[O+T.length]=0,k?[O,T.length]:O}},"__allocCStr");c.allocCString=(S,k=!1)=>ye(S,k,c.alloc,"allocCString()"),c.scopedAllocPush=function(){de(c,"scopedAllocPush");const S=[];return y.scopedAlloc.push(S),S},c.scopedAllocPop=function(S){de(c,"scopedAllocPop");const k=arguments.length?y.scopedAlloc.indexOf(S):y.scopedAlloc.length-1;k<0&&p("Invalid state object for scopedAllocPop()."),arguments.length===0&&(S=y.scopedAlloc[k]),y.scopedAlloc.splice(k,1);for(let D;D=S.pop();)c.functionEntry(D)?c.uninstallFunction(D):c.dealloc(D)},c.scopedAlloc=function(S){y.scopedAlloc.length||p("No scopedAllocPush() scope is active.");const k=c.alloc(S);return y.scopedAlloc[y.scopedAlloc.length-1].push(k),k},Object.defineProperty(c.scopedAlloc,"level",{configurable:!1,enumerable:!1,get:()=>y.scopedAlloc.length,set:()=>p("The 'active' property is read-only.")}),c.scopedAllocCString=(S,k=!1)=>ye(S,k,c.scopedAlloc,"scopedAllocCString()");const Q=i(function(S,k){const D=c[S?"scopedAlloc":"alloc"]((k.length+1)*c.ptrSizeof);let pe=0;return k.forEach(T=>{c.pokePtr(D+c.ptrSizeof*pe++,c[S?"scopedAllocCString":"allocCString"](""+T))}),c.pokePtr(D+c.ptrSizeof*pe,0),D},"__allocMainArgv");c.scopedAllocMainArgv=S=>Q(!0,S),c.allocMainArgv=S=>Q(!1,S),c.cArgvToJs=(S,k)=>{const D=[];for(let pe=0;pe<S;++pe){const T=c.peekPtr(k+c.ptrSizeof*pe);D.push(T?c.cstrToJs(T):null)}return D},c.scopedAllocCall=function(S){c.scopedAllocPush();try{return S()}finally{c.scopedAllocPop()}};const H=i(function(S,k,D){de(c,D);const pe=k?"i64":d;let T=c[D](S*(k?8:h));if(c.poke(T,0,pe),S===1)return T;const O=[T];for(let E=1;E<S;++E)T+=k?8:h,O[E]=T,c.poke(T,0,pe);return O},"__allocPtr");c.allocPtr=(S=1,k=!0)=>H(S,k,"alloc"),c.scopedAllocPtr=(S=1,k=!0)=>H(S,k,"scopedAlloc"),c.xGet=function(S){return c.exports[S]||p("Cannot find exported symbol:",S)};const se=i((S,k)=>p(S+"() requires",k,"argument(s)."),"__argcMismatch");c.xCall=function(S,...k){const D=S instanceof Function?S:c.xGet(S);return D instanceof Function||p("Exported symbol",S,"is not a function."),D.length!==k.length&&se(D===S?D.name:S,D.length),arguments.length===2&&Array.isArray(arguments[1])?D.apply(null,arguments[1]):D.apply(null,k)},y.xWrap=Object.create(null),y.xWrap.convert=Object.create(null),y.xWrap.convert.arg=new Map,y.xWrap.convert.result=new Map;const F=y.xWrap.convert.arg,B=y.xWrap.convert.result;c.bigIntEnabled&&F.set("i64",S=>BigInt(S));const W=d==="i32"?S=>S|0:S=>BigInt(S)|BigInt(0);F.set("i32",W).set("i16",S=>(S|0)&65535).set("i8",S=>(S|0)&255).set("f32",S=>Number(S).valueOf()).set("float",F.get("f32")).set("f64",F.get("f32")).set("double",F.get("f64")).set("int",F.get("i32")).set("null",S=>S).set(null,F.get("null")).set("**",W).set("*",W),B.set("*",W).set("pointer",W).set("number",S=>Number(S)).set("void",S=>{}).set("null",S=>S).set(null,B.get("null"));{const S=["i8","i16","i32","int","f32","float","f64","double"];c.bigIntEnabled&&S.push("i64");const k=F.get(d);for(const D of S)F.set(D+"*",k),B.set(D+"*",k),B.set(D,F.get(D)||p("Missing arg converter:",D))}const ie=i(function(S){return typeof S=="string"?c.scopedAllocCString(S):S?W(S):null},"__xArgString");F.set("string",ie).set("utf8",ie).set("pointer",ie),B.set("string",S=>c.cstrToJs(S)).set("utf8",B.get("string")).set("string:dealloc",S=>{try{return S?c.cstrToJs(S):null}finally{c.dealloc(S)}}).set("utf8:dealloc",B.get("string:dealloc")).set("json",S=>JSON.parse(c.cstrToJs(S))).set("json:dealloc",S=>{try{return S?JSON.parse(c.cstrToJs(S)):null}finally{c.dealloc(S)}});const re=class{static{i(this,"AbstractArgAdapter")}constructor(S){this.name=S.name||"unnamed adapter"}convertArg(S,k,D){p("AbstractArgAdapter must be subclassed.")}};F.FuncPtrAdapter=class Sn extends re{static{i(this,"FuncPtrAdapter")}constructor(k){super(k),F.FuncPtrAdapter.warnOnUse,this.name=k.name||"unnamed",this.signature=k.signature,k.contextKey instanceof Function&&(this.contextKey=k.contextKey,k.bindScope||(k.bindScope="context")),this.bindScope=k.bindScope||p("FuncPtrAdapter options requires a bindScope (explicit or implied)."),Sn.bindScopes.indexOf(k.bindScope)<0&&p("Invalid options.bindScope ("+k.bindMod+") for FuncPtrAdapter. Expecting one of: ("+Sn.bindScopes.join(", ")+")"),this.isTransient=this.bindScope==="transient",this.isContext=this.bindScope==="context",this.isPermanent=this.bindScope==="permanent",this.singleton=this.bindScope==="singleton"?[]:void 0,this.callProxy=k.callProxy instanceof Function?k.callProxy:void 0}contextKey(k,D){return this}contextMap(k){const D=this.__cmap||(this.__cmap=new Map);let pe=D.get(k);return pe===void 0&&D.set(k,pe=[]),pe}convertArg(k,D,pe){let T=this.singleton;if(!T&&this.isContext&&(T=this.contextMap(this.contextKey(D,pe))),T&&T[0]===k)return T[1];if(k instanceof Function){this.callProxy&&(k=this.callProxy(k));const O=L(k,this.signature,this.isTransient);if(Sn.debugFuncInstall&&Sn.debugOut("FuncPtrAdapter installed",this,this.contextKey(D,pe),"@"+O,k),T){if(T[1]){Sn.debugFuncInstall&&Sn.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(D,pe),"@"+T[1],k);try{y.scopedAlloc[y.scopedAlloc.length-1].push(T[1])}catch{}}T[0]=k,T[1]=O}return O}else if(c.isPtr(k)||k===null||k===void 0){if(T&&T[1]&&T[1]!==k){Sn.debugFuncInstall&&Sn.debugOut("FuncPtrAdapter uninstalling",this,this.contextKey(D,pe),"@"+T[1],k);try{y.scopedAlloc[y.scopedAlloc.length-1].push(T[1])}catch{}T[0]=T[1]=k|0}return k||0}else throw new TypeError("Invalid FuncPtrAdapter argument type. Expecting a function pointer or a "+(this.name?this.name+" ":"")+"function matching signature "+this.signature+".")}},F.FuncPtrAdapter.warnOnUse=!1,F.FuncPtrAdapter.debugFuncInstall=!1,F.FuncPtrAdapter.debugOut=console.debug.bind(console),F.FuncPtrAdapter.bindScopes=["transient","context","singleton","permanent"];const z=i(S=>F.get(S)||p("Argument adapter not found:",S),"__xArgAdapterCheck"),Z=i(S=>B.get(S)||p("Result adapter not found:",S),"__xResultAdapterCheck");y.xWrap.convertArg=(S,...k)=>z(S)(...k),y.xWrap.convertArgNoCheck=(S,...k)=>F.get(S)(...k),y.xWrap.convertResult=(S,k)=>S===null?k:S?Z(S)(k):void 0,y.xWrap.convertResultNoCheck=(S,k)=>S===null?k:S?B.get(S)(k):void 0,c.xWrap=function(S,k,...D){arguments.length===3&&Array.isArray(arguments[2])&&(D=arguments[2]),c.isPtr(S)&&(S=c.functionEntry(S)||p("Function pointer not found in WASM function table."));const pe=S instanceof Function,T=pe?S:c.xGet(S);if(pe&&(S=T.name||"unnamed function"),D.length!==T.length&&se(S,T.length),k===null&&T.length===0)return T;k!=null&&Z(k);for(const E of D)E instanceof re?F.set(E,(...A)=>E.convertArg(...A)):z(E);const O=y.xWrap;return T.length===0?(...E)=>E.length?se(S,T.length):O.convertResult(k,T.call(null)):function(...E){E.length!==T.length&&se(S,T.length);const A=c.scopedAllocPush();try{let I=0;for(;I<E.length;++I)E[I]=O.convertArgNoCheck(D[I],E[I],E,I);return O.convertResultNoCheck(k,T.apply(null,E))}finally{c.scopedAllocPop(A)}}};const xe=i(function(S,k,D,pe,T,O){if(typeof D=="string"){if(k===1)return O.get(D);if(k===2){if(pe)pe instanceof Function||p(T,"requires a function argument.");else return delete O.get(D),S;return O.set(D,pe),S}}p("Invalid arguments to",T)},"__xAdapter");return c.xWrap.resultAdapter=i(function S(k,D){return xe(S,arguments.length,k,D,"resultAdapter()",B)},"f"),c.xWrap.argAdapter=i(function S(k,D){return xe(S,arguments.length,k,D,"argAdapter()",F)},"f"),c.xWrap.FuncPtrAdapter=F.FuncPtrAdapter,c.xCallWrapped=function(S,k,D,...pe){return Array.isArray(arguments[3])&&(pe=arguments[3]),c.xWrap(S,k,D||[]).apply(null,pe||[])},c.xWrap.testConvertArg=y.xWrap.convertArg,c.xWrap.testConvertResult=y.xWrap.convertResult,c},globalThis.WhWasmUtilInstaller.yawl=function(c){const p=i(()=>fetch(c.uri,{credentials:"same-origin"}),"wfetch"),d=this,h=i(function(C){if(c.wasmUtilTarget){const L=i((...ee)=>{throw new Error(ee.join(" "))},"toss"),Y=c.wasmUtilTarget;if(Y.module=C.module,Y.instance=C.instance,Y.instance.exports.memory||(Y.memory=c.imports&&c.imports.env&&c.imports.env.memory||L("Missing 'memory' object!")),!Y.alloc&&C.instance.exports.malloc){const ee=C.instance.exports;Y.alloc=function(de){return ee.malloc(de)||L("Allocation of",de,"bytes failed.")},Y.dealloc=function(de){ee.free(de)}}d(Y)}return c.onload&&c.onload(C,c),C},"finalThen");return WebAssembly.instantiateStreaming?i(function(){return WebAssembly.instantiateStreaming(p(),c.imports||{}).then(h)},"loadWasmStreaming"):i(function(){return p().then(L=>L.arrayBuffer()).then(L=>WebAssembly.instantiate(L,c.imports||{})).then(h)},"loadWasmOldSchool")}.bind(globalThis.WhWasmUtilInstaller),globalThis.Jaccwabyt=i(function c(p){const d=i((...K)=>{throw new Error(K.join(" "))},"toss");!(p.heap instanceof WebAssembly.Memory)&&!(p.heap instanceof Function)&&d("config.heap must be WebAssembly.Memory instance or a function."),["alloc","dealloc"].forEach(function(K){p[K]instanceof Function||d("Config option '"+K+"' must be a function.")});const h=c,y=p.heap instanceof Function?p.heap:()=>new Uint8Array(p.heap.buffer),C=p.alloc,L=p.dealloc,Y=p.log||console.log.bind(console),ee=p.memberPrefix||"",de=p.memberSuffix||"",ye=p.bigIntEnabled===void 0?!!globalThis.BigInt64Array:!!p.bigIntEnabled,Q=globalThis.BigInt,H=globalThis.BigInt64Array,se=p.ptrSizeof||4,F=p.ptrIR||"i32";h.debugFlags||(h.__makeDebugFlags=function(K=null){K&&K.__flags&&(K=K.__flags);const ve=i(function Te(Ce){return arguments.length===0?Te.__flags:(Ce<0?(delete Te.__flags.getter,delete Te.__flags.setter,delete Te.__flags.alloc,delete Te.__flags.dealloc):(Te.__flags.getter=(1&Ce)!==0,Te.__flags.setter=(2&Ce)!==0,Te.__flags.alloc=(4&Ce)!==0,Te.__flags.dealloc=(8&Ce)!==0),Te._flags)},"f");return Object.defineProperty(ve,"__flags",{iterable:!1,writable:!1,value:Object.create(K)}),K||ve(0),ve},h.debugFlags=h.__makeDebugFlags());const B=function(){const K=new ArrayBuffer(2);return new DataView(K).setInt16(0,256,!0),new Int16Array(K)[0]===256}(),W=i(K=>K[1]==="(","isFuncSig"),ie=i(K=>K==="P","isAutoPtrSig"),re=i(K=>W(K)?"p":K[0],"sigLetter"),z=i(function(K){switch(re(K)){case"c":case"C":return"i8";case"i":return"i32";case"p":case"P":case"s":return F;case"j":return"i64";case"f":return"float";case"d":return"double"}d("Unhandled signature IR:",K)},"sigIR"),Z=H?()=>!0:()=>d("BigInt64Array is not available."),xe=i(function(K){switch(re(K)){case"p":case"P":case"s":{switch(se){case 4:return"getInt32";case 8:return Z()&&"getBigInt64"}break}case"i":return"getInt32";case"c":return"getInt8";case"C":return"getUint8";case"j":return Z()&&"getBigInt64";case"f":return"getFloat32";case"d":return"getFloat64"}d("Unhandled DataView getter for signature:",K)},"sigDVGetter"),S=i(function(K){switch(re(K)){case"p":case"P":case"s":{switch(se){case 4:return"setInt32";case 8:return Z()&&"setBigInt64"}break}case"i":return"setInt32";case"c":return"setInt8";case"C":return"setUint8";case"j":return Z()&&"setBigInt64";case"f":return"setFloat32";case"d":return"setFloat64"}d("Unhandled DataView setter for signature:",K)},"sigDVSetter"),k=i(function(K){switch(re(K)){case"i":case"f":case"c":case"C":case"d":return Number;case"j":return Z()&&Q;case"p":case"P":case"s":switch(se){case 4:return Number;case 8:return Z()&&Q}break}d("Unhandled DataView set wrapper for signature:",K)},"sigDVSetWrapper"),D=i((K,ve)=>K+"::"+ve,"sPropName"),pe=i(function(K,ve){return()=>d(D(K,ve),"is read-only.")},"__propThrowOnSet"),T=new WeakMap,O="(pointer-is-external)",E=i(function(K,ve,Te){if(Te||(Te=T.get(ve)),Te){if(T.delete(ve),Array.isArray(ve.ondispose)){let Ce;for(;Ce=ve.ondispose.shift();)try{Ce instanceof Function?Ce.call(ve):Ce instanceof Ne?Ce.dispose():typeof Ce=="number"&&L(Ce)}catch(Ze){K.structName}}else if(ve.ondispose instanceof Function)try{ve.ondispose()}catch(Ce){K.structName}delete ve.ondispose,K.debugFlags.__flags.dealloc&&Y("debug.dealloc:",ve[O]?"EXTERNAL":"",K.structName,"instance:",K.structInfo.sizeof,"bytes @"+Te),ve[O]||L(Te)}},"__freeStruct"),A=i(K=>({configurable:!1,writable:!1,iterable:!1,value:K}),"rop"),I=i(function(K,ve,Te){let Ce=!Te;Te?Object.defineProperty(ve,O,A(Te)):(Te=C(K.structInfo.sizeof),Te||d("Allocation of",K.structName,"structure failed."));try{K.debugFlags.__flags.alloc&&Y("debug.alloc:",Ce?"":"EXTERNAL",K.structName,"instance:",K.structInfo.sizeof,"bytes @"+Te),Ce&&y().fill(0,Te,Te+K.structInfo.sizeof),T.set(ve,Te)}catch(Ze){throw E(K,ve,Te),Ze}},"__allocStruct"),G=i(function(){const K=this.pointer;return K?new Uint8Array(y().slice(K,K+this.structInfo.sizeof)):null},"__memoryDump"),Fe=A(i(K=>ee+K+de,"__memberKey")),Pe=i(function(K,ve,Te=!0){let Ce=K.members[ve];if(!Ce&&(ee||de)){for(const Ze of Object.values(K.members))if(Ze.key===ve){Ce=Ze;break}!Ce&&Te&&d(D(K.name,ve),"is not a mapped struct member.")}return Ce},"__lookupMember"),Be=i(function K(ve,Te,Ce=!1){K._||(K._=pt=>pt.replace(/[^vipPsjrdcC]/g,"").replace(/[pPscC]/g,"i"));const Ze=Pe(ve.structInfo,Te,!0);return Ce?K._(Ze.signature):Ze.signature},"f"),_e={configurable:!1,enumerable:!1,get:function(){return T.get(this)},set:()=>d("Cannot assign the 'pointer' property of a struct.")},N=A(function(){const K=[];for(const ve of Object.keys(this.structInfo.members))K.push(this.memberKey(ve));return K}),V=new TextDecoder("utf-8"),ue=new TextEncoder,Ee=typeof SharedArrayBuffer>"u"?function(){}:SharedArrayBuffer,Re=i(function(K,ve,Te){return V.decode(K.buffer instanceof Ee?K.slice(ve,Te):K.subarray(ve,Te))},"__utf8Decode"),Me=i(function(K,ve,Te=!1){const Ce=Pe(K.structInfo,ve,Te);return Ce&&Ce.signature.length===1&&Ce.signature[0]==="s"?Ce:!1},"__memberIsString"),$=i(function(K){K.signature!=="s"&&d("Invalid member type signature for C-string value:",JSON.stringify(K))},"__affirmCStringSignature"),oe=i(function(ve,Te){const Ce=Pe(ve.structInfo,Te,!0);$(Ce);const Ze=ve[Ce.key];if(!Ze)return null;let pt=Ze;const lt=y();for(;lt[pt]!==0;++pt);return Ze===pt?"":Re(lt,Ze,pt)},"f"),me=i(function(K,...ve){K.ondispose?Array.isArray(K.ondispose)||(K.ondispose=[K.ondispose]):K.ondispose=[],K.ondispose.push(...ve)},"__addOnDispose"),ke=i(function(K){const ve=ue.encode(K),Te=C(ve.length+1);Te||d("Allocation error while duplicating string:",K);const Ce=y();return Ce.set(ve,Te),Ce[Te+ve.length]=0,Te},"__allocCString"),qe=i(function(K,ve,Te){const Ce=Pe(K.structInfo,ve,!0);$(Ce);const Ze=ke(Te);return K[Ce.key]=Ze,me(K,Ze),K},"__setMemberCString"),Ne=i(function(ve,Te){arguments[2]!==A&&d("Do not call the StructType constructor","from client-level code."),Object.defineProperties(this,{structName:A(ve),structInfo:A(Te)})},"ctor");Ne.prototype=Object.create(null,{dispose:A(function(){E(this.constructor,this)}),lookupMember:A(function(K,ve=!0){return Pe(this.structInfo,K,ve)}),memberToJsString:A(function(K){return oe(this,K)}),memberIsString:A(function(K,ve=!0){return Me(this,K,ve)}),memberKey:Fe,memberKeys:N,memberSignature:A(function(K,ve=!1){return Be(this,K,ve)}),memoryDump:A(G),pointer:_e,setMemberCString:A(function(K,ve){return qe(this,K,ve)})}),Object.assign(Ne.prototype,{addOnDispose:function(...K){return me(this,...K),this}}),Object.defineProperties(Ne,{allocCString:A(ke),isA:A(K=>K instanceof Ne),hasExternalPointer:A(K=>K instanceof Ne&&!!K[O]),memberKey:Fe});const Je=i(K=>Number.isFinite(K)||K instanceof(Q||Number),"isNumericValue"),Oe=i(function K(ve,Te,Ce){if(!K._){K._={getters:{},setters:{},sw:{}};const Rt=["i","c","C","p","P","s","f","d","v()"];ye&&Rt.push("j"),Rt.forEach(function(ln){K._.getters[ln]=xe(ln),K._.setters[ln]=S(ln),K._.sw[ln]=k(ln)});const y_=/^[ipPsjfdcC]$/,b_=/^[vipPsjfdcC]\([ipPsjfdcC]*\)$/;K.sigCheck=function(ln,E_,Jc,So){Object.prototype.hasOwnProperty.call(ln,Jc)&&d(ln.structName,"already has a property named",Jc+"."),y_.test(So)||b_.test(So)||d("Malformed signature for",D(ln.structName,E_)+":",So)}}const Ze=ve.memberKey(Te);K.sigCheck(ve.prototype,Te,Ze,Ce.signature),Ce.key=Ze,Ce.name=Te;const pt=re(Ce.signature),lt=D(ve.prototype.structName,Ze),ft=ve.prototype.debugFlags.__flags,br=Object.create(null);br.configurable=!1,br.enumerable=!1,br.get=function(){ft.getter&&Y("debug.getter:",K._.getters[pt],"for",z(pt),lt,"@",this.pointer,"+",Ce.offset,"sz",Ce.sizeof);let Rt=new DataView(y().buffer,this.pointer+Ce.offset,Ce.sizeof)[K._.getters[pt]](0,B);return ft.getter&&Y("debug.getter:",lt,"result =",Rt),Rt},Ce.readOnly?br.set=pe(ve.prototype.structName,Ze):br.set=function(Rt){if(ft.setter&&Y("debug.setter:",K._.setters[pt],"for",z(pt),lt,"@",this.pointer,"+",Ce.offset,"sz",Ce.sizeof,Rt),this.pointer||d("Cannot set struct property on disposed instance."),Rt===null)Rt=0;else for(;!Je(Rt);){if(ie(Ce.signature)&&Rt instanceof Ne){Rt=Rt.pointer||0,ft.setter&&Y("debug.setter:",lt,"resolved to",Rt);break}d("Invalid value for pointer-type",lt+".")}new DataView(y().buffer,this.pointer+Ce.offset,Ce.sizeof)[K._.setters[pt]](0,K._.sw[pt](Rt),B)},Object.defineProperty(ve.prototype,Ze,br)},"f"),Et=i(function K(ve,Te){arguments.length===1?(Te=ve,ve=Te.name):Te.name||(Te.name=ve),ve||d("Struct name is required.");let Ce=!1;Object.keys(Te.members).forEach(lt=>{const ft=Te.members[lt];ft.sizeof?ft.sizeof===1?ft.signature==="c"||ft.signature==="C"||d("Unexpected sizeof==1 member",D(Te.name,lt),"with signature",ft.signature):(ft.sizeof%4!==0&&d(ve,"member",lt,"sizeof is not aligned. sizeof="+ft.sizeof),ft.offset%4!==0&&d(ve,"member",lt,"offset is not aligned. offset="+ft.offset)):d(ve,"member",lt,"is missing sizeof."),(!Ce||Ce.offset<ft.offset)&&(Ce=ft)}),Ce?Te.sizeof<Ce.offset+Ce.sizeof&&d("Invalid struct config:",ve,"max member offset ("+Ce.offset+") ","extends past end of struct (sizeof="+Te.sizeof+")."):d("No member property descriptions found.");const Ze=A(h.__makeDebugFlags(K.debugFlags)),pt=i(function lt(ft){this instanceof lt?arguments.length?((ft!==(ft|0)||ft<=0)&&d("Invalid pointer value for",ve,"constructor."),I(lt,this,ft)):I(lt,this):d("The",ve,"constructor may only be called via 'new'.")},"StructCtor");return Object.defineProperties(pt,{debugFlags:Ze,isA:A(lt=>lt instanceof pt),memberKey:Fe,memberKeys:N,methodInfoForKey:A(function(lt){}),structInfo:A(Te),structName:A(ve)}),pt.prototype=new Ne(ve,Te,A),Object.defineProperties(pt.prototype,{debugFlags:Ze,constructor:A(pt)}),Object.keys(Te.members).forEach(lt=>Oe(pt,lt,Te.members[lt])),pt},"StructBinder");return Et.StructType=Ne,Et.config=p,Et.allocCString=ke,Et.debugFlags||(Et.debugFlags=h.__makeDebugFlags(h.debugFlags)),Et},"StructBinderFactory"),globalThis.sqlite3ApiBootstrap.initializers.push(function(c){const p=i((...F)=>{throw new Error(F.join(" "))},"toss");c.SQLite3Error.toss;const d=c.capi,h=c.wasm,y=c.util;if(globalThis.WhWasmUtilInstaller(h),delete globalThis.WhWasmUtilInstaller,h.bindingSignatures=[["sqlite3_aggregate_context","void*","sqlite3_context*","int"],["sqlite3_bind_double","int","sqlite3_stmt*","int","f64"],["sqlite3_bind_int","int","sqlite3_stmt*","int","int"],["sqlite3_bind_null",void 0,"sqlite3_stmt*","int"],["sqlite3_bind_parameter_count","int","sqlite3_stmt*"],["sqlite3_bind_parameter_index","int","sqlite3_stmt*","string"],["sqlite3_bind_pointer","int","sqlite3_stmt*","int","*","string:static","*"],["sqlite3_busy_handler","int",["sqlite3*",new h.xWrap.FuncPtrAdapter({signature:"i(pi)",contextKey:(F,B)=>F[0]}),"*"]],["sqlite3_busy_timeout","int","sqlite3*","int"],["sqlite3_changes","int","sqlite3*"],["sqlite3_clear_bindings","int","sqlite3_stmt*"],["sqlite3_collation_needed","int","sqlite3*","*","*"],["sqlite3_column_blob","*","sqlite3_stmt*","int"],["sqlite3_column_bytes","int","sqlite3_stmt*","int"],["sqlite3_column_count","int","sqlite3_stmt*"],["sqlite3_column_double","f64","sqlite3_stmt*","int"],["sqlite3_column_int","int","sqlite3_stmt*","int"],["sqlite3_column_name","string","sqlite3_stmt*","int"],["sqlite3_column_text","string","sqlite3_stmt*","int"],["sqlite3_column_type","int","sqlite3_stmt*","int"],["sqlite3_column_value","sqlite3_value*","sqlite3_stmt*","int"],["sqlite3_commit_hook","void*",["sqlite3*",new h.xWrap.FuncPtrAdapter({name:"sqlite3_commit_hook",signature:"i(p)",contextKey:F=>F[0]}),"*"]],["sqlite3_compileoption_get","string","int"],["sqlite3_compileoption_used","int","string"],["sqlite3_complete","int","string:flexible"],["sqlite3_context_db_handle","sqlite3*","sqlite3_context*"],["sqlite3_data_count","int","sqlite3_stmt*"],["sqlite3_db_filename","string","sqlite3*","string"],["sqlite3_db_handle","sqlite3*","sqlite3_stmt*"],["sqlite3_db_name","string","sqlite3*","int"],["sqlite3_db_status","int","sqlite3*","int","*","*","int"],["sqlite3_errcode","int","sqlite3*"],["sqlite3_errmsg","string","sqlite3*"],["sqlite3_error_offset","int","sqlite3*"],["sqlite3_errstr","string","int"],["sqlite3_exec","int",["sqlite3*","string:flexible",new h.xWrap.FuncPtrAdapter({signature:"i(pipp)",bindScope:"transient",callProxy:F=>{let B;return(W,ie,re,z)=>{try{const Z=h.cArgvToJs(ie,re);return B||(B=h.cArgvToJs(ie,z)),F(Z,B)|0}catch(Z){return Z.resultCode||d.SQLITE_ERROR}}}}),"*","**"]],["sqlite3_expanded_sql","string","sqlite3_stmt*"],["sqlite3_extended_errcode","int","sqlite3*"],["sqlite3_extended_result_codes","int","sqlite3*","int"],["sqlite3_file_control","int","sqlite3*","string","int","*"],["sqlite3_finalize","int","sqlite3_stmt*"],["sqlite3_free",void 0,"*"],["sqlite3_get_autocommit","int","sqlite3*"],["sqlite3_get_auxdata","*","sqlite3_context*","int"],["sqlite3_initialize",void 0],["sqlite3_keyword_count","int"],["sqlite3_keyword_name","int",["int","**","*"]],["sqlite3_keyword_check","int",["string","int"]],["sqlite3_libversion","string"],["sqlite3_libversion_number","int"],["sqlite3_limit","int",["sqlite3*","int","int"]],["sqlite3_malloc","*","int"],["sqlite3_open","int","string","*"],["sqlite3_open_v2","int","string","*","int","string"],["sqlite3_progress_handler",void 0,["sqlite3*","int",new h.xWrap.FuncPtrAdapter({name:"xProgressHandler",signature:"i(p)",bindScope:"context",contextKey:(F,B)=>F[0]}),"*"]],["sqlite3_realloc","*","*","int"],["sqlite3_reset","int","sqlite3_stmt*"],["sqlite3_result_blob",void 0,"sqlite3_context*","*","int","*"],["sqlite3_result_double",void 0,"sqlite3_context*","f64"],["sqlite3_result_error",void 0,"sqlite3_context*","string","int"],["sqlite3_result_error_code",void 0,"sqlite3_context*","int"],["sqlite3_result_error_nomem",void 0,"sqlite3_context*"],["sqlite3_result_error_toobig",void 0,"sqlite3_context*"],["sqlite3_result_int",void 0,"sqlite3_context*","int"],["sqlite3_result_null",void 0,"sqlite3_context*"],["sqlite3_result_pointer",void 0,"sqlite3_context*","*","string:static","*"],["sqlite3_result_subtype",void 0,"sqlite3_value*","int"],["sqlite3_result_text",void 0,"sqlite3_context*","string","int","*"],["sqlite3_result_zeroblob",void 0,"sqlite3_context*","int"],["sqlite3_rollback_hook","void*",["sqlite3*",new h.xWrap.FuncPtrAdapter({name:"sqlite3_rollback_hook",signature:"v(p)",contextKey:F=>F[0]}),"*"]],["sqlite3_set_authorizer","int",["sqlite3*",new h.xWrap.FuncPtrAdapter({name:"sqlite3_set_authorizer::xAuth",signature:"i(pissss)",contextKey:(F,B)=>F[0],callProxy:F=>(B,W,ie,re,z,Z)=>{try{return ie=ie&&h.cstrToJs(ie),re=re&&h.cstrToJs(re),z=z&&h.cstrToJs(z),Z=Z&&h.cstrToJs(Z),F(B,W,ie,re,z,Z)||0}catch(xe){return xe.resultCode||d.SQLITE_ERROR}}}),"*"]],["sqlite3_set_auxdata",void 0,["sqlite3_context*","int","*",new h.xWrap.FuncPtrAdapter({name:"xDestroyAuxData",signature:"v(*)",contextKey:(F,B)=>F[0]})]],["sqlite3_shutdown",void 0],["sqlite3_sourceid","string"],["sqlite3_sql","string","sqlite3_stmt*"],["sqlite3_status","int","int","*","*","int"],["sqlite3_step","int","sqlite3_stmt*"],["sqlite3_stmt_isexplain","int",["sqlite3_stmt*"]],["sqlite3_stmt_readonly","int",["sqlite3_stmt*"]],["sqlite3_stmt_status","int","sqlite3_stmt*","int","int"],["sqlite3_strglob","int","string","string"],["sqlite3_stricmp","int","string","string"],["sqlite3_strlike","int","string","string","int"],["sqlite3_strnicmp","int","string","string","int"],["sqlite3_table_column_metadata","int","sqlite3*","string","string","string","**","**","*","*","*"],["sqlite3_total_changes","int","sqlite3*"],["sqlite3_trace_v2","int",["sqlite3*","int",new h.xWrap.FuncPtrAdapter({name:"sqlite3_trace_v2::callback",signature:"i(ippp)",contextKey:(F,B)=>F[0]}),"*"]],["sqlite3_txn_state","int",["sqlite3*","string"]],["sqlite3_uri_boolean","int","sqlite3_filename","string","int"],["sqlite3_uri_key","string","sqlite3_filename","int"],["sqlite3_uri_parameter","string","sqlite3_filename","string"],["sqlite3_user_data","void*","sqlite3_context*"],["sqlite3_value_blob","*","sqlite3_value*"],["sqlite3_value_bytes","int","sqlite3_value*"],["sqlite3_value_double","f64","sqlite3_value*"],["sqlite3_value_dup","sqlite3_value*","sqlite3_value*"],["sqlite3_value_free",void 0,"sqlite3_value*"],["sqlite3_value_frombind","int","sqlite3_value*"],["sqlite3_value_int","int","sqlite3_value*"],["sqlite3_value_nochange","int","sqlite3_value*"],["sqlite3_value_numeric_type","int","sqlite3_value*"],["sqlite3_value_pointer","*","sqlite3_value*","string:static"],["sqlite3_value_subtype","int","sqlite3_value*"],["sqlite3_value_text","string","sqlite3_value*"],["sqlite3_value_type","int","sqlite3_value*"],["sqlite3_vfs_find","*","string"],["sqlite3_vfs_register","int","sqlite3_vfs*","int"],["sqlite3_vfs_unregister","int","sqlite3_vfs*"]],h.bindingSignatures.int64=[["sqlite3_bind_int64","int",["sqlite3_stmt*","int","i64"]],["sqlite3_changes64","i64",["sqlite3*"]],["sqlite3_column_int64","i64",["sqlite3_stmt*","int"]],["sqlite3_create_module","int",["sqlite3*","string","sqlite3_module*","*"]],["sqlite3_create_module_v2","int",["sqlite3*","string","sqlite3_module*","*","*"]],["sqlite3_declare_vtab","int",["sqlite3*","string:flexible"]],["sqlite3_deserialize","int","sqlite3*","string","*","i64","i64","int"],["sqlite3_drop_modules","int",["sqlite3*","**"]],["sqlite3_last_insert_rowid","i64",["sqlite3*"]],["sqlite3_malloc64","*","i64"],["sqlite3_msize","i64","*"],["sqlite3_overload_function","int",["sqlite3*","string","int"]],["sqlite3_preupdate_blobwrite","int","sqlite3*"],["sqlite3_preupdate_count","int","sqlite3*"],["sqlite3_preupdate_depth","int","sqlite3*"],["sqlite3_preupdate_hook","*",["sqlite3*",new h.xWrap.FuncPtrAdapter({name:"sqlite3_preupdate_hook",signature:"v(ppippjj)",contextKey:F=>F[0],callProxy:F=>(B,W,ie,re,z,Z,xe)=>{F(B,W,ie,h.cstrToJs(re),h.cstrToJs(z),Z,xe)}}),"*"]],["sqlite3_preupdate_new","int",["sqlite3*","int","**"]],["sqlite3_preupdate_old","int",["sqlite3*","int","**"]],["sqlite3_realloc64","*","*","i64"],["sqlite3_result_int64",void 0,"*","i64"],["sqlite3_result_zeroblob64","int","*","i64"],["sqlite3_serialize","*","sqlite3*","string","*","int"],["sqlite3_set_last_insert_rowid",void 0,["sqlite3*","i64"]],["sqlite3_status64","int","int","*","*","int"],["sqlite3_total_changes64","i64",["sqlite3*"]],["sqlite3_update_hook","*",["sqlite3*",new h.xWrap.FuncPtrAdapter({name:"sqlite3_update_hook",signature:"v(iippj)",contextKey:F=>F[0],callProxy:F=>(B,W,ie,re,z)=>{F(B,W,h.cstrToJs(ie),h.cstrToJs(re),z)}}),"*"]],["sqlite3_uri_int64","i64",["sqlite3_filename","string","i64"]],["sqlite3_value_int64","i64","sqlite3_value*"],["sqlite3_vtab_collation","string","sqlite3_index_info*","int"],["sqlite3_vtab_distinct","int","sqlite3_index_info*"],["sqlite3_vtab_in","int","sqlite3_index_info*","int","int"],["sqlite3_vtab_in_first","int","sqlite3_value*","**"],["sqlite3_vtab_in_next","int","sqlite3_value*","**"],["sqlite3_vtab_nochange","int","sqlite3_context*"],["sqlite3_vtab_on_conflict","int","sqlite3*"],["sqlite3_vtab_rhs_value","int","sqlite3_index_info*","int","**"]],h.bigIntEnabled&&h.exports.sqlite3changegroup_add){const F={signature:"i(ps)",callProxy:B=>(W,ie)=>{try{return B(W,h.cstrToJs(ie))|0}catch(re){return re.resultCode||d.SQLITE_ERROR}}};h.bindingSignatures.int64.push(["sqlite3changegroup_add","int",["sqlite3_changegroup*","int","void*"]],["sqlite3changegroup_add_strm","int",["sqlite3_changegroup*",new h.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changegroup_delete",void 0,["sqlite3_changegroup*"]],["sqlite3changegroup_new","int",["**"]],["sqlite3changegroup_output","int",["sqlite3_changegroup*","int*","**"]],["sqlite3changegroup_output_strm","int",["sqlite3_changegroup*",new h.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply","int",["sqlite3*","int","void*",new h.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...F}),new h.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_strm","int",["sqlite3*",new h.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new h.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...F}),new h.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*"]],["sqlite3changeset_apply_v2","int",["sqlite3*","int","void*",new h.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...F}),new h.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_apply_v2_strm","int",["sqlite3*",new h.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new h.xWrap.FuncPtrAdapter({name:"xFilter",bindScope:"transient",...F}),new h.xWrap.FuncPtrAdapter({name:"xConflict",signature:"i(pip)",bindScope:"transient"}),"void*","**","int*","int"]],["sqlite3changeset_concat","int",["int","void*","int","void*","int*","**"]],["sqlite3changeset_concat_strm","int",[new h.xWrap.FuncPtrAdapter({name:"xInputA",signature:"i(ppp)",bindScope:"transient"}),"void*",new h.xWrap.FuncPtrAdapter({name:"xInputB",signature:"i(ppp)",bindScope:"transient"}),"void*",new h.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_conflict","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_finalize","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_fk_conflicts","int",["sqlite3_changeset_iter*","int*"]],["sqlite3changeset_invert","int",["int","void*","int*","**"]],["sqlite3changeset_invert_strm","int",[new h.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*",new h.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppi)",bindScope:"transient"}),"void*"]],["sqlite3changeset_new","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_next","int",["sqlite3_changeset_iter*"]],["sqlite3changeset_old","int",["sqlite3_changeset_iter*","int","**"]],["sqlite3changeset_op","int",["sqlite3_changeset_iter*","**","int*","int*","int*"]],["sqlite3changeset_pk","int",["sqlite3_changeset_iter*","**","int*"]],["sqlite3changeset_start","int",["**","int","*"]],["sqlite3changeset_start_strm","int",["**",new h.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3changeset_start_v2","int",["**","int","*","int"]],["sqlite3changeset_start_v2_strm","int",["**",new h.xWrap.FuncPtrAdapter({name:"xInput",signature:"i(ppp)",bindScope:"transient"}),"void*","int"]],["sqlite3session_attach","int",["sqlite3_session*","string"]],["sqlite3session_changeset","int",["sqlite3_session*","int*","**"]],["sqlite3session_changeset_size","i64",["sqlite3_session*"]],["sqlite3session_changeset_strm","int",["sqlite3_session*",new h.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_config","int",["int","void*"]],["sqlite3session_create","int",["sqlite3*","string","**"]],["sqlite3session_diff","int",["sqlite3_session*","string","string","**"]],["sqlite3session_enable","int",["sqlite3_session*","int"]],["sqlite3session_indirect","int",["sqlite3_session*","int"]],["sqlite3session_isempty","int",["sqlite3_session*"]],["sqlite3session_memory_used","i64",["sqlite3_session*"]],["sqlite3session_object_config","int",["sqlite3_session*","int","void*"]],["sqlite3session_patchset","int",["sqlite3_session*","*","**"]],["sqlite3session_patchset_strm","int",["sqlite3_session*",new h.xWrap.FuncPtrAdapter({name:"xOutput",signature:"i(ppp)",bindScope:"transient"}),"void*"]],["sqlite3session_table_filter",void 0,["sqlite3_session*",new h.xWrap.FuncPtrAdapter({name:"xFilter",...F,contextKey:(B,W)=>B[0]}),"*"]])}h.bindingSignatures.wasmInternal=[["sqlite3__wasm_db_reset","int","sqlite3*"],["sqlite3__wasm_db_vfs","sqlite3_vfs*","sqlite3*","string"],["sqlite3__wasm_vfs_create_file","int","sqlite3_vfs*","string","*","int"],["sqlite3__wasm_posix_create_file","int","string","*","int"],["sqlite3__wasm_vfs_unlink","int","sqlite3_vfs*","string"],["sqlite3__wasm_qfmt_token","string:dealloc","string","int"]],c.StructBinder=globalThis.Jaccwabyt({heap:h.heap8u,alloc:h.alloc,dealloc:h.dealloc,bigIntEnabled:h.bigIntEnabled,memberPrefix:"$"}),delete globalThis.Jaccwabyt;{const F=h.xWrap.argAdapter("string");h.xWrap.argAdapter("string:flexible",z=>F(y.flexibleString(z))),h.xWrap.argAdapter("string:static",function(z){return h.isPtr(z)?z:(z=""+z,this[z]||(this[z]=h.allocCString(z)))}.bind(Object.create(null)));const B=h.xWrap.argAdapter("*"),W=i(function(){},"nilType");h.xWrap.argAdapter("sqlite3_filename",B)("sqlite3_context*",B)("sqlite3_value*",B)("void*",B)("sqlite3_changegroup*",B)("sqlite3_changeset_iter*",B)("sqlite3_session*",B)("sqlite3_stmt*",z=>B(z instanceof(c?.oo1?.Stmt||W)?z.pointer:z))("sqlite3*",z=>B(z instanceof(c?.oo1?.DB||W)?z.pointer:z))("sqlite3_index_info*",z=>B(z instanceof(d.sqlite3_index_info||W)?z.pointer:z))("sqlite3_module*",z=>B(z instanceof(d.sqlite3_module||W)?z.pointer:z))("sqlite3_vfs*",z=>typeof z=="string"?d.sqlite3_vfs_find(z)||c.SQLite3Error.toss(d.SQLITE_NOTFOUND,"Unknown sqlite3_vfs name:",z):B(z instanceof(d.sqlite3_vfs||W)?z.pointer:z));const ie=h.xWrap.resultAdapter("*");h.xWrap.resultAdapter("sqlite3*",ie)("sqlite3_context*",ie)("sqlite3_stmt*",ie)("sqlite3_value*",ie)("sqlite3_vfs*",ie)("void*",ie),h.exports.sqlite3_step.length===0&&(h.xWrap.doArgcCheck=!1,c.config.warn("Disabling sqlite3.wasm.xWrap.doArgcCheck due to environmental quirks."));for(const z of h.bindingSignatures)d[z[0]]=h.xWrap.apply(null,z);for(const z of h.bindingSignatures.wasmInternal)y[z[0]]=h.xWrap.apply(null,z);const re=i(function(z){return()=>p(z+"() is unavailable due to lack","of BigInt support in this build.")},"fI64Disabled");for(const z of h.bindingSignatures.int64)d[z[0]]=h.bigIntEnabled?h.xWrap.apply(null,z):re(z[0]);if(delete h.bindingSignatures,h.exports.sqlite3__wasm_db_error){const z=h.xWrap("sqlite3__wasm_db_error","int","sqlite3*","int","string");y.sqlite3__wasm_db_error=function(Z,xe,S){return xe instanceof c.WasmAllocError?(xe=d.SQLITE_NOMEM,S=0):xe instanceof Error&&(S=S||""+xe,xe=xe.resultCode||d.SQLITE_ERROR),Z?z(Z,xe,S):xe}}else y.sqlite3__wasm_db_error=function(z,Z,xe){return Z}}{const F=h.xCall("sqlite3__wasm_enum_json");F||p("Maintenance required: increase sqlite3__wasm_enum_json()'s","static buffer size!"),h.ctype=JSON.parse(h.cstrToJs(F));const B=["access","authorizer","blobFinalizers","changeset","config","dataTypes","dbConfig","dbStatus","encodings","fcntl","flock","ioCap","limits","openFlags","prepareFlags","resultCodes","sqlite3Status","stmtStatus","syncFlags","trace","txnState","udfFlags","version"];h.bigIntEnabled&&B.push("serialize","session","vtab");for(const re of B)for(const z of Object.entries(h.ctype[re]))d[z[0]]=z[1];h.functionEntry(d.SQLITE_WASM_DEALLOC)||p("Internal error: cannot resolve exported function","entry SQLITE_WASM_DEALLOC (=="+d.SQLITE_WASM_DEALLOC+").");const W=Object.create(null);for(const re of["resultCodes"])for(const z of Object.entries(h.ctype[re]))W[z[1]]=z[0];d.sqlite3_js_rc_str=re=>W[re];const ie=Object.assign(Object.create(null),{WasmTestStruct:!0,sqlite3_kvvfs_methods:!y.isUIThread(),sqlite3_index_info:!h.bigIntEnabled,sqlite3_index_constraint:!h.bigIntEnabled,sqlite3_index_orderby:!h.bigIntEnabled,sqlite3_index_constraint_usage:!h.bigIntEnabled});for(const re of h.ctype.structs)ie[re.name]||(d[re.name]=c.StructBinder(re));if(d.sqlite3_index_info){for(const re of["sqlite3_index_constraint","sqlite3_index_orderby","sqlite3_index_constraint_usage"])d.sqlite3_index_info[re]=d[re],delete d[re];d.sqlite3_vtab_config=h.xWrap("sqlite3__wasm_vtab_config","int",["sqlite3*","int","int"])}}const C=i((F,B,W)=>y.sqlite3__wasm_db_error(F,d.SQLITE_MISUSE,B+"() requires "+W+" argument"+(W===1?"":"s")+"."),"__dbArgcMismatch"),L=i(F=>y.sqlite3__wasm_db_error(F,d.SQLITE_FORMAT,"SQLITE_UTF8 is the only supported encoding."),"__errEncoding"),Y=i(F=>h.xWrap.argAdapter("sqlite3*")(F),"__argPDb"),ee=i(F=>h.isPtr(F)?h.cstrToJs(F):F,"__argStr"),de=function(F,B){F=Y(F);let W=this.dbMap.get(F);if(B)!W&&B>0&&this.dbMap.set(F,W=Object.create(null));else return this.dbMap.delete(F),W;return W}.bind(Object.assign(Object.create(null),{dbMap:new Map}));de.addCollation=function(F,B){const W=de(F,1);W.collation||(W.collation=new Set),W.collation.add(ee(B).toLowerCase())},de._addUDF=function(F,B,W,ie){B=ee(B).toLowerCase();let re=ie.get(B);re||ie.set(B,re=new Set),re.add(W<0?-1:W)},de.addFunction=function(F,B,W){const ie=de(F,1);ie.udf||(ie.udf=new Map),this._addUDF(F,B,W,ie.udf)},de.addWindowFunc=function(F,B,W){const ie=de(F,1);ie.wudf||(ie.wudf=new Map),this._addUDF(F,B,W,ie.wudf)},de.cleanup=function(F){F=Y(F);const B=[F];for(const re of["sqlite3_busy_handler","sqlite3_commit_hook","sqlite3_preupdate_hook","sqlite3_progress_handler","sqlite3_rollback_hook","sqlite3_set_authorizer","sqlite3_trace_v2","sqlite3_update_hook"]){const z=h.exports[re];B.length=z.length;try{d[re](...B)}catch(Z){re+""}}const W=de(F,0);if(!W)return;if(W.collation){for(const re of W.collation)try{d.sqlite3_create_collation_v2(F,re,d.SQLITE_UTF8,0,0,0)}catch{}delete W.collation}let ie;for(ie=0;ie<2;++ie){const re=ie?W.wudf:W.udf;if(!re)continue;const z=ie?d.sqlite3_create_window_function:d.sqlite3_create_function_v2;for(const Z of re){const xe=Z[0],S=Z[1],k=[F,xe,0,d.SQLITE_UTF8,0,0,0,0,0];ie&&k.push(0);for(const D of S)try{k[2]=D,z.apply(null,k)}catch{}S.clear()}re.clear()}delete W.udf,delete W.wudf};{const F=h.xWrap("sqlite3_close_v2","int","sqlite3*");d.sqlite3_close_v2=function(B){if(arguments.length!==1)return C(B,"sqlite3_close_v2",1);if(B)try{de.cleanup(B)}catch{}return F(B)}}if(d.sqlite3session_table_filter){const F=h.xWrap("sqlite3session_delete",void 0,["sqlite3_session*"]);d.sqlite3session_delete=function(B){if(arguments.length!==1)return C(pDb,"sqlite3session_delete",1);B&&d.sqlite3session_table_filter(B,0,0),F(B)}}{const F=i((W,ie)=>"argv["+ie+"]:"+W[0]+":"+h.cstrToJs(W[1]).toLowerCase(),"contextKey"),B=h.xWrap("sqlite3_create_collation_v2","int",["sqlite3*","string","int","*",new h.xWrap.FuncPtrAdapter({name:"xCompare",signature:"i(pipip)",contextKey:F}),new h.xWrap.FuncPtrAdapter({name:"xDestroy",signature:"v(p)",contextKey:F})]);d.sqlite3_create_collation_v2=function(W,ie,re,z,Z,xe){if(arguments.length!==6)return C(W,"sqlite3_create_collation_v2",6);if(!(re&15))re|=d.SQLITE_UTF8;else if(d.SQLITE_UTF8!==(re&15))return L(W);try{const S=B(W,ie,re,z,Z,xe);return S===0&&Z instanceof Function&&de.addCollation(W,ie),S}catch(S){return y.sqlite3__wasm_db_error(W,S)}},d.sqlite3_create_collation=(W,ie,re,z,Z)=>arguments.length===5?d.sqlite3_create_collation_v2(W,ie,re,z,Z,0):C(W,"sqlite3_create_collation",5)}{const F=i(function(re,z){return re[0]+":"+(re[2]<0?-1:re[2])+":"+z+":"+h.cstrToJs(re[1]).toLowerCase()},"contextKey"),B=Object.assign(Object.create(null),{xInverseAndStep:{signature:"v(pip)",contextKey:F,callProxy:re=>(z,Z,xe)=>{try{re(z,...d.sqlite3_values_to_js(Z,xe))}catch(S){d.sqlite3_result_error_js(z,S)}}},xFinalAndValue:{signature:"v(p)",contextKey:F,callProxy:re=>z=>{try{d.sqlite3_result_js(z,re(z))}catch(Z){d.sqlite3_result_error_js(z,Z)}}},xFunc:{signature:"v(pip)",contextKey:F,callProxy:re=>(z,Z,xe)=>{try{d.sqlite3_result_js(z,re(z,...d.sqlite3_values_to_js(Z,xe)))}catch(S){d.sqlite3_result_error_js(z,S)}}},xDestroy:{signature:"v(p)",contextKey:F,callProxy:re=>z=>{try{re(z)}catch(Z){console.error("UDF xDestroy method threw:",Z)}}}}),W=h.xWrap("sqlite3_create_function_v2","int",["sqlite3*","string","int","int","*",new h.xWrap.FuncPtrAdapter({name:"xFunc",...B.xFunc}),new h.xWrap.FuncPtrAdapter({name:"xStep",...B.xInverseAndStep}),new h.xWrap.FuncPtrAdapter({name:"xFinal",...B.xFinalAndValue}),new h.xWrap.FuncPtrAdapter({name:"xDestroy",...B.xDestroy})]),ie=h.xWrap("sqlite3_create_window_function","int",["sqlite3*","string","int","int","*",new h.xWrap.FuncPtrAdapter({name:"xStep",...B.xInverseAndStep}),new h.xWrap.FuncPtrAdapter({name:"xFinal",...B.xFinalAndValue}),new h.xWrap.FuncPtrAdapter({name:"xValue",...B.xFinalAndValue}),new h.xWrap.FuncPtrAdapter({name:"xInverse",...B.xInverseAndStep}),new h.xWrap.FuncPtrAdapter({name:"xDestroy",...B.xDestroy})]);d.sqlite3_create_function_v2=i(function re(z,Z,xe,S,k,D,pe,T,O){if(re.length!==arguments.length)return C(z,"sqlite3_create_function_v2",re.length);if(!(S&15))S|=d.SQLITE_UTF8;else if(d.SQLITE_UTF8!==(S&15))return L(z);try{const E=W(z,Z,xe,S,k,D,pe,T,O);return E===0&&(D instanceof Function||pe instanceof Function||T instanceof Function||O instanceof Function)&&de.addFunction(z,Z,xe),E}catch(E){return console.error("sqlite3_create_function_v2() setup threw:",E),y.sqlite3__wasm_db_error(z,E,"Creation of UDF threw: "+E)}},"f"),d.sqlite3_create_function=i(function re(z,Z,xe,S,k,D,pe,T){return re.length===arguments.length?d.sqlite3_create_function_v2(z,Z,xe,S,k,D,pe,T,0):C(z,"sqlite3_create_function",re.length)},"f"),d.sqlite3_create_window_function=i(function re(z,Z,xe,S,k,D,pe,T,O,E){if(re.length!==arguments.length)return C(z,"sqlite3_create_window_function",re.length);if(!(S&15))S|=d.SQLITE_UTF8;else if(d.SQLITE_UTF8!==(S&15))return L(z);try{const A=ie(z,Z,xe,S,k,D,pe,T,O,E);return A===0&&(D instanceof Function||pe instanceof Function||T instanceof Function||O instanceof Function||E instanceof Function)&&de.addWindowFunc(z,Z,xe),A}catch(A){return console.error("sqlite3_create_window_function() setup threw:",A),y.sqlite3__wasm_db_error(z,A,"Creation of UDF threw: "+A)}},"f"),d.sqlite3_create_function_v2.udfSetResult=d.sqlite3_create_function.udfSetResult=d.sqlite3_create_window_function.udfSetResult=d.sqlite3_result_js,d.sqlite3_create_function_v2.udfConvertArgs=d.sqlite3_create_function.udfConvertArgs=d.sqlite3_create_window_function.udfConvertArgs=d.sqlite3_values_to_js,d.sqlite3_create_function_v2.udfSetError=d.sqlite3_create_function.udfSetError=d.sqlite3_create_window_function.udfSetError=d.sqlite3_result_error_js}{const F=i((W,ie)=>(typeof W=="string"?ie=-1:y.isSQLableTypedArray(W)?(ie=W.byteLength,W=y.typedArrayToString(W instanceof ArrayBuffer?new Uint8Array(W):W)):Array.isArray(W)&&(W=W.join(""),ie=-1),[W,ie]),"__flexiString"),B={basic:h.xWrap("sqlite3_prepare_v3","int",["sqlite3*","string","int","int","**","**"]),full:h.xWrap("sqlite3_prepare_v3","int",["sqlite3*","*","int","int","**","**"])};d.sqlite3_prepare_v3=i(function W(ie,re,z,Z,xe,S){if(W.length!==arguments.length)return C(ie,"sqlite3_prepare_v3",W.length);const[k,D]=F(re,z);switch(typeof k){case"string":return B.basic(ie,k,D,Z,xe,null);case"number":return B.full(ie,k,D,Z,xe,S);default:return y.sqlite3__wasm_db_error(ie,d.SQLITE_MISUSE,"Invalid SQL argument type for sqlite3_prepare_v2/v3().")}},"f"),d.sqlite3_prepare_v2=i(function W(ie,re,z,Z,xe){return W.length===arguments.length?d.sqlite3_prepare_v3(ie,re,z,0,Z,xe):C(ie,"sqlite3_prepare_v2",W.length)},"f")}{const F=h.xWrap("sqlite3_bind_text","int",["sqlite3_stmt*","int","string","int","*"]),B=h.xWrap("sqlite3_bind_blob","int",["sqlite3_stmt*","int","*","int","*"]);d.sqlite3_bind_text=i(function W(ie,re,z,Z,xe){if(W.length!==arguments.length)return C(d.sqlite3_db_handle(ie),"sqlite3_bind_text",W.length);if(h.isPtr(z)||z===null)return F(ie,re,z,Z,xe);z instanceof ArrayBuffer?z=new Uint8Array(z):Array.isArray(pMem)&&(z=pMem.join(""));let S,k;try{if(y.isSQLableTypedArray(z))S=h.allocFromTypedArray(z),k=z.byteLength;else if(typeof z=="string")[S,k]=h.allocCString(z);else return y.sqlite3__wasm_db_error(d.sqlite3_db_handle(ie),d.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_text().");return F(ie,re,S,k,d.SQLITE_WASM_DEALLOC)}catch(D){return h.dealloc(S),y.sqlite3__wasm_db_error(d.sqlite3_db_handle(ie),D)}},"f"),d.sqlite3_bind_blob=i(function W(ie,re,z,Z,xe){if(W.length!==arguments.length)return C(d.sqlite3_db_handle(ie),"sqlite3_bind_blob",W.length);if(h.isPtr(z)||z===null)return B(ie,re,z,Z,xe);z instanceof ArrayBuffer?z=new Uint8Array(z):Array.isArray(z)&&(z=z.join(""));let S,k;try{if(y.isBindableTypedArray(z))S=h.allocFromTypedArray(z),k=Z>=0?Z:z.byteLength;else if(typeof z=="string")[S,k]=h.allocCString(z);else return y.sqlite3__wasm_db_error(d.sqlite3_db_handle(ie),d.SQLITE_MISUSE,"Invalid 3rd argument type for sqlite3_bind_blob().");return B(ie,re,S,k,d.SQLITE_WASM_DEALLOC)}catch(D){return h.dealloc(S),y.sqlite3__wasm_db_error(d.sqlite3_db_handle(ie),D)}},"f")}d.sqlite3_config=function(F,...B){if(arguments.length<2)return d.SQLITE_MISUSE;switch(F){case d.SQLITE_CONFIG_COVERING_INDEX_SCAN:case d.SQLITE_CONFIG_MEMSTATUS:case d.SQLITE_CONFIG_SMALL_MALLOC:case d.SQLITE_CONFIG_SORTERREF_SIZE:case d.SQLITE_CONFIG_STMTJRNL_SPILL:case d.SQLITE_CONFIG_URI:return h.exports.sqlite3__wasm_config_i(F,B[0]);case d.SQLITE_CONFIG_LOOKASIDE:return h.exports.sqlite3__wasm_config_ii(F,B[0],B[1]);case d.SQLITE_CONFIG_MEMDB_MAXSIZE:return h.exports.sqlite3__wasm_config_j(F,B[0]);case d.SQLITE_CONFIG_GETMALLOC:case d.SQLITE_CONFIG_GETMUTEX:case d.SQLITE_CONFIG_GETPCACHE2:case d.SQLITE_CONFIG_GETPCACHE:case d.SQLITE_CONFIG_HEAP:case d.SQLITE_CONFIG_LOG:case d.SQLITE_CONFIG_MALLOC:case d.SQLITE_CONFIG_MMAP_SIZE:case d.SQLITE_CONFIG_MULTITHREAD:case d.SQLITE_CONFIG_MUTEX:case d.SQLITE_CONFIG_PAGECACHE:case d.SQLITE_CONFIG_PCACHE2:case d.SQLITE_CONFIG_PCACHE:case d.SQLITE_CONFIG_PCACHE_HDRSZ:case d.SQLITE_CONFIG_PMASZ:case d.SQLITE_CONFIG_SERIALIZED:case d.SQLITE_CONFIG_SINGLETHREAD:case d.SQLITE_CONFIG_SQLLOG:case d.SQLITE_CONFIG_WIN32_HEAPSIZE:default:return d.SQLITE_NOTFOUND}};{const F=new Set;d.sqlite3_auto_extension=function(B){if(B instanceof Function)B=h.installFunction("i(ppp)",B);else if(arguments.length!==1||!h.isPtr(B))return d.SQLITE_MISUSE;const W=h.exports.sqlite3_auto_extension(B);return B!==arguments[0]&&(W===0?F.add(B):h.uninstallFunction(B)),W},d.sqlite3_cancel_auto_extension=function(B){return!B||arguments.length!==1||!h.isPtr(B)?0:h.exports.sqlite3_cancel_auto_extension(B)},d.sqlite3_reset_auto_extension=function(){h.exports.sqlite3_reset_auto_extension();for(const B of F)h.uninstallFunction(B);F.clear()}}const ye=d.sqlite3_vfs_find("kvvfs");if(ye)if(y.isUIThread()){const F=new d.sqlite3_kvvfs_methods(h.exports.sqlite3__wasm_kvvfs_methods());delete d.sqlite3_kvvfs_methods;const B=h.exports.sqlite3__wasm_kvvfsMakeKeyOnPstack,W=h.pstack,ie=i(z=>h.peek(z)===115?sessionStorage:localStorage,"kvvfsStorage"),re={xRead:(z,Z,xe,S)=>{const k=W.pointer,D=h.scopedAllocPush();try{const pe=B(z,Z);if(!pe)return-3;const T=h.cstrToJs(pe),O=ie(z).getItem(T);if(!O)return-1;const E=O.length;if(S<=0)return E;if(S===1)return h.poke(xe,0),E;const A=h.scopedAllocCString(O);return S>E+1&&(S=E+1),h.heap8u().copyWithin(xe,A,A+S-1),h.poke(xe+S-1,0),S-1}catch(pe){return console.error("kvstorageRead()",pe),-2}finally{W.restore(k),h.scopedAllocPop(D)}},xWrite:(z,Z,xe)=>{const S=W.pointer;try{const k=B(z,Z);if(!k)return 1;const D=h.cstrToJs(k);return ie(z).setItem(D,h.cstrToJs(xe)),0}catch(k){return console.error("kvstorageWrite()",k),d.SQLITE_IOERR}finally{W.restore(S)}},xDelete:(z,Z)=>{const xe=W.pointer;try{const S=B(z,Z);return S?(ie(z).removeItem(h.cstrToJs(S)),0):1}catch(S){return console.error("kvstorageDelete()",S),d.SQLITE_IOERR}finally{W.restore(xe)}}};for(const z of Object.keys(re))F[F.memberKey(z)]=h.installFunction(F.memberSignature(z),re[z])}else d.sqlite3_vfs_unregister(ye);h.xWrap.FuncPtrAdapter.warnOnUse=!0;const Q=c.StructBinder,H=i(function F(B,W,ie,re=F.installMethodArgcCheck){if(B instanceof Q.StructType?!(ie instanceof Function)&&!h.isPtr(ie)&&p("Usage errror: expecting a Function or WASM pointer to one."):p("Usage error: target object is-not-a StructType."),arguments.length===1)return(S,k)=>F(B,S,k,re);F.argcProxy||(F.argcProxy=function(S,k,D,pe){return function(...T){return D.length!==arguments.length&&p("Argument mismatch for",S.structInfo.name+"::"+k+": Native signature is:",pe),D.apply(this,T)}},F.removeFuncList=function(){this.ondispose.__removeFuncList&&(this.ondispose.__removeFuncList.forEach((S,k)=>{if(typeof S=="number")try{h.uninstallFunction(S)}catch{}}),delete this.ondispose.__removeFuncList)});const z=B.memberSignature(W);z.length<2&&p("Member",W,"does not have a function pointer signature:",z);const Z=B.memberKey(W),xe=re&&!h.isPtr(ie)?F.argcProxy(B,Z,ie,z):ie;if(h.isPtr(xe))xe&&!h.functionEntry(xe)&&p("Pointer",xe,"is not a WASM function table entry."),B[Z]=xe;else{const S=h.installFunction(xe,B.memberSignature(W,!0));B[Z]=S,(!B.ondispose||!B.ondispose.__removeFuncList)&&(B.addOnDispose("ondispose.__removeFuncList handler",F.removeFuncList),B.ondispose.__removeFuncList=[]),B.ondispose.__removeFuncList.push(Z,S)}return(S,k)=>F(B,S,k,re)},"callee");H.installMethodArgcCheck=!1;const se=i(function(F,B,W=H.installMethodArgcCheck){const ie=new Map;for(const re of Object.keys(B)){const z=B[re],Z=ie.get(z);if(Z){const xe=F.memberKey(re);F[xe]=F[F.memberKey(Z)]}else H(F,re,z,W),ie.set(z,re)}return F},"installMethods");Q.StructType.prototype.installMethod=i(function(B,W,ie=H.installMethodArgcCheck){return arguments.length<3&&B&&typeof B=="object"?se(this,...arguments):H(this,...arguments)},"callee"),Q.StructType.prototype.installMethods=function(F,B=H.installMethodArgcCheck){return se(this,F,B)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(c){c.version={libVersion:"3.46.0",libVersionNumber:3046e3,sourceId:"2024-05-23 13:25:27 96c92aba00c8375bc32fafcdf12429c58bd8aabfcadab6683e35bbb9cdebf19e",downloadVersion:346e4}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(c){const p=i((...T)=>{throw new c.SQLite3Error(...T)},"toss3"),d=c.capi,h=c.wasm,y=c.util,C=new WeakMap,L=new WeakMap,Y=i((T,O,E)=>{const A=Object.getOwnPropertyDescriptor(T,O);return A?A.value:E},"getOwnOption"),ee=i(function(T,O){return O&&(T instanceof H&&(T=T.pointer),p(O,"sqlite3 result code",O+":",T?d.sqlite3_errmsg(T):d.sqlite3_errstr(O))),arguments[0]},"checkSqlite3Rc"),de=h.installFunction("i(ippp)",function(T,O,E,A){d.SQLITE_TRACE_STMT===T&&(""+ ++this.counter+O,h.cstrToJs(A))}.bind({counter:0})),ye=Object.create(null),Q=i(function T(...O){if(!T._name2vfs){T._name2vfs=Object.create(null);const N=typeof importScripts=="function"?V=>p("The VFS for",V,"is only available in the main window thread."):!1;T._name2vfs[":localStorage:"]={vfs:"kvvfs",filename:N||(()=>"local")},T._name2vfs[":sessionStorage:"]={vfs:"kvvfs",filename:N||(()=>"session")}}const E=T.normalizeArgs(...O);let A=E.filename,I=E.vfs,G=E.flags;(typeof A!="string"&&typeof A!="number"||typeof G!="string"||I&&typeof I!="string"&&typeof I!="number")&&(c.config.error("Invalid DB ctor args",E,arguments),p("Invalid arguments for DB constructor."));let he=typeof A=="number"?h.cstrToJs(A):A;const Fe=T._name2vfs[he];Fe&&(I=Fe.vfs,A=he=Fe.filename(he));let Pe,Be=0;G.indexOf("c")>=0&&(Be|=d.SQLITE_OPEN_CREATE|d.SQLITE_OPEN_READWRITE),G.indexOf("w")>=0&&(Be|=d.SQLITE_OPEN_READWRITE),Be===0&&(Be|=d.SQLITE_OPEN_READONLY),Be|=d.SQLITE_OPEN_EXRESCODE;const _e=h.pstack.pointer;try{const N=h.pstack.allocPtr();let V=d.sqlite3_open_v2(A,N,Be,I||0);Pe=h.peekPtr(N),ee(Pe,V),d.sqlite3_extended_result_codes(Pe,1),G.indexOf("t")>=0&&d.sqlite3_trace_v2(Pe,d.SQLITE_TRACE_STMT,de,Pe)}catch(N){throw Pe&&d.sqlite3_close_v2(Pe),N}finally{h.pstack.restore(_e)}this.filename=he,C.set(this,Pe),L.set(this,Object.create(null));try{const N=d.sqlite3_js_db_vfs(Pe)||p("Internal error: cannot get VFS for new db handle."),V=ye[N];V&&(V instanceof Function?V(this,c):ee(Pe,d.sqlite3_exec(Pe,V,0,0,0)))}catch(N){throw this.close(),N}},"ctor");Q.setVfsPostOpenSql=function(T,O){ye[T]=O},Q.normalizeArgs=function(T=":memory:",O="c",E=null){const A={};return arguments.length===1&&arguments[0]&&typeof arguments[0]=="object"?(Object.assign(A,arguments[0]),A.flags===void 0&&(A.flags="c"),A.vfs===void 0&&(A.vfs=null),A.filename===void 0&&(A.filename=":memory:")):(A.filename=T,A.flags=O,A.vfs=E),A};const H=i(function(...T){Q.apply(this,T)},"DB");H.dbCtorHelper=Q;const se={null:1,number:2,string:3,boolean:4,blob:5};se.undefined==se.null,h.bigIntEnabled&&(se.bigint=se.number);const F=i(function(){se!==arguments[2]&&p(d.SQLITE_MISUSE,"Do not call the Stmt constructor directly. Use DB.prepare()."),this.db=arguments[0],C.set(this,arguments[1]),this.parameterCount=d.sqlite3_bind_parameter_count(this.pointer)},"Stmt"),B=i(function(T){return T.pointer||p("DB has been closed."),T},"affirmDbOpen"),W=i(function(T,O){return(O!==(O|0)||O<0||O>=T.columnCount)&&p("Column index",O,"is out of range."),T},"affirmColIndex"),ie=i(function(T,O){const E=Object.create(null);switch(E.opt=Object.create(null),O.length){case 1:typeof O[0]=="string"||y.isSQLableTypedArray(O[0])||Array.isArray(O[0])?E.sql=O[0]:O[0]&&typeof O[0]=="object"&&(E.opt=O[0],E.sql=E.opt.sql);break;case 2:E.sql=O[0],E.opt=O[1];break;default:p("Invalid argument count for exec().")}E.sql=y.flexibleString(E.sql),typeof E.sql!="string"&&p("Missing SQL argument or unsupported SQL value type.");const A=E.opt;switch(A.returnValue){case"resultRows":A.resultRows||(A.resultRows=[]),E.returnVal=()=>A.resultRows;break;case"saveSql":A.saveSql||(A.saveSql=[]),E.returnVal=()=>A.saveSql;break;case void 0:case"this":E.returnVal=()=>T;break;default:p("Invalid returnValue value:",A.returnValue)}if(!A.callback&&!A.returnValue&&A.rowMode!==void 0&&(A.resultRows||(A.resultRows=[]),E.returnVal=()=>A.resultRows),A.callback||A.resultRows)switch(A.rowMode===void 0?"array":A.rowMode){case"object":E.cbArg=(I,G)=>{G.columnNames||(G.columnNames=I.getColumnNames([]));const he=I.get([]),Fe=Object.create(null);for(const Pe in G.columnNames)Fe[G.columnNames[Pe]]=he[Pe];return Fe};break;case"array":E.cbArg=I=>I.get([]);break;case"stmt":Array.isArray(A.resultRows)&&p("exec(): invalid rowMode for a resultRows array: must","be one of 'array', 'object',","a result column number, or column name reference."),E.cbArg=I=>I;break;default:if(y.isInt32(A.rowMode)){E.cbArg=I=>I.get(A.rowMode);break}else if(typeof A.rowMode=="string"&&A.rowMode.length>1&&A.rowMode[0]==="$"){const I=A.rowMode.substr(1);E.cbArg=G=>{const he=G.get(Object.create(null))[I];return he===void 0?p(d.SQLITE_NOTFOUND,"exec(): unknown result column:",I):he};break}p("Invalid rowMode:",A.rowMode)}return E},"parseExecArgs"),re=i((T,O,E,...A)=>{const I=T.prepare(O);try{const G=I.bind(E).step()?I.get(...A):void 0;return I.reset(),G}finally{I.finalize()}},"__selectFirstRow"),z=i((T,O,E,A)=>T.exec({sql:O,bind:E,rowMode:A,returnValue:"resultRows"}),"__selectAll");H.checkRc=(T,O)=>ee(T,O),H.prototype={isOpen:function(){return!!this.pointer},affirmOpen:function(){return B(this)},close:function(){if(this.pointer){if(this.onclose&&this.onclose.before instanceof Function)try{this.onclose.before(this)}catch{}const T=this.pointer;if(Object.keys(L.get(this)).forEach((O,E)=>{if(E&&E.pointer)try{E.finalize()}catch{}}),C.delete(this),L.delete(this),d.sqlite3_close_v2(T),this.onclose&&this.onclose.after instanceof Function)try{this.onclose.after(this)}catch{}delete this.filename}},changes:function(T=!1,O=!1){const E=B(this).pointer;return T?O?d.sqlite3_total_changes64(E):d.sqlite3_total_changes(E):O?d.sqlite3_changes64(E):d.sqlite3_changes(E)},dbFilename:function(T="main"){return d.sqlite3_db_filename(B(this).pointer,T)},dbName:function(T=0){return d.sqlite3_db_name(B(this).pointer,T)},dbVfsName:function(T=0){let O;const E=d.sqlite3_js_db_vfs(B(this).pointer,T);if(E){const A=new d.sqlite3_vfs(E);try{O=h.cstrToJs(A.$zName)}finally{A.dispose()}}return O},prepare:function(T){B(this);const O=h.pstack.pointer;let E,A;try{E=h.pstack.alloc(8),H.checkRc(this,d.sqlite3_prepare_v2(this.pointer,T,-1,E,null)),A=h.peekPtr(E)}finally{h.pstack.restore(O)}A||p("Cannot prepare empty SQL.");const I=new F(this,A,se);return L.get(this)[A]=I,I},exec:function(){B(this);const T=ie(this,arguments);if(!T.sql)return p("exec() requires an SQL string.");const O=T.opt,E=O.callback,A=Array.isArray(O.resultRows)?O.resultRows:void 0;let I,G=O.bind,he=!!(T.cbArg||O.columnNames||A);const Fe=h.scopedAllocPush(),Pe=Array.isArray(O.saveSql)?O.saveSql:void 0;try{const Be=y.isSQLableTypedArray(T.sql);let _e=Be?T.sql.byteLength:h.jstrlen(T.sql);const N=h.scopedAlloc(2*h.ptrSizeof+(_e+1)),V=N+h.ptrSizeof;let ue=V+h.ptrSizeof;const Ee=ue+_e;for(Be?h.heap8().set(T.sql,ue):h.jstrcpy(T.sql,h.heap8(),ue,_e,!1),h.poke(ue+_e,0);ue&&h.peek(ue,"i8");){h.pokePtr([N,V],0),H.checkRc(this,d.sqlite3_prepare_v3(this.pointer,ue,_e,0,N,V));const Re=h.peekPtr(N);if(ue=h.peekPtr(V),_e=Ee-ue,!!Re){if(Pe&&Pe.push(d.sqlite3_sql(Re).trim()),I=new F(this,Re,se),G&&I.parameterCount&&(I.bind(G),G=null),he&&I.columnCount){let Me=Array.isArray(O.columnNames)?0:1;if(he=!1,T.cbArg||A){const $=Object.create(null);for(;I.step();I._lockedByExec=!1){Me++===0&&I.getColumnNames($.columnNames=O.columnNames||[]),I._lockedByExec=!0;const oe=T.cbArg(I,$);if(A&&A.push(oe),E&&E.call(O,oe,I)===!1)break}I._lockedByExec=!1}Me===0&&I.getColumnNames(O.columnNames)}else I.step();I.reset().finalize(),I=null}}}finally{h.scopedAllocPop(Fe),I&&(delete I._lockedByExec,I.finalize())}return T.returnVal()},createFunction:i(function(O,E,A){const I=i($=>$ instanceof Function,"isFunc");switch(arguments.length){case 1:A=O,O=A.name,E=A.xFunc||0;break;case 2:I(E)||(A=E,E=A.xFunc||0);break}A||(A={}),typeof O!="string"&&p("Invalid arguments: missing function name.");let G=A.xStep||0,he=A.xFinal||0;const Fe=A.xValue||0,Pe=A.xInverse||0;let Be;I(E)?(Be=!1,(I(G)||I(he))&&p("Ambiguous arguments: scalar or aggregate?"),G=he=null):I(G)?(I(he)||p("Missing xFinal() callback for aggregate or window UDF."),E=null):I(he)?p("Missing xStep() callback for aggregate or window UDF."):p("Missing function-type properties."),Be===!1?(I(Fe)||I(Pe))&&p("xValue and xInverse are not permitted for non-window UDFs."):I(Fe)?(I(Pe)||p("xInverse must be provided if xValue is."),Be=!0):I(Pe)&&p("xValue must be provided if xInverse is.");const _e=A.pApp;_e!=null&&(typeof _e!="number"||!y.isInt32(_e))&&p("Invalid value for pApp property. Must be a legal WASM pointer value.");const N=A.xDestroy||0;N&&!I(N)&&p("xDestroy property must be a function.");let V=0;Y(A,"deterministic")&&(V|=d.SQLITE_DETERMINISTIC),Y(A,"directOnly")&&(V|=d.SQLITE_DIRECTONLY),Y(A,"innocuous")&&(V|=d.SQLITE_INNOCUOUS),O=O.toLowerCase();const ue=E||G,Ee=Y(A,"arity"),Re=typeof Ee=="number"?Ee:ue.length?ue.length-1:0;let Me;return Be?Me=d.sqlite3_create_window_function(this.pointer,O,Re,d.SQLITE_UTF8|V,_e||0,G,he,Fe,Pe,N):Me=d.sqlite3_create_function_v2(this.pointer,O,Re,d.SQLITE_UTF8|V,_e||0,E,G,he,N),H.checkRc(this,Me),this},"f"),selectValue:function(T,O,E){return re(this,T,O,0,E)},selectValues:function(T,O,E){const A=this.prepare(T),I=[];try{for(A.bind(O);A.step();)I.push(A.get(0,E));A.reset()}finally{A.finalize()}return I},selectArray:function(T,O){return re(this,T,O,[])},selectObject:function(T,O){return re(this,T,O,{})},selectArrays:function(T,O){return z(this,T,O,"array")},selectObjects:function(T,O){return z(this,T,O,"object")},openStatementCount:function(){return this.pointer?Object.keys(L.get(this)).length:0},transaction:function(T){let O="BEGIN";arguments.length>1&&(/[^a-zA-Z]/.test(arguments[0])&&p(d.SQLITE_MISUSE,"Invalid argument for BEGIN qualifier."),O+=" "+arguments[0],T=arguments[1]),B(this).exec(O);try{const E=T(this);return this.exec("COMMIT"),E}catch(E){throw this.exec("ROLLBACK"),E}},savepoint:function(T){B(this).exec("SAVEPOINT oo1");try{const O=T(this);return this.exec("RELEASE oo1"),O}catch(O){throw this.exec("ROLLBACK to SAVEPOINT oo1; RELEASE SAVEPOINT oo1"),O}},checkRc:function(T){return ee(this,T)}};const Z=i(function(T){return T.pointer||p("Stmt has been closed."),T},"affirmStmtOpen"),xe=i(function(T){let O=se[T==null?"null":typeof T];switch(O){case se.boolean:case se.null:case se.number:case se.string:return O;case se.bigint:if(h.bigIntEnabled)return O;default:return y.isBindableTypedArray(T)?se.blob:void 0}},"isSupportedBindType"),S=i(function(T){return xe(T)||p("Unsupported bind() argument type:",typeof T)},"affirmSupportedBindType"),k=i(function(T,O){const E=typeof O=="number"?O:d.sqlite3_bind_parameter_index(T.pointer,O);return E===0||!y.isInt32(E)?p("Invalid bind() parameter name: "+O):(E<1||E>T.parameterCount)&&p("Bind index",O,"is out of range."),E},"affirmParamIndex"),D=i(function(T,O){return T._lockedByExec&&p("Operation is illegal when statement is locked:",O),T},"affirmNotLockedByExec"),pe=i(function T(O,E,A,I){D(Z(O),"bind()"),T._||(T._tooBigInt=he=>p("BigInt value is too big to store without precision loss:",he),T._={string:function(he,Fe,Pe,Be){const[_e,N]=h.allocCString(Pe,!0);return(Be?d.sqlite3_bind_blob:d.sqlite3_bind_text)(he.pointer,Fe,_e,N,d.SQLITE_WASM_DEALLOC)}}),S(I),E=k(O,E);let G=0;switch(I==null?se.null:A){case se.null:G=d.sqlite3_bind_null(O.pointer,E);break;case se.string:G=T._.string(O,E,I,!1);break;case se.number:{let he;y.isInt32(I)?he=d.sqlite3_bind_int:typeof I=="bigint"?y.bigIntFits64(I)?h.bigIntEnabled?he=d.sqlite3_bind_int64:y.bigIntFitsDouble(I)?(I=Number(I),he=d.sqlite3_bind_double):T._tooBigInt(I):T._tooBigInt(I):(I=Number(I),h.bigIntEnabled&&Number.isInteger(I)?he=d.sqlite3_bind_int64:he=d.sqlite3_bind_double),G=he(O.pointer,E,I);break}case se.boolean:G=d.sqlite3_bind_int(O.pointer,E,I?1:0);break;case se.blob:{if(typeof I=="string"){G=T._.string(O,E,I,!0);break}else I instanceof ArrayBuffer?I=new Uint8Array(I):y.isBindableTypedArray(I)||p("Binding a value as a blob requires","that it be a string, Uint8Array, Int8Array, or ArrayBuffer.");const he=h.alloc(I.byteLength||1);h.heap8().set(I.byteLength?I:[0],he),G=d.sqlite3_bind_blob(O.pointer,E,he,I.byteLength,d.SQLITE_WASM_DEALLOC);break}default:c.config.warn("Unsupported bind() argument type:",I),p("Unsupported bind() argument type: "+typeof I)}return G&&H.checkRc(O.db.pointer,G),O._mayGet=!1,O},"f");F.prototype={finalize:function(){if(this.pointer){D(this,"finalize()");const T=d.sqlite3_finalize(this.pointer);return delete L.get(this.db)[this.pointer],C.delete(this),delete this._mayGet,delete this.parameterCount,delete this._lockedByExec,delete this.db,T}},clearBindings:function(){return D(Z(this),"clearBindings()"),d.sqlite3_clear_bindings(this.pointer),this._mayGet=!1,this},reset:function(T){D(this,"reset()"),T&&this.clearBindings();const O=d.sqlite3_reset(Z(this).pointer);return this._mayGet=!1,ee(this.db,O),this},bind:function(){Z(this);let T,O;switch(arguments.length){case 1:T=1,O=arguments[0];break;case 2:T=arguments[0],O=arguments[1];break;default:p("Invalid bind() arguments.")}return O===void 0?this:(this.parameterCount||p("This statement has no bindable parameters."),this._mayGet=!1,O===null?pe(this,T,se.null,O):Array.isArray(O)?(arguments.length!==1&&p("When binding an array, an index argument is not permitted."),O.forEach((E,A)=>pe(this,A+1,S(E),E)),this):(O instanceof ArrayBuffer&&(O=new Uint8Array(O)),typeof O=="object"&&!y.isBindableTypedArray(O)?(arguments.length!==1&&p("When binding an object, an index argument is not permitted."),Object.keys(O).forEach(E=>pe(this,E,S(O[E]),O[E])),this):pe(this,T,S(O),O)))},bindAsBlob:function(T,O){Z(this),arguments.length===1&&(O=T,T=1);const E=S(O);return se.string!==E&&se.blob!==E&&se.null!==E&&p("Invalid value type for bindAsBlob()"),pe(this,T,se.blob,O)},step:function(){D(this,"step()");const T=d.sqlite3_step(Z(this).pointer);switch(T){case d.SQLITE_DONE:return this._mayGet=!1;case d.SQLITE_ROW:return this._mayGet=!0;default:this._mayGet=!1,c.config.warn("sqlite3_step() rc=",T,d.sqlite3_js_rc_str(T),"SQL =",d.sqlite3_sql(this.pointer)),H.checkRc(this.db.pointer,T)}},stepReset:function(){return this.step(),this.reset()},stepFinalize:function(){try{const T=this.step();return this.reset(),T}finally{try{this.finalize()}catch{}}},get:function(T,O){if(Z(this)._mayGet||p("Stmt.step() has not (recently) returned true."),Array.isArray(T)){let E=0;const A=this.columnCount;for(;E<A;)T[E]=this.get(E++);return T}else if(T&&typeof T=="object"){let E=0;const A=this.columnCount;for(;E<A;)T[d.sqlite3_column_name(this.pointer,E)]=this.get(E++);return T}switch(W(this,T),O===void 0?d.sqlite3_column_type(this.pointer,T):O){case d.SQLITE_NULL:return null;case d.SQLITE_INTEGER:if(h.bigIntEnabled){const E=d.sqlite3_column_int64(this.pointer,T);return E>=Number.MIN_SAFE_INTEGER&&E<=Number.MAX_SAFE_INTEGER?Number(E).valueOf():E}else{const E=d.sqlite3_column_double(this.pointer,T);return(E>Number.MAX_SAFE_INTEGER||E<Number.MIN_SAFE_INTEGER)&&p("Integer is out of range for JS integer range: "+E),y.isInt32(E)?E|0:E}case d.SQLITE_FLOAT:return d.sqlite3_column_double(this.pointer,T);case d.SQLITE_TEXT:return d.sqlite3_column_text(this.pointer,T);case d.SQLITE_BLOB:{const E=d.sqlite3_column_bytes(this.pointer,T),A=d.sqlite3_column_blob(this.pointer,T),I=new Uint8Array(E);return E&&I.set(h.heap8u().slice(A,A+E),0),E&&this.db._blobXfer instanceof Array&&this.db._blobXfer.push(I.buffer),I}default:p("Don't know how to translate","type of result column #"+T+".")}p("Not reached.")},getInt:function(T){return this.get(T,d.SQLITE_INTEGER)},getFloat:function(T){return this.get(T,d.SQLITE_FLOAT)},getString:function(T){return this.get(T,d.SQLITE_TEXT)},getBlob:function(T){return this.get(T,d.SQLITE_BLOB)},getJSON:function(T){const O=this.get(T,d.SQLITE_STRING);return O===null?O:JSON.parse(O)},getColumnName:function(T){return d.sqlite3_column_name(W(Z(this),T).pointer,T)},getColumnNames:function(T=[]){W(Z(this),0);const O=this.columnCount;for(let E=0;E<O;++E)T.push(d.sqlite3_column_name(this.pointer,E));return T},getParamIndex:function(T){return Z(this).parameterCount?d.sqlite3_bind_parameter_index(this.pointer,T):void 0}};{const T={enumerable:!0,get:function(){return C.get(this)},set:()=>p("The pointer property is read-only.")};Object.defineProperty(F.prototype,"pointer",T),Object.defineProperty(H.prototype,"pointer",T)}if(Object.defineProperty(F.prototype,"columnCount",{enumerable:!1,get:function(){return d.sqlite3_column_count(this.pointer)},set:()=>p("The columnCount property is read-only.")}),c.oo1={DB:H,Stmt:F},y.isUIThread()){c.oo1.JsStorageDb=function(O="session"){const E=Q.normalizeArgs(...arguments);O=E.filename,O!=="session"&&O!=="local"&&p("JsStorageDb db name must be one of 'session' or 'local'."),E.vfs="kvvfs",Q.call(this,E)};const T=c.oo1.JsStorageDb;T.prototype=Object.create(H.prototype),T.clearStorage=d.sqlite3_js_kvvfs_clear,T.prototype.clearStorage=function(){return T.clearStorage(B(this).filename)},T.storageSize=d.sqlite3_js_kvvfs_size,T.prototype.storageSize=function(){return T.storageSize(B(this).filename)}}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(c){const p=c.util;c.initWorker1API=function(){const d=i((...Q)=>{throw new Error(Q.join(" "))},"toss");globalThis.WorkerGlobalScope instanceof Function||d("initWorker1API() must be run from a Worker thread.");const h=this.sqlite3||d("Missing this.sqlite3 object."),y=h.oo1.DB,C=i(function(Q){let H=L.idMap.get(Q);return H||(H="db#"+ ++L.idSeq+"@"+Q.pointer,L.idMap.set(Q,H),H)},"getDbId"),L={dbList:[],idSeq:0,idMap:new WeakMap,xfer:[],open:function(Q){const H=new y(Q);return this.dbs[C(H)]=H,this.dbList.indexOf(H)<0&&this.dbList.push(H),H},close:function(Q,H){if(Q){delete this.dbs[C(Q)];const se=Q.filename,F=p.sqlite3__wasm_db_vfs(Q.pointer,0);Q.close();const B=this.dbList.indexOf(Q);B>=0&&this.dbList.splice(B,1),H&&se&&F&&p.sqlite3__wasm_vfs_unlink(F,se)}},post:function(Q,H){H&&H.length?(globalThis.postMessage(Q,Array.from(H)),H.length=0):globalThis.postMessage(Q)},dbs:Object.create(null),getDb:function(Q,H=!0){return this.dbs[Q]||(H?d("Unknown (or closed) DB ID:",Q):void 0)}},Y=i(function(Q=L.dbList[0]){return Q&&Q.pointer?Q:d("DB is not opened.")},"affirmDbOpen"),ee=i(function(Q,H=!0){const se=L.getDb(Q.dbId,!1)||L.dbList[0];return H?Y(se):se},"getMsgDb"),de=i(function(){return L.dbList[0]&&C(L.dbList[0])},"getDefaultDbId"),ye={open:function(Q){const H=Object.create(null),se=Q.args||Object.create(null);se.simulateError&&d("Throwing because of simulateError flag.");const F=Object.create(null);H.vfs=se.vfs,H.filename=se.filename||"";const B=L.open(H);return F.filename=B.filename,F.persistent=!!h.capi.sqlite3_js_db_uses_vfs(B.pointer,"opfs"),F.dbId=C(B),F.vfs=B.dbVfsName(),F},close:function(Q){const H=ee(Q,!1),se={filename:H&&H.filename};if(H){const F=Q.args&&typeof Q.args=="object"?!!Q.args.unlink:!1;L.close(H,F)}return se},exec:function(Q){const H=typeof Q.args=="string"?{sql:Q.args}:Q.args||Object.create(null);H.rowMode==="stmt"?d("Invalid rowMode for 'exec': stmt mode","does not work in the Worker API."):H.sql||d("'exec' requires input SQL.");const se=ee(Q);(H.callback||Array.isArray(H.resultRows))&&(se._blobXfer=L.xfer);const F=H.callback;let B=0;const W=!!H.columnNames;typeof F=="string"&&(W||(H.columnNames=[]),H.callback=function(ie,re){L.post({type:F,columnNames:H.columnNames,rowNumber:++B,row:ie},L.xfer)});try{const ie=H.countChanges?se.changes(!0,H.countChanges===64):void 0;se.exec(H),ie!==void 0&&(H.changeCount=se.changes(!0,H.countChanges===64)-ie),H.callback instanceof Function&&(H.callback=F,L.post({type:F,columnNames:H.columnNames,rowNumber:null,row:void 0}))}finally{delete se._blobXfer,H.callback&&(H.callback=F)}return H},"config-get":function(){const Q=Object.create(null),H=h.config;return["bigIntEnabled"].forEach(function(se){Object.getOwnPropertyDescriptor(H,se)&&(Q[se]=H[se])}),Q.version=h.version,Q.vfsList=h.capi.sqlite3_js_vfs_list(),Q.opfsEnabled=!!h.opfs,Q},export:function(Q){const H=ee(Q),se={byteArray:h.capi.sqlite3_js_db_export(H.pointer),filename:H.filename,mimetype:"application/x-sqlite3"};return L.xfer.push(se.byteArray.buffer),se},toss:function(Q){d("Testing worker exception")},"opfs-tree":async function(Q){return h.opfs||d("OPFS support is unavailable."),await h.opfs.treeList()}};globalThis.onmessage=async function(Q){Q=Q.data;let H,se=Q.dbId,F=Q.type;const B=performance.now();try{ye.hasOwnProperty(F)&&ye[F]instanceof Function?H=await ye[F](Q):d("Unknown db worker message type:",Q.type)}catch(W){F="error",H={operation:Q.type,message:W.message,errorClass:W.name,input:Q},W.stack&&(H.stack=typeof W.stack=="string"?W.stack.split(/\n\s*/):W.stack)}se||(se=H.dbId||de()),L.post({type:F,dbId:se,messageId:Q.messageId,workerReceivedTime:B,workerRespondTime:performance.now(),departureTime:Q.departureTime,result:H},L.xfer)},globalThis.postMessage({type:"sqlite3-api",result:"worker1-ready"})}.bind({sqlite3:c})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(c){const p=c.wasm,d=c.capi,h=c.util.toss3,y=Object.create(null);c.vfs=y,d.sqlite3_vfs.prototype.registerVfs=function(C=!1){this instanceof c.capi.sqlite3_vfs||h("Expecting a sqlite3_vfs-type argument.");const L=d.sqlite3_vfs_register(this,C?1:0);return L&&h("sqlite3_vfs_register(",this,") failed with rc",L),this.pointer!==d.sqlite3_vfs_find(this.$zName)&&h("BUG: sqlite3_vfs_find(vfs.$zName) failed for just-installed VFS",this),this},y.installVfs=function(C){let L=0;const Y=["io","vfs"];for(const ee of Y){const de=C[ee];de&&(++L,de.struct.installMethods(de.methods,!!de.applyArgcCheck),ee==="vfs"&&(!de.struct.$zName&&typeof de.name=="string"&&de.struct.addOnDispose(de.struct.$zName=p.allocCString(de.name)),de.struct.registerVfs(!!de.asDefault)))}return L||h("Misuse: installVfs() options object requires at least","one of:",Y),this}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(c){const p=c.wasm,d=c.capi,h=c.util.toss3,y=Object.create(null);c.vtab=y;const C=d.sqlite3_index_info;C.prototype.nthConstraint=function(ee,de=!1){if(ee<0||ee>=this.$nConstraint)return!1;const ye=this.$aConstraint+C.sqlite3_index_constraint.structInfo.sizeof*ee;return de?ye:new C.sqlite3_index_constraint(ye)},C.prototype.nthConstraintUsage=function(ee,de=!1){if(ee<0||ee>=this.$nConstraint)return!1;const ye=this.$aConstraintUsage+C.sqlite3_index_constraint_usage.structInfo.sizeof*ee;return de?ye:new C.sqlite3_index_constraint_usage(ye)},C.prototype.nthOrderBy=function(ee,de=!1){if(ee<0||ee>=this.$nOrderBy)return!1;const ye=this.$aOrderBy+C.sqlite3_index_orderby.structInfo.sizeof*ee;return de?ye:new C.sqlite3_index_orderby(ye)};const L=i(function(ee,de){return function(ye,Q=!1){if(arguments.length===0&&(ye=new de),ye instanceof de)return this.set(ye.pointer,ye),ye;p.isPtr(ye)||c.SQLite3Error.toss("Invalid argument to",ee+"()");let H=this.get(ye);return Q&&this.delete(ye),H}.bind(new Map)},"__xWrapFactory"),Y=i(function(ee,de){const ye=L(ee,de);return Object.assign(Object.create(null),{StructType:de,create:Q=>{const H=ye();return p.pokePtr(Q,H.pointer),H},get:Q=>ye(Q),unget:Q=>ye(Q,!0),dispose:Q=>{const H=ye(Q,!0);H&&H.dispose()}})},"StructPtrMapper");y.xVtab=Y("xVtab",d.sqlite3_vtab),y.xCursor=Y("xCursor",d.sqlite3_vtab_cursor),y.xIndexInfo=ee=>new d.sqlite3_index_info(ee),y.xError=i(function ee(de,ye,Q){if(ee.errorReporter instanceof Function)try{ee.errorReporter("sqlite3_module::"+de+"(): "+ye.message)}catch{}let H;return ye instanceof c.WasmAllocError?H=d.SQLITE_NOMEM:arguments.length>2?H=Q:ye instanceof c.SQLite3Error&&(H=ye.resultCode),H||d.SQLITE_ERROR},"f"),y.xError.errorReporter=console.error.bind(console),y.xRowid=(ee,de)=>p.poke(ee,de,"i64"),y.setupModule=function(ee){let de=!1;const ye=this instanceof d.sqlite3_module?this:ee.struct||(de=new d.sqlite3_module);try{const Q=ee.methods||h("Missing 'methods' object.");for(const H of Object.entries({xConnect:"xCreate",xDisconnect:"xDestroy"})){const se=H[0],F=H[1];Q[se]===!0?Q[se]=Q[F]:Q[F]===!0&&(Q[F]=Q[se])}if(ee.catchExceptions){const H=i(function(B,W){return["xConnect","xCreate"].indexOf(B)>=0?function(ie,re,z,Z,xe,S){try{return W(...arguments)||0}catch(k){return k instanceof c.WasmAllocError||(p.dealloc(p.peekPtr(S)),p.pokePtr(S,p.allocCString(k.message))),y.xError(B,k)}}:function(...ie){try{return W(...ie)||0}catch(re){return y.xError(B,re)}}},"fwrap"),se=["xCreate","xConnect","xBestIndex","xDisconnect","xDestroy","xOpen","xClose","xFilter","xNext","xEof","xColumn","xRowid","xUpdate","xBegin","xSync","xCommit","xRollback","xFindFunction","xRename","xSavepoint","xRelease","xRollbackTo","xShadowName"],F=Object.create(null);for(const B of se){const W=Q[B];if(W instanceof Function)B==="xConnect"&&Q.xCreate===W?F[B]=Q.xCreate:B==="xCreate"&&Q.xConnect===W?F[B]=Q.xConnect:F[B]=H(B,W);else continue}ye.installMethods(F,!1)}else ye.installMethods(Q,!!ee.applyArgcCheck);if(ye.$iVersion===0){let H;typeof ee.iVersion=="number"?H=ee.iVersion:ye.$xShadowName?H=3:ye.$xSavePoint||ye.$xRelease||ye.$xRollbackTo?H=2:H=1,ye.$iVersion=H}}catch(Q){throw de&&de.dispose(),Q}return ye},d.sqlite3_module.prototype.setupModule=function(ee){return y.setupModule.call(this,ee)}}),globalThis.sqlite3ApiBootstrap.initializers.push(function(c){const p=i(function d(h){if(!globalThis.SharedArrayBuffer||!globalThis.Atomics)return Promise.reject(new Error("Cannot install OPFS: Missing SharedArrayBuffer and/or Atomics. The server must emit the COOP/COEP response headers to enable those. See https://sqlite.org/wasm/doc/trunk/persistence.md#coop-coep"));if(typeof WorkerGlobalScope>"u")return Promise.reject(new Error("The OPFS sqlite3_vfs cannot run in the main thread because it requires Atomics.wait()."));if(!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory)return Promise.reject(new Error("Missing required OPFS APIs."));(!h||typeof h!="object")&&(h=Object.create(null));const y=new URL(globalThis.location.href).searchParams;return y.has("opfs-disable")?Promise.resolve(c):(h.verbose===void 0&&(h.verbose=y.has("opfs-verbose")?+y.get("opfs-verbose")||2:1),h.sanityChecks===void 0&&(h.sanityChecks=y.has("opfs-sanity-check")),h.proxyUri===void 0&&(h.proxyUri=d.defaultProxyUri),typeof h.proxyUri=="function"&&(h.proxyUri=h.proxyUri()),new Promise(function(L,Y){const ee=[c.config.error,c.config.warn,c.config.log],de=i(($,...oe)=>{h.verbose>$&&ee[$]("OPFS syncer:",...oe)},"logImpl"),ye=i((...$)=>de(2,...$),"log"),Q=i((...$)=>de(1,...$),"warn"),H=i((...$)=>de(0,...$),"error"),se=c.util.toss,F=c.capi,B=c.util,W=c.wasm,ie=F.sqlite3_vfs,re=F.sqlite3_file,z=F.sqlite3_io_methods,Z=Object.create(null),xe=i(()=>globalThis.FileSystemHandle&&globalThis.FileSystemDirectoryHandle&&globalThis.FileSystemFileHandle&&globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle&&navigator?.storage?.getDirectory,"thisThreadHasOPFS");Z.metrics={dump:function(){let $,oe=0,me=0,ke=0;for($ in I.opIds){const qe=G[$];oe+=qe.count,me+=qe.time,ke+=qe.wait,qe.avgTime=qe.count&&qe.time?qe.time/qe.count:0,qe.avgWait=qe.count&&qe.wait?qe.wait/qe.count:0}c.config.log(globalThis.location.href,"metrics for",globalThis.location.href,":",G,`
Total of`,oe,"op(s) for",me,"ms (incl. "+ke+" ms of waiting on the async side)"),c.config.log("Serialization metrics:",G.s11n),O.postMessage({type:"opfs-async-metrics"})},reset:function(){let $;const oe=i(ke=>ke.count=ke.time=ke.wait=0,"r");for($ in I.opIds)oe(G[$]=Object.create(null));let me=G.s11n=Object.create(null);me=me.serialize=Object.create(null),me.count=me.time=0,me=G.s11n.deserialize=Object.create(null),me.count=me.time=0}};const S=new z,k=new ie().addOnDispose(()=>S.dispose());let D;const pe=i($=>(D=!0,k.dispose(),Y($)),"promiseReject"),T=i(()=>(D=!1,L(c)),"promiseResolve"),O=new Worker(new URL("/assets/sqlite3-opfs-async-proxy-CLW7preb.js",import.meta.url));setTimeout(()=>{D===void 0&&pe(new Error("Timeout while waiting for OPFS async proxy worker."))},4e3),O._originalOnError=O.onerror,O.onerror=function($){H("Error initializing OPFS asyncer:",$),pe(new Error("Loading OPFS async Worker failed for unknown reasons."))};const E=F.sqlite3_vfs_find(null),A=E?new ie(E):null;S.$iVersion=1,k.$iVersion=2,k.$szOsFile=F.sqlite3_file.structInfo.sizeof,k.$mxPathname=1024,k.$zName=W.allocCString("opfs"),k.$xDlOpen=k.$xDlError=k.$xDlSym=k.$xDlClose=null,k.addOnDispose("$zName",k.$zName,"cleanup default VFS wrapper",()=>A?A.dispose():null);const I=Object.create(null);I.verbose=h.verbose,I.littleEndian=(()=>{const $=new ArrayBuffer(2);return new DataView($).setInt16(0,256,!0),new Int16Array($)[0]===256})(),I.asyncIdleWaitTime=150,I.asyncS11nExceptions=1,I.fileBufferSize=1024*64,I.sabS11nOffset=I.fileBufferSize,I.sabS11nSize=k.$mxPathname*2,I.sabIO=new SharedArrayBuffer(I.fileBufferSize+I.sabS11nSize),I.opIds=Object.create(null);const G=Object.create(null);{let $=0;I.opIds.whichOp=$++,I.opIds.rc=$++,I.opIds.xAccess=$++,I.opIds.xClose=$++,I.opIds.xDelete=$++,I.opIds.xDeleteNoWait=$++,I.opIds.xFileSize=$++,I.opIds.xLock=$++,I.opIds.xOpen=$++,I.opIds.xRead=$++,I.opIds.xSleep=$++,I.opIds.xSync=$++,I.opIds.xTruncate=$++,I.opIds.xUnlock=$++,I.opIds.xWrite=$++,I.opIds.mkdir=$++,I.opIds["opfs-async-metrics"]=$++,I.opIds["opfs-async-shutdown"]=$++,I.opIds.retry=$++,I.sabOP=new SharedArrayBuffer($*4),Z.metrics.reset()}I.sq3Codes=Object.create(null),["SQLITE_ACCESS_EXISTS","SQLITE_ACCESS_READWRITE","SQLITE_BUSY","SQLITE_ERROR","SQLITE_IOERR","SQLITE_IOERR_ACCESS","SQLITE_IOERR_CLOSE","SQLITE_IOERR_DELETE","SQLITE_IOERR_FSYNC","SQLITE_IOERR_LOCK","SQLITE_IOERR_READ","SQLITE_IOERR_SHORT_READ","SQLITE_IOERR_TRUNCATE","SQLITE_IOERR_UNLOCK","SQLITE_IOERR_WRITE","SQLITE_LOCK_EXCLUSIVE","SQLITE_LOCK_NONE","SQLITE_LOCK_PENDING","SQLITE_LOCK_RESERVED","SQLITE_LOCK_SHARED","SQLITE_LOCKED","SQLITE_MISUSE","SQLITE_NOTFOUND","SQLITE_OPEN_CREATE","SQLITE_OPEN_DELETEONCLOSE","SQLITE_OPEN_MAIN_DB","SQLITE_OPEN_READONLY"].forEach($=>{(I.sq3Codes[$]=F[$])===void 0&&se("Maintenance required: not found:",$)}),I.opfsFlags=Object.assign(Object.create(null),{OPFS_UNLOCK_ASAP:1,OPFS_UNLINK_BEFORE_OPEN:2,defaultUnlockAsap:!1});const he=i(($,...oe)=>{const me=I.opIds[$]||se("Invalid op ID:",$);I.s11n.serialize(...oe),Atomics.store(I.sabOPView,I.opIds.rc,-1),Atomics.store(I.sabOPView,I.opIds.whichOp,me),Atomics.notify(I.sabOPView,I.opIds.whichOp);const ke=performance.now();Atomics.wait(I.sabOPView,I.opIds.rc,-1);const qe=Atomics.load(I.sabOPView,I.opIds.rc);if(G[$].wait+=performance.now()-ke,qe&&I.asyncS11nExceptions){const Ne=I.s11n.deserialize();Ne&&H($+"() async error:",...Ne)}return qe},"opRun");Z.debug={asyncShutdown:()=>{Q("Shutting down OPFS async listener. The OPFS VFS will no longer work."),he("opfs-async-shutdown")},asyncRestart:()=>{Q("Attempting to restart OPFS VFS async listener. Might work, might not."),O.postMessage({type:"opfs-async-restart"})}};const Fe=i(()=>{if(I.s11n)return I.s11n;const $=new TextDecoder,oe=new TextEncoder("utf-8"),me=new Uint8Array(I.sabIO,I.sabS11nOffset,I.sabS11nSize),ke=new DataView(I.sabIO,I.sabS11nOffset,I.sabS11nSize);I.s11n=Object.create(null);const qe=Object.create(null);qe.number={id:1,size:8,getter:"getFloat64",setter:"setFloat64"},qe.bigint={id:2,size:8,getter:"getBigInt64",setter:"setBigInt64"},qe.boolean={id:3,size:4,getter:"getInt32",setter:"setInt32"},qe.string={id:4};const Ne=i(Oe=>qe[typeof Oe]||se("Maintenance required: this value type cannot be serialized.",Oe),"getTypeId"),Je=i(Oe=>{switch(Oe){case qe.number.id:return qe.number;case qe.bigint.id:return qe.bigint;case qe.boolean.id:return qe.boolean;case qe.string.id:return qe.string;default:se("Invalid type ID:",Oe)}},"getTypeIdById");return I.s11n.deserialize=function(Oe=!1){++G.s11n.deserialize.count;const Et=performance.now(),K=me[0],ve=K?[]:null;if(K){const Te=[];let Ce=1,Ze,pt,lt;for(Ze=0;Ze<K;++Ze,++Ce)Te.push(Je(me[Ce]));for(Ze=0;Ze<K;++Ze){const ft=Te[Ze];ft.getter?(lt=ke[ft.getter](Ce,I.littleEndian),Ce+=ft.size):(pt=ke.getInt32(Ce,I.littleEndian),Ce+=4,lt=$.decode(me.slice(Ce,Ce+pt)),Ce+=pt),ve.push(lt)}}return Oe&&(me[0]=0),G.s11n.deserialize.time+=performance.now()-Et,ve},I.s11n.serialize=function(...Oe){const Et=performance.now();if(++G.s11n.serialize.count,Oe.length){const K=[];let ve=0,Te=1;for(me[0]=Oe.length&255;ve<Oe.length;++ve,++Te)K.push(Ne(Oe[ve])),me[Te]=K[ve].id;for(ve=0;ve<Oe.length;++ve){const Ce=K[ve];if(Ce.setter)ke[Ce.setter](Te,Oe[ve],I.littleEndian),Te+=Ce.size;else{const Ze=oe.encode(Oe[ve]);ke.setInt32(Te,Ze.byteLength,I.littleEndian),Te+=4,me.set(Ze,Te),Te+=Ze.byteLength}}}else me[0]=0;G.s11n.serialize.time+=performance.now()-Et},I.s11n},"initS11n"),Pe=i(function $(oe=16){$._chars||($._chars="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ012346789",$._n=$._chars.length);const me=[];let ke=0;for(;ke<oe;++ke){const qe=Math.random()*($._n*64)%$._n|0;me[ke]=$._chars[qe]}return me.join("")},"f"),Be=Object.create(null),_e=Object.create(null);_e.op=void 0,_e.start=void 0;const N=i($=>{_e.start=performance.now(),_e.op=$,++G[$].count},"mTimeStart"),V=i(()=>G[_e.op].time+=performance.now()-_e.start,"mTimeEnd"),ue={xCheckReservedLock:function($,oe){const me=Be[$];return W.poke(oe,me.lockType?1:0,"i32"),0},xClose:function($){N("xClose");let oe=0;const me=Be[$];return me&&(delete Be[$],oe=he("xClose",$),me.sq3File&&me.sq3File.dispose()),V(),oe},xDeviceCharacteristics:function($){return F.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function($,oe,me){return F.SQLITE_NOTFOUND},xFileSize:function($,oe){N("xFileSize");let me=he("xFileSize",$);if(me==0)try{const ke=I.s11n.deserialize()[0];W.poke(oe,ke,"i64")}catch(ke){H("Unexpected error reading xFileSize() result:",ke),me=I.sq3Codes.SQLITE_IOERR}return V(),me},xLock:function($,oe){N("xLock");const me=Be[$];let ke=0;return me.lockType?me.lockType=oe:(ke=he("xLock",$,oe),ke===0&&(me.lockType=oe)),V(),ke},xRead:function($,oe,me,ke){N("xRead");const qe=Be[$];let Ne;try{Ne=he("xRead",$,me,Number(ke)),(Ne===0||F.SQLITE_IOERR_SHORT_READ===Ne)&&W.heap8u().set(qe.sabView.subarray(0,me),oe)}catch(Je){H("xRead(",arguments,") failed:",Je,qe),Ne=F.SQLITE_IOERR_READ}return V(),Ne},xSync:function($,oe){N("xSync"),++G.xSync.count;const me=he("xSync",$,oe);return V(),me},xTruncate:function($,oe){N("xTruncate");const me=he("xTruncate",$,Number(oe));return V(),me},xUnlock:function($,oe){N("xUnlock");const me=Be[$];let ke=0;return F.SQLITE_LOCK_NONE===oe&&me.lockType&&(ke=he("xUnlock",$,oe)),ke===0&&(me.lockType=oe),V(),ke},xWrite:function($,oe,me,ke){N("xWrite");const qe=Be[$];let Ne;try{qe.sabView.set(W.heap8u().subarray(oe,oe+me)),Ne=he("xWrite",$,me,Number(ke))}catch(Je){H("xWrite(",arguments,") failed:",Je,qe),Ne=F.SQLITE_IOERR_WRITE}return V(),Ne}},Ee={xAccess:function($,oe,me,ke){N("xAccess");const qe=he("xAccess",W.cstrToJs(oe));return W.poke(ke,qe?0:1,"i32"),V(),0},xCurrentTime:function($,oe){return W.poke(oe,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function($,oe){return W.poke(oe,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function($,oe,me){N("xDelete");const ke=he("xDelete",W.cstrToJs(oe),me,!1);return V(),ke},xFullPathname:function($,oe,me,ke){return W.cstrncpy(ke,oe,me)<me?0:F.SQLITE_CANTOPEN},xGetLastError:function($,oe,me){return Q("OPFS xGetLastError() has nothing sensible to return."),0},xOpen:i(function(oe,me,ke,qe,Ne){N("xOpen");let Je=0;me===0?me=Pe():W.isPtr(me)&&(F.sqlite3_uri_boolean(me,"opfs-unlock-asap",0)&&(Je|=I.opfsFlags.OPFS_UNLOCK_ASAP),F.sqlite3_uri_boolean(me,"delete-before-open",0)&&(Je|=I.opfsFlags.OPFS_UNLINK_BEFORE_OPEN),me=W.cstrToJs(me));const Oe=Object.create(null);Oe.fid=ke,Oe.filename=me,Oe.sab=new SharedArrayBuffer(I.fileBufferSize),Oe.flags=qe;const Et=he("xOpen",ke,me,qe,Je);return Et||(Oe.readOnly&&W.poke(Ne,F.SQLITE_OPEN_READONLY,"i32"),Be[ke]=Oe,Oe.sabView=I.sabFileBufView,Oe.sq3File=new re(ke),Oe.sq3File.$pMethods=S.pointer,Oe.lockType=F.SQLITE_LOCK_NONE),V(),Et},"f")};A&&(k.$xRandomness=A.$xRandomness,k.$xSleep=A.$xSleep),k.$xRandomness||(Ee.xRandomness=function($,oe,me){const ke=W.heap8u();let qe=0;for(;qe<oe;++qe)ke[me+qe]=Math.random()*255e3&255;return qe}),k.$xSleep||(Ee.xSleep=function($,oe){return Atomics.wait(I.sabOPView,I.opIds.xSleep,0,oe),0}),Z.getResolvedPath=function($,oe){const me=new URL($,"file://irrelevant").pathname;return oe?me.split("/").filter(ke=>!!ke):me},Z.getDirForFilename=i(async function(oe,me=!1){const ke=Z.getResolvedPath(oe,!0),qe=ke.pop();let Ne=Z.rootDirectory;for(const Je of ke)Je&&(Ne=await Ne.getDirectoryHandle(Je,{create:!!me}));return[Ne,qe]},"f"),Z.mkdir=async function($){try{return await Z.getDirForFilename($+"/filepart",!0),!0}catch{return!1}},Z.entryExists=async function($){try{const[oe,me]=await Z.getDirForFilename($);return await oe.getFileHandle(me),!0}catch{return!1}},Z.randomFilename=Pe,Z.treeList=async function(){const $=i(async function me(ke,qe){qe.name=ke.name,qe.dirs=[],qe.files=[];for await(const Ne of ke.values())if(Ne.kind==="directory"){const Je=Object.create(null);qe.dirs.push(Je),await me(Ne,Je)}else qe.files.push(Ne.name)},"callee"),oe=Object.create(null);return await $(Z.rootDirectory,oe),oe},Z.rmfr=async function(){const $=Z.rootDirectory,oe={recurse:!0};for await(const me of $.values())$.removeEntry(me.name,oe)},Z.unlink=async function($,oe=!1,me=!1){try{const[ke,qe]=await Z.getDirForFilename($,!1);return await ke.removeEntry(qe,{recursive:oe}),!0}catch(ke){if(me)throw new Error("unlink(",arguments[0],") failed: "+ke.message,{cause:ke});return!1}},Z.traverse=async function($){const oe={recursive:!0,directory:Z.rootDirectory};typeof $=="function"&&($={callback:$}),$=Object.assign(oe,$||{}),i(async function ke(qe,Ne){for await(const Je of qe.values()){if($.callback(Je,qe,Ne)===!1)return!1;if($.recursive&&Je.kind==="directory"&&await ke(Je,Ne+1)===!1)break}},"callee")($.directory,0)};const Re=i(async function($,oe){const[me,ke]=await Z.getDirForFilename($,!0);let Ne=await(await me.getFileHandle(ke,{create:!0})).createSyncAccessHandle(),Je=0,Oe,Et=!1;try{for(Ne.truncate(0);(Oe=await oe())!==void 0;)Oe instanceof ArrayBuffer&&(Oe=new Uint8Array(Oe)),Je===0&&Oe.byteLength>=15&&(B.affirmDbHeader(Oe),Et=!0),Ne.write(Oe,{at:Je}),Je+=Oe.byteLength;if((Je<512||Je%512!==0)&&se("Input size",Je,"is not correct for an SQLite database."),!Et){const K=new Uint8Array(20);Ne.read(K,{at:0}),B.affirmDbHeader(K)}return Ne.write(new Uint8Array([1,1]),{at:18}),Je}catch(K){throw await Ne.close(),Ne=void 0,await me.removeEntry(ke).catch(()=>{}),K}finally{Ne&&await Ne.close()}},"importDbChunked");if(Z.importDb=async function($,oe){if(oe instanceof Function)return Re($,oe);oe instanceof ArrayBuffer&&(oe=new Uint8Array(oe)),B.affirmIsDb(oe);const me=oe.byteLength,[ke,qe]=await Z.getDirForFilename($,!0);let Ne,Je=0;try{return Ne=await(await ke.getFileHandle(qe,{create:!0})).createSyncAccessHandle(),Ne.truncate(0),Je=Ne.write(oe,{at:0}),Je!=me&&se("Expected to write "+me+" bytes but wrote "+Je+"."),Ne.write(new Uint8Array([1,1]),{at:18}),Je}catch(Oe){throw Ne&&(await Ne.close(),Ne=void 0),await ke.removeEntry(qe).catch(()=>{}),Oe}finally{Ne&&await Ne.close()}},c.oo1){const $=i(function(...oe){const me=c.oo1.DB.dbCtorHelper.normalizeArgs(...oe);me.vfs=k.$zName,c.oo1.DB.dbCtorHelper.call(this,me)},"OpfsDb");$.prototype=Object.create(c.oo1.DB.prototype),c.oo1.OpfsDb=$,$.importDb=Z.importDb,c.oo1.DB.dbCtorHelper.setVfsPostOpenSql(k.pointer,function(oe,me){me.capi.sqlite3_busy_timeout(oe,1e4),me.capi.sqlite3_exec(oe,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}const Me=i(function(){const $=W.scopedAllocPush(),oe=new re;try{const me=oe.pointer,ke=F.SQLITE_OPEN_CREATE|F.SQLITE_OPEN_READWRITE|F.SQLITE_OPEN_MAIN_DB,qe=W.scopedAlloc(8),Ne="/sanity/check/file"+Pe(8),Je=W.scopedAllocCString(Ne);let Oe;if(I.s11n.serialize("This is ä string."),Oe=I.s11n.deserialize(),ye("deserialize() says:",Oe),Oe[0]!=="This is ä string."&&se("String d13n error."),Ee.xAccess(k.pointer,Je,0,qe),Oe=W.peek(qe,"i32"),ye("xAccess(",Ne,") exists ?=",Oe),Oe=Ee.xOpen(k.pointer,Je,me,ke,qe),ye("open rc =",Oe,"state.sabOPView[xOpen] =",I.sabOPView[I.opIds.xOpen]),Oe!==0){H("open failed with code",Oe);return}Ee.xAccess(k.pointer,Je,0,qe),Oe=W.peek(qe,"i32"),Oe||se("xAccess() failed to detect file."),Oe=ue.xSync(oe.pointer,0),Oe&&se("sync failed w/ rc",Oe),Oe=ue.xTruncate(oe.pointer,1024),Oe&&se("truncate failed w/ rc",Oe),W.poke(qe,0,"i64"),Oe=ue.xFileSize(oe.pointer,qe),Oe&&se("xFileSize failed w/ rc",Oe),ye("xFileSize says:",W.peek(qe,"i64")),Oe=ue.xWrite(oe.pointer,Je,10,1),Oe&&se("xWrite() failed!");const Et=W.scopedAlloc(16);Oe=ue.xRead(oe.pointer,Et,6,2),W.poke(Et+6,0);let K=W.cstrToJs(Et);ye("xRead() got:",K),K!=="sanity"&&se("Unexpected xRead() value."),Ee.xSleep&&(ye("xSleep()ing before close()ing..."),Ee.xSleep(k.pointer,2e3),ye("waking up from xSleep()")),Oe=ue.xClose(me),ye("xClose rc =",Oe,"sabOPView =",I.sabOPView),ye("Deleting file:",Ne),Ee.xDelete(k.pointer,Je,4660),Ee.xAccess(k.pointer,Je,0,qe),Oe=W.peek(qe,"i32"),Oe&&se("Expecting 0 from xAccess(",Ne,") after xDelete()."),Q("End of OPFS sanity checks.")}finally{oe.dispose(),W.scopedAllocPop($)}},"sanityCheck");O.onmessage=function({data:$}){switch($.type){case"opfs-unavailable":pe(new Error($.payload.join(" ")));break;case"opfs-async-loaded":O.postMessage({type:"opfs-async-init",args:I});break;case"opfs-async-inited":{if(D===!0)break;try{c.vfs.installVfs({io:{struct:S,methods:ue},vfs:{struct:k,methods:Ee}}),I.sabOPView=new Int32Array(I.sabOP),I.sabFileBufView=new Uint8Array(I.sabIO,0,I.fileBufferSize),I.sabS11nView=new Uint8Array(I.sabIO,I.sabS11nOffset,I.sabS11nSize),Fe(),h.sanityChecks&&(Q("Running sanity checks because of opfs-sanity-check URL arg..."),Me()),xe()?navigator.storage.getDirectory().then(oe=>{O.onerror=O._originalOnError,delete O._originalOnError,c.opfs=Z,Z.rootDirectory=oe,ye("End of OPFS sqlite3_vfs setup.",k),T()}).catch(pe):T()}catch(oe){H(oe),pe(oe)}break}default:{const oe="Unexpected message from the OPFS async worker: "+JSON.stringify($);H(oe),pe(new Error(oe));break}}}}))},"callee");p.defaultProxyUri="sqlite3-opfs-async-proxy.js",globalThis.sqlite3ApiBootstrap.initializersAsync.push(async d=>{try{let h=p.defaultProxyUri;return d.scriptInfo.sqlite3Dir&&(p.defaultProxyUri=d.scriptInfo.sqlite3Dir+h),p().catch(y=>{d.config.warn("Ignoring inability to install OPFS sqlite3_vfs:",y.message)})}catch(h){return d.config.error("installOpfsVfs() exception:",h),Promise.reject(h)}})}),globalThis.sqlite3ApiBootstrap.initializers.push(function(c){const p=c.util.toss,d=c.util.toss3,h=Object.create(null),y=c.capi,C=c.util,L=c.wasm,Y=4096,ee=512,de=4,ye=8,Q=ee+de,H=ee,se=Q,F=Y,B=y.SQLITE_OPEN_MAIN_DB|y.SQLITE_OPEN_MAIN_JOURNAL|y.SQLITE_OPEN_SUPER_JOURNAL|y.SQLITE_OPEN_WAL,W=".opaque",ie=i(()=>Math.random().toString(36).slice(2),"getRandomName"),re=new TextDecoder,z=new TextEncoder,Z=Object.assign(Object.create(null),{name:"opfs-sahpool",directory:void 0,initialCapacity:6,clearOnInit:!1,verbosity:2}),xe=[c.config.error,c.config.warn,c.config.log];c.config.log;const S=c.config.warn;c.config.error;const k=new Map,D=i(_e=>k.get(_e),"getPoolForVfs"),pe=i((_e,N)=>{N?k.set(_e,N):k.delete(_e)},"setPoolForVfs"),T=new Map,O=i(_e=>T.get(_e),"getPoolForPFile"),E=i((_e,N)=>{N?T.set(_e,N):T.delete(_e)},"setPoolForPFile"),A={xCheckReservedLock:function(_e,N){const V=O(_e);return V.log("xCheckReservedLock"),V.storeErr(),L.poke32(N,1),0},xClose:function(_e){const N=O(_e);N.storeErr();const V=N.getOFileForS3File(_e);if(V)try{N.log(`xClose ${V.path}`),N.mapS3FileToOFile(_e,!1),V.sah.flush(),V.flags&y.SQLITE_OPEN_DELETEONCLOSE&&N.deletePath(V.path)}catch(ue){return N.storeErr(ue,y.SQLITE_IOERR)}return 0},xDeviceCharacteristics:function(_e){return y.SQLITE_IOCAP_UNDELETABLE_WHEN_OPEN},xFileControl:function(_e,N,V){return y.SQLITE_NOTFOUND},xFileSize:function(_e,N){const V=O(_e);V.log("xFileSize");const Ee=V.getOFileForS3File(_e).sah.getSize()-F;return L.poke64(N,BigInt(Ee)),0},xLock:function(_e,N){const V=O(_e);V.log(`xLock ${N}`),V.storeErr();const ue=V.getOFileForS3File(_e);return ue.lockType=N,0},xRead:function(_e,N,V,ue){const Ee=O(_e);Ee.storeErr();const Re=Ee.getOFileForS3File(_e);Ee.log(`xRead ${Re.path} ${V} @ ${ue}`);try{const Me=Re.sah.read(L.heap8u().subarray(N,N+V),{at:F+Number(ue)});return Me<V?(L.heap8u().fill(0,N+Me,N+V),y.SQLITE_IOERR_SHORT_READ):0}catch(Me){return Ee.storeErr(Me,y.SQLITE_IOERR)}},xSectorSize:function(_e){return Y},xSync:function(_e,N){const V=O(_e);V.log(`xSync ${N}`),V.storeErr();const ue=V.getOFileForS3File(_e);try{return ue.sah.flush(),0}catch(Ee){return V.storeErr(Ee,y.SQLITE_IOERR)}},xTruncate:function(_e,N){const V=O(_e);V.log(`xTruncate ${N}`),V.storeErr();const ue=V.getOFileForS3File(_e);try{return ue.sah.truncate(F+Number(N)),0}catch(Ee){return V.storeErr(Ee,y.SQLITE_IOERR)}},xUnlock:function(_e,N){const V=O(_e);V.log("xUnlock");const ue=V.getOFileForS3File(_e);return ue.lockType=N,0},xWrite:function(_e,N,V,ue){const Ee=O(_e);Ee.storeErr();const Re=Ee.getOFileForS3File(_e);Ee.log(`xWrite ${Re.path} ${V} ${ue}`);try{const Me=Re.sah.write(L.heap8u().subarray(N,N+V),{at:F+Number(ue)});return V===Me?0:p("Unknown write() failure.")}catch(Me){return Ee.storeErr(Me,y.SQLITE_IOERR)}}},I=new y.sqlite3_io_methods;I.$iVersion=1,c.vfs.installVfs({io:{struct:I,methods:A}});const G={xAccess:function(_e,N,V,ue){const Ee=D(_e);Ee.storeErr();try{const Re=Ee.getPath(N);L.poke32(ue,Ee.hasFilename(Re)?1:0)}catch{L.poke32(ue,0)}return 0},xCurrentTime:function(_e,N){return L.poke(N,24405875e-1+new Date().getTime()/864e5,"double"),0},xCurrentTimeInt64:function(_e,N){return L.poke(N,24405875e-1*864e5+new Date().getTime(),"i64"),0},xDelete:function(_e,N,V){const ue=D(_e);ue.log(`xDelete ${L.cstrToJs(N)}`),ue.storeErr();try{return ue.deletePath(ue.getPath(N)),0}catch(Ee){return ue.storeErr(Ee),y.SQLITE_IOERR_DELETE}},xFullPathname:function(_e,N,V,ue){return L.cstrncpy(ue,N,V)<V?0:y.SQLITE_CANTOPEN},xGetLastError:function(_e,N,V){const ue=D(_e),Ee=ue.popErr();if(ue.log(`xGetLastError ${N} e =`,Ee),Ee){const Re=L.scopedAllocPush();try{const[Me,$]=L.scopedAllocCString(Ee.message,!0);L.cstrncpy(V,Me,N),$>N&&L.poke8(V+N-1,0)}catch{return y.SQLITE_NOMEM}finally{L.scopedAllocPop(Re)}}return Ee?Ee.sqlite3Rc||y.SQLITE_IOERR:0},xOpen:i(function(N,V,ue,Ee,Re){const Me=D(N);try{Me.log(`xOpen ${L.cstrToJs(V)} ${Ee}`);const $=V&&L.peek8(V)?Me.getPath(V):ie();let oe=Me.getSAHForPath($);!oe&&Ee&y.SQLITE_OPEN_CREATE&&(Me.getFileCount()<Me.getCapacity()?(oe=Me.nextAvailableSAH(),Me.setAssociatedPath(oe,$,Ee)):p("SAH pool is full. Cannot create file",$)),oe||p("file not found:",$);const me={path:$,flags:Ee,sah:oe};Me.mapS3FileToOFile(ue,me),me.lockType=y.SQLITE_LOCK_NONE;const ke=new y.sqlite3_file(ue);return ke.$pMethods=I.pointer,ke.dispose(),L.poke32(Re,Ee),0}catch($){return Me.storeErr($),y.SQLITE_CANTOPEN}},"f")},he=i(function(_e){c.capi.sqlite3_vfs_find(_e)&&d("VFS name is already registered:",_e);const N=new y.sqlite3_vfs,V=y.sqlite3_vfs_find(null),ue=V?new y.sqlite3_vfs(V):null;return N.$iVersion=2,N.$szOsFile=y.sqlite3_file.structInfo.sizeof,N.$mxPathname=ee,N.addOnDispose(N.$zName=L.allocCString(_e),()=>pe(N.pointer,0)),ue&&(N.$xRandomness=ue.$xRandomness,N.$xSleep=ue.$xSleep,ue.dispose()),!N.$xRandomness&&!G.xRandomness&&(G.xRandomness=function(Ee,Re,Me){const $=L.heap8u();let oe=0;for(;oe<Re;++oe)$[Me+oe]=Math.random()*255e3&255;return oe}),!N.$xSleep&&!G.xSleep&&(G.xSleep=(Ee,Re)=>0),c.vfs.installVfs({vfs:{struct:N,methods:G}}),N},"createOpfsVfs");class Fe{static{i(this,"OpfsSAHPool")}vfsDir;#t;#a;#h;#c=new Map;#l=new Map;#m=new Set;#o=new Map;#s=new Uint8Array(Q);#i;#n;#e;constructor(N=Object.create(null)){this.#e=N.verbosity??Z.verbosity,this.vfsName=N.name||Z.name,this.#n=he(this.vfsName),pe(this.#n.pointer,this),this.vfsDir=N.directory||"."+this.vfsName,this.#i=new DataView(this.#s.buffer,this.#s.byteOffset),this.isReady=this.reset(!!(N.clearOnInit??Z.clearOnInit)).then(()=>{if(this.$error)throw this.$error;return this.getCapacity()?Promise.resolve(void 0):this.addCapacity(N.initialCapacity||Z.initialCapacity)})}#u(N,...V){this.#e>N&&xe[N](this.vfsName+":",...V)}log(...N){this.#u(2,...N)}warn(...N){this.#u(1,...N)}error(...N){this.#u(0,...N)}getVfs(){return this.#n}getCapacity(){return this.#c.size}getFileCount(){return this.#l.size}getFileNames(){const N=[],V=this.#l.keys();for(const ue of V)N.push(ue);return N}async addCapacity(N){for(let V=0;V<N;++V){const ue=ie(),Re=await(await this.#a.getFileHandle(ue,{create:!0})).createSyncAccessHandle();this.#c.set(Re,ue),this.setAssociatedPath(Re,"",0)}return this.getCapacity()}async reduceCapacity(N){let V=0;for(const ue of Array.from(this.#m)){if(V===N||this.getFileCount()===this.getCapacity())break;const Ee=this.#c.get(ue);ue.close(),await this.#a.removeEntry(Ee),this.#c.delete(ue),this.#m.delete(ue),++V}return V}releaseAccessHandles(){for(const N of this.#c.keys())N.close();this.#c.clear(),this.#l.clear(),this.#m.clear()}async acquireAccessHandles(N){const V=[];for await(const[ue,Ee]of this.#a)Ee.kind==="file"&&V.push([ue,Ee]);return Promise.all(V.map(async([ue,Ee])=>{try{const Re=await Ee.createSyncAccessHandle();if(this.#c.set(Re,ue),N)Re.truncate(F),this.setAssociatedPath(Re,"",0);else{const Me=this.getAssociatedPath(Re);Me?this.#l.set(Me,Re):this.#m.add(Re)}}catch(Re){throw this.storeErr(Re),this.releaseAccessHandles(),Re}}))}getAssociatedPath(N){N.read(this.#s,{at:0});const V=this.#i.getUint32(H);if(this.#s[0]&&(V&y.SQLITE_OPEN_DELETEONCLOSE||!(V&B)))return S(`Removing file with unexpected flags ${V.toString(16)}`,this.#s),this.setAssociatedPath(N,"",0),"";const ue=new Uint32Array(ye/4);N.read(ue,{at:se});const Ee=this.computeDigest(this.#s);if(ue.every((Re,Me)=>Re===Ee[Me])){const Re=this.#s.findIndex(Me=>Me===0);return Re===0&&N.truncate(F),Re?re.decode(this.#s.subarray(0,Re)):""}else return S("Disassociating file with bad digest."),this.setAssociatedPath(N,"",0),""}setAssociatedPath(N,V,ue){const Ee=z.encodeInto(V,this.#s);ee<=Ee.written+1&&p("Path too long:",V),this.#s.fill(0,Ee.written,ee),this.#i.setUint32(H,ue);const Re=this.computeDigest(this.#s);N.write(this.#s,{at:0}),N.write(Re,{at:se}),N.flush(),V?(this.#l.set(V,N),this.#m.delete(N)):(N.truncate(F),this.#m.add(N))}computeDigest(N){let V=3735928559,ue=1103547991;for(const Ee of N)V=31*V+Ee*307,ue=31*ue+Ee*307;return new Uint32Array([V>>>0,ue>>>0])}async reset(N){await this.isReady;let V=await navigator.storage.getDirectory(),ue;for(const Ee of this.vfsDir.split("/"))Ee&&(ue=V,V=await V.getDirectoryHandle(Ee,{create:!0}));return this.#t=V,this.#h=ue,this.#a=await this.#t.getDirectoryHandle(W,{create:!0}),this.releaseAccessHandles(),this.acquireAccessHandles(N)}getPath(N){return L.isPtr(N)&&(N=L.cstrToJs(N)),(N instanceof URL?N:new URL(N,"file://localhost/")).pathname}deletePath(N){const V=this.#l.get(N);return V&&(this.#l.delete(N),this.setAssociatedPath(V,"",0)),!!V}storeErr(N,V){return N&&(N.sqlite3Rc=V||y.SQLITE_IOERR,this.error(N)),this.$error=N,V}popErr(){const N=this.$error;return this.$error=void 0,N}nextAvailableSAH(){const[N]=this.#m.keys();return N}getOFileForS3File(N){return this.#o.get(N)}mapS3FileToOFile(N,V){V?(this.#o.set(N,V),E(N,this)):(this.#o.delete(N),E(N,!1))}hasFilename(N){return this.#l.has(N)}getSAHForPath(N){return this.#l.get(N)}async removeVfs(){if(!this.#n.pointer||!this.#a)return!1;y.sqlite3_vfs_unregister(this.#n.pointer),this.#n.dispose();try{this.releaseAccessHandles(),await this.#t.removeEntry(W,{recursive:!0}),this.#a=void 0,await this.#h.removeEntry(this.#t.name,{recursive:!0}),this.#t=this.#h=void 0}catch(N){c.config.error(this.vfsName,"removeVfs() failed:",N)}return!0}exportFile(N){const V=this.#l.get(N)||p("File not found:",N),ue=V.getSize()-F,Ee=new Uint8Array(ue>0?ue:0);if(ue>0){const Re=V.read(Ee,{at:F});Re!=ue&&p("Expected to read "+ue+" bytes but read "+Re+".")}return Ee}async importDbChunked(N,V){const ue=this.#l.get(N)||this.nextAvailableSAH()||p("No available handles to import to.");ue.truncate(0);let Ee=0,Re,Me=!1;try{for(;(Re=await V())!==void 0;)Re instanceof ArrayBuffer&&(Re=new Uint8Array(Re)),Ee===0&&Re.byteLength>=15&&(C.affirmDbHeader(Re),Me=!0),ue.write(Re,{at:F+Ee}),Ee+=Re.byteLength;if((Ee<512||Ee%512!==0)&&p("Input size",Ee,"is not correct for an SQLite database."),!Me){const $=new Uint8Array(20);ue.read($,{at:0}),C.affirmDbHeader($)}ue.write(new Uint8Array([1,1]),{at:F+18})}catch($){throw this.setAssociatedPath(ue,"",0),$}return this.setAssociatedPath(ue,N,y.SQLITE_OPEN_MAIN_DB),Ee}importDb(N,V){if(V instanceof ArrayBuffer)V=new Uint8Array(V);else if(V instanceof Function)return this.importDbChunked(N,V);const ue=this.#l.get(N)||this.nextAvailableSAH()||p("No available handles to import to."),Ee=V.byteLength;(Ee<512||Ee%512!=0)&&p("Byte array size is invalid for an SQLite db.");const Re="SQLite format 3";for(let $=0;$<Re.length;++$)Re.charCodeAt($)!==V[$]&&p("Input does not contain an SQLite database header.");const Me=ue.write(V,{at:F});return Me!=Ee?(this.setAssociatedPath(ue,"",0),p("Expected to write "+Ee+" bytes but wrote "+Me+".")):(ue.write(new Uint8Array([1,1]),{at:F+18}),this.setAssociatedPath(ue,N,y.SQLITE_OPEN_MAIN_DB)),Me}}class Pe{static{i(this,"OpfsSAHPoolUtil")}#t;constructor(N){this.#t=N,this.vfsName=N.vfsName}async addCapacity(N){return this.#t.addCapacity(N)}async reduceCapacity(N){return this.#t.reduceCapacity(N)}getCapacity(){return this.#t.getCapacity(this.#t)}getFileCount(){return this.#t.getFileCount()}getFileNames(){return this.#t.getFileNames()}async reserveMinimumCapacity(N){const V=this.#t.getCapacity();return V<N?this.#t.addCapacity(N-V):V}exportFile(N){return this.#t.exportFile(N)}importDb(N,V){return this.#t.importDb(N,V)}async wipeFiles(){return this.#t.reset(!0)}unlink(N){return this.#t.deletePath(N)}async removeVfs(){return this.#t.removeVfs()}}const Be=i(async()=>{const _e=await navigator.storage.getDirectory(),N=".opfs-sahpool-sync-check-"+ie(),Ee=(await(await _e.getFileHandle(N,{create:!0})).createSyncAccessHandle()).close();return await Ee,await _e.removeEntry(N),Ee?.then&&p("The local OPFS API is too old for opfs-sahpool:","it has an async FileSystemSyncAccessHandle.close() method."),!0},"apiVersionCheck");c.installOpfsSAHPoolVfs=async function(_e=Object.create(null)){const N=_e.name||Z.name;return h[N]?h[N]:!globalThis.FileSystemHandle||!globalThis.FileSystemDirectoryHandle||!globalThis.FileSystemFileHandle||!globalThis.FileSystemFileHandle.prototype.createSyncAccessHandle||!navigator?.storage?.getDirectory?h[N]=Promise.reject(new Error("Missing required OPFS APIs.")):h[N]=Be().then(async function(){if(_e.$testThrowInInit)throw _e.$testThrowInInit;const V=new Fe(_e);return V.isReady.then(async()=>{const ue=new Pe(V);if(c.oo1){const Ee=c.oo1,Re=V.getVfs(),Me=i(function(...$){const oe=Ee.DB.dbCtorHelper.normalizeArgs(...$);oe.vfs=Re.$zName,Ee.DB.dbCtorHelper.call(this,oe)},"OpfsSAHPoolDb");Me.prototype=Object.create(Ee.DB.prototype),ue.OpfsSAHPoolDb=Me,Ee.DB.dbCtorHelper.setVfsPostOpenSql(Re.pointer,function($,oe){oe.capi.sqlite3_exec($,["pragma journal_mode=DELETE;","pragma cache_size=-16384;"],0,0,0)})}return V.log("VFS initialized."),ue}).catch(async ue=>{throw await V.removeVfs().catch(()=>{}),ue})}).catch(V=>h[N]=Promise.reject(V))}}),typeof u<"u"){const c=Object.assign(Object.create(null),{exports:typeof wasmExports>"u"?u.asm:wasmExports,memory:u.wasmMemory},globalThis.sqlite3ApiConfig||{});globalThis.sqlite3ApiConfig=c;let p;try{p=globalThis.sqlite3ApiBootstrap()}catch(d){throw console.error("sqlite3ApiBootstrap() error:",d),d}finally{delete globalThis.sqlite3ApiBootstrap,delete globalThis.sqlite3ApiConfig}u.sqlite3=p}}),r.ready}})();const pT=function(){const t=Oc;if(!t)throw new Error("Expecting globalThis.sqlite3InitModule to be defined by the Emscripten build.");const e=globalThis.sqlite3InitModuleState=Object.assign(Object.create(null),{moduleScript:globalThis?.document?.currentScript,isWorker:typeof WorkerGlobalScope<"u",location:globalThis.location,urlParams:globalThis?.location?.href?new URL(globalThis.location.href).searchParams:new URLSearchParams});if(e.debugModule=e.urlParams.has("sqlite3.debugModule")?(...r)=>console.warn("sqlite3.debugModule:",...r):()=>{},e.urlParams.has("sqlite3.dir"))e.sqlite3Dir=e.urlParams.get("sqlite3.dir")+"/";else if(e.moduleScript){const r=e.moduleScript.src.split("/");r.pop(),e.sqlite3Dir=r.join("/")+"/"}if(globalThis.sqlite3InitModule=i(function r(...n){return t(...n).then(s=>{const o=s.sqlite3;o.scriptInfo=e,r.__isUnderTest&&(o.__isUnderTest=!0);const a=o.asyncPostInit;return delete o.asyncPostInit,a()}).catch(s=>{throw console.error("Exception loading sqlite3 module:",s),s})},"ff"),globalThis.sqlite3InitModule.ready=t.ready,globalThis.sqlite3InitModuleState.moduleScript){const r=globalThis.sqlite3InitModuleState;let n=r.moduleScript.src.split("/");n.pop(),r.scriptDir=n.join("/")+"/"}return e.debugModule("sqlite3InitModuleState =",e),globalThis.sqlite3InitModule}();Oc=pT;var hT=Oc;globalThis.sqlite3Worker1Promiser=i(function t(e=t.defaultConfig){if(arguments.length===1&&typeof arguments[0]=="function"){const m=e;e=Object.assign(Object.create(null),t.defaultConfig),e.onready=m}else e=Object.assign(Object.create(null),t.defaultConfig,e);const r=Object.create(null),n=i(function(){},"noop"),s=e.onerror||n,o=e.debug||n,a=e.generateMessageId?void 0:Object.create(null),l=e.generateMessageId||function(m){return m.type+"#"+(a[m.type]=(a[m.type]||0)+1)},f=i((...m)=>{throw new Error(m.join(" "))},"toss");e.worker||(e.worker=t.defaultConfig.worker),typeof e.worker=="function"&&(e.worker=e.worker());let _,b;return e.worker.onmessage=function(m){m=m.data,o("worker1.onmessage",m);let w=r[m.messageId];if(!w){if(m&&m.type==="sqlite3-api"&&m.result==="worker1-ready"){e.onready&&e.onready(b);return}if(w=r[m.type],w&&w.onrow){w.onrow(m);return}e.onunhandled?e.onunhandled(arguments[0]):s("sqlite3Worker1Promiser() unhandled worker message:",m);return}switch(delete r[m.messageId],m.type){case"error":w.reject(m);return;case"open":_||(_=m.dbId);break;case"close":m.dbId===_&&(_=void 0);break}try{w.resolve(m)}catch(x){w.reject(x)}},b=i(function(){let m;arguments.length===1?m=arguments[0]:arguments.length===2?(m=Object.create(null),m.type=arguments[0],m.args=arguments[1],m.dbId=m.args.dbId):f("Invalid arguments for sqlite3Worker1Promiser()-created factory."),!m.dbId&&m.type!=="open"&&(m.dbId=_),m.messageId=l(m),m.departureTime=performance.now();const w=Object.create(null);w.message=m;let x;m.type==="exec"&&m.args&&(typeof m.args.callback=="function"?(x=m.messageId+":row",w.onrow=m.args.callback,m.args.callback=x,r[x]=w):typeof m.args.callback=="string"&&f("exec callback may not be a string when using the Promise interface."));let q=new Promise(function(R,U){w.resolve=R,w.reject=U,r[m.messageId]=w,o("Posting",m.type,"message to Worker dbId="+(_||"default")+":",m),e.worker.postMessage(m)});return x&&(q=q.finally(()=>delete r[x])),q},"promiserFunc")},"callee");globalThis.sqlite3Worker1Promiser.defaultConfig={worker:function(){return new Worker(new URL("/assets/sqlite3-worker1-bundler-friendly-ucYijUbt.js",import.meta.url),{type:"module"})},onerror:(...t)=>console.error("worker1 promiser error",...t)};sqlite3Worker1Promiser.v2=function(t){let e;typeof t=="function"?(e=t,t={}):typeof t?.onready=="function"&&(e=t.onready,delete t.onready);const r=Object.create(null);t=Object.assign(t||Object.create(null),{onready:async function(s){try{e&&await e(s),r.resolve(s)}catch(o){r.reject(o)}}});const n=new Promise(function(s,o){r.resolve=s,r.reject=o});try{this.original(t)}catch(s){r.reject(s)}return n}.bind({original:sqlite3Worker1Promiser});sqlite3Worker1Promiser.v2;function _T(t,e=0){let r=!1;return function(...n){r||(r=!0,globalThis.setTimeout(async()=>{try{const s=t.apply(this,n);s instanceof Promise&&await s}finally{r=!1}},e))}}i(_T,"throttle");function mT(t=0){return function(e,r,n){n.value=_T(n.value,t)}}i(mT,"throttled");function kr(t){return`${t.name}|${t.size}`}i(kr,"getFileId");function eh(t){return t instanceof File?t.name.split(".").at(-1)??"unknown":t.split(".").at(-1)??"unknown"}i(eh,"getFileExtension");function gT(t){const r=eh(t).toUpperCase();return r==="JPG"||r==="JPEG"?"JPEG":"RAW"}i(gT,"getFileFormat");function ju(t){return t?gT(t)==="JPEG":!1}i(ju,"isJpegFile");async function th(t,e="read",r=!1){const n=await t.queryPermission({mode:e});return r?n==="granted":await t.requestPermission({mode:e})==="granted"}i(th,"hasPermission");function Oa(t,e=[],r=3){return new Promise((n,s)=>{const o=i(async()=>{try{const a=await t();n(a)}catch(a){if(r--,r===0||a instanceof Error&&e.includes(a.name)){s(a);return}setTimeout(o,50)}},"attempt");o()})}i(Oa,"retry");var yT=Object.defineProperty,bT=Object.getOwnPropertyDescriptor,ET=i((t,e,r,n)=>{for(var s=n>1?void 0:n?bT(e,r):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(s=(n?a(e,r,s):a(s))||s);return n&&s&&yT(e,r,s),s},"__decorateClass$1");class nh{static{i(this,"SQLite3Database")}sqlite3=null;db=null;databaseHandle=null;jsonColumns={EditHistory:null,Photos:null,PhotoMetadata:null,ImageInfo:null,ProjectInfo:null,CullingInfo:null,Objects:null};get totalBytesUsage(){return this.sqlite3?.wasm.heap8().byteLength??0}userFacingErrorHandler;constructor(){const e=navigator.storage.getDirectory;navigator.storage.getDirectory=null,hT({print:console.log,printErr:console.error}).then(r=>{this.sqlite3=r,navigator.storage.getDirectory=e,this.sqlite3.capi.sqlite3_libversion()})}exec=e=>{if(!this.databaseHandle)return[];if(!this.db)return[];if(e.bind)for(let n=0;n<e.bind.length;n++){const s=e.bind[n];if(s instanceof Float32Array){const o=new Uint8Array([1]),a=new Uint8Array(s.buffer),l=new Uint8Array(o.length+a.length);l.set(o),l.set(a,o.length),e.bind[n]=l.buffer;continue}else if(s instanceof Uint8Array){const o=new Uint8Array([2]),a=new Uint8Array(o.length+s.length);a.set(o),a.set(s,o.length),e.bind[n]=a.buffer;continue}this.isJsonData(s)&&(e.bind[n]=JSON.stringify(s,(o,a)=>a instanceof Float32Array?{__binaryType__:"f32",__binaryData__:Array.from(a)}:a instanceof Uint8Array?{__binaryType__:"u8",__binaryData__:Array.from(a)}:a))}const r=this.db.exec({sql:e.sql,bind:e.bind,returnValue:"resultRows",rowMode:e.rowMode??"object"});if(r&&r.length){for(const n of r)if(n){for(const[s,o]of Object.entries(n))if(o instanceof Uint8Array&&o.length>0){const a=o[0],l=o.slice(1);a===1?n[s]=new Float32Array(l.buffer):a===2&&(n[s]=l)}else if(e.fetchAsJSON?.includes(s)){let a=typeof o=="string"?JSON.parse(o,(l,f)=>{if(f&&typeof f=="object"&&f.__binaryType__&&Array.isArray(f.__binaryData__))switch(f.__binaryType__){case"f32":return new Float32Array(f.__binaryData__);case"u8":return new Uint8Array(f.__binaryData__);default:return f}return f}):o;if(a&&a.__binaryType__&&a.__binaryData__)switch(a.__binaryType__){case"f32":a=new Float32Array(a.__binaryData__);break;case"u8":a=new Uint8Array(a.__binaryData__);break}n[s]=a}}return r}return e.save&&this.saveDatabaseThrottled(),r??[]};async select({table:e,where:r,bind:n,columns:s,orderBy:o}){const a=await this.findJsonColumns(e);let l=`SELECT ${s?s.join(", "):"*"}
					 FROM ${e}`;return r&&(l+=` WHERE ${r}`),o&&(l+=` ORDER BY ${o}`),this.exec({sql:l,bind:n,fetchAsJSON:a})}insert({table:e,record:r}){const n=Object.keys(r),s=Object.values(r),o=`
			INSERT INTO ${e} (${n.join(",")})
			VALUES (${n.map(()=>"?").join(",")})
		`;return this.exec({sql:o,bind:s,save:!0})}upsert({table:e,primaryKey:r,record:n}){const s=Object.keys(n),o=Object.values(n),a=s.filter(f=>f!==r),l=`
			INSERT INTO ${e} (${s.join(",")})
			VALUES (${s.map(()=>"?").join(",")})
			ON CONFLICT(${String(r)}) DO UPDATE SET ${a.map(f=>`${f}=excluded.${f}`).join(",")}
		`;return this.exec({sql:l,bind:o,save:!0})}updateAll({table:e,record:r}){const n=Object.keys(r),s=Object.values(r),o=`
			UPDATE ${e}
			SET ${n.map(a=>`${a}=?`).join(",")}
		`;return this.exec({sql:o,bind:s,save:!0})}update({table:e,where:r,record:n,bind:s}){const o=Object.keys(n),a=Object.values(n),l=`
			UPDATE ${e}
			SET ${o.map(f=>`${f}=?`).join(",")}
			WHERE ${r}
		`;return this.exec({sql:l,bind:a.concat(s),save:!0})}remove({table:e,where:r,bind:n}){return this.exec({sql:`DELETE
				  FROM ${e}
				  WHERE ${r}`,bind:n})}clear({table:e}){return this.exec({sql:`DELETE
				  FROM ${e}`})}async flushDatabaseChanges(){await this.saveDatabase()}async saveDatabase(){if(!(!this.databaseHandle||!this.sqlite3||!this.db))try{await Oa(async()=>{if(!this.databaseHandle||!this.sqlite3||!this.db)return;await this.exec({sql:"VACUUM"});const e=this.sqlite3.capi.sqlite3_js_db_export(this.db),r=await this.databaseHandle.createWritable();await r.write(e),await r.close()},[])}catch(e){const r=await th(this.databaseHandle,"readwrite",!0),n={filename:"polarr.catalog",directory:this.databaseHandle.name,hasPermission:r,step:"saveDatabase",source:"sqliteDatabase"};this.userFacingErrorHandler?.(e,n,!0)}}async saveDatabaseThrottled(){await this.saveDatabase()}async findJsonColumns(e){const r=this.jsonColumns[e]??[];if(this.jsonColumns[e])return r;const n=await this.exec({sql:`PRAGMA table_info(${e})`});if(Symbol.iterator in Object(n)){for(const s of n)s&&s.type==="JSON"&&r.push(s.name);this.jsonColumns[e]=r}else Dr(new Error("Failed to get table info"),{tags:{table:e,type:typeof n}});return r}close(){this.databaseHandle=null,this.db&&this.db.close()}async createOrOpenDatabase(e){if(!this.sqlite3)return;e.name,this.db&&this.db.close(),this.databaseHandle=e;const n=await(await e.getFile()).arrayBuffer();if(this.db=new this.sqlite3.oo1.DB,!this.db.pointer)return;const s=this.sqlite3.wasm.allocFromTypedArray(n),o=this.sqlite3.capi.sqlite3_deserialize(this.db.pointer,"main",s,n.byteLength,n.byteLength,this.sqlite3.capi.SQLITE_DESERIALIZE_RESIZEABLE);this.db.checkRc(o),this.db.onclose={before:()=>this.saveDatabase(),after:()=>{this.sqlite3&&this.sqlite3.wasm.dealloc(s)}}}isJsonData(e){return!this.isBinaryData(e)&&typeof e!="string"&&typeof e!="number"&&typeof e!="boolean"&&e!==null}isBinaryData(e){return e instanceof ArrayBuffer||ArrayBuffer.isView(e)}}ET([mT(1e3)],nh.prototype,"saveDatabaseThrottled",1);class ST{static{i(this,"Migration_Base1589786974320")}static migrationName="Base1589786974320";async up(e){await e({sql:`

            CREATE TABLE IF NOT EXISTS ImageInfo
            (
                imageId            TEXT PRIMARY KEY NOT NULL,
                presetId           TEXT             NULL,
                features           JSON             NULL,
                aiAdjustmentsMap   JSON             NULL,
                aiStyleAdjustments JSON             NULL,
                biases             JSON             NULL,
                nearestReferences  JSON             NULL,
                keyNeighborId      TEXT             NULL,
                needApplyPreset    INTEGER          NULL,
                needApplyBias      INTEGER          NULL
            );

            CREATE TABLE IF NOT EXISTS Photos
            (
                id                 TEXT PRIMARY KEY NOT NULL,
                parentId           TEXT             NULL,
                fileName           TEXT             NOT NULL,
                historyIndex       INTEGER          NULL,
                customSortingIndex INTEGER          NULL,
                rating             INTEGER          NULL,
                isAnchorImage      INTEGER          NULL,
                isHidden           INTEGER          NULL,
                status             TEXT             NOT NULL,
                kind               TEXT             NOT NULL,
                presetId           TEXT             NULL,
                styleId            TEXT             NULL,
                styleVersion       INTEGER          NULL,
                adjustmentsDigest  TEXT             NULL
            );

            CREATE TABLE IF NOT EXISTS EditHistory
            (
                photoId           TEXT    NOT NULL,
                stepIndex         INTEGER NOT NULL,
                message           TEXT    NOT NULL,
                changedValue      TEXT    NULL,
                adjustmentsDigest TEXT    NOT NULL,
                adjustments       JSON    NOT NULL,
                presetId          TEXT    NULL,
                styleId           TEXT    NULL,
                styleVersion      INTEGER NULL,
                action            INTEGER NOT NULL DEFAULT 0
            );

            CREATE TABLE IF NOT EXISTS PhotoMetadata
            (
                photoId            TEXT PRIMARY KEY NOT NULL,
                size               INTEGER          NOT NULL,
                extension          TEXT             NOT NULL,
                dateCreated        INTEGER          NULL,
                dateModified       INTEGER          NOT NULL,
                orientation        INTEGER          NULL,
                width              INTEGER          NULL,
                height             INTEGER          NULL,
                iso                INTEGER          NULL,
                focalLength        REAL             NULL,
                shutterSpeed       REAL             NULL,
                fNumber            REAL             NULL,
                lensMake           TEXT             NULL,
                lensModel          TEXT             NULL,
                cameraMake         TEXT             NULL,
                cameraModel        TEXT             NULL,
                cameraSerialNumber TEXT             NULL,
                flash              INTEGER          NULL,
                rating             INTEGER          NULL,
                artist             TEXT             NULL,
                copyright          TEXT             NULL
            );

            CREATE TABLE IF NOT EXISTS ProjectInfo
            (
                id         TEXT PRIMARY KEY NOT NULL,
                name       TEXT             NOT NULL,
                styleId    TEXT             NULL,
                styleName  TEXT             NULL,
                sortOption TEXT             NULL
            );

            CREATE INDEX IF NOT EXISTS photosIndex
                ON Photos (id);

            CREATE INDEX IF NOT EXISTS imageInfoIndex
                ON ImageInfo (imageId);

            CREATE INDEX IF NOT EXISTS historyIndex
                ON EditHistory (photoId);

            CREATE INDEX IF NOT EXISTS metadataIndex
                ON PhotoMetadata (photoId);
		`})}async down(){}}var jt=(t=>(t[t.Import=0]="Import",t[t.AutoEnhance=1]="AutoEnhance",t[t.ApplyPreset=2]="ApplyPreset",t[t.ApplyAIStyle=3]="ApplyAIStyle",t[t.ManuallyAdjust=4]="ManuallyAdjust",t[t.PasteAdjustments=5]="PasteAdjustments",t[t.ApplyColorMatch=6]="ApplyColorMatch",t))(jt||{});function wT(t){const e=[];function r(n,s){if(n?.toJSON&&typeof n.toJSON=="function"&&(n=n.toJSON()),n===void 0)return;if(typeof n!="object"||n===null)return JSON.stringify(n);if(Array.isArray(n)){const l=[];for(let f=0;f<n.length;f++)l.push(r(n[f])||JSON.stringify(null));return"["+l.join(",")+"]"}if(e.indexOf(n)!==-1)throw new TypeError("Converting circular structure to JSON");e.push(n);const o=Object.keys(n).sort(),a=[];for(let l=0;l<o.length;l++){const f=o[l],_=r(n[f]);if(!_)continue;const b=JSON.stringify(f)+":"+_;a.push(b)}return e.splice(e.indexOf(n),1),"{"+a.join(",")+"}"}return i(r,"stringify"),r(t)??""}i(wT,"stableStringify");const vT="AGFzbQEAAAABEgRgAAF/YAAAYAF/AGACf38BfwMIBwABAgMBAAIEBQFwAQEBBQQBAQICBg4CfwFBoIoFC38AQYAICwdwCAZtZW1vcnkCAA5IYXNoX0dldEJ1ZmZlcgAACUhhc2hfSW5pdAABC0hhc2hfVXBkYXRlAAIKSGFzaF9GaW5hbAAEDUhhc2hfR2V0U3RhdGUABQ5IYXNoX0NhbGN1bGF0ZQAGClNUQVRFX1NJWkUDAQqzFgcFAEGACQstAEEAQv6568XpjpWZEDcCkIkBQQBCgcaUupbx6uZvNwKIiQFBAEIANwKAiQEL6AIBA39BAEEAKAKAiQEiASAAakH/////AXEiAjYCgIkBQQAoAoSJASEDAkAgAiABTw0AQQAgA0EBaiIDNgKEiQELQQAgAyAAQR12ajYChIkBAkACQAJAAkACQAJAIAFBP3EiAw0AQYAJIQIMAQtBwAAgA2siAiAASw0BIANBGGohA0EAIQEDQCADIAFqQYCJAWogAUGACWotAAA6AAAgAyABQQFqIgFqQdgARw0AC0GYiQFBwAAQAxogACACayEAIAJBgAlqIQILIABBwABPDQEgACEDDAILIABFDQJBACEBIANBmIkBakEALQCACToAACAAQQFGDQIgA0GZiQFqIQMgAEF/aiECA0AgAyABaiABQYEJai0AADoAACACIAFBAWoiAUcNAAwDCwsgAEE/cSEDIAIgAEFAcRADIQILIANFDQBBACEBA0AgAUGYiQFqIAIgAWotAAA6AAAgAyABQQFqIgFHDQALCwu0EAEZf0EAKAKUiQEhAkEAKAKQiQEhA0EAKAKMiQEhBEEAKAKIiQEhBQNAIABBCGooAgAiBiAAQRhqKAIAIgcgAEEoaigCACIIIABBOGooAgAiCSAAQTxqKAIAIgogAEEMaigCACILIABBHGooAgAiDCAAQSxqKAIAIg0gDCALIAogDSAJIAggByADIAZqIAIgAEEEaigCACIOaiAFIAQgAiADc3EgAnNqIAAoAgAiD2pB+Miqu31qQQd3IARqIhAgBCADc3EgA3NqQdbunsZ+akEMdyAQaiIRIBAgBHNxIARzakHb4YGhAmpBEXcgEWoiEmogAEEUaigCACITIBFqIABBEGooAgAiFCAQaiAEIAtqIBIgESAQc3EgEHNqQe6d9418akEWdyASaiIQIBIgEXNxIBFzakGvn/Crf2pBB3cgEGoiESAQIBJzcSASc2pBqoyfvARqQQx3IBFqIhIgESAQc3EgEHNqQZOMwcF6akERdyASaiIVaiAAQSRqKAIAIhYgEmogAEEgaigCACIXIBFqIAwgEGogFSASIBFzcSARc2pBgaqaampBFncgFWoiECAVIBJzcSASc2pB2LGCzAZqQQd3IBBqIhEgECAVc3EgFXNqQa/vk9p4akEMdyARaiISIBEgEHNxIBBzakGxt31qQRF3IBJqIhVqIABBNGooAgAiGCASaiAAQTBqKAIAIhkgEWogDSAQaiAVIBIgEXNxIBFzakG+r/PKeGpBFncgFWoiECAVIBJzcSASc2pBoqLA3AZqQQd3IBBqIhEgECAVc3EgFXNqQZPj4WxqQQx3IBFqIhUgESAQc3EgEHNqQY6H5bN6akERdyAVaiISaiAHIBVqIA4gEWogCiAQaiASIBUgEXNxIBFzakGhkNDNBGpBFncgEmoiECAScyAVcSASc2pB4sr4sH9qQQV3IBBqIhEgEHMgEnEgEHNqQcDmgoJ8akEJdyARaiISIBFzIBBxIBFzakHRtPmyAmpBDncgEmoiFWogCCASaiATIBFqIA8gEGogFSAScyARcSASc2pBqo/bzX5qQRR3IBVqIhAgFXMgEnEgFXNqQd2gvLF9akEFdyAQaiIRIBBzIBVxIBBzakHTqJASakEJdyARaiISIBFzIBBxIBFzakGBzYfFfWpBDncgEmoiFWogCSASaiAWIBFqIBQgEGogFSAScyARcSASc2pByPfPvn5qQRR3IBVqIhAgFXMgEnEgFXNqQeabh48CakEFdyAQaiIRIBBzIBVxIBBzakHWj9yZfGpBCXcgEWoiEiARcyAQcSARc2pBh5vUpn9qQQ53IBJqIhVqIAYgEmogGCARaiAXIBBqIBUgEnMgEXEgEnNqQe2p6KoEakEUdyAVaiIQIBVzIBJxIBVzakGF0o/PempBBXcgEGoiESAQcyAVcSAQc2pB+Me+Z2pBCXcgEWoiEiARcyAQcSARc2pB2YW8uwZqQQ53IBJqIhVqIBcgEmogEyARaiAZIBBqIBUgEnMgEXEgEnNqQYqZqel4akEUdyAVaiIQIBVzIhUgEnNqQcLyaGpBBHcgEGoiESAVc2pBge3Hu3hqQQt3IBFqIhIgEXMiGiAQc2pBosL17AZqQRB3IBJqIhVqIBQgEmogDiARaiAJIBBqIBUgGnNqQYzwlG9qQRd3IBVqIhAgFXMiFSASc2pBxNT7pXpqQQR3IBBqIhEgFXNqQamf+94EakELdyARaiISIBFzIgkgEHNqQeCW7bV/akEQdyASaiIVaiAPIBJqIBggEWogCCAQaiAVIAlzakHw+P71e2pBF3cgFWoiECAVcyIVIBJzakHG/e3EAmpBBHcgEGoiESAVc2pB+s+E1X5qQQt3IBFqIhIgEXMiCCAQc2pBheG8p31qQRB3IBJqIhVqIBkgEmogFiARaiAHIBBqIBUgCHNqQYW6oCRqQRd3IBVqIhEgFXMiECASc2pBuaDTzn1qQQR3IBFqIhIgEHNqQeWz7rZ+akELdyASaiIVIBJzIgcgEXNqQfj5if0BakEQdyAVaiIQaiAMIBVqIA8gEmogBiARaiAQIAdzakHlrLGlfGpBF3cgEGoiESAVQX9zciAQc2pBxMSkoX9qQQZ3IBFqIhIgEEF/c3IgEXNqQZf/q5kEakEKdyASaiIQIBFBf3NyIBJzakGnx9DcempBD3cgEGoiFWogCyAQaiAZIBJqIBMgEWogFSASQX9zciAQc2pBucDOZGpBFXcgFWoiESAQQX9zciAVc2pBw7PtqgZqQQZ3IBFqIhAgFUF/c3IgEXNqQZKZs/h4akEKdyAQaiISIBFBf3NyIBBzakH96L9/akEPdyASaiIVaiAKIBJqIBcgEGogDiARaiAVIBBBf3NyIBJzakHRu5GseGpBFXcgFWoiECASQX9zciAVc2pBz/yh/QZqQQZ3IBBqIhEgFUF/c3IgEHNqQeDNs3FqQQp3IBFqIhIgEEF/c3IgEXNqQZSGhZh6akEPdyASaiIVaiANIBJqIBQgEWogGCAQaiAVIBFBf3NyIBJzakGho6DwBGpBFXcgFWoiECASQX9zciAVc2pBgv3Nun9qQQZ3IBBqIhEgFUF/c3IgEHNqQbXk6+l7akEKdyARaiISIBBBf3NyIBFzakG7pd/WAmpBD3cgEmoiFSAEaiAWIBBqIBUgEUF/c3IgEnNqQZGnm9x+akEVd2ohBCAVIANqIQMgEiACaiECIBEgBWohBSAAQcAAaiEAIAFBQGoiAQ0AC0EAIAI2ApSJAUEAIAM2ApCJAUEAIAQ2AoyJAUEAIAU2AoiJASAAC6ECAQN/QQAoAoCJASIAQT9xIgFBmIkBakGAAToAAAJAAkACQCABQT9zIgJBB0sNAAJAIAJFDQAgAUGZiQFqIQADQCAAQQA6AAAgAEEBaiEAIAJBf2oiAg0ACwtBwAAhAkGYiQFBwAAQAxpBACEADAELIAJBCEYNASABQQFqIQALIABBj4kBaiEBA0AgASACakEAOgAAIAJBd2ohACACQX9qIQIgAEEASg0AC0EAKAKAiQEhAAtBACAAQRV2OgDTiQFBACAAQQ12OgDSiQFBACAAQQV2OgDRiQFBACAAQQN0IgI6ANCJAUEAIAI2AoCJAUEAQQAoAoSJATYC1IkBQZiJAUHAABADGkEAQQApAoiJATcDgAlBAEEAKQKQiQE3A4gJCwYAQYCJAQszAEEAQv6568XpjpWZEDcCkIkBQQBCgcaUupbx6uZvNwKIiQFBAEIANwKAiQEgABACEAQLCwsBAEGACAsEmAAAAA==";let ws,rh,Wn=null,Wi=!1;const Rc=16,$i=16*1024,Hu=48,zu=87,sh=new Uint8Array(Rc*2),ih=typeof WebAssembly=="object",as=new Uint8Array(256),Wu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";typeof requestIdleCallback=="function"&&requestIdleCallback(oh);function oh(){if(!Wn&&ih){for(let n=0;n<Wu.length;n++)as[Wu.charCodeAt(n)]=n;const t=new WebAssembly.Module(IT(vT));Wn=new WebAssembly.Instance(t);const e=Wn.exports.Hash_GetBuffer(),r=Wn.exports.memory.buffer;ws=new Uint8Array(r,e,$i),rh=new TextEncoder}}i(oh,"initEnv");function AT(t){let e=Math.floor(t.length*.75);const r=t.length;return t[r-1]==="="&&(e-=1,t[r-2]==="="&&(e-=1)),e}i(AT,"getDecodeBase64Length");function IT(t){let e=0;const r=t.length,n=AT(t),s=new Uint8Array(n);for(let o=0;o<r;o+=4){const a=as[t.charCodeAt(o)],l=as[t.charCodeAt(o+1)],f=as[t.charCodeAt(o+2)],_=as[t.charCodeAt(o+3)];s[e]=a<<2|l>>4,e+=1,s[e]=(l&15)<<4|f>>2,e+=1,s[e]=(f&3)<<6|_&63,e+=1}return s}i(IT,"decodeBase64");function TT(t){let e=0;for(;e<t.length;){const r=t.subarray(e,e+$i);e+=r.length,ws.set(r),Wn.exports.Hash_Update(r.length)}}i(TT,"updateUInt8Array");function ah(t){if(typeof t=="string")return rh.encode(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Invalid data type!")}i(ah,"getUInt8Buffer");function ch(t,e,r){let n=0;for(let s=0;s<r;s++){let o=e[s]>>>4;t[n++]=o>9?o+zu:o+Hu,o=e[s]&15,t[n++]=o>9?o+zu:o+Hu}return String.fromCharCode.apply(null,t)}i(ch,"getDigestHex");function qT(t){return typeof t=="string"?t.length<$i/4:t.byteLength<$i}i(qT,"canSimplify");function xT(){Wi=!0,Wn.exports.Hash_Init(null)}i(xT,"init");function kT(t){if(!Wi)throw new Error("update() called before init()");const e=ah(t);TT(e)}i(kT,"update");function CT(){if(!Wi)throw new Error("digest() called before init()");return Wi=!1,Wn.exports.Hash_Final(null),ch(sh,ws,Rc)}i(CT,"digest");function OT(t){if(!qT(t))return xT(),kT(t),CT();const e=ah(t);return ws.set(e),Wn.exports.Hash_Calculate(e.length,null,null),ch(sh,ws,Rc)}i(OT,"calculate");function RT(t){if(!ih)throw new Error("WebAssembly is not supported in this environment");return oh(),OT(t)}i(RT,"md5");const LT=new TextEncoder;function FT(t){return RT(t)}i(FT,"hashData");function NT(t){return FT(LT.encode(t))}i(NT,"hashString");function lh(t){return NT(wT(t))}i(lh,"hashObject");var uh=(t=>(t[t.Standard=0]="Standard",t[t.StandardMonochrome=1]="StandardMonochrome",t[t.Color=2]="Color",t[t.Monochrome=3]="Monochrome",t[t.Embedded=4]="Embedded",t))(uh||{}),Wr=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});function $u(){var t=new Wr(16);return Wr!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}i($u,"create$2");function PT(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}i(PT,"identity");function DT(t,e){var r=e[0],n=e[1],s=e[2],o=e[3],a=e[4],l=e[5],f=e[6],_=e[7],b=e[8],m=e[9],w=e[10],x=e[11],q=e[12],R=e[13],U=e[14],j=e[15],ae=r*l-n*a,fe=r*f-s*a,ge=r*_-o*a,Se=n*f-s*l,te=n*_-o*l,ne=s*_-o*f,M=b*R-m*q,J=b*U-w*q,P=b*j-x*q,X=m*U-w*R,ce=m*j-x*R,Ae=w*j-x*U,we=ae*Ae-fe*ce+ge*X+Se*P-te*J+ne*M;return we?(we=1/we,t[0]=(l*Ae-f*ce+_*X)*we,t[1]=(s*ce-n*Ae-o*X)*we,t[2]=(R*ne-U*te+j*Se)*we,t[3]=(w*te-m*ne-x*Se)*we,t[4]=(f*P-a*Ae-_*J)*we,t[5]=(r*Ae-s*P+o*J)*we,t[6]=(U*ge-q*ne-j*fe)*we,t[7]=(b*ne-w*ge+x*fe)*we,t[8]=(a*ce-l*P+_*M)*we,t[9]=(n*P-r*ce-o*M)*we,t[10]=(q*te-R*ge+j*ae)*we,t[11]=(m*ge-b*te-x*ae)*we,t[12]=(l*J-a*X-f*M)*we,t[13]=(r*X-n*J+s*M)*we,t[14]=(R*fe-q*Se-U*ae)*we,t[15]=(b*Se-m*fe+w*ae)*we,t):null}i(DT,"invert");function jo(t,e,r){var n=r[0],s=r[1],o=r[2],a,l,f,_,b,m,w,x,q,R,U,j;return e===t?(t[12]=e[0]*n+e[4]*s+e[8]*o+e[12],t[13]=e[1]*n+e[5]*s+e[9]*o+e[13],t[14]=e[2]*n+e[6]*s+e[10]*o+e[14],t[15]=e[3]*n+e[7]*s+e[11]*o+e[15]):(a=e[0],l=e[1],f=e[2],_=e[3],b=e[4],m=e[5],w=e[6],x=e[7],q=e[8],R=e[9],U=e[10],j=e[11],t[0]=a,t[1]=l,t[2]=f,t[3]=_,t[4]=b,t[5]=m,t[6]=w,t[7]=x,t[8]=q,t[9]=R,t[10]=U,t[11]=j,t[12]=a*n+b*s+q*o+e[12],t[13]=l*n+m*s+R*o+e[13],t[14]=f*n+w*s+U*o+e[14],t[15]=_*n+x*s+j*o+e[15]),t}i(jo,"translate");function si(t,e,r){var n=r[0],s=r[1],o=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*s,t[5]=e[5]*s,t[6]=e[6]*s,t[7]=e[7]*s,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}i(si,"scale");function Qu(t,e,r){var n=Math.sin(r),s=Math.cos(r),o=e[0],a=e[1],l=e[2],f=e[3],_=e[4],b=e[5],m=e[6],w=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*s+_*n,t[1]=a*s+b*n,t[2]=l*s+m*n,t[3]=f*s+w*n,t[4]=_*s-o*n,t[5]=b*s-a*n,t[6]=m*s-l*n,t[7]=w*s-f*n,t}i(Qu,"rotateZ");function fh(){var t=new Wr(4);return Wr!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}i(fh,"create$1");function MT(t,e,r,n,s){return t[0]=e,t[1]=r,t[2]=n,t[3]=s,t}i(MT,"set$1");(function(){var t=fh();return function(e,r,n,s,o,a){var l,f;for(r||(r=4),n||(n=0),s?f=Math.min(s*r+n,e.length):f=e.length,l=n;l<f;l+=r)t[0]=e[l],t[1]=e[l+1],t[2]=e[l+2],t[3]=e[l+3],o(t,t,a),e[l]=t[0],e[l+1]=t[1],e[l+2]=t[2],e[l+3]=t[3];return e}})();function bi(){var t=new Wr(2);return Wr!=Float32Array&&(t[0]=0,t[1]=0),t}i(bi,"create");function ii(t,e,r){return t[0]=e,t[1]=r,t}i(ii,"set");(function(){var t=bi();return function(e,r,n,s,o,a){var l,f;for(r||(r=2),n||(n=0),s?f=Math.min(s*r+n,e.length):f=e.length,l=n;l<f;l+=r)t[0]=e[l],t[1]=e[l+1],o(t,t,a),e[l]=t[0],e[l+1]=t[1];return e}})();const BT=Math.PI/180,Gu=i(t=>t*BT,"radians"),Qi=i(t=>t,"id"),UT=i(t=>({_tag:"Left",value:t}),"Left"),jT=i(t=>({_tag:"Right",value:t}),"Right"),HT=i((t,e,r)=>r._tag==="Left"?t(r.value):e(r.value),"either"),Ho={Equivalence:{Equivalence:"Equivalence",Iso:"Iso",Lens:"Lens",Prism:"Prism",Traversal:"Traversal",Getter:"Getter",AffineFold:"AffineFold",Fold:"Fold",Setter:"Setter"},Iso:{Equivalence:"Iso",Iso:"Iso",Lens:"Lens",Prism:"Prism",Traversal:"Traversal",Getter:"Getter",AffineFold:"AffineFold",Fold:"Fold",Setter:"Setter"},Lens:{Equivalence:"Lens",Iso:"Lens",Lens:"Lens",Prism:"Prism",Traversal:"Traversal",Getter:"Getter",AffineFold:"AffineFold",Fold:"Fold",Setter:"Setter"},Prism:{Equivalence:"Prism",Iso:"Prism",Lens:"Prism",Prism:"Prism",Traversal:"Traversal",Getter:"AffineFold",AffineFold:"AffineFold",Fold:"Fold",Setter:"Setter"},Traversal:{Equivalence:"Traversal",Iso:"Traversal",Lens:"Traversal",Prism:"Traversal",Traversal:"Traversal",Getter:"Fold",AffineFold:"Fold",Fold:"Fold",Setter:"Setter"},Getter:{Equivalence:"Getter",Iso:"Getter",Lens:"Getter",Prism:"AffineFold",Traversal:"Fold",Getter:"Getter",AffineFold:"AffineFold",Fold:"Fold",Setter:void 0},AffineFold:{Equivalence:"AffineFold",Iso:"AffineFold",Lens:"AffineFold",Prism:"AffineFold",Traversal:"Fold",Getter:"AffineFold",AffineFold:"AffineFold",Fold:"Fold",Setter:void 0},Fold:{Equivalence:"Fold",Iso:"Fold",Lens:"Fold",Prism:"Fold",Traversal:"Fold",Getter:"Fold",AffineFold:"Fold",Fold:"Fold",Setter:void 0},Setter:{Equivalence:void 0,Iso:void 0,Lens:void 0,Prism:void 0,Traversal:void 0,Getter:void 0,AffineFold:void 0,Fold:void 0,Setter:void 0}},Lc=i((t,e)=>{const r=e;return r._tag=t,r},"withTag");function dh(t,e,r){switch(arguments.length){case 2:{const n=i((s,o)=>t(s,e(s,o)),"next");return n._tag=Ho[t._tag][e._tag],n._removable=e._removable||!1,n}default:{const n=Ho[t._tag][e._tag],s=i((o,a)=>t(o,e(o,r(o,a))),"next");return s._tag=Ho[n][r._tag],s._removable=r._removable||!1,s}}}i(dh,"compose");const ph=i((t,e)=>Lc("Iso",(r,n)=>r.dimap(t,e,n)),"iso"),zT=i((t,e)=>Lc("Prism",(r,n)=>r.dimap(t,s=>HT(Qi,e,s),r.right(n))),"prism"),hh=Lc("Traversal",(t,e)=>t.dimap(Qi,Qi,t.wander(e))),WT=i(t=>zT(e=>t(e)?jT(e):UT(e),Qi),"when");ph(t=>t.split(""),t=>t.join(""));ph(t=>t.split(/\b/),t=>t.join("")),WT(t=>!/\s+/.test(t));function _h(){return crypto.randomUUID()}i(_h,"uuid");function $T(t,e,r,n,s,o,a){const l=Gu(n),f=Gu(a*90),[_,b,m,w]=r,[x,q]=e,R=t;return PT(R),jo(R,R,[-1,-1,0]),si(R,R,[1/m,1/w,1]),jo(R,R,[_*-2,b*-2,0]),jo(R,R,[1,1,0]),si(R,R,[1/x,1/q,1]),Qu(R,R,l),si(R,R,[x,q,1]),Qu(R,R,f),si(R,R,[s?-1:1,o?-1:1,1]),R}i($T,"getCropMatrix");function QT(t,e,r){const[n,s]=e;let[o,a,l,f]=r;return o=Math.round(o*n),a=Math.round(a*s),l=Math.round(l*n),f=Math.round(f*s),l=Math.max(10,l),f=Math.max(10,f),MT(t,o/n,a/s,l/n,f/s)}i(QT,"quantizeCrop");function mh(){return{crop:fh(),cropMatrix:$u(),cropMatrixInv:$u(),imageSize:bi(),croppedImageSize:bi(),originalImageSize:bi()}}i(mh,"createImageState");function GT(t,e,r,n=mh()){const{orientation:s,crop:o,cropStraighten:a,flipX:l,flipY:f}=e,_=r+s;let b=n.originalImageSize[0]||t.width,m=n.originalImageSize[1]||t.height;return b===0&&(b=1),m===0&&(m=1),Math.abs(_)%2?ii(n.imageSize,m,b):ii(n.imageSize,b,m),QT(n.crop,n.imageSize,o),ii(n.croppedImageSize,n.imageSize[0]*n.crop[2],n.imageSize[1]*n.crop[3]),ii(n.originalImageSize,b,m),$T(n.cropMatrix,n.imageSize,n.crop,a,l,f,_),DT(n.cropMatrixInv,n.cropMatrix),n}i(GT,"computeImageState");class Fc{static{i(this,"Photo")}id;type;texture;adjustments;whiteBalance;initialOrientation;exposureBias;imageState=mh();constructor(e){this.id=e.id??_h(),this.type=e.type,this.texture=e.texture,this.whiteBalance=e.whiteBalance??{asShotTemperature:5e3,asShotTint:0};const r=vs();this.adjustments=e.adjustments??{...r},this.initialOrientation=e.orientation??0,this.exposureBias=e.exposureBias??0,this.imageState.originalImageSize=e.originalImageSize??this.imageState.originalImageSize,this.computeState()}clone(e){return new Fc({id:this.id,type:this.type,texture:this.texture,whiteBalance:this.whiteBalance,orientation:this.initialOrientation,exposureBias:this.exposureBias,originalImageSize:this.imageState.originalImageSize,adjustments:e.adjustments??this.adjustments})}computeState(){GT(this.texture,this.adjustments,this.initialOrientation,this.imageState)}}const vs=i((t=null)=>{let e;return t?t instanceof File?e=ju(t.name):t instanceof Fc?e=t.type==="bitmap":e=ju(t.fileName):e=!1,{colorProfile:e?uh.Standard:null,correctLensDistortion:!0,lensDistortionCorrectionFactor:1,correctLensVignette:!0,lensVignetteCorrectionFactor:1,correctLensChromaticAberration:!0,ignoreEmbeddedLensCorrection:!1,temperature:void 0,tint:void 0,exposure:0,shadows:0,highlights:0,whites:0,blacks:0,contrast:0,saturation:0,vibrance:0,vignette:0,vignetteFeather:.5,vignetteMidpoint:1,vignetteRoundness:0,vignetteHighlights:0,texture:0,clarity:0,dehaze:0,curvesAll:[[0,0],[255,255]],curvesRed:[[0,0],[255,255]],curvesGreen:[[0,0],[255,255]],curvesBlue:[[0,0],[255,255]],hueRed:0,saturationRed:0,luminanceRed:0,hueOrange:0,saturationOrange:0,luminanceOrange:0,hueYellow:0,saturationYellow:0,luminanceYellow:0,hueGreen:0,saturationGreen:0,luminanceGreen:0,hueAqua:0,saturationAqua:0,luminanceAqua:0,hueBlue:0,saturationBlue:0,luminanceBlue:0,huePurple:0,saturationPurple:0,luminancePurple:0,hueMagenta:0,saturationMagenta:0,luminanceMagenta:0,calibrationRedHue:0,calibrationRedSat:0,calibrationGreenHue:0,calibrationGreenSat:0,calibrationBlueHue:0,calibrationBlueSat:0,parametricDarksStop:.25,parametricMidsStop:.5,parametricLightsStop:.75,parametricHighlights:0,parametricLights:0,parametricDarks:0,parametricShadows:0,gradingShadowsHue:0,gradingShadowsSaturation:0,gradingShadowsLuminance:0,gradingMidtonesHue:0,gradingMidtonesSaturation:0,gradingMidtonesLuminance:0,gradingHighlightsHue:0,gradingHighlightsSaturation:0,gradingHighlightsLuminance:0,gradingGlobalHue:0,gradingGlobalSaturation:0,gradingGlobalLuminance:0,gradingBlending:.5,gradingBalance:0,luminanceNoiseReduction:0,colorNoiseReduction:e?0:.75,sharpen:e?0:.4,cropStraighten:0,crop:[0,0,1,1],cropRatio:[0,0],orientation:0,flipX:!1,flipY:!1,lensDistortion:0,perspectiveVertical:0,perspectiveHorizontal:0,perspectiveRotate:0,perspectiveScale:1,perspectiveAspect:0,perspectiveOffsetX:0,perspectiveOffsetY:0,grainAmount:0,grainSize:.25,grainRoughness:.5,pointColors:[],localAdjustments:[],healingMasks:[],defringePurpleAmount:0,defringeGreenAmount:0,defringePurpleHueRange:[.713,.948],defringeGreenHueRange:[.28,.39],userLutId:void 0,userLutStrength:1,userLutTitle:void 0,colorMatchImageId:null,colorMatchStrength:1,colorMatchSkinToneOptimized:!0}},"getDefaultAdjustments"),VT={temperature:0,tint:0,saturation:0,toningHue:0,toningSaturation:0,exposure:0,contrast:0,highlights:0,shadows:0,whites:0,blacks:0,clarity:0,texture:0,dehaze:0,sharpen:0,pointColors:[],strength:1};var gh={exports:{}};(function(t,e){(function(r,n){var s=n(r);t.exports=s})(Ym,function(r){var n=["N","E","A","D"];function s(M,J){M.super_=J,M.prototype=Object.create(J.prototype,{constructor:{value:M,enumerable:!1,writable:!0,configurable:!0}})}i(s,"inherits");function o(M,J){Object.defineProperty(this,"kind",{value:M,enumerable:!0}),J&&J.length&&Object.defineProperty(this,"path",{value:J,enumerable:!0})}i(o,"Diff");function a(M,J,P){a.super_.call(this,"E",M),Object.defineProperty(this,"lhs",{value:J,enumerable:!0}),Object.defineProperty(this,"rhs",{value:P,enumerable:!0})}i(a,"DiffEdit"),s(a,o);function l(M,J){l.super_.call(this,"N",M),Object.defineProperty(this,"rhs",{value:J,enumerable:!0})}i(l,"DiffNew"),s(l,o);function f(M,J){f.super_.call(this,"D",M),Object.defineProperty(this,"lhs",{value:J,enumerable:!0})}i(f,"DiffDeleted"),s(f,o);function _(M,J,P){_.super_.call(this,"A",M),Object.defineProperty(this,"index",{value:J,enumerable:!0}),Object.defineProperty(this,"item",{value:P,enumerable:!0})}i(_,"DiffArray"),s(_,o);function b(M,J,P){var X=M.slice((P||J)+1||M.length);return M.length=J<0?M.length+J:J,M.push.apply(M,X),M}i(b,"arrayRemove");function m(M){var J=typeof M;return J!=="object"?J:M===Math?"math":M===null?"null":Array.isArray(M)?"array":Object.prototype.toString.call(M)==="[object Date]"?"date":typeof M.toString=="function"&&/^\/.*\//.test(M.toString())?"regexp":"object"}i(m,"realTypeOf");function w(M){var J=0;if(M.length===0)return J;for(var P=0;P<M.length;P++){var X=M.charCodeAt(P);J=(J<<5)-J+X,J=J&J}return J}i(w,"hashThisString");function x(M){var J=0,P=m(M);if(P==="array"){M.forEach(function(ct){J+=x(ct)});var X="[type: array, hash: "+J+"]";return J+w(X)}if(P==="object"){for(var ce in M)if(M.hasOwnProperty(ce)){var Ae="[ type: object, key: "+ce+", value hash: "+x(M[ce])+"]";J+=w(Ae)}return J}var we="[ type: "+P+" ; value: "+M+"]";return J+w(we)}i(x,"getOrderIndependentHash");function q(M,J,P,X,ce,Ae,we,ct){P=P||[],ce=ce||[],we=we||[];var be=ce.slice(0);if(typeof Ae<"u"&&Ae!==null){if(X){if(typeof X=="function"&&X(be,Ae))return;if(typeof X=="object"){if(X.prefilter&&X.prefilter(be,Ae))return;if(X.normalize){var Qe=X.normalize(be,Ae,M,J);Qe&&(M=Qe[0],J=Qe[1])}}}be.push(Ae)}m(M)==="regexp"&&m(J)==="regexp"&&(M=M.toString(),J=J.toString());var Xe=typeof M,wt=typeof J,nt,Yt,Ct,Gt,on=Xe!=="undefined"||we&&we.length>0&&we[we.length-1].lhs&&Object.getOwnPropertyDescriptor(we[we.length-1].lhs,Ae),Ln=wt!=="undefined"||we&&we.length>0&&we[we.length-1].rhs&&Object.getOwnPropertyDescriptor(we[we.length-1].rhs,Ae);if(!on&&Ln)P.push(new l(be,J));else if(!Ln&&on)P.push(new f(be,M));else if(m(M)!==m(J))P.push(new a(be,M,J));else if(m(M)==="date"&&M-J!==0)P.push(new a(be,M,J));else if(Xe==="object"&&M!==null&&J!==null){for(nt=we.length-1;nt>-1;--nt)if(we[nt].lhs===M){Gt=!0;break}if(Gt)M!==J&&P.push(new a(be,M,J));else{if(we.push({lhs:M,rhs:J}),Array.isArray(M)){for(ct&&(M.sort(function(gn,Bt){return x(gn)-x(Bt)}),J.sort(function(gn,Bt){return x(gn)-x(Bt)})),nt=J.length-1,Yt=M.length-1;nt>Yt;)P.push(new _(be,nt,new l(void 0,J[nt--])));for(;Yt>nt;)P.push(new _(be,Yt,new f(void 0,M[Yt--])));for(;nt>=0;--nt)q(M[nt],J[nt],P,X,be,nt,we,ct)}else{var Fn=Object.keys(M),an=Object.keys(J);for(nt=0;nt<Fn.length;++nt)Ct=Fn[nt],Gt=an.indexOf(Ct),Gt>=0?(q(M[Ct],J[Ct],P,X,be,Ct,we,ct),an[Gt]=null):q(M[Ct],void 0,P,X,be,Ct,we,ct);for(nt=0;nt<an.length;++nt)Ct=an[nt],Ct&&q(void 0,J[Ct],P,X,be,Ct,we,ct)}we.length=we.length-1}}else M!==J&&(Xe==="number"&&isNaN(M)&&isNaN(J)||P.push(new a(be,M,J)))}i(q,"deepDiff");function R(M,J,P,X,ce){var Ae=[];if(q(M,J,Ae,X,null,null,null,ce),P)for(var we=0;we<Ae.length;++we)P(Ae[we]);return Ae}i(R,"observableDiff");function U(M,J,P,X,ce,Ae,we){return q(M,J,P,X,ce,Ae,we,!0)}i(U,"orderIndependentDeepDiff");function j(M,J,P,X){var ce=X?function(we){we&&X.push(we)}:void 0,Ae=R(M,J,ce,P);return X||(Ae.length?Ae:void 0)}i(j,"accumulateDiff");function ae(M,J,P,X){var ce=X?function(we){we&&X.push(we)}:void 0,Ae=R(M,J,ce,P,!0);return X||(Ae.length?Ae:void 0)}i(ae,"accumulateOrderIndependentDiff");function fe(M,J,P){if(P.path&&P.path.length){var X=M[J],ce,Ae=P.path.length-1;for(ce=0;ce<Ae;ce++)X=X[P.path[ce]];switch(P.kind){case"A":fe(X[P.path[ce]],P.index,P.item);break;case"D":delete X[P.path[ce]];break;case"E":case"N":X[P.path[ce]]=P.rhs;break}}else switch(P.kind){case"A":fe(M[J],P.index,P.item);break;case"D":M=b(M,J);break;case"E":case"N":M[J]=P.rhs;break}return M}i(fe,"applyArrayChange");function ge(M,J,P){if(typeof P>"u"&&J&&~n.indexOf(J.kind)&&(P=J),M&&P&&P.kind){for(var X=M,ce=-1,Ae=P.path?P.path.length-1:0;++ce<Ae;)typeof X[P.path[ce]]>"u"&&(X[P.path[ce]]=typeof P.path[ce+1]<"u"&&typeof P.path[ce+1]=="number"?[]:{}),X=X[P.path[ce]];switch(P.kind){case"A":P.path&&typeof X[P.path[ce]]>"u"&&(X[P.path[ce]]=[]),fe(P.path?X[P.path[ce]]:X,P.index,P.item);break;case"D":delete X[P.path[ce]];break;case"E":case"N":X[P.path[ce]]=P.rhs;break}}}i(ge,"applyChange");function Se(M,J,P){if(P.path&&P.path.length){var X=M[J],ce,Ae=P.path.length-1;for(ce=0;ce<Ae;ce++)X=X[P.path[ce]];switch(P.kind){case"A":Se(X[P.path[ce]],P.index,P.item);break;case"D":X[P.path[ce]]=P.lhs;break;case"E":X[P.path[ce]]=P.lhs;break;case"N":delete X[P.path[ce]];break}}else switch(P.kind){case"A":Se(M[J],P.index,P.item);break;case"D":M[J]=P.lhs;break;case"E":M[J]=P.lhs;break;case"N":M=b(M,J);break}return M}i(Se,"revertArrayChange");function te(M,J,P){if(M&&J&&P&&P.kind){var X=M,ce,Ae;for(Ae=P.path.length-1,ce=0;ce<Ae;ce++)typeof X[P.path[ce]]>"u"&&(X[P.path[ce]]={}),X=X[P.path[ce]];switch(P.kind){case"A":Se(X[P.path[ce]],P.index,P.item);break;case"D":X[P.path[ce]]=P.lhs;break;case"E":X[P.path[ce]]=P.lhs;break;case"N":delete X[P.path[ce]];break}}}i(te,"revertChange");function ne(M,J,P){if(M&&J){var X=i(function(ce){(!P||P(M,J,ce))&&ge(M,J,ce)},"onChange");R(M,J,X)}}return i(ne,"applyDiff"),Object.defineProperties(j,{diff:{value:j,enumerable:!0},orderIndependentDiff:{value:ae,enumerable:!0},observableDiff:{value:R,enumerable:!0},orderIndependentObservableDiff:{value:U,enumerable:!0},orderIndepHash:{value:x,enumerable:!0},applyDiff:{value:ne,enumerable:!0},applyChange:{value:ge,enumerable:!0},revertChange:{value:te,enumerable:!0},isConflict:{value:function(){return typeof $conflict<"u"},enumerable:!0}}),j.DeepDiff=j,r&&(r.DeepDiff=j),j})})(gh);var Nc=gh.exports;const yh=i((t,e)=>Nc.diff(t,e,(r,n)=>{if(n==="points"&&r.some(s=>s==="strokes")){const s=r.reduce((a,l)=>a[l],t),o=r.reduce((a,l)=>a[l],e);return"length"in s&&"length"in o&&s.length===o.length}return!1}),"diffAdjustments"),JT=i(t=>{const e=vs(t);return[{photoId:t.id,message:"Original",stepIndex:0,adjustments:e,adjustmentsDigest:lh(e),presetId:null,styleId:null,styleVersion:null,action:jt.Import}]},"getDefaultAdjustmentHistory"),KT=i((t,e)=>{let r,n;return t instanceof File?(r=kr(t),n=t.name):(r=t,n=t.split("|")[0]??"filename"),{id:r,fileName:n,parentId:null,rating:null,historyIndex:null,customSortingIndex:null,isAnchorImage:!1,isHidden:!1,isUnsupported:!1,isSuggestedImage:!1,flag:null,kind:"default",status:"none",error:null,presetId:null,styleId:null,styleVersion:null,adjustmentsDigest:null,colorTag:null,currentTask:null,...e}},"createPhotoRecord"),Vu=i((t,e)=>{const r=e??kr(t),n=eh(t.name)??"unknown";return{isComplete:!1,photoId:r,size:t.size,extension:n,dateModified:t.lastModified,dateCreated:null,dateCreatedOffset:null,width:null,height:null,orientation:null,iso:null,focalLength:null,focalLength35mm:null,focusDistance:null,shutterSpeed:null,fNumber:null,lensMake:null,lensModel:null,cameraMake:null,cameraModel:null,cameraSerialNumber:null,flash:null,rating:null,artist:null,colorTag:null,flag:null,whiteLevel:null,blackLevel:null,auxiliaryData:null,copyright:null}},"createBasicPhotoMetadata"),XT=i((t,e)=>{const r=ZT(t),n=YT(t);return{historyIndex:e,presetId:n??null,styleId:r.styleId??null,styleVersion:r.styleVersion??null,adjustmentsDigest:t.at(e)?.adjustmentsDigest??null}},"getUpdatedPhotoRecord"),YT=i(t=>{for(const e of t.slice().reverse())switch(e.action){case jt.AutoEnhance:return e.presetId?e.presetId:null;case jt.PasteAdjustments:case jt.ApplyAIStyle:return null;case jt.ApplyPreset:return e.presetId;case jt.ManuallyAdjust:case jt.Import:continue}return null},"getLatestPresetApplied"),ZT=i(t=>{for(const e of t.slice().reverse())switch(e.action){case jt.AutoEnhance:case jt.ApplyPreset:case jt.PasteAdjustments:return{styleId:null,styleVersion:null};case jt.ApplyAIStyle:return{styleId:e.styleId,styleVersion:e.styleVersion};case jt.ManuallyAdjust:case jt.Import:continue}return{styleId:null,styleVersion:null}},"getProfileApplied"),e3=i((t,e,r)=>{const n=lh(r.adjustments);return{stepIndex:e,photoId:t,message:r.message,changedValue:r.changedValue,adjustments:r.adjustments,adjustmentsDigest:n,presetId:r.presetId??null,styleId:r.styleId??null,styleVersion:r.styleVersion??null,action:r.action}},"createHistoryRecord"),t3=i((t,e,r)=>{const n=t.historyIndex??0,s=e.slice(0,n+1),o=s.length,a=e3(t.id,o,r);return{newHistory:s.concat(a),record:a}},"getUpdatedHistoryWithAdjustments"),n3=i(t=>Object.entries(t).filter(([e,r])=>!!r).map(([e])=>e),"getWhitelistedKeys");function Ds(t){return function(e,r,n){const s=n.value,o=`${e.constructor.name}: ${t??r}`;n.value=function(...a){const l=Pc(o),f=s.apply(this,a);return f instanceof Promise?f.then(l).catch(_=>{throw Dr(_),_}):l(),f}}}i(Ds,"measured");const Pc=i(t=>{const e=Zn({name:t});return performance.now(),()=>{performance.now(),e?.end()}},"startMeasurement");Promise.prototype.measured=function(t){const e=Pc(t);return this.then(r=>(e(),r))};Function.prototype.measured=function(t){const e=this;return function(){const r=Pc(t??e.name),n=e.apply(this,arguments);return r(),n}};const r3=new TextEncoder,s3=new TextDecoder;function Dc(t,e){return t.map((r,n)=>r^(e[n%e.length]??0))}i(Dc,"XOR");function zo(t){return r3.encode(t)}i(zo,"utf8ToBytes");function Ra(t){return s3.decode(t)}i(Ra,"bytesToUtf8");const tn=new Uint8Array([240,159,148,146,240,159,147,129]);function i3(t){const e=new Map,r=structuredClone(t);for(const n in r.referenceImages){const s=r.referenceImages[n];if(s?.features?.deepCluster?.deepClusterFeature&&s.features.deepCluster.deepClusterFeature instanceof Float32Array){const o=`referenceImages.${n}.features.deepCluster.deepClusterFeature`;e.set(o,{type:"float32",data:s.features.deepCluster.deepClusterFeature.buffer}),s.features.deepCluster.deepClusterFeature={__binaryRef:o}}if(s?.features?.scene?.clusterFeature&&s.features.scene.clusterFeature instanceof Float32Array){const o=`referenceImages.${n}.features.scene.clusterFeature`;e.set(o,{type:"float32",data:s.features.scene.clusterFeature.buffer}),s.features.scene.clusterFeature={__binaryRef:o}}if(s?.sceneClusterFeature&&s.sceneClusterFeature instanceof Float32Array){const o=`referenceImages.${n}.sceneClusterFeature`;e.set(o,{type:"float32",data:s.sceneClusterFeature.buffer}),s.sceneClusterFeature={__binaryRef:o}}if(s?.referenceWebpData256x256&&s.referenceWebpData256x256 instanceof Uint8Array){const o=`referenceImages.${n}.referenceWebpData256x256`;e.set(o,{type:"uint8",data:s.referenceWebpData256x256.buffer}),s.referenceWebpData256x256={__binaryRef:o}}if(s?.faceColors&&s.faceColors instanceof Float32Array){const o=`referenceImages.${n}.faceColors`;e.set(o,{type:"float32",data:s.faceColors.buffer}),s.faceColors={__binaryRef:o}}if(s?.faceWeights&&s.faceWeights instanceof Float32Array){const o=`referenceImages.${n}.faceWeights`;e.set(o,{type:"float32",data:s.faceWeights.buffer}),s.faceWeights={__binaryRef:o}}}return{binaryData:e,styleWithoutBinary:r}}i(i3,"extractBinaryData");function o3(t,e){const r=t;for(const n in r.referenceImages){const s=r.referenceImages[n];if(s?.features?.deepCluster?.deepClusterFeature&&typeof s.features.deepCluster.deepClusterFeature=="object"&&"__binaryRef"in s.features.deepCluster.deepClusterFeature){const o=s.features.deepCluster.deepClusterFeature.__binaryRef,a=e.get(o);a&&(s.features.deepCluster.deepClusterFeature=new Float32Array(a.arrayBuffer))}if(s?.features?.scene?.clusterFeature&&typeof s.features.scene.clusterFeature=="object"&&"__binaryRef"in s.features.scene.clusterFeature){const o=s.features.scene.clusterFeature.__binaryRef,a=e.get(o);a&&(s.features.scene.clusterFeature=new Float32Array(a.arrayBuffer))}if(s?.sceneClusterFeature&&typeof s.sceneClusterFeature=="object"&&"__binaryRef"in s.sceneClusterFeature){const o=s.sceneClusterFeature.__binaryRef,a=e.get(o);a&&(s.sceneClusterFeature=new Float32Array(a.arrayBuffer))}if(s?.referenceWebpData256x256&&typeof s.referenceWebpData256x256=="object"&&"__binaryRef"in s.referenceWebpData256x256){const o=s.referenceWebpData256x256.__binaryRef,a=e.get(o);a&&(s.referenceWebpData256x256=new Uint8Array(a.arrayBuffer))}if(s?.faceColors&&typeof s.faceColors=="object"&&"__binaryRef"in s.faceColors){const o=s.faceColors.__binaryRef,a=e.get(o);a&&(s.faceColors=new Float32Array(a.arrayBuffer))}if(s?.faceWeights&&typeof s.faceWeights=="object"&&"__binaryRef"in s.faceWeights){const o=s.faceWeights.__binaryRef,a=e.get(o);a&&(s.faceWeights=new Float32Array(a.arrayBuffer))}}return r}i(o3,"restoreBinaryData");function a3(t){const{binaryData:e,styleWithoutBinary:r}=i3(t),n=JSON.stringify(r),s=_h().replace(/-/g,""),o=zo(n),a=zo(s),l=Dc(o,a);let f=0;for(const[ge,Se]of e.entries())f+=Se.data.byteLength;const _=JSON.stringify(Array.from(e.entries()).map(([ge,Se])=>({path:ge,type:Se.type,size:Se.data.byteLength}))),b=zo(_),m=b.length,w=l.length,x=a.length,q=tn.length,R=new Uint8Array(4);new DataView(R.buffer).setUint32(0,m,!0);const j=q+4+m+x+w+f,ae=new Uint8Array(j);ae.set(tn,0),ae.set(R,q),ae.set(b,q+4),ae.set(a,q+4+m),ae.set(l,q+4+m+x);let fe=q+4+m+x+w;for(const[ge,Se]of e.entries()){const te=new Uint8Array(Se.data);ae.set(te,fe),fe+=te.length}return ae}i(a3,"encodeStyle");function c3(t){const e=new Uint8Array(t);if(e.length>=8&&e[0]===tn[0]&&e[1]===tn[1]&&e[2]===tn[2]&&e[3]===tn[3]&&e[4]===tn[4]&&e[5]===tn[5]&&e[6]===tn[6]&&e[7]===tn[7]){const n=tn.length,o=new DataView(e.buffer,n,4).getUint32(0,!0),a=e.subarray(n+4,n+4+o),l=Ra(a),f=JSON.parse(l),_=n+4+o,b=e.subarray(_,_+32),m=_+32,w=e.byteLength-m-f.reduce((Se,te)=>Se+te.size,0),x=e.subarray(m,m+w),q=Dc(x,b),R=Ra(q),U=JSON.parse(R);let j=m+w;const ae=new Map;for(const Se of f){const te=e.buffer.slice(j,j+Se.size);ae.set(Se.path,{type:Se.type,arrayBuffer:te}),j+=Se.size}const fe={...U,createdAt:new Date(U.createdAt),updatedAt:new Date(U.updatedAt),originalCreatedAt:new Date(U.originalCreatedAt),referenceCount:Object.keys(U.referenceImages).length};return o3(fe,ae)}else return l3(t)}i(c3,"decodeStyle");function l3(t){const e=new Uint8Array(t),r=e.subarray(0,32),n=e.subarray(32),s=Dc(n,r),o=Ra(s),a=JSON.parse(o),l={...a,createdAt:new Date(a.createdAt),updatedAt:new Date(a.updatedAt),originalCreatedAt:new Date(a.originalCreatedAt),referenceCount:Object.keys(a.referenceImages).length};for(const f in l.referenceImages){const _=l.referenceImages[f];_?.features?.deepCluster?.deepClusterFeature&&(_.features.deepCluster.deepClusterFeature instanceof Float32Array||(Array.isArray(_.features.deepCluster.deepClusterFeature)?_.features.deepCluster.deepClusterFeature=new Float32Array(_.features.deepCluster.deepClusterFeature):_.features.deepCluster.deepClusterFeature=new Float32Array(Object.values(_.features.deepCluster.deepClusterFeature)))),_?.features?.scene?.clusterFeature&&(_.features.scene.clusterFeature instanceof Float32Array||(Array.isArray(_.features.scene.clusterFeature)?_.features.scene.clusterFeature=new Float32Array(_.features.scene.clusterFeature):_.features.scene.clusterFeature=new Float32Array(Object.values(_.features.scene.clusterFeature))))}return l}i(l3,"decodeStyleOld");class u3{static{i(this,"Migration_ProjectInfoSetup1696354893057")}static migrationName="ProjectInfoSetup1696354893057";async up(e){await e({sql:`
        ALTER TABLE ProjectInfo
            ADD COLUMN needsSetup INTEGER NULL;
    `})}async down(){}}class f3{static{i(this,"Migration_PhotoColorTag1698192154611")}static migrationName="PhotoColorTag1698192154611";async up(e){await e({sql:`
        ALTER TABLE PhotoMetaData
            ADD COLUMN colorTag TEXT NULL;

        ALTER TABLE Photos
            ADD COLUMN colorTag TEXT NULL;
    `})}async down(){}}class d3{static{i(this,"Migration_ImageInfoPresetMap1700258433227")}static migrationName="ImageInfoPresetMap1700258433227";async up(e){await e({sql:`
        ALTER TABLE ImageInfo
            ADD COLUMN presetAdjustmentsMap JSON NULL;
    `})}async down(){}}class p3{static{i(this,"Migration_AddLensMetadata1699868427774")}static migrationName="AddLensMetadata1699868427774";async up(e){await e({sql:`
            ALTER TABLE PhotoMetaData
                ADD COLUMN dateCreatedOffset INTEGER NULL;

            ALTER TABLE PhotoMetaData
                ADD COLUMN focalLength35mm REAL NULL;

            ALTER TABLE PhotoMetaData
                ADD COLUMN focusDistance REAL NULL;

            ALTER TABLE PhotoMetaData
                ADD COLUMN whiteLevel REAL NULL;

            ALTER TABLE PhotoMetaData
                ADD COLUMN blackLevel REAL NULL;

            ALTER TABLE PhotoMetaData
                ADD COLUMN auxiliaryData JSON NULL;
		`})}async down(){}}class h3{static{i(this,"Migration_PhotoError1711492701940")}static migrationName="PhotoError1711492701940";async up(e){await e({sql:`
        ALTER TABLE Photos
            ADD COLUMN error TEXT NULL;
    `})}async down(){}}class _3{static{i(this,"Migration_PhotoFlag1712611225530")}static migrationName="PhotoFlag1712611225530";async up(e){await e({sql:`
        ALTER TABLE Photos
            ADD COLUMN flag TEXT NULL;
    `})}async down(){}}class m3{static{i(this,"Migration_AddObjectStorageTable1713975107858")}static migrationName="AddObjectStorageTable1713975107858";async up(e){await e({sql:`
             DROP TABLE IF EXISTS DataStore;
             CREATE TABLE IF NOT EXISTS Objects
             (
                 id             TEXT PRIMARY KEY NOT NULL,
                 data           BLOB             NOT NULL
             );
             CREATE INDEX IF NOT EXISTS objectIndex
                 ON Objects (id);
 		`})}async down(){}}class g3{static{i(this,"Migration_PhotoUnsupported1715814492015")}static migrationName="PhotoUnsupported1715814492015";async up(e){await e({sql:`
        ALTER TABLE Photos
            ADD COLUMN isUnsupported Integer NULL;
    `})}async down(){}}class y3{static{i(this,"Migration_PhotoCurrentTask1717700851991")}static migrationName="PhotoCurrentTask1717700851991";async up(e){await e({sql:`
        ALTER TABLE Photos
            ADD COLUMN currentTask JSON NULL;
    `})}async down(){}}class b3{static{i(this,"Migration_ProjectInfoManual1718133967338")}static migrationName="ProjectInfoManual1718133967338";async up(e){await e({sql:`
        ALTER TABLE ProjectInfo
            ADD COLUMN isManual INTEGER NULL;
    `})}async down(){}}class E3{static{i(this,"Migration_ProjectInfoCulling1720221033074")}static migrationName="ProjectInfoCulling1720221033074";async up(e){await e({sql:`
        ALTER TABLE ProjectInfo
            ADD COLUMN isCulling INTEGER NULL;
    `})}async down(){}}class S3{static{i(this,"Migration_AddCullingInfo1720671728355")}static migrationName="AddCullingInfo1720671728355";async up(e){await e({sql:`
            CREATE TABLE IF NOT EXISTS CullingInfo
            (
                photoId             TEXT PRIMARY KEY NOT NULL,
                faceInfo            JSON             NULL,
	            overallFocusScore   INTEGER          NULL,
				overallEyeScore     REAL             NULL,
	            clusterLeaderIdMap  JSON             NULL,
				rankInCluster       INTEGER          NULL,
				clusterSize         INTEGER          NULL,
				overallRating       INTEGER          NULL,
				deepClusterFeature  JSON             NULL
            );
        `})}async down(){}}class w3{static{i(this,"Migration_ProjectInfoSelectedTags1724881065495")}static migrationName="ProjectInfoSelectedTags1724881065495";async up(e){await e({sql:`
        ALTER TABLE ProjectInfo
            ADD COLUMN selectedTags JSON NULL;
    `})}async down(){}}class v3{static{i(this,"Migration_AddCullingScoreItem1726690612698")}static migrationName="AddCullingScoreItem1726690612698";async up(e){await e({sql:`
        ALTER TABLE CullingInfo
            ADD COLUMN scoreItem JSON NULL;
		
		ALTER TABLE CullingInfo
			ADD COLUMN luminanceScoreStats JSON NULL;
    `})}async down(){}}class A3{static{i(this,"Migration_PhotoSuggested1726862241684")}static migrationName="PhotoSuggested1726862241684";async up(e){await e({sql:`
        ALTER TABLE Photos
            ADD COLUMN isSuggestedImage Integer NULL;
    `})}async down(){}}class I3{static{i(this,"Migration_ProjectInfoKeeperCount1727903685803")}static migrationName="ProjectInfoKeeperCount1727903685803";async up(e){await e({sql:`
        ALTER TABLE ProjectInfo
            ADD COLUMN suggestedKeeperCount INTEGER NULL;
    `})}async down(){}}class T3{static{i(this,"Migration_PhotoMetadataIsComplete1728949466086")}static migrationName="PhotoMetadataIsComplete1728949466086";async up(e){await e({sql:`
        ALTER TABLE PhotoMetaData
            ADD COLUMN isComplete INTEGER NOT NULL DEFAULT 1;
    `})}async down(){}}class q3{static{i(this,"Migration_AddCullingSceneFeature1736789390137")}static migrationName="AddCullingSceneFeature1736789390137";async up(e){await e({sql:`
        ALTER TABLE CullingInfo
            ADD COLUMN scene JSON NULL;
    `})}async down(){}}class x3{static{i(this,"Migration_ProjectInfoFilters1736995105981")}static migrationName="ProjectInfoFilters1736995105981";async up(e){await e({sql:`
        ALTER TABLE ProjectInfo
            ADD COLUMN ratingFilters JSON NULL;
        ALTER TABLE ProjectInfo
            ADD COLUMN pathFilters JSON NULL;
        ALTER TABLE ProjectInfo
            ADD COLUMN colorFilters JSON NULL;
        ALTER TABLE ProjectInfo
            ADD COLUMN cameraFilters JSON NULL;
        ALTER TABLE ProjectInfo
            ADD COLUMN flagFilters JSON NULL;
        ALTER TABLE ProjectInfo
            ADD COLUMN fileFormatFilters JSON NULL;
        ALTER TABLE ProjectInfo
            ADD COLUMN visibilityFilters JSON NULL;
    `})}async down(){}}class k3{static{i(this,"Migration_ProjectInfoExpressSetup1738102708232")}static migrationName="ProjectInfoExpressSetup1738102708232";async up(e){await e({sql:`
        ALTER TABLE ProjectInfo
            ADD COLUMN isExpressSetup INTEGER NULL;
    `})}async down(){}}class C3{static{i(this,"Migration_ProjectInfoDisplayGroup1738275039596")}static migrationName="ProjectInfoDisplayGroup1738275039596";async up(e){await e({sql:`
        ALTER TABLE ProjectInfo
            ADD COLUMN displayGroup TEXT NULL;
    `})}async down(){}}class O3{static{i(this,"Migration_StoreAdjustmentDeltas1739895351301")}static migrationName="StoreAdjustmentDeltas1739895351301";async up(e){await e({sql:`
        ALTER TABLE EditHistory
            ADD COLUMN adjustmentsDelta JSON NULL;
    `})}async down(e){await e({sql:`
        ALTER TABLE EditHistory
            DROP COLUMN adjustmentsDelta;
    `})}}const R3=i(t=>JSON.stringify(t,(e,r)=>r===void 0?null:r),"safeStringify");class L3{static{i(this,"Migration_BackfillAdjustmentDeltas1739895511698")}static migrationName="BackfillAdjustmentDeltas1739895511698";async up(e){const r=await e({sql:"SELECT DISTINCT photoId FROM EditHistory ORDER BY photoId;"});for(const{photoId:n}of r){const s=await e({sql:`SELECT * FROM EditHistory WHERE photoId = '${n}' ORDER BY stepIndex;`});for(let o=0;o<s.length;o++){const a=s[o],l=s[o-1];if(!a)return;const f=yh(JSON.parse(l?.adjustments||"{}"),JSON.parse(a.adjustments));await e({sql:`UPDATE EditHistory 
                SET adjustmentsDelta = '${R3(f)}'
                WHERE photoId = '${a.photoId}' AND stepIndex = ${a.stepIndex};`})}}}async down(){}}class F3{static{i(this,"Migration_DropAdjustmentsColumn1740148885430")}static migrationName="DropAdjustmentsColumn1740148885430";async up(e){await e({sql:`
        ALTER TABLE EditHistory
            DROP COLUMN adjustments;
    `})}async down(e){await e({sql:"ALTER TABLE EditHistory ADD COLUMN adjustments TEXT;"});const r=await e({sql:"SELECT DISTINCT photoId FROM EditHistory ORDER BY photoId;"});for(const{photoId:n}of r){const s=await e({sql:"SELECT * FROM EditHistory WHERE photoId = ? ORDER BY stepIndex;",bind:[n]}),o=vs();for(const a of s){if(a.adjustmentsDelta)for(const l of a.adjustmentsDelta)Nc.applyChange(o,void 0,l);await e({sql:`UPDATE EditHistory 
                      SET adjustments = ? 
                      WHERE photoId = ? AND stepIndex = ?`,bind:[JSON.stringify(o),a.photoId,a.stepIndex]})}}}}class N3{static{i(this,"Migration_PhotoMetadataFlag1743119371298")}static migrationName="PhotoMetadataFlag1743119371298";async up(e){await e({sql:`
            ALTER TABLE PhotoMetaData
                ADD COLUMN flag TEXT NULL;
		`})}async down(){}}class P3{static{i(this,"Migration_ImageInfoColorMatchRef1744402593825")}static migrationName="ImageInfoColorMatchRef1744402593825";async up(e){await e({sql:`
        ALTER TABLE ImageInfo
            ADD COLUMN colorMatchReference JSON NULL;
		ALTER TABLE ImageInfo
            ADD COLUMN needApplyStyle INTEGER NULL;
		ALTER TABLE ImageInfo
            ADD COLUMN sceneClusterFeature BLOB NULL;
		ALTER TABLE ImageInfo
            ADD COLUMN referenceWebpData256x256 BLOB NULL;
		ALTER TABLE ImageInfo
            ADD COLUMN faceColors BLOB NULL;
		ALTER TABLE ImageInfo
            ADD COLUMN faceWeights BLOB NULL;
		ALTER TABLE ImageInfo
            DROP COLUMN needApplyPreset;
		ALTER TABLE ImageInfo
            DROP COLUMN needApplyBias;
		ALTER TABLE CullingInfo
            ADD COLUMN sceneClusterFeature BLOB NULL;
    `})}async down(){}}const Sr=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,bh=new Set,La=typeof process=="object"&&process?process:{},Eh=i((t,e,r,n)=>{typeof La.emitWarning=="function"?La.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},"emitWarning");let Gi=globalThis.AbortController,Ju=globalThis.AbortSignal;if(typeof Gi>"u"){Ju=class{static{i(this,"AbortSignal")}onabort;_onabort=[];reason;aborted=!1;addEventListener(n,s){this._onabort.push(s)}},Gi=class{static{i(this,"AbortController")}constructor(){e()}signal=new Ju;abort(n){if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(const s of this.signal._onabort)s(n);this.signal.onabort?.(n)}}};let t=La.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1";const e=i(()=>{t&&(t=!1,Eh("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))},"warnACPolyfill")}const D3=i(t=>!bh.has(t),"shouldWarn"),Dn=i(t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),"isPosInt"),Sh=i(t=>Dn(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?Ei:null:null,"getUintArray");class Ei extends Array{static{i(this,"ZeroArray")}constructor(e){super(e),this.fill(0)}}class Cr{static{i(this,"Stack")}heap;length;static#t=!1;static create(e){const r=Sh(e);if(!r)return[];Cr.#t=!0;const n=new Cr(e,r);return Cr.#t=!1,n}constructor(e,r){if(!Cr.#t)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}}class Mc{static{i(this,"LRUCache")}#t;#a;#h;#c;#l;#m;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#o;#s;#i;#n;#e;#u;#g;#p;#f;#E;#d;#S;#w;#y;#v;#x;#_;static unsafeExposeInternals(e){return{starts:e.#w,ttls:e.#y,sizes:e.#S,keyMap:e.#i,keyList:e.#n,valList:e.#e,next:e.#u,prev:e.#g,get head(){return e.#p},get tail(){return e.#f},free:e.#E,isBackgroundFetch:r=>e.#r(r),backgroundFetch:(r,n,s,o)=>e.#F(r,n,s,o),moveToTail:r=>e.#O(r),indexes:r=>e.#A(r),rindexes:r=>e.#I(r),isStale:r=>e.#b(r)}}get max(){return this.#t}get maxSize(){return this.#a}get calculatedSize(){return this.#s}get size(){return this.#o}get fetchMethod(){return this.#l}get memoMethod(){return this.#m}get dispose(){return this.#h}get disposeAfter(){return this.#c}constructor(e){const{max:r=0,ttl:n,ttlResolution:s=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:l,allowStale:f,dispose:_,disposeAfter:b,noDisposeOnSet:m,noUpdateTTL:w,maxSize:x=0,maxEntrySize:q=0,sizeCalculation:R,fetchMethod:U,memoMethod:j,noDeleteOnFetchRejection:ae,noDeleteOnStaleGet:fe,allowStaleOnFetchRejection:ge,allowStaleOnFetchAbort:Se,ignoreFetchAbort:te}=e;if(r!==0&&!Dn(r))throw new TypeError("max option must be a nonnegative integer");const ne=r?Sh(r):Array;if(!ne)throw new Error("invalid max value: "+r);if(this.#t=r,this.#a=x,this.maxEntrySize=q||this.#a,this.sizeCalculation=R,this.sizeCalculation){if(!this.#a&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(j!==void 0&&typeof j!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#m=j,U!==void 0&&typeof U!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#l=U,this.#x=!!U,this.#i=new Map,this.#n=new Array(r).fill(void 0),this.#e=new Array(r).fill(void 0),this.#u=new ne(r),this.#g=new ne(r),this.#p=0,this.#f=0,this.#E=Cr.create(r),this.#o=0,this.#s=0,typeof _=="function"&&(this.#h=_),typeof b=="function"?(this.#c=b,this.#d=[]):(this.#c=void 0,this.#d=void 0),this.#v=!!this.#h,this.#_=!!this.#c,this.noDisposeOnSet=!!m,this.noUpdateTTL=!!w,this.noDeleteOnFetchRejection=!!ae,this.allowStaleOnFetchRejection=!!ge,this.allowStaleOnFetchAbort=!!Se,this.ignoreFetchAbort=!!te,this.maxEntrySize!==0){if(this.#a!==0&&!Dn(this.#a))throw new TypeError("maxSize must be a positive integer if specified");if(!Dn(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#j()}if(this.allowStale=!!f,this.noDeleteOnStaleGet=!!fe,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!l,this.ttlResolution=Dn(s)||s===0?s:1,this.ttlAutopurge=!!o,this.ttl=n||0,this.ttl){if(!Dn(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#N()}if(this.#t===0&&this.ttl===0&&this.#a===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#t&&!this.#a){const M="LRU_CACHE_UNBOUNDED";D3(M)&&(bh.add(M),Eh("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",M,Mc))}}getRemainingTTL(e){return this.#i.has(e)?1/0:0}#N(){const e=new Ei(this.#t),r=new Ei(this.#t);this.#y=e,this.#w=r,this.#P=(o,a,l=Sr.now())=>{if(r[o]=a!==0?l:0,e[o]=a,a!==0&&this.ttlAutopurge){const f=setTimeout(()=>{this.#b(o)&&this.#T(this.#n[o],"expire")},a+1);f.unref&&f.unref()}},this.#k=o=>{r[o]=e[o]!==0?Sr.now():0},this.#q=(o,a)=>{if(e[a]){const l=e[a],f=r[a];if(!l||!f)return;o.ttl=l,o.start=f,o.now=n||s();const _=o.now-f;o.remainingTTL=l-_}};let n=0;const s=i(()=>{const o=Sr.now();if(this.ttlResolution>0){n=o;const a=setTimeout(()=>n=0,this.ttlResolution);a.unref&&a.unref()}return o},"getNow");this.getRemainingTTL=o=>{const a=this.#i.get(o);if(a===void 0)return 0;const l=e[a],f=r[a];if(!l||!f)return 1/0;const _=(n||s())-f;return l-_},this.#b=o=>{const a=r[o],l=e[o];return!!l&&!!a&&(n||s())-a>l}}#k=()=>{};#q=()=>{};#P=()=>{};#b=()=>!1;#j(){const e=new Ei(this.#t);this.#s=0,this.#S=e,this.#C=r=>{this.#s-=e[r],e[r]=0},this.#D=(r,n,s,o)=>{if(this.#r(n))return 0;if(!Dn(s))if(o){if(typeof o!="function")throw new TypeError("sizeCalculation must be a function");if(s=o(n,r),!Dn(s))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return s},this.#R=(r,n,s)=>{if(e[r]=n,this.#a){const o=this.#a-e[r];for(;this.#s>o;)this.#L(!0)}this.#s+=e[r],s&&(s.entrySize=n,s.totalCalculatedSize=this.#s)}}#C=e=>{};#R=(e,r,n)=>{};#D=(e,r,n,s)=>{if(n||s)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#A({allowStale:e=this.allowStale}={}){if(this.#o)for(let r=this.#f;!(!this.#M(r)||((e||!this.#b(r))&&(yield r),r===this.#p));)r=this.#g[r]}*#I({allowStale:e=this.allowStale}={}){if(this.#o)for(let r=this.#p;!(!this.#M(r)||((e||!this.#b(r))&&(yield r),r===this.#f));)r=this.#u[r]}#M(e){return e!==void 0&&this.#i.get(this.#n[e])===e}*entries(){for(const e of this.#A())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#r(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*rentries(){for(const e of this.#I())this.#e[e]!==void 0&&this.#n[e]!==void 0&&!this.#r(this.#e[e])&&(yield[this.#n[e],this.#e[e]])}*keys(){for(const e of this.#A()){const r=this.#n[e];r!==void 0&&!this.#r(this.#e[e])&&(yield r)}}*rkeys(){for(const e of this.#I()){const r=this.#n[e];r!==void 0&&!this.#r(this.#e[e])&&(yield r)}}*values(){for(const e of this.#A())this.#e[e]!==void 0&&!this.#r(this.#e[e])&&(yield this.#e[e])}*rvalues(){for(const e of this.#I())this.#e[e]!==void 0&&!this.#r(this.#e[e])&&(yield this.#e[e])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(e,r={}){for(const n of this.#A()){const s=this.#e[n],o=this.#r(s)?s.__staleWhileFetching:s;if(o!==void 0&&e(o,this.#n[n],this))return this.get(this.#n[n],r)}}forEach(e,r=this){for(const n of this.#A()){const s=this.#e[n],o=this.#r(s)?s.__staleWhileFetching:s;o!==void 0&&e.call(r,o,this.#n[n],this)}}rforEach(e,r=this){for(const n of this.#I()){const s=this.#e[n],o=this.#r(s)?s.__staleWhileFetching:s;o!==void 0&&e.call(r,o,this.#n[n],this)}}purgeStale(){let e=!1;for(const r of this.#I({allowStale:!0}))this.#b(r)&&(this.#T(this.#n[r],"expire"),e=!0);return e}info(e){const r=this.#i.get(e);if(r===void 0)return;const n=this.#e[r],s=this.#r(n)?n.__staleWhileFetching:n;if(s===void 0)return;const o={value:s};if(this.#y&&this.#w){const a=this.#y[r],l=this.#w[r];if(a&&l){const f=a-(Sr.now()-l);o.ttl=f,o.start=Date.now()}}return this.#S&&(o.size=this.#S[r]),o}dump(){const e=[];for(const r of this.#A({allowStale:!0})){const n=this.#n[r],s=this.#e[r],o=this.#r(s)?s.__staleWhileFetching:s;if(o===void 0||n===void 0)continue;const a={value:o};if(this.#y&&this.#w){a.ttl=this.#y[r];const l=Sr.now()-this.#w[r];a.start=Math.floor(Date.now()-l)}this.#S&&(a.size=this.#S[r]),e.unshift([n,a])}return e}load(e){this.clear();for(const[r,n]of e){if(n.start){const s=Date.now()-n.start;n.start=Sr.now()-s}this.set(r,n.value,n)}}set(e,r,n={}){if(r===void 0)return this.delete(e),this;const{ttl:s=this.ttl,start:o,noDisposeOnSet:a=this.noDisposeOnSet,sizeCalculation:l=this.sizeCalculation,status:f}=n;let{noUpdateTTL:_=this.noUpdateTTL}=n;const b=this.#D(e,r,n.size||0,l);if(this.maxEntrySize&&b>this.maxEntrySize)return f&&(f.set="miss",f.maxEntrySizeExceeded=!0),this.#T(e,"set"),this;let m=this.#o===0?void 0:this.#i.get(e);if(m===void 0)m=this.#o===0?this.#f:this.#E.length!==0?this.#E.pop():this.#o===this.#t?this.#L(!1):this.#o,this.#n[m]=e,this.#e[m]=r,this.#i.set(e,m),this.#u[this.#f]=m,this.#g[m]=this.#f,this.#f=m,this.#o++,this.#R(m,b,f),f&&(f.set="add"),_=!1;else{this.#O(m);const w=this.#e[m];if(r!==w){if(this.#x&&this.#r(w)){w.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:x}=w;x!==void 0&&!a&&(this.#v&&this.#h?.(x,e,"set"),this.#_&&this.#d?.push([x,e,"set"]))}else a||(this.#v&&this.#h?.(w,e,"set"),this.#_&&this.#d?.push([w,e,"set"]));if(this.#C(m),this.#R(m,b,f),this.#e[m]=r,f){f.set="replace";const x=w&&this.#r(w)?w.__staleWhileFetching:w;x!==void 0&&(f.oldValue=x)}}else f&&(f.set="update")}if(s!==0&&!this.#y&&this.#N(),this.#y&&(_||this.#P(m,s,o),f&&this.#q(f,m)),!a&&this.#_&&this.#d){const w=this.#d;let x;for(;x=w?.shift();)this.#c?.(...x)}return this}pop(){try{for(;this.#o;){const e=this.#e[this.#p];if(this.#L(!0),this.#r(e)){if(e.__staleWhileFetching)return e.__staleWhileFetching}else if(e!==void 0)return e}}finally{if(this.#_&&this.#d){const e=this.#d;let r;for(;r=e?.shift();)this.#c?.(...r)}}}#L(e){const r=this.#p,n=this.#n[r],s=this.#e[r];return this.#x&&this.#r(s)?s.__abortController.abort(new Error("evicted")):(this.#v||this.#_)&&(this.#v&&this.#h?.(s,n,"evict"),this.#_&&this.#d?.push([s,n,"evict"])),this.#C(r),e&&(this.#n[r]=void 0,this.#e[r]=void 0,this.#E.push(r)),this.#o===1?(this.#p=this.#f=0,this.#E.length=0):this.#p=this.#u[r],this.#i.delete(n),this.#o--,r}has(e,r={}){const{updateAgeOnHas:n=this.updateAgeOnHas,status:s}=r,o=this.#i.get(e);if(o!==void 0){const a=this.#e[o];if(this.#r(a)&&a.__staleWhileFetching===void 0)return!1;if(this.#b(o))s&&(s.has="stale",this.#q(s,o));else return n&&this.#k(o),s&&(s.has="hit",this.#q(s,o)),!0}else s&&(s.has="miss");return!1}peek(e,r={}){const{allowStale:n=this.allowStale}=r,s=this.#i.get(e);if(s===void 0||!n&&this.#b(s))return;const o=this.#e[s];return this.#r(o)?o.__staleWhileFetching:o}#F(e,r,n,s){const o=r===void 0?void 0:this.#e[r];if(this.#r(o))return o;const a=new Gi,{signal:l}=n;l?.addEventListener("abort",()=>a.abort(l.reason),{signal:a.signal});const f={signal:a.signal,options:n,context:s},_=i((R,U=!1)=>{const{aborted:j}=a.signal,ae=n.ignoreFetchAbort&&R!==void 0;if(n.status&&(j&&!U?(n.status.fetchAborted=!0,n.status.fetchError=a.signal.reason,ae&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),j&&!ae&&!U)return m(a.signal.reason);const fe=x;return this.#e[r]===x&&(R===void 0?fe.__staleWhileFetching?this.#e[r]=fe.__staleWhileFetching:this.#T(e,"fetch"):(n.status&&(n.status.fetchUpdated=!0),this.set(e,R,f.options))),R},"cb"),b=i(R=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=R),m(R)),"eb"),m=i(R=>{const{aborted:U}=a.signal,j=U&&n.allowStaleOnFetchAbort,ae=j||n.allowStaleOnFetchRejection,fe=ae||n.noDeleteOnFetchRejection,ge=x;if(this.#e[r]===x&&(!fe||ge.__staleWhileFetching===void 0?this.#T(e,"fetch"):j||(this.#e[r]=ge.__staleWhileFetching)),ae)return n.status&&ge.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),ge.__staleWhileFetching;if(ge.__returned===ge)throw R},"fetchFail"),w=i((R,U)=>{const j=this.#l?.(e,o,f);j&&j instanceof Promise&&j.then(ae=>R(ae===void 0?void 0:ae),U),a.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(R(void 0),n.allowStaleOnFetchAbort&&(R=i(ae=>_(ae,!0),"res")))})},"pcall");n.status&&(n.status.fetchDispatched=!0);const x=new Promise(w).then(_,b),q=Object.assign(x,{__abortController:a,__staleWhileFetching:o,__returned:void 0});return r===void 0?(this.set(e,q,{...f.options,status:void 0}),r=this.#i.get(e)):this.#e[r]=q,q}#r(e){if(!this.#x)return!1;const r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof Gi}async fetch(e,r={}){const{allowStale:n=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,ttl:a=this.ttl,noDisposeOnSet:l=this.noDisposeOnSet,size:f=0,sizeCalculation:_=this.sizeCalculation,noUpdateTTL:b=this.noUpdateTTL,noDeleteOnFetchRejection:m=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:w=this.allowStaleOnFetchRejection,ignoreFetchAbort:x=this.ignoreFetchAbort,allowStaleOnFetchAbort:q=this.allowStaleOnFetchAbort,context:R,forceRefresh:U=!1,status:j,signal:ae}=r;if(!this.#x)return j&&(j.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:s,noDeleteOnStaleGet:o,status:j});const fe={allowStale:n,updateAgeOnGet:s,noDeleteOnStaleGet:o,ttl:a,noDisposeOnSet:l,size:f,sizeCalculation:_,noUpdateTTL:b,noDeleteOnFetchRejection:m,allowStaleOnFetchRejection:w,allowStaleOnFetchAbort:q,ignoreFetchAbort:x,status:j,signal:ae};let ge=this.#i.get(e);if(ge===void 0){j&&(j.fetch="miss");const Se=this.#F(e,ge,fe,R);return Se.__returned=Se}else{const Se=this.#e[ge];if(this.#r(Se)){const P=n&&Se.__staleWhileFetching!==void 0;return j&&(j.fetch="inflight",P&&(j.returnedStale=!0)),P?Se.__staleWhileFetching:Se.__returned=Se}const te=this.#b(ge);if(!U&&!te)return j&&(j.fetch="hit"),this.#O(ge),s&&this.#k(ge),j&&this.#q(j,ge),Se;const ne=this.#F(e,ge,fe,R),J=ne.__staleWhileFetching!==void 0&&n;return j&&(j.fetch=te?"stale":"refresh",J&&te&&(j.returnedStale=!0)),J?ne.__staleWhileFetching:ne.__returned=ne}}async forceFetch(e,r={}){const n=await this.fetch(e,r);if(n===void 0)throw new Error("fetch() returned undefined");return n}memo(e,r={}){const n=this.#m;if(!n)throw new Error("no memoMethod provided to constructor");const{context:s,forceRefresh:o,...a}=r,l=this.get(e,a);if(!o&&l!==void 0)return l;const f=n(e,l,{options:a,context:s});return this.set(e,f,a),f}get(e,r={}){const{allowStale:n=this.allowStale,updateAgeOnGet:s=this.updateAgeOnGet,noDeleteOnStaleGet:o=this.noDeleteOnStaleGet,status:a}=r,l=this.#i.get(e);if(l!==void 0){const f=this.#e[l],_=this.#r(f);return a&&this.#q(a,l),this.#b(l)?(a&&(a.get="stale"),_?(a&&n&&f.__staleWhileFetching!==void 0&&(a.returnedStale=!0),n?f.__staleWhileFetching:void 0):(o||this.#T(e,"expire"),a&&n&&(a.returnedStale=!0),n?f:void 0)):(a&&(a.get="hit"),_?f.__staleWhileFetching:(this.#O(l),s&&this.#k(l),f))}else a&&(a.get="miss")}#B(e,r){this.#g[r]=e,this.#u[e]=r}#O(e){e!==this.#f&&(e===this.#p?this.#p=this.#u[e]:this.#B(this.#g[e],this.#u[e]),this.#B(this.#f,e),this.#f=e)}delete(e){return this.#T(e,"delete")}#T(e,r){let n=!1;if(this.#o!==0){const s=this.#i.get(e);if(s!==void 0)if(n=!0,this.#o===1)this.#U(r);else{this.#C(s);const o=this.#e[s];if(this.#r(o)?o.__abortController.abort(new Error("deleted")):(this.#v||this.#_)&&(this.#v&&this.#h?.(o,e,r),this.#_&&this.#d?.push([o,e,r])),this.#i.delete(e),this.#n[s]=void 0,this.#e[s]=void 0,s===this.#f)this.#f=this.#g[s];else if(s===this.#p)this.#p=this.#u[s];else{const a=this.#g[s];this.#u[a]=this.#u[s];const l=this.#u[s];this.#g[l]=this.#g[s]}this.#o--,this.#E.push(s)}}if(this.#_&&this.#d?.length){const s=this.#d;let o;for(;o=s?.shift();)this.#c?.(...o)}return n}clear(){return this.#U("delete")}#U(e){for(const r of this.#I({allowStale:!0})){const n=this.#e[r];if(this.#r(n))n.__abortController.abort(new Error("deleted"));else{const s=this.#n[r];this.#v&&this.#h?.(n,s,e),this.#_&&this.#d?.push([n,s,e])}}if(this.#i.clear(),this.#e.fill(void 0),this.#n.fill(void 0),this.#y&&this.#w&&(this.#y.fill(0),this.#w.fill(0)),this.#S&&this.#S.fill(0),this.#p=0,this.#f=0,this.#E.length=0,this.#s=0,this.#o=0,this.#_&&this.#d){const r=this.#d;let n;for(;n=r?.shift();)this.#c?.(...n)}}}var M3=Object.defineProperty,B3=Object.getOwnPropertyDescriptor,Ms=i((t,e,r,n)=>{for(var s=n>1?void 0:n?B3(e,r):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(s=(n?a(e,r,s):a(s))||s);return n&&s&&M3(e,r,s),s},"__decorateClass");class es extends dT{static{i(this,"CatalogWorker")}db=new nh;directory=null;projectLockInterval=null;fileLocks={};adjustmentsCache=new Mc({max:500,ttl:1e3*60*5,updateAgeOnGet:!0});projectLockedCallback;onProjectLocked(e){this.projectLockedCallback=e}userFacingErrorHandler;setUserFacingErrorHandler(e){this.userFacingErrorHandler=e,this.db.userFacingErrorHandler=e}constructor(){super()}async rebuildAdjustmentsFromDeltas(e,r){const n=await this.db.select({table:"EditHistory",where:"photoId = ? AND stepIndex <= ?",bind:[e,r],orderBy:"stepIndex ASC"}),s=vs();for(const o of n)if(o.adjustmentsDelta)for(const a of o.adjustmentsDelta)Nc.applyChange(s,void 0,a);return s}async getAdjustmentsWithCache(e,r){const n=this.getAdjustmentsCacheKey(e,r),s=this.adjustmentsCache.get(n);if(s)return s;const o=await this.rebuildAdjustmentsFromDeltas(e,r);return this.adjustmentsCache.set(n,o),o}async handleErrorWithExtraContext(e,r){if(lT(e)||uT(e))return;const n={file:r.filename,directory:r.directory?.name,hasPermission:r.directory?await th(r.directory,"readwrite",!0):!1,step:r.step,source:r.step??"catalogWorker"};r.isUserFacingError?this.userFacingErrorHandler?.(e,n,r.isWarning):Dr(e,{level:r.isWarning?"warning":"error",tags:n})}async storeDataToFile(e,r){for(;this.fileLocks[r];)await this.fileLocks[r];let n=i(()=>{},"releaseLock");this.fileLocks[r]=new Promise(o=>{n=o});const s=this.directory;try{if(!s)return;await Oa(async()=>{const a=await(await s.getFileHandle(r,{create:!0})).createWritable();await a.write(e),await a.close()},[]),`${r}`}catch(o){await this.handleErrorWithExtraContext(o,{filename:r,directory:this.directory??void 0,isUserFacingError:r!=="polarr.lock",step:"storeDataToFile",isWarning:!0})}finally{n(),delete this.fileLocks[r]}}async removeFile(e){const r=e.directory??this.directory;try{if(!r)throw new Error("Project has not been opened.");if(e.recursive){const n=await this.findFileHandle({directory:r,filename:e.filename});if(n)await n.remove();else return}else await Oa(async()=>{await r.removeEntry(e.filename,{recursive:e.recursive??!1})},["NotFoundError"]);`${e.filename}`}catch(n){await this.handleErrorWithExtraContext(n,{filename:e.filename,directory:this.directory??void 0,step:"removeFile",isWarning:!0})}}findFileHandle=async e=>{try{return await e.directory.getFileHandle(e.filename,{create:!1})}catch(r){if(r instanceof Error&&r.name==="NotFoundError"){for await(const n of e.directory.values())if(n.kind==="directory")return await this.findFileHandle({directory:n,filename:e.filename});return}}};lockProject(e,r){this.setupProjectLockTimer(e,r),this.checkAndWriteProjectLock(e,r)}async unlockProject(){this.clearProjectLockTimer(),await this.removeProjectLock()}pauseLock(){this.clearProjectLockTimer()}async checkProjectLock(e,r){const n=await this.fetchProjectLock(e);return!!(n&&n.sessionId!==r&&new Date().getTime()-n.lastSave<1e4)}setupProjectLockTimer(e,r){this.projectLockInterval&&clearInterval(this.projectLockInterval),this.projectLockInterval=setInterval(()=>{if(!this.directory)throw new Error("Cannot lock project. Project has not been opened.");this.checkAndWriteProjectLock(e,r)},5e3)}clearProjectLockTimer(){this.projectLockInterval&&(clearInterval(this.projectLockInterval),this.projectLockInterval=null)}async checkAndWriteProjectLock(e,r){await this.checkProjectLock(e,r)?this.projectLockedCallback?.(e):this.writeProjectLock(r)}async fetchProjectLock(e){try{const s=await(await(await e.getFileHandle("polarr.lock",{create:!1})).getFile()).text();return JSON.parse(s)}catch(r){return this.handleErrorWithExtraContext(r,{filename:"polarr.lock",directory:this.directory??void 0,step:"fetchProjectLock",isWarning:!0}),null}}async writeProjectLock(e){const r={sessionId:e,lastSave:new Date().getTime()},n=JSON.stringify(r,null,2);return this.storeDataToFile(n,"polarr.lock")}async removeProjectLock(){if(this.directory)return this.removeFile({filename:"polarr.lock"})}async flushDatabaseChanges(){return this.db.flushDatabaseChanges()}async removeProjectCatalog(e){return this.removeFile({filename:"polarr.catalog",directory:e})}async removeProjectStyle(e){return this.removeFile({filename:"polarr.style",directory:e})}async removePhotoFile(e){if(this.directory)return this.removeFile({filename:e.fileName,directory:this.directory,recursive:!0})}async clearImageInfo(){return this.bulkResetAllImageInfo(),await this.fetchImageInfoRecords()}async clearAllPhotosEditsAndStyle(){this.directory&&(await this.db.clear({table:"EditHistory"}),await this.db.clear({table:"ProjectInfo"}),await this.flushDatabaseChanges(),await this.removeProjectStyle(this.directory))}async open(e){if(!(this.directory&&e&&await this.directory.isSameEntry(e))){this.directory=e;try{const r=await e.getFileHandle("polarr.catalog",{create:!0});await this.db.createOrOpenDatabase(r),await this.setupSchema()}catch(r){this.handleErrorWithExtraContext(r,{filename:"polarr.catalog",directory:this.directory??void 0,isUserFacingError:!0,step:"openDirectory"})}}}close(){this.directory&&(this.directory=null,this.db.close())}async fetchProjectStyle(e){try{const s=await(await(await e.getFileHandle("polarr.style",{create:!1})).getFile()).arrayBuffer();return c3(s)}catch(r){this.handleErrorWithExtraContext(r,{filename:"polarr.style",directory:this.directory??void 0,step:"fetchProjectStyle"});return}}async storeProjectStyle(e){const r=a3(e);return this.storeDataToFile(r,"polarr.style")}async fetchProjectInfo(e){return e?(await this.db.select({table:"ProjectInfo",where:"id = ?",bind:[e]}))?.at(0):(await this.db.select({table:"ProjectInfo"}))?.at(0)}updateProjectInfo(e,r){this.db.update({table:"ProjectInfo",where:"id = ?",bind:[e],record:r})}async storeProjectInfo(e){e.oldIdToBeReplaced&&await this.db.clear({table:"ProjectInfo"}),await this.db.upsert({table:"ProjectInfo",primaryKey:"id",record:e.record}),await this.flushDatabaseChanges()}async storeOrUpdatePhotosFromFiles(e){const r=await this.db.select({table:"Photos"}),n={},s={},o=await this.fetchAllPhotoMetadata(),a=new Set;for(const l of r)e.find(f=>kr(f)===l.id||kr(f)===l.parentId)&&(n[l.id]=l,l.parentId!==null&&a.add(l.id));for(const l of e){const f=kr(l);if(s[f]=l,!n[f]){const _=KT(l);n[f]=_,this.storePhotoRecord(_)}if(!o[f]){const _=Vu(l);o[f]=_,this.storePhotoMetadataRecord(_)}}for(const l of a){const f=n[l];if(!f?.parentId)continue;const _=s[f.parentId];if(_&&(s[l]=_,!o[l])){const b=Vu(_);o[l]=b,this.storePhotoMetadataRecord(b)}}return{photos:n,files:s,metadata:o}}async fetchAllPhotoRecords(){const e=await this.db.select({table:"Photos"}),r={};for(const n of e)r[n.id]=n;return r}getAdjustmentsCacheKey(e,r){return`${e};${r}`}async fetchAllAdjustmentHistoryRecords(){const e=await this.db.select({table:"EditHistory",orderBy:"stepIndex ASC"}),r=new Map;for(const s of e){const o=r.get(s.photoId)||[];o.push(s),r.set(s.photoId,o)}const n=[];for(const[s,o]of r)for(const a of o){const l=await this.getAdjustmentsWithCache(s,a.stepIndex);n.push({...a,adjustments:l})}return n}async fetchAdjustmentHistoryRecords(e,r){const n=await this.db.select({table:"EditHistory",where:"photoId = ?",bind:[e.id],columns:r,orderBy:"stepIndex ASC"}),o=[JT(e)[0]];for(const a of n){const l=await this.getAdjustmentsWithCache(e.id,a.stepIndex);o.push({...a,adjustments:l})}return o}async copyAdjustmentHistoryRecords(e,r){await this.db.exec({sql:`INSERT INTO EditHistory (photoId, stepIndex, message, changedValue, adjustmentsDigest, adjustmentsDelta, presetId, styleId, styleVersion, action)
				  SELECT ?, stepIndex, message, changedValue, adjustmentsDigest, adjustmentsDelta, presetId, styleId, styleVersion, action
				  FROM EditHistory
				  WHERE photoId = ?;`,bind:[r,e],save:!0})}async fetchAdjustmentHistoryRecord(e,r,n){const s=await this.db.select({table:"EditHistory",where:"photoId = ? AND stepIndex <= ?",bind:[e,r],columns:n,orderBy:"stepIndex ASC"});if(!s?.length)return;const o=s[s.length-1];if(!n||n.includes("adjustments")){const a=await this.getAdjustmentsWithCache(e,r);return{...o,adjustments:a}}return o}async storeAdjustmentHistoryRecord(e){await this.db.remove({table:"EditHistory",where:"photoId = ? AND stepIndex >= ?",bind:[e.photoId,e.stepIndex]});const r=e.stepIndex>0?await this.getAdjustmentsWithCache(e.photoId,e.stepIndex-1):vs(),n=yh(r,e.adjustments),s=this.getAdjustmentsCacheKey(e.photoId,e.stepIndex);this.adjustmentsCache.set(s,{...e.adjustments});const o={...e,adjustmentsDelta:n};delete o.adjustments,await this.db.insert({table:"EditHistory",record:o})}async hasAnyAdjustments(e){return typeof await this.getAdjustmentsWithCache(e.id,e?.historyIndex??0)<"u"}async fetchAdjustments(e){const r=e.historyIndex??0,n=await this.getAdjustmentsWithCache(e.id,r);return n.localAdjustments=n.localAdjustments?.map(s=>({...VT,...s})),n}async fetchCullingInfoRecords(){const e=await this.db.select({table:"CullingInfo"}),r={};for(const n of e)n.deepClusterFeature&&Array.isArray(n.deepClusterFeature)===!0&&(n.deepClusterFeature=new Float32Array(n.deepClusterFeature)),r[n.photoId]=n;return r}storeCullingInfoRecord(e){if(e.deepClusterFeature){const r={...e,deepClusterFeature:JSON.stringify({__binaryType__:"f32",__binaryData__:Array.from(e.deepClusterFeature)})};this.db.upsert({table:"CullingInfo",primaryKey:"photoId",record:r})}else this.db.upsert({table:"CullingInfo",primaryKey:"photoId",record:e})}bulkUpdateCullingInfoRecords(e){for(const[r,n]of Object.entries(e))this.storeCullingInfoRecord(n)}async fetchImageInfoRecords(){const e=await this.db.select({table:"ImageInfo"}),r={};for(const n of e)n.features.deepCluster?.deepClusterFeature&&(n.features.deepCluster?.deepClusterFeature instanceof Float32Array||(Array.isArray(n.features.deepCluster?.deepClusterFeature)?n.features.deepCluster.deepClusterFeature=new Float32Array(n.features.deepCluster.deepClusterFeature):n.features.deepCluster.deepClusterFeature=new Float32Array(Object.values(n.features.deepCluster.deepClusterFeature)))),r[n.imageId]=n;return r}storeImageInfoRecord(e){this.db.upsert({table:"ImageInfo",primaryKey:"imageId",record:e})}storePhotoRecord(e){this.db.insert({table:"Photos",record:e})}updatePhotoRecord(e,r){this.db.update({table:"Photos",where:"id = ?",bind:[e],record:r})}bulkUpdatePhotoRecords(e){for(const[r,n]of Object.entries(e))this.db.update({table:"Photos",where:"id = ?",bind:[r],record:n})}async bulkResetAllPhotoRecords(e){if(e.length===0)return;let r={};e.includes("edits")&&(r={...r,historyIndex:null,kind:"default",status:"none",error:null,presetId:null,styleId:null,styleVersion:null,adjustmentsDigest:null,isUnsupported:!1,currentTask:null,isAnchorImage:!1}),e.includes("ratings")&&(r={...r,rating:null,colorTag:null,flag:"unflagged",isHidden:!1}),await this.db.updateAll({table:"Photos",record:r}),await this.flushDatabaseChanges()}bulkResetAllImageInfo(){const e={keyNeighborId:null,aiStyleAdjustments:null,presetId:null,biases:null,nearestReferences:null,needApplyStyle:null};this.db.updateAll({table:"ImageInfo",record:e})}async deletePhotoRecord(e){await this.db.remove({table:"Photos",where:"id = ?",bind:[typeof e=="string"?e:e.id]})}async fetchPhotoRecord(e){return(await this.db.select({table:"Photos",where:"id = ?",bind:[kr(e)]}))?.[0]}async fetchDescendantPhotoRecords(e){return await this.db.select({table:"Photos",where:"parentId = ?",bind:[e.id]})}async getThumbnailPhotoIds(e=4){return(await this.db.exec({sql:"select id from Photos where isHidden != 1 order by id limit ?",bind:[e]})).map(({id:n})=>n)}async fetchAllPhotoMetadata(){const e=await this.db.select({table:"PhotoMetadata"}),r={};for(const n of e)r[n.photoId]=n;return r}async saveAdjustmentsForFile(e,r){const n=n3({photoId:!0,stepIndex:!0,message:!0,adjustmentsDigest:!0,presetId:!0,styleId:!0,styleVersion:!0,action:!0,adjustmentsDelta:!1}),s=await this.fetchAdjustmentHistoryRecords(e,n),o=t3(e,s,r),a=XT(o.newHistory,o.record.stepIndex);return await this.storeAdjustmentHistoryRecord(o.record),a}storePhotoMetadataRecord(e){this.db.upsert({table:"PhotoMetadata",primaryKey:"photoId",record:e})}async deletePhotoMetadataRecord(e){await this.db.remove({table:"PhotoMetadata",where:"photoId = ?",bind:[typeof e=="string"?e:e.photoId]})}bulkUpdatePhotoMetadataRecords(e){Object.entries(e).forEach(([r,n])=>{this.db.upsert({table:"PhotoMetadata",primaryKey:"photoId",record:n})})}addObject(e,r){this.db.upsert({table:"Objects",primaryKey:"id",record:{id:e,data:r}})}async getObject(e){const n=(await this.db.select({table:"Objects",where:"id = ?",bind:[e]}))?.at(0);return n?rf(n.data.buffer,[n.data.buffer]):null}getTotalBytesUsage(){return this.db.totalBytesUsage}async setupSchema(){const e=[ST,u3,f3,d3,p3,h3,_3,m3,g3,y3,b3,E3,S3,w3,v3,A3,I3,T3,q3,x3,k3,C3,O3,L3,F3,N3,P3];let r;try{r=await this.db.exec({sql:`SELECT *
					  FROM Migrations`})}catch(n){n&&n instanceof Error&&n.message&&n.message.includes("no such table: Migrations")&&await this.db.exec({sql:`
						CREATE TABLE IF NOT EXISTS Migrations
						(
							name      text    NOT NULL,
							timestamp integer NOT NULL
						);

						CREATE INDEX IF NOT EXISTS migrationNameIndex
							ON Migrations (name);
					`,save:!0}),r=[]}for(const n of e){const s=n.migrationName;if(!r.find(o=>o.name===s))try{await Object.create(n.prototype).up(this.db.exec),await this.db.exec({sql:`
							INSERT INTO Migrations (name, timestamp)
							VALUES (?, ?)
						`,bind:[s,new Date().getTime()],save:!0})}catch(o){throw Dr(o),o}}}}Ms([Ds()],es.prototype,"storeProjectStyle",1);Ms([Ds()],es.prototype,"fetchProjectInfo",1);Ms([Ds()],es.prototype,"storeProjectInfo",1);Ms([Ds()],es.prototype,"storeOrUpdatePhotosFromFiles",1);Ms([Ds()],es.prototype,"setupSchema",1);es.broadcast();
//# sourceMappingURL=catalog.worker-9L8ourgg.js.map
